{"docstore/metadata": {"8d3e25b9-ca19-47d8-b006-f237464206de": {"doc_hash": "fc098fe74e3cf0e6a043ebb89fc14a4340d27b53f363a82231ec27c44c090e9e"}, "c4616e64-012d-406c-bcf1-7b6ddb4eb75b": {"doc_hash": "0793ee3f6e7b2db8d976d9b2973180c4e920ae2127936d5a817aa0a28ffafe3d"}, "7ca686f9-a30a-4bb0-ab89-4cbe457f327f": {"doc_hash": "a6951f132d09a01c2da1647e561bc78f0f912f9b63f65410048b5e36e2c1800d"}, "fbda3572-c8bb-4b7f-b0f3-6d4bf2ddfe84": {"doc_hash": "aecf8e27c922ce72bd74452b0aad8423da997bf42bd5f78712bbb4b59adfbb33"}, "af6b06d7-cc97-4b2a-8e9b-1c0fb8c15354": {"doc_hash": "03c94185e463e49ea07e21f4fcb5d8d65b3d42b02fb13125126aeeed032ff67a"}, "1fcebff0-829f-4ea7-be6b-3e755139f0eb": {"doc_hash": "5eb0b99f68e5cabd7e1c853622e7942e1744dab5b7c9331f3e92e0887ad4ff9d"}, "5c04a5ad-65e7-4b19-8dc2-135017004f34": {"doc_hash": "93f05e49af398ca15feefa09ccb890500ad48747c7c9ef3ebc4ebdd19cab6285"}, "b72001b1-05e8-4dc9-82c6-52bbc02384d5": {"doc_hash": "7607ae16df58ac7942061a5aea4144f5c5fbfce874a83ef76b105abb032ecfeb"}, "c02285d1-05db-4fa7-96ef-caaa56172f6c": {"doc_hash": "23eb4c450905e62fb8ee321afc1266645404e94dd76fc36d6fc984bc71c0d80b"}, "18e5721c-001b-448e-b1b0-74be6f27799e": {"doc_hash": "71b2dbfc4b97a3969daacc79a7eb8b091c78bb1fde8ca4b286ab9f8db7ffb553"}, "cd58b26a-161b-4ae6-afb7-4df7aad40e9a": {"doc_hash": "c18e354233036a9b12670ef3e5971b7e0cbf9b7ddf83b98bd051c5427d380a9b"}, "d54600b5-a38b-4272-a738-deae3021ee8f": {"doc_hash": "9501e713708cd5abfd9f4b15871fe553a96e7ca23e1c36f64a03e7f905c8a483"}, "fff28951-1acf-4db9-995c-a1c896b90836": {"doc_hash": "79b1109f9966a3e2d0a3824d6aefb44cd651ec5a9acac2e94c5eb3b6b510192d"}, "198d1e67-2d1c-4912-8971-419693be1ac2": {"doc_hash": "af9dc306d522f7dd55eac3da317c3ead69287d9c3abd7e4d9c18665d86e25b0b"}, "660e4cbd-79b8-49e0-b359-27f8a0c3ea67": {"doc_hash": "5a740244978543437bbb8c7457dbbeca89d14f99a24fe0a6847629271a48a312"}, "952fb317-689a-4f8d-8bd4-792be7b0c7a7": {"doc_hash": "80cf9941f281074f83c75746121cc4aa9095639669d08e94e5effe74586a587e"}, "42285cd4-f11a-4f7f-b620-2730c3a43482": {"doc_hash": "26b57dde2f3a93119a3be78d202292700d62a08922ac2bcdc1e7f5378fc940b9"}, "4b55ad4e-8e85-4a2d-a9ec-859984e30dc5": {"doc_hash": "1dfe93d1cf8b22ecb89d97d931473bcfce35073651dada8828908a4e1acf696e"}, "573d71c6-dda9-40f7-818f-260c82b14f5d": {"doc_hash": "97ca2647bf3c295ee8f72dca641bb8903a6441f868eb0dd719c3cc657ad6e4e1"}, "8afc95a2-ed63-4861-87ce-34166e930488": {"doc_hash": "c25e9f2607414cd771eb4e3e8af5fa20547bb73c22a32ddd3758d6af75ed79c4"}, "1da45670-758b-425b-84d2-9aacdc762b9d": {"doc_hash": "752b8f8478e968ee32c88206d0296d1c0fb5b59a3f0cb73ce77545f7651c1e91"}, "0ac43dda-52e6-46d2-8319-88ad10ad3728": {"doc_hash": "f8d32c1dd390c3056dde1532bc59ad8730440a1aa7403b1a632bde25316d2689"}, "86f843bf-eb78-49c5-8af5-12c0fb7cc3f1": {"doc_hash": "40d2bdfd23e9d80304229bd63dabc0a8b5072fbcc050c5eeeaf95eaad29a3746"}, "bfd329a4-450b-4e6e-b4d1-b8a26b3e47df": {"doc_hash": "6e04ddb405aea471aa5c2707dc47e3e492050ebed9315052fc998634c0c95622"}, "3f1f431b-5cbc-44f9-afaa-1b078fdcc463": {"doc_hash": "8da666a14ff823ba1d12cf916e4a62e30106da2eaf2c7f2572f5aa80c73ae4e0"}, "2e1fa59b-1c78-4a31-b6e0-42f84e7ad13c": {"doc_hash": "2f00d0c960ef69539463fa67bb0c97edee0a71108a677e85a1c54592e72e9fda"}, "a226b891-b583-4b56-b512-4753d8813f1e": {"doc_hash": "990244fea159e108867afad59a0054da6d1463fefcd8daa9ec7d6794fbf2dfd4"}, "b0a8b1c0-627e-4e23-82b1-87b31f4d97dc": {"doc_hash": "2dbcc48fd25f8e96ee04a5d27a19ce583de72c781f3bb7cfe19813300693a8d8"}, "0302c1a4-b8b7-4ea3-8b28-2efa950817be": {"doc_hash": "c0737f98a0c7c5421d15f6167a4778cd00fe2c0c329ce46c9cd67dd50a813d44"}, "41aa10a9-5cda-4ff8-9e73-99f7853f12ac": {"doc_hash": "9ecc2c33472c07520bdff9be1dfb12252fab0800a26866341bf068be0860e6e6"}, "505c3c09-fdc2-4c27-83bc-46f8df1c5e4d": {"doc_hash": "86bd321c61bfe442e182437efe36e40220fbe6ca1523c727d843ca14f581e116"}, "ce9fa6d5-e49c-4bd2-ac9c-46f398b5a98e": {"doc_hash": "a75f5d844ae9fb7bef246ee2d53e05c561613aab444917ecbdd67bc193536b70"}, "3264551e-adb7-42e0-835c-85ee9b04af4a": {"doc_hash": "ca8e4bf792548d87373d5c57d2b43de275c6f0e962380a80b04469c5db454866"}, "eb8bd20c-e7c9-4a3b-8155-52f535210c2e": {"doc_hash": "4648142b9d1e921db4c1456a3936026e433ee2ab2ad23c51e51ea9540f35a3ef"}, "2ce20601-f036-4556-82ea-f6320596c932": {"doc_hash": "afa046dab617509aed36f3be31c40f9ed2a1357c1038d95bf702ea5ea9e03de9"}, "b0cc440b-faeb-45bd-8abc-aedbd70dad6f": {"doc_hash": "eacf8fc5142a19309dc6a93022cc0a0d01e2c404a760d7e2b863e5732ae2cf46"}, "69d015c4-ad55-4766-bb8e-cdc41cf1939c": {"doc_hash": "3fb317bcad646dc06dc7f1a477a243fb95a6bd5b63f98de90d71be6b0b14d74e"}, "ebe28150-bf68-463f-8ec5-d3f9ea36c4f2": {"doc_hash": "84ce24418dca4088a238f3b2949880f3f3d6e10d3c4d804391c2e459cda7ab8d"}, "62ef9d97-c35d-49c3-9a44-7f8b2549c997": {"doc_hash": "eadc78d0ee9e90a84059ff412d3698409292429286f27e9634cd44a69dc7e957"}, "c4c3862b-7043-46ad-8f44-1e55f33861ce": {"doc_hash": "a12c45cc082092d4a50e132da786f675e817ef91759330839270f801122d7006"}, "fcc96376-d413-46f0-88bc-b942a88b63bd": {"doc_hash": "436e82374b4cbffba4b319b434bf9d151024d1ac210ec32243084bcba4c7e2ac"}, "1ce79cde-fed1-4773-80e3-e95041dde82e": {"doc_hash": "55ecbf42c88b5f0c44990346f4ec243b94857f8ed9de17d716ed161eb307b8fc"}, "6d2faec1-dc02-45e2-b2d0-f717276c38a2": {"doc_hash": "9e3133f9c79e9ff8686db307d49767784d90affe61433dc02dd851118f21dec8"}, "60c826da-a142-4d7c-98b5-164d6147c958": {"doc_hash": "6de6f840b12f02bd4665a5b97eb56e86df65a83318f5e00e9b60a8d2c85e90b0"}, "f22086da-eb85-4063-8fd5-cf5bccbbe89a": {"doc_hash": "16f5a99fe54e2cc588d67447ec053b5fc711b6688d5ab4bc8e14cbcd607a56f5"}, "5dcdc40e-667c-4b65-b20f-971650733e45": {"doc_hash": "1d1a89f6605370c7b46391ed268a88b743859f7b760d1e2bdd2ec6927a5d458c"}, "496312c5-c600-42ef-aed5-9bee50828da7": {"doc_hash": "56e05f4025b48e48a24e76ccd9c6ace38a9597540a787a072e56f9e331af23a3"}, "3de7fe87-a52d-478b-a9fc-5a7aedeaa802": {"doc_hash": "99622e233f4ea3379afeb620842407f0546f0d76231239514b4ce5c75c167c90"}, "a601e842-775f-4005-894a-2388164b0f64": {"doc_hash": "0548e4d5ff922eec120d3d183851c21b026eafbdceed32e8dc39371d955b6e0c"}, "f17b1fbf-f81c-4550-bb4c-f75a5efd33c8": {"doc_hash": "fc3be9ed5ed86cc3fdd9dd76de769fa75e2970dd43223b45386ad3b90f356700"}, "f89ef0f6-e131-494d-a549-316d80880169": {"doc_hash": "ff8737720d1addbd25f02e8a5611acbae5220606ffc6a9696f5244f58cf4a31e"}, "cf30a470-80bb-4a2a-9bca-a65d5a146b4c": {"doc_hash": "17347e0bddd52fedcb99f22b2e4d3a8549379a13f8e557eaa17d17e5c5070fde"}, "4c2d1863-361c-4f9e-851b-54a7aae46733": {"doc_hash": "6e40507894e0edb41db80f73137219434b9b13bdbc1205094fb354815d1500d1"}, "3dc97245-9631-4dc9-aed8-aa005eeb830e": {"doc_hash": "185218555c676f220a208c0cb9ae57ed629e8fea344f7f40ab21cf7fdd7f56b8"}, "595a8385-4215-47c3-a97c-9fd17f9ea4a6": {"doc_hash": "2cab2d053f087b25fb8bc89c42e7f0501d7134e705a20df82b9cd45b618007d5"}, "fecd60e3-8891-4582-85ba-313f1ccf2bbd": {"doc_hash": "2daa0022f8809877d9edd65a1ca37351d77d0a4194c39d4657c7b6ae0be99031"}, "4f963b0d-a804-41b8-8da4-04b643e49d21": {"doc_hash": "6150704b87b22e2d20b5153f0943ad4550d4f1b1aa09ebca2218f2e93e947549"}, "57155532-a6e6-43b3-a942-88027d26a07f": {"doc_hash": "003cea04f81511a68e2fbdc5bf8c2f7238727f0165816d1c1d9ea111ee1f0880"}, "2718b056-d529-4747-b7e5-99231d1568b0": {"doc_hash": "009e69cdd0efcc84c03a44122ed03f1bd165b439c73670499625e474235354bf"}, "409732d7-0632-41dc-98e1-8e65dc9439c9": {"doc_hash": "c891f1ff7c6f538dff7570b5cc89f2721b1db0da0e6fbafe7f58600cf6d0adea"}, "962baaa4-df10-4228-a65a-dd50e9768fbd": {"doc_hash": "10bb7f4cc51e35baef621e3edfda53cf4153b56af4fa8d0e767e9b8ac6fd115f"}, "8b848a50-4f1d-4947-bd7e-04e70e2447de": {"doc_hash": "a69774c98d1f293b2290dc7b158fc436b7d2df0dcf7f916516404d85fc8f8b0f"}, "2e9d433d-1b65-44c8-8816-44341bb5aa3e": {"doc_hash": "bb06d55460240b5799b9e0dcbd7a5ba1c208819d57045fb8c2c8e01697672134"}, "ca5cf40e-22ea-44f3-a8d3-2ffb525bff69": {"doc_hash": "b71e8650796d6576ca8ccbed345f77eadf3848ae0a81e6283deacaceca10ce0a"}, "725d28dd-c7dd-418b-bafa-04732d5fd0e6": {"doc_hash": "9199e9b05cedc25973e0c9874eb10286f3595dc45a11a55d9c0519c18b0f3b55"}, "40f388c4-6306-4da0-9245-1ae99f4ede53": {"doc_hash": "21a251bcbf4047fd12e36180cf24ba93165247ad81bc4b73f645bd683e20d3d5"}, "9faccdf2-047d-43cd-94ee-3e8170b5525f": {"doc_hash": "f74d7482d6936f68152b3a2a715d706877fb03bec1990aea255e614d467a1b60"}, "6cc15b8a-2434-44ae-b2f8-11256476f0dd": {"doc_hash": "75f2aec407da96f9df791295afb5989789e329cec464788478f3bd7991de8b19"}, "9aefe921-ff0a-4a54-a3e4-8fded0fc5e0a": {"doc_hash": "4e65088c4ba11368d9ccbb0ed64c87718e3affb03834079f7a15b3fa11bbb988"}, "1a9fadcf-88a8-4b08-af74-4b7ee784977e": {"doc_hash": "26795c178bdad274bd3a15623f089dc248331d35f22e8db495df70d5f1c8c65f"}, "3c584d05-8c35-45c4-a59e-3a5af8aeb69a": {"doc_hash": "840fc9d7eb9667fa797e9d8181fb6dc2e04e3d825963b202eafedb574679afad"}, "69c174f7-e4eb-4645-a264-dc7e67c0c0c2": {"doc_hash": "d3bd049a9945ba33518843f06b5fd0d751ba97ff7abde706e3817b99dd801550"}, "7b3b5968-135a-4da1-9d64-63ef173f1bee": {"doc_hash": "5e3bfbf676475b647de4cd2cddc148992d35463b41b0659cc94b38d13f999053"}, "45aa02ca-e382-47db-a645-691fd2e7dd64": {"doc_hash": "0294747279ac050ea5e6c2017778e39da248be7ba4f41cf42555b86e332096ae"}, "08ef3069-8708-409f-ac7b-20ebb84dfd90": {"doc_hash": "9bd5a6435a8308d05df4d1a10b203fc7ce2da7d39b2834b1c4754c27e7f1dd65"}, "cbb2b940-e2a1-47b4-b70c-deb8c04dca1e": {"doc_hash": "c980b7f76b9e0aa4109718dcb11a388e6fc9ae8e9f9bf05efa3d80571bd5228b"}, "af92ea33-101d-4c53-9ee7-e49d2fca3886": {"doc_hash": "65597cca1c6271e54309869e94080424cd44257aa09bf9e5c5c3e2a93c80dc38"}, "52970540-8c82-4048-8a12-07d33a8416bf": {"doc_hash": "c9e2300434553129ae506864c97c35ea536393b8574ff91d66f8c03d40ee6c24"}, "7aa81704-b92f-4d01-875d-4132a2da7148": {"doc_hash": "5194889851a4ccbd5d178674ac0446d01a9fbda4cf54e45e0635f4ab5fafd6ab"}, "7ef6172a-6e7a-4f03-b01c-df2aeff666ce": {"doc_hash": "6278ba540e59c5f2a6e53ced59946f277ac53dfeebb984921a0726a0e48a9b30"}, "793a37b7-3c84-47d8-a51e-cd66a09d0150": {"doc_hash": "739d94f7001b74e2c866a40ffe24beb00d42d32ca05ce9c09e87449f3ac4a519"}, "9ed122ca-445a-487c-b154-135cc4e4d35f": {"doc_hash": "c5b02901ed43017ecd5f01a2f87824e4dc376224c3dca2764fe214d7f654ca57"}, "a39db65f-0d48-4d96-8eb7-5322272e1128": {"doc_hash": "5289bd0a931d1a967f884d9eb729b5cd7c042011ddae24d279f60838e3c0a8ad"}, "0cc251ea-a59f-4243-8304-90086aa9686c": {"doc_hash": "ed3e1b1a605c6f51fa78b29e11e3b6fa30f5853bdbb2c57ba6c9862ea907c783"}, "8f9936ee-169e-4574-8656-d299981fa7da": {"doc_hash": "e2deb6d8f7b9d63ceede7db7a2bafa8675310c53b1abb5d9ffa48771317cad8b"}, "c9e7554b-bd9c-4c68-a77f-ceb5516df83c": {"doc_hash": "1b138b2f60254147fffcbab120b66edc36bbfc7a5854aa076a9884ed596acf28"}, "7e5f61a6-0dfb-42ea-9cfa-8628653ea453": {"doc_hash": "053f9a5186f5986ea9c6d62a43c106c91a6643389b25d3ad396bcdc4904d27b1"}, "ecd01a99-7021-4bc3-89ff-81d8f1292fdc": {"doc_hash": "4bd219c96ade147fd3c4068bcf210742c1f20dfac8d047098d19e323549a8146"}, "aec38711-d522-4e77-963b-c5c04c42dc11": {"doc_hash": "20b9f3f6ba6a79525a7f3879d8d93eec8c3eb70adddce57f1e6986c89942fad5"}, "a671ed6b-fc0a-46c8-a025-f254081a912d": {"doc_hash": "967bb7b244f7b2e5224b1a099fae685e6dca9cb55daba8ca837a6d565493263b"}, "d53f67b5-31c2-45f9-a2e6-4b98b9d4a42a": {"doc_hash": "908d5b7784260c8b3ae5e9d2b7e3179873c36a92cb2b898851aaad8c35873b4b"}, "683786c4-178f-4b2e-baee-5abe59a82c0a": {"doc_hash": "3bdeb8f4d304297bcbf67e9a9734a4bfd0100d3704914baca7aaa94a32eda7e0"}, "532f336d-e9b9-4450-9705-2794d62bf713": {"doc_hash": "b12bd0f71d87f7822e4b8e0438da5220a4b353e705a42357eb1e6bad0671d71a"}, "40737f00-e136-43d4-9aad-c857a31ff443": {"doc_hash": "1d258b210e795dbe4563fdd14aa9e26cb9ae192601bcd892fa87b0186ef8692f"}, "5f183f3a-e2e0-42c0-b387-99f8b24b4132": {"doc_hash": "e99e175c461fe08a8273b6c03cfe1b7a2d75870e12336de5daa879bef71acc91"}, "04c450f2-4611-402c-b202-7b2a25b3b230": {"doc_hash": "3991bff13b265946d37c0ae38f70b19920d643c01352498ce7b1e78e35ab4b16"}, "ca36a375-9dc5-463a-9d07-3e61d4857f71": {"doc_hash": "2c489cedc1dce6908783feb57123383cba5b8748dcfa0744188d611ee27ee36e"}, "1d1a8cd8-b16b-434c-a441-ed945966649d": {"doc_hash": "9e1f4150ec08c9208d632d6dd9709c4248bf96ec9a7ac50d76fe94ff17f189aa"}, "821d4e5f-b7be-4d38-91e7-94e5d254078c": {"doc_hash": "0e03feb924d2cbe73e6aa98e6a78cb2f397399e3d4215d1b8821fdf6faaf088f"}, "cec55d61-1537-44c9-9238-3e755728df7d": {"doc_hash": "8c6f7478d5d7c03aba730084e7982e364550d44575ca6facdb953ff2e58f8cee"}, "3620b7eb-69dd-49ce-92dd-64e358223b82": {"doc_hash": "b9b0476f7d7c8a5fbf4b8536a3c87f03b9a066375a866af37e8ca2ecc9c6018f"}, "58af216c-666f-427a-92ed-296c48f93f94": {"doc_hash": "17423a732efb12ef2a861eebeb4062fee487cf2b80fcce7af09ed80eb2f8fe42"}, "c5113269-d48d-4d2e-b35c-41ef5aebcc0c": {"doc_hash": "e6f5a34545b422b4b0f36807e112d528db0266fe2ddd635013b7736e9b385bd9"}, "344af5a7-bbe4-46f7-945d-7ed459a11b12": {"doc_hash": "f9f4d3b78f1551dc1dc6f5682e647d831c5c31a045af8b79a0b662f22847674e"}, "8a5fdb3e-0ae3-4ca6-84ef-9e0c874d06e0": {"doc_hash": "8a44a977f02744c20f0840bc54b0cc86e05d433f991a611d2a6af9a903d9ee9b"}, "3657a5d9-3eec-467b-a2ef-34fba5d534de": {"doc_hash": "5f783964122296cf9e1ad51ee120fe689f85b9066768bdc472f4292c466f4670"}, "2240882e-4d23-4bd3-b323-899e979e95b4": {"doc_hash": "5d70c9aa9931e8d2b0ee1e085d60db8f681b86e2bf4b0c9a29acf9f3f1135e0d"}, "542bf419-1582-4833-9f1d-1857456896b2": {"doc_hash": "c256ef0adcee83e4e49310006bed665a95200ead0156ca2577fe5cca041f4dba"}, "664f9c79-aacd-4ae6-b0d6-90aa1a6ef35b": {"doc_hash": "8641041dee21b1bce0dcf160048a255b02a05fa5c2df7e30a91605d183101145"}, "d19c23d7-2406-4a7a-982a-87e0797b8be9": {"doc_hash": "d9d74dd529ce1654dad1f551a53a401ae322cdab158e3510ece80dbbc89f6355"}, "30cbde39-197f-4005-9af2-82286294fd85": {"doc_hash": "5267c487c736eea649e2f04c8aab537787b648ee8014ac2a0ae9e9aa4d50c396"}, "1e5a4a8f-3018-49d6-9376-cca91b3d3df0": {"doc_hash": "9132c7d5df09aee974223f6a9fd538a939c0d908f0d6bec95b8a4a8a01bb06e4"}, "e56d1770-06bc-47cf-ac78-336b3e951043": {"doc_hash": "168d86021779b989acaeefdb15087439fde5ebc74e0e20247a6a75b716c98980"}, "945e24e1-e868-4be3-86bf-c08be09e92cb": {"doc_hash": "5c23b222e94e65f8ee8a5ff4d117e29bef59ca97e1f1fd80a2c095cf335224ca"}, "aa2683e8-afec-4b10-84d4-2fa91c1554c8": {"doc_hash": "ac7cddbe3c04e128ca60313f8fedd1530d16c878804e82db4c228054f00289cf"}, "3048cc40-4fcc-4eae-a99b-4c1934713b89": {"doc_hash": "a537505c54c2a4e96ddaafc5f3f485f17ad4c6c9cd2986ba0e4d457fa1038038"}, "882d30f3-a6f3-46ca-a091-612af66e82ce": {"doc_hash": "40d5b379475cc03945ef9411c11d99c3a739f3e1b07e1f7da1bd3bc63eb883ab"}, "f646c596-da6c-407f-86ba-4aa719e1b85e": {"doc_hash": "035fb9c33d7c3ca4f56033dc6aeba180195cdd7f3e93d5e84eef5556c5f4e36a"}, "63af6ee9-7cd1-43a8-a11a-bba8f31650a9": {"doc_hash": "079bbc44d68801aa6a54e5a129f4227bff3f0cf4414fae321f76ad07256fee96"}, "cb32afa0-cf4b-4af7-8b8f-f36ec88a3a3a": {"doc_hash": "75b92194d6d85d9da15195b4fce76ce7ba14799bba60e420c8fadb52c576f4b9"}, "e09e505e-78a4-44ea-9a3d-be329dac5012": {"doc_hash": "73d9cfafcaefe0efad862e45521b8f8706706e9fd02d5ea0925862879094643a"}, "0e247933-5bc0-401b-b3dd-c8e0ee299a60": {"doc_hash": "12f000dcdf2fdd9b3c7ad913af5a23f7b207db4d1d7f0380c91bc5d3d23f69d0"}, "1f295d15-30d1-4af8-be88-3c8de889595c": {"doc_hash": "142488323a1be4a525bb0ffb46fca3b3d8d9f7da337595d8e389b978c985c741"}, "2aa04aff-993e-4c33-802f-fc8616890514": {"doc_hash": "092bddef288fc1db2b4a9d0f8ede5939b06e41ae1e14c08bd49c4979216d5502"}, "35931699-d535-499f-a8e4-f38325dd396c": {"doc_hash": "cdeedefb81b80a098b07daa9671aa6b2714c546b89d5636635f4b757f7915f69"}, "68ee645a-8fab-46e2-a76c-07d82a49da24": {"doc_hash": "9418adff28b336a4ba55745055e4df8ed0dd3f1efe10803563449c3c5c0a5d5e"}, "6a6b77be-e48c-46aa-a927-62aa06c80d0d": {"doc_hash": "4f3fb91bf5260d757475a59d774643a6b4ea328fb760612fd715def7d5db2c0f"}, "ee2835d5-f31b-4105-b64a-968ae78a3a40": {"doc_hash": "acc816eb7555243f2a5964f8d4475f1083097805cfd809b27118c52287bced4b"}, "1a022b1f-7c35-4952-b135-3ef4769ae435": {"doc_hash": "42a8198fdfdc17b02769dca6ad7576d389cde2cbf975f616dcfe1582abc766af"}, "bf0049ac-0303-4e23-b456-4c203913f543": {"doc_hash": "8344dde2b35c9c6988cd86f874d781f9f183d886d4b44df9bbfe10446c9d046b"}, "cc12a813-27e8-43c8-973f-3428a22843b2": {"doc_hash": "2b5c2d3efa495ea17896252e5e14a74b67e587fa55970e3ba34b8c6e95cfeacb"}, "0fea7603-68dd-4e19-81b5-3ba6c17d1047": {"doc_hash": "4969a9862870cb1875ccf7f8d88f207192a45f0a71069a74d0410d3a7e2b0ae9"}, "7c6c3917-02ef-4f6b-8a50-205b393ad4d3": {"doc_hash": "d4f8e5ef4e8f8003ccac5b9ae421898559fd6e8ac347940d58046a0ab99e3b3d"}, "2644de71-163c-4d81-9dac-62697c70e6b2": {"doc_hash": "c4162e78bdc9fe914c6e042d1cdf258d36d08a25ae98f158dfebdc7c2a73ae01"}, "b2ce08bc-dbb7-4479-ad49-01751647816e": {"doc_hash": "7293efcc92e1999906ede13ec02e9900046ae1e8b5b198bdd7c6719ab3df6f6f"}, "16a63730-a4b1-4fff-887a-9a8daaebfb65": {"doc_hash": "9ff3404aef08cd4d49a49a77d7c47012e38214ba25bd137fab5de2d3071df602"}, "712fabbb-079c-4f1c-ae45-8d65ba983e5d": {"doc_hash": "a0918ce26317de9fd432c5772fb70acdacf36d71bc5902c1db5b8cbee1e56e04"}, "5242f9f8-0bb1-469d-a1d7-2ecaff5b1d23": {"doc_hash": "73ca3f7e2a4b728e71a751995e02647e01cf7eae52f3df79fc89fd12d337d7d2"}, "7684cc94-0d65-400f-874b-25c9ca0564e9": {"doc_hash": "017eeb9081036a0ad48c4a44f156f5086e659671cb954cacebe927bb9fd7cf93"}, "780d198e-a690-427a-aa80-bfe21b98a28d": {"doc_hash": "1a7ac6574fb3c20571139a862b8c4d625db65dc3ca412858210c0143764e64d2"}, "fc372d99-3926-4600-b90d-34d8a4fdf2d7": {"doc_hash": "a6ddc8de26bde523213d730859303451b37b4be8dc77e155228a5a7248d1296b"}, "433af848-399e-49fa-a073-52a8446e972a": {"doc_hash": "64369df170fb1563728b4b3e2bde9bf682f3758d094847a1264d4c7981877c0e"}, "043c6c3b-abd7-42a3-af00-18fcc24c1032": {"doc_hash": "6985aed45d1ef16913404d6aa03170b0dad42106473c2fbbf819ec9749c60335"}, "23ebc8c3-8f4f-44e2-8742-5de3f7a7da15": {"doc_hash": "177715b60e5ae0520ba94263521d9edd6a35f7c3bbf456611c71089bf0918890"}, "d0a6375f-4797-46cd-895c-33102442b313": {"doc_hash": "24ad821d77458f3aa9db23fb3e32276ea2004f59e9634a6b63d7181786e8d7ea"}, "997e19de-a77f-43bf-8a07-e8c3d514190f": {"doc_hash": "cba7b760a96b6bcd972a6630064ce79ca3cd8ae9783a3d0d443c27a57463b02a"}, "4c8f3ea2-fe7b-4988-a4b8-10330fcaffea": {"doc_hash": "5503a27b57e58641ff47dbb9da9bd491aeec688b8a06cd68dcb06382258488da"}, "dadb01c7-a678-4996-8be9-120025dad82d": {"doc_hash": "4b0b1a6027744385bc6ab5a7206cb32f1fcd0288317a8896e5d5c22a47871cd8"}, "129fca7e-3d07-44fa-a8bf-96bb55cfaddb": {"doc_hash": "b2004b48b6b6351f7bb08cd2d3486f55ec6b58a59c96a3a63e48410226d65d4c"}, "4505efd2-317f-4499-9a0f-eccad646b7e3": {"doc_hash": "fb560150b31860885a7c8ebac9bdd4179fe35c51132983238cfa24502cffe3f6"}, "fde0be83-2da3-4e77-b8e2-681d6ae29b5d": {"doc_hash": "95c40d59bdac2aa0a7a76640c104d6701a148a0010800b127a52bf566d1d27c6"}, "d2c84527-5e9d-411a-bf6f-a53d74eba6f5": {"doc_hash": "1671a7b12e483fd62b47df4e4eeaa55ed404c69c23240d47a6a7b96524025717"}, "710f430e-fed4-4923-a7a5-76b0c73bae0e": {"doc_hash": "9fb6cb50a3bbe225df4cb285e1eb5b6a6ab61b6fa301dd944489bcc7c9752690"}, "1236e457-6819-46ff-a442-08fac9c4cbf4": {"doc_hash": "4106ff3b74d2f43aedf5d9e6942a2bd7f0781c95134578897e17d7ac7386bc8a"}, "31fea909-51a0-4c66-aeb3-1f99739d2473": {"doc_hash": "862e69aca7ea90d80d661eeb1ff196f19a0673ba8b9aad21b23d4dac64d32d0e"}, "b9b30a3c-3ff7-4420-a40b-94373302a747": {"doc_hash": "f2c114ace0d4fd9418385d8f5201d177df0611756f3e02790ff7ed6f64c41e72"}, "0b17ab31-7209-4540-aa39-5faeded85a12": {"doc_hash": "63b6f7ec0fe69287a32f0845009595d10999132e0896d114267e66cdc41662d5"}, "4fd39138-4ea4-44d3-96aa-67dd5027e4de": {"doc_hash": "ee807ef0bf5850b47b69b9856ef96821c89745de7d735d2d5a976862abe7ecea"}, "468cd467-295d-490f-84d0-41a6ae05388d": {"doc_hash": "2d5e8c99de5e162fdec832ed4b2223a8efe9781ed4911834057ee86242da6661"}, "db773bd3-709e-4c14-9500-84886b4af7ef": {"doc_hash": "590049a5dc9b8ec10c2127e598e8b1281d50157a14d81fa4b139959002f9715d"}, "f2a4cbdd-886c-4712-9fb4-82aeac7167e5": {"doc_hash": "cec9874dffa07bf67ef973d59ee8c09b45823aa73ef0bea24886f89f5e24180c"}, "491475cf-cacd-404f-b002-2df7e43d431c": {"doc_hash": "fc315dd828ad189c4cb7bdf69e3872f079ef4f6415cb52ac59bd34a69dd5fc18"}, "76091345-5fb6-4607-bb62-58dcf248517c": {"doc_hash": "627644d2a7f29ff39184a6a3da92187a76e64716d2223cdf62419524e3d00cba"}, "30c534f5-acc9-4a1c-84d7-a820a0cd14bc": {"doc_hash": "18666d640f97abd614c29dd161bb112dcacc3a38b81fcea3933921031e907231"}, "6cf7a400-eb12-4520-aab5-4881c4c0e18f": {"doc_hash": "32f914e177cb1be87bbf02760a75e9262c4798e04ae08b777fca2779a0d4c166"}, "99f430e8-d343-45dc-bebd-937dd8854691": {"doc_hash": "ace3f276954b2bf45c56fac378710349e5bad08fd775ac6d21d0a295efe68a81"}, "544a9bcd-8a5e-4ba2-9cbf-b49db028b96b": {"doc_hash": "f895d83bf3070084c929d01699298e2e0f2fd85f93a2a91373566af1e649d721"}, "0b515ea0-71ac-438a-83ab-b450118b7760": {"doc_hash": "36784796af13e05a989b362e35a7175bc55a4337e84ef73d067441e32681a6b2"}, "406fcf46-db33-4767-b912-a3c6927e22ae": {"doc_hash": "609509665bc68e97200189b2805ca32d0ac4902d79931747e6577c6aa41ba2e4"}, "7503e79c-cef9-4179-b511-1fb8b4d8571e": {"doc_hash": "f09deaabdb5e3cdee5ad4d3c87415cca82f5ee912e94e20ce1df14ac98a63a32"}, "2ef85a1e-715f-4d23-8c8f-70d92dfa1f75": {"doc_hash": "e1f1f49fbcdccab87c465bc6d79b72525a43adfdffaed893ecb74b44e1f41d83"}, "7d6a38b7-69e7-406f-a22c-c7a8ca327060": {"doc_hash": "f309780f3624cbebd4985c5b9be707401de35653f481ab5d23fbf4dc4277fcf0"}, "7e94064c-aec7-408d-ae5d-c8f2d92a44af": {"doc_hash": "8c040f4327dc26df79a716fc78a19809a20d07dad39be63aa1072f8075744543"}, "8c966c86-54e5-447d-b0b4-a2a8b64cce4b": {"doc_hash": "a950e843560e5e35359ee183306f4b04edfa5134b0e9be40e98e17dc74887f72"}, "d39f55b8-96ca-477b-9cbc-f54d5bc63f6f": {"doc_hash": "80b8ccbb9d05e7876f6243eaf6fd2cea6fe06c69418370e8262dcc974b5612ad"}, "74b4bc8a-f7ce-435f-b186-c2aed0db5857": {"doc_hash": "e80b5d8412ea55776572dabd887ba2bb15823a7333be0a2649087790ce388f25"}, "a162b09d-f580-40b3-b292-793ad8c72ca7": {"doc_hash": "5eae0bc8a0176e88589efa9699f27ab39fbc70bfab02e0cd8258472e374040b0"}, "e4387adf-cb25-4f48-b60f-e24520778c00": {"doc_hash": "bd06beeace34966abab0914c69c5e7bcc3c191fdb03a437112bc9f4784bd4b1e"}, "665ac598-5466-4707-9e24-bd5049e8c91b": {"doc_hash": "740e9dee64937d6b8e2ff1972e27354f5319d83cd0cf8ac477b6d5fffd5fc7db"}, "b9c16011-d34d-4e77-a437-96473c5acb77": {"doc_hash": "b7a38f15ae181edf1b0e97417655a1fb56d987f5b6fd6d2bb89ee759e2f03c38"}, "f580794c-abbb-4ca4-89e9-673213eda821": {"doc_hash": "5a6c7858ab42399d33bdd73cdf0b43a1afae474aef1c78e3039fa20e735460b6"}, "9f08513a-0e1b-4193-b57b-f6904f363f04": {"doc_hash": "fb32120be18b40cd11dd6b2311de120e418de14143564eb005ed67f9771baf6b"}, "775f29f0-7101-479c-9afd-591bc3345bb6": {"doc_hash": "4c271ce4d8cd0fc8079ba599a93e0a33b637bbc185f5e6b00de388f0fac91eec"}, "048602cb-ddec-4f30-b471-cc09981f9ec2": {"doc_hash": "b7a107b6aabc6234b9c40e5dd6e0b18a8dde85b44ffff5cdd6e8a6bb9137bab8"}, "870ea4f0-681b-496e-97b8-12f1978dafff": {"doc_hash": "3d17ed4ccfe85d0be00d214965304855df8e7c9be1205fd3d1a5c89a29238550"}, "ecda5cdb-5732-4ee4-92af-e8ac2607b766": {"doc_hash": "c1ec2ed3872c1f107009f9d3ed99f7bcdcee3a12b84a0ffe8893aa3dd6716317"}, "6d2c5dfa-f164-4120-b57d-716a0c2cd099": {"doc_hash": "b57111b79101ef70039e102303f5a5b0df731bcf96c669aa818a07ab84500bac"}, "446ee1b5-41a1-4824-aaab-eeff3cfa4664": {"doc_hash": "341140f056c99c45f106ac8824641f144c43f8d62b2bfd9e77602abec452ed75"}, "3ec0dbea-ce3d-4408-a0b0-56812611015b": {"doc_hash": "54fe90fffcbc25e8f09e15b3fe74430e4575d6cf55efab8e2dccdb5aae6f81b8"}, "b1b855bc-3666-4e4f-8c49-c96bf3872b0f": {"doc_hash": "422a0578b9fa10128f0ed4bb7b309e4d3f0cfa5c59de1fd37fbd071bed6f7fc5"}, "3ac286c8-4ce0-49fe-98dd-d58129d8c740": {"doc_hash": "53dffd51d3d4b7375948e75a03f480c401673027ab61a39159de705e83da5715"}, "ceae4b80-7daf-4cd8-877d-8c02698cc7ad": {"doc_hash": "fe797a8de55c509e87c7cd194e99de8795162fb8074d6a52812d633d2688854a"}, "f72cad56-6413-4c2e-8898-c3f0f905c62b": {"doc_hash": "ac4f6cb4d06555cc1c93899b68acc5e05855e60be710c27425474347880f9338"}, "e3668ca4-053e-471f-a3bb-ffa1f6af5e1f": {"doc_hash": "eb66224efd9d85dabf377e1398774c9c3eb8bbaa9e3e13451adf01af4ba2296e"}, "60ee18d2-19e3-4536-9977-864582938dc9": {"doc_hash": "c40d2ff6d642e60a002febb0754ff188d2f887a53a8dc69fdb63f39be1ee6fdb"}, "5480894d-6e80-49eb-88b0-fe798660cb6d": {"doc_hash": "d4f42e4dcf59a81747883ae5fd0815a0068677d3a1874b55b7ecd1e82cce5bf1"}, "3c7512be-1f6b-406c-9bf9-e11b5aeec80e": {"doc_hash": "a8fa21db63edef3f0f8de9c8ea2a335a375ec192c79c03201c0df2a99d65cb64"}, "f333752f-738e-4d88-b916-7157a5d301b6": {"doc_hash": "24c75f239237c8a7d290f9ac779b03f3790a627df8d1c677b87db4bfc8f99712"}, "cd47cd9e-33db-4f93-ae53-5018c44f5c7d": {"doc_hash": "218cfb62359bc0079ca97c8d2741825f47838cb381033adc0ab9c028443e0ba6"}, "3c0e55b9-fe43-4b89-9418-c5a488cd5b66": {"doc_hash": "4cb94e2e4f0aef0ea4feb8ea0760dd71fd3dd1b023d7b0b79563dfe7b427693c"}, "84effbcb-2edf-4a5b-bc2d-c161061bc392": {"doc_hash": "15d3d1f6695f6de141d5e8fef2b5d8d9c658bf214f1979b8862a2fd2736d998c"}, "1eb6961e-2b91-4675-8509-c5d0c6c61295": {"doc_hash": "df49fb2bbdbe7b2627a62c0755b427837f7388d31d5efa6ccb072200663484ea"}, "3f2422da-824a-479b-b610-9803a43733f2": {"doc_hash": "27a004fc119ffc9b7a5ca89d137a501f58f00ae5db12c79a23828a4061fac592"}, "3acaa686-7970-4101-8bd2-8a6ac9eb9f39": {"doc_hash": "abe4a30a0fdcf9a9c3e29e7ffbbca49a8b3d7ca6f53f380cac9408bad7593910"}, "d9e1d4a0-ef4a-4530-b8ca-5c5968a78202": {"doc_hash": "1e6a011a6ba186dd1116947771450cfc19efac358ca5461617459c7c95909968"}, "d41e021e-d934-4f8d-bac9-6b4eedb64ad0": {"doc_hash": "e62c3946493167ea602fe0f8223720aa8b4f4d54368bb96fbccb6712d0ed0d07"}, "1b2dd56b-9ed2-4e4c-a2fc-f6c544d96c3b": {"doc_hash": "ba448a32d3f83cb9cff82942e98c6985c4aa117d0ba37fec0cab90663bcacb53"}, "a6446dff-c30b-40b9-8c62-fd789df1f984": {"doc_hash": "a87cdc27f0ef871e7f22b34ba19c75146c49acc987943894d198fe2460c718da"}, "33ea15da-c9f5-41b4-bca6-cf1290b1ad97": {"doc_hash": "05e296035f1a52b2a35282ece7a7187af63b3bbe0d157aa4d270043873671647"}, "d851519a-fabc-4abb-bb7f-5ecdb6a5cd66": {"doc_hash": "8b9d8f48b7cc16634a8b90a9536cd0328d72a5ee20f36358f6959faa9f137718"}, "9e9ff103-5211-4d2f-aa3a-871037f18958": {"doc_hash": "b85e53cfcba7fad3afe0d424f732407b22cb11062e1c8420f6210e91958a6c5d"}, "0053cbb2-b5cb-4a63-8240-8322cb153926": {"doc_hash": "18a9178801c6fff37c6bf2a8accfbad07791e0a0e7feef8f70ef29e6f5007189"}, "b0b4d8a6-8002-498f-b176-8986de05101b": {"doc_hash": "ee594eded413694cae7b0595fe6d9049d9d619271a912a9fd06e5a31e9bf8baa"}, "51180ca5-6342-422d-8303-f68ac94aa602": {"doc_hash": "b9e768d65cb730ea54b6c64f905917354302fd7424550ca89f1f8e8ad6c119de"}, "c7213594-4e38-476a-a454-042d1b8a0bc9": {"doc_hash": "0c652f341db3db08c37cfbb86ef6a5d369d0c5a387d94d1ec42bffd5ea9ad593"}, "2add599a-8674-4ecc-8b28-f844f64b2b72": {"doc_hash": "11a34472f7d4081fd46436176f844ff09e940040ad16b3f11720993948eecfc9"}, "1f6cab90-826f-403a-bff9-a5b5dd7f8316": {"doc_hash": "223f1a7f59c369332ed25cf76da4f393a5fa0ace1507a194a85e8b76ab7d285e"}, "14adba67-0f6f-4ba8-bb63-0e3e7d607889": {"doc_hash": "f1ab777169862a697fbd7f1666f72a466eb143c4e37a9f563e80f0a046230cda"}, "3fadc6a7-0bd5-460e-8c90-d50ccb115c4f": {"doc_hash": "db6d85c25e678a3c8446bc3d1e40ff9ab8faeca7af0a4d0882aa6b70719d5e08"}, "98d8b6e7-cd11-40cd-ab15-847b14df99b5": {"doc_hash": "5076b84547f67b70443d82e1e33a09ba0e82de89bc890252384d6ac08a463611"}, "287e32bf-3684-42d4-a8e8-6070a3e53c96": {"doc_hash": "baeec3ceeae602819ee4db56fe0c91129e6bf9328fd8985f8b7d206d7f9bf73a"}, "bf00fd1d-c481-495b-a418-087765bd3fa6": {"doc_hash": "6802a395c17578385e3b01aea9f7a1addb2b48180a1e306507a44404c16744bc"}, "3c0c3742-d705-4e53-b369-4857fe9326ab": {"doc_hash": "12e1c8aede16cd9212886bb7eac114eee2319cbfde280cf1ae2167963a5d8929"}, "eec2804d-d292-430e-9566-2706da4f20fd": {"doc_hash": "480e46cf509ebd385013687ea572a8d92f2f8cfc93eeb4ab04d0193806e45552"}, "b7e86265-8d4c-460a-95e7-3b7d5e9cbc24": {"doc_hash": "94eeab4e4c2f8389dd061ceb56ff445164e32fb54595d2742173ecbb7aa9d74a"}, "266dfea7-7564-47a3-9314-527629b00055": {"doc_hash": "14e5102cdcacc0a204f5f96c3628ae166a9dcbe69b8e2611513d49fbed37c7e6", "ref_doc_id": "8d3e25b9-ca19-47d8-b006-f237464206de"}, "556aa0d4-0471-4299-a4b0-b6c20f0c2994": {"doc_hash": "16cf3a6c2cf1858919a3357f51f6484c834a32d3a685f93e74ee97cb3da14df3", "ref_doc_id": "8d3e25b9-ca19-47d8-b006-f237464206de"}, "69b18b31-0474-4191-b226-412c20301951": {"doc_hash": "42736da57b2cf43f814e12237bd0400bb6e113df25469f867b9317387dc1a8d2", "ref_doc_id": "8d3e25b9-ca19-47d8-b006-f237464206de"}, "7f18d681-5fac-4301-87ae-a98c71aab0fc": {"doc_hash": "3fd67c7af378a320e1ed549d87468ba5df767f428d2c9eb3d71aa684691fd161", "ref_doc_id": "8d3e25b9-ca19-47d8-b006-f237464206de"}, "05702f47-edbf-4e37-b549-94298a412794": {"doc_hash": "f4ce107a901eb5a115d2fe5ee73621262cbf551b127258db748e9dec7ca8f476", "ref_doc_id": "c4616e64-012d-406c-bcf1-7b6ddb4eb75b"}, "b1b9ee1e-7f7a-4317-bcb9-667e0cd97b77": {"doc_hash": "64be1a5b8f6895ca78ba600188d974d85be97d5f45d2f22203ffde8582f9f8d8", "ref_doc_id": "c4616e64-012d-406c-bcf1-7b6ddb4eb75b"}, "a4925a19-0d23-4436-8311-4e1679252e82": {"doc_hash": "b98ca95a89c1ac2fb0627a8f8c9c0f2ae9a1e1a106e27eb9a866b09039c942f2", "ref_doc_id": "7ca686f9-a30a-4bb0-ab89-4cbe457f327f"}, "49542a2f-0d16-490b-9b18-88a840f1e763": {"doc_hash": "54b2302fd8e2d9196c4d79c44357d81e1d8e6ae97a4ca6834f83c406228f843e", "ref_doc_id": "fbda3572-c8bb-4b7f-b0f3-6d4bf2ddfe84"}, "12750370-0878-483c-a005-3f92deeba168": {"doc_hash": "d865c4583b274a0574e0529c791c4fae1ca357823633ff372e784546932d82c4", "ref_doc_id": "af6b06d7-cc97-4b2a-8e9b-1c0fb8c15354"}, "f28382f9-3b21-4a8d-8021-0c85dfacdaf9": {"doc_hash": "2aab72e6d999efdd5c159591738bedef861eee98215fd84c90fb57caa82e0d06", "ref_doc_id": "1fcebff0-829f-4ea7-be6b-3e755139f0eb"}, "fb406632-037f-44b8-8167-211ae35c6da7": {"doc_hash": "d71c8b8f3228152419f685197cc6317d6c5f39cb938b8492d2f92d7a7b4ca147", "ref_doc_id": "5c04a5ad-65e7-4b19-8dc2-135017004f34"}, "45b8647a-63c5-427e-a0de-6bc520122f9f": {"doc_hash": "49537b3a2d8cfee2a57fdbfe801b4ad73a54e09fbb902a35acf545474ee826c7", "ref_doc_id": "5c04a5ad-65e7-4b19-8dc2-135017004f34"}, "724ee8c0-f519-4396-9c35-288e15c2c93a": {"doc_hash": "03757fde0c56c6713f1c42410dd2f6f57a0496713b461195b2023b23709a4195", "ref_doc_id": "b72001b1-05e8-4dc9-82c6-52bbc02384d5"}, "41700a42-b122-41c0-a501-51674c0a122b": {"doc_hash": "b94683c0af33ac98d04ad00d6764ab5a91d0524a67573e67e542dbcf521a740b", "ref_doc_id": "b72001b1-05e8-4dc9-82c6-52bbc02384d5"}, "587f2abe-f675-4532-b526-54a6a9150e5d": {"doc_hash": "b32cd8c85f8b8b67ddf0df0f2bb1d4b3ed456a1aee2afd63780e74783b7ffe74", "ref_doc_id": "b72001b1-05e8-4dc9-82c6-52bbc02384d5"}, "d6b01d91-eec3-4120-90e7-dc7464447f82": {"doc_hash": "9af8f564c38c25372a40968f62b95bb3132eeb4a925a7f3f4fcb4a7371e86848", "ref_doc_id": "b72001b1-05e8-4dc9-82c6-52bbc02384d5"}, "c52b07e2-c7b2-48c7-92e0-84b5626d36cf": {"doc_hash": "810f2a2f78b922adb85c1d453c3051b61e09ff9a1486e1c930c52b3c54273b63", "ref_doc_id": "b72001b1-05e8-4dc9-82c6-52bbc02384d5"}, "d5d56557-1863-4f8c-8875-95efdc3498c6": {"doc_hash": "35925996c2e9a3d27e0874b733b714afbd83d83e1488e22b9faac11b758424f2", "ref_doc_id": "b72001b1-05e8-4dc9-82c6-52bbc02384d5"}, "a28e8c0d-a856-488f-8f41-5784fce186d3": {"doc_hash": "1fc12afac5b4261cc2a161ac708e8c91a4fb4f46f1072eaf76d3cc87d775b702", "ref_doc_id": "b72001b1-05e8-4dc9-82c6-52bbc02384d5"}, "0fe810fb-aa7e-4e4e-99e7-b004026cff3f": {"doc_hash": "11dbd9f6ab6bd0a950322e75da458b05a6d733589dd6aee3aa32b25570f88441", "ref_doc_id": "c02285d1-05db-4fa7-96ef-caaa56172f6c"}, "0f9a2532-e881-4b85-9a31-2879f9c76f8d": {"doc_hash": "defd997f20bff029c50654148074c5ab1225a0879023ec93cc636e8084766976", "ref_doc_id": "c02285d1-05db-4fa7-96ef-caaa56172f6c"}, "90101d8e-71e7-4f36-b56c-a45e363141d9": {"doc_hash": "7b00374032e298f987efbcc3ee53d1ff70898e201158bd131571b0109721dbe8", "ref_doc_id": "18e5721c-001b-448e-b1b0-74be6f27799e"}, "2e3cc228-d40e-4acf-8d63-d5ef255d61b3": {"doc_hash": "9172b22a5772068205a5965de79523312c6eac96d6d9f4679d018943379cb2a2", "ref_doc_id": "18e5721c-001b-448e-b1b0-74be6f27799e"}, "31954eb3-b75e-491b-acfe-3132ceb0b4e0": {"doc_hash": "5fe5c9869caadd765cd49a80bfb1285fa6fbf66a57f2d7e6d5911310901615b8", "ref_doc_id": "cd58b26a-161b-4ae6-afb7-4df7aad40e9a"}, "e8dcb0a3-129d-4404-8836-adeb5afee934": {"doc_hash": "f313a6e0599d3f85e0f5bce966c6fdebe38834d330d8d0c298454f8184d6396c", "ref_doc_id": "cd58b26a-161b-4ae6-afb7-4df7aad40e9a"}, "8f1b2683-c35b-4f65-bc40-0af9d0e6f38c": {"doc_hash": "db5f3a8a76e2d40556f98f5c5ca54c5c92841ba3e009e1238bbbc1ca6fe9ec99", "ref_doc_id": "d54600b5-a38b-4272-a738-deae3021ee8f"}, "abef79cc-7fed-44e7-89a6-9f494d7d3ed4": {"doc_hash": "020d77748fdd1e72d336277ccea10b608dedef44fc8d427788d2336f85213167", "ref_doc_id": "fff28951-1acf-4db9-995c-a1c896b90836"}, "a60932a4-0b7c-4426-af98-2d055ad44909": {"doc_hash": "15760379db2818e72ec6134d559bd5a44df87b200ccbe5782faad856d7852f5b", "ref_doc_id": "fff28951-1acf-4db9-995c-a1c896b90836"}, "1f5151d5-a73a-4fdd-9c48-72b45dd5d940": {"doc_hash": "83a5a7d51964986a3567a09a49da1e035a50c3aaceb7cca3b8d94dc497f3bff0", "ref_doc_id": "198d1e67-2d1c-4912-8971-419693be1ac2"}, "259942f9-e9b5-444d-99e0-abe2ac1cfb36": {"doc_hash": "db89ff7bcc437b507e3e3fc50892ba9e34fa14effe6bb8b522745ebaa44f2056", "ref_doc_id": "660e4cbd-79b8-49e0-b359-27f8a0c3ea67"}, "d8f2b196-cbcd-4e07-ad93-09a8be948caf": {"doc_hash": "ce83e4934c2924d76b41bee05dfb347fd87411a0b97ae862376456a91b9c7a99", "ref_doc_id": "952fb317-689a-4f8d-8bd4-792be7b0c7a7"}, "3fde2aaa-1680-475c-b42d-ad327a6c9479": {"doc_hash": "b1afa8920ad85eee215faff9ad9478e7debe315e1a18d50aa1068a5c44eb04ed", "ref_doc_id": "42285cd4-f11a-4f7f-b620-2730c3a43482"}, "f2853424-6d42-4075-b671-127d191c8dff": {"doc_hash": "637473d058b4d7376e476531e24e7b9adf8bed7121e423495bc152e0ad30c1f9", "ref_doc_id": "4b55ad4e-8e85-4a2d-a9ec-859984e30dc5"}, "3341403e-9df9-4e4f-8c64-29d56911e7fd": {"doc_hash": "03085c373c9814efee2609d21c861439b8ce7962876bd0750f93337489b03c34", "ref_doc_id": "4b55ad4e-8e85-4a2d-a9ec-859984e30dc5"}, "9c7ee6b9-cfea-4305-a3f6-03b7d6845541": {"doc_hash": "2a2b193cf7c71fc1c65830cdbf06f2ddb3c189dac91841c0b2d19031f927fb7f", "ref_doc_id": "573d71c6-dda9-40f7-818f-260c82b14f5d"}, "25d3e09b-5e31-4133-8e50-b02d974782d3": {"doc_hash": "7f987e3995c44e1cacd8bd1945dce0c46a75c7e1a4d1bdd2c43a4d89149beedf", "ref_doc_id": "8afc95a2-ed63-4861-87ce-34166e930488"}, "27bc94c7-8dfb-45fc-91fb-d348ce134890": {"doc_hash": "3bd9fe552bccd588497a684fdd10daf4b1942d716ba40f3a6e7ab359c7cb01b9", "ref_doc_id": "1da45670-758b-425b-84d2-9aacdc762b9d"}, "ff6309a1-c464-4d80-81eb-4fb32207f5ff": {"doc_hash": "a7221ef2633d60599170aec0bf699466b43f03fe2e299901f31b6bcdaca1836a", "ref_doc_id": "0ac43dda-52e6-46d2-8319-88ad10ad3728"}, "9d48b965-8627-4e2f-971c-04cd89aac933": {"doc_hash": "5085e1741288426b328b6bfdf1885d999362bfddb3180993b3f631ee59956b6e", "ref_doc_id": "0ac43dda-52e6-46d2-8319-88ad10ad3728"}, "68e15b75-268c-49f1-9b4a-47c552f80951": {"doc_hash": "63a9d9a029c34d7a589d598965eb0171c8fdda4f52049aa0d565c67ea5f3ec1f", "ref_doc_id": "86f843bf-eb78-49c5-8af5-12c0fb7cc3f1"}, "6d36352d-09f2-4246-a875-2bda0b4ed5ed": {"doc_hash": "20b672c3792f4212f9d9324ddb9cdde9dce47be7d1a4b6dddb4895252c286765", "ref_doc_id": "bfd329a4-450b-4e6e-b4d1-b8a26b3e47df"}, "520f49c7-2972-4871-9ee5-f1e6df1e0bdf": {"doc_hash": "d899e926bd88bf725f22759fa8bb26f0f3bf666605733383cc33031553bb22df", "ref_doc_id": "3f1f431b-5cbc-44f9-afaa-1b078fdcc463"}, "95114383-6d68-4a06-a80a-1db6b6d38f27": {"doc_hash": "05645410f8da8cdc6bcde5f69f1a10e6aec9b0c364d924b4fc8994c885020e86", "ref_doc_id": "2e1fa59b-1c78-4a31-b6e0-42f84e7ad13c"}, "38244e86-fa6d-4a63-a901-a78edf5bab2c": {"doc_hash": "a5f98ff924f30327f31f485dde570b4da927d4fdfe88a6856031cbe375423a92", "ref_doc_id": "a226b891-b583-4b56-b512-4753d8813f1e"}, "11341703-dcae-404e-847e-9bc247fa7999": {"doc_hash": "e89ef8fe55b609cc6fd6304c7e89065770a4f23837cee0a4f5f01379ef3221a0", "ref_doc_id": "b0a8b1c0-627e-4e23-82b1-87b31f4d97dc"}, "f358fa81-403a-439d-8b23-0e6a4c4500bd": {"doc_hash": "15de64066acacfa913e8ce3f70d03fdc594dced06ab47c51bff4bb40382ea6c5", "ref_doc_id": "b0a8b1c0-627e-4e23-82b1-87b31f4d97dc"}, "48769c34-b39a-4b3a-a5aa-8aa75bdab675": {"doc_hash": "88a430a1867e22796e4d65619cf42c7cb63b231f8cc5425167023149b721e279", "ref_doc_id": "0302c1a4-b8b7-4ea3-8b28-2efa950817be"}, "928957fc-f57a-4719-8fcf-04f9e08e5962": {"doc_hash": "514a1d9435db2cadeffc92e029798160389949d266888b0647a7e17152ee5429", "ref_doc_id": "41aa10a9-5cda-4ff8-9e73-99f7853f12ac"}, "0b71ca4e-6fa4-49e4-b325-96f5749e4bef": {"doc_hash": "be540da3fd88550f89cacfbe3aaf7e5889a9d31784d2acf43e981d22b272bf15", "ref_doc_id": "41aa10a9-5cda-4ff8-9e73-99f7853f12ac"}, "2789063d-da53-491f-9cf3-d0de705805b7": {"doc_hash": "8c2f92b5fec468f24fa2b15c4419c2ca78f271a90b689ecb09b68c8d34618fb7", "ref_doc_id": "41aa10a9-5cda-4ff8-9e73-99f7853f12ac"}, "bca693f6-9466-4f19-a958-fe9106adc213": {"doc_hash": "dbb1dec46b167a42c1c55f584d699f006501b1a8c0b9dcb9fb6785fff41c5e11", "ref_doc_id": "41aa10a9-5cda-4ff8-9e73-99f7853f12ac"}, "4f02df31-75de-4319-93e9-308903ece072": {"doc_hash": "c6632eac9c3bff58500591958e54dd409fadb54b11c5f17578d3c6fd61afd438", "ref_doc_id": "41aa10a9-5cda-4ff8-9e73-99f7853f12ac"}, "e49d5af0-6547-4fbe-804c-351bfb5ce062": {"doc_hash": "c1253f9c20d83ac9694f80282a9b4de98eca627627f0a4058721dcaa04f192e7", "ref_doc_id": "41aa10a9-5cda-4ff8-9e73-99f7853f12ac"}, "a61122fb-4f49-47b6-8166-2b8de3d40db3": {"doc_hash": "e623b2ebe9810c3c53e2e68d626623b7349a3fd6c0dfa98c1761b71d60fc6995", "ref_doc_id": "41aa10a9-5cda-4ff8-9e73-99f7853f12ac"}, "906dbc70-d9d1-4b64-a9be-f5f54de5917c": {"doc_hash": "b05e61da8a68e083e2b5bab6ef55afb3a58ac255609d234e39f4a6a76568e950", "ref_doc_id": "41aa10a9-5cda-4ff8-9e73-99f7853f12ac"}, "f23f5083-c5f8-4438-bb87-c66c6c9410c2": {"doc_hash": "a92af07d611b1f1df2bfa5397cc026b5d02b682d93100dbd2f847f61faa53e0f", "ref_doc_id": "505c3c09-fdc2-4c27-83bc-46f8df1c5e4d"}, "1fb0e566-11b9-4732-9c45-407739f19606": {"doc_hash": "5d9ae7eec0ae62a52b575c9583568cd1c7b4a3f90bd619286792d66727ca7ae2", "ref_doc_id": "505c3c09-fdc2-4c27-83bc-46f8df1c5e4d"}, "b44a41ac-98f2-4ecd-bf44-dff7f3dac686": {"doc_hash": "088b263b812e5c70e33ab4ff98e6be75f621f6d2abdd7c68e085cf2009562d7c", "ref_doc_id": "505c3c09-fdc2-4c27-83bc-46f8df1c5e4d"}, "d28e5fb6-19a5-447b-b749-57de8030720f": {"doc_hash": "0a1a6ddc3a831eda35416057bde25b157af9cf5cc8fc4be387ac90905120af8e", "ref_doc_id": "ce9fa6d5-e49c-4bd2-ac9c-46f398b5a98e"}, "9153cfda-65d1-44d4-b4de-fa2b821d77ca": {"doc_hash": "55dba88858b4d7b5de92d05a467d63727f567003a4c9afd9dbedb5fbe0ef5848", "ref_doc_id": "3264551e-adb7-42e0-835c-85ee9b04af4a"}, "8d1cca14-77f6-4cd1-9daf-fee142575826": {"doc_hash": "22a33e4f71df6de67732c096332ffa9171cbe4ac8fa0ac3d5689af98c3befb72", "ref_doc_id": "3264551e-adb7-42e0-835c-85ee9b04af4a"}, "bace9662-9ee0-4814-ae07-8ac876fd0e93": {"doc_hash": "5f44256dbe9c3db0577adae29b10d1235028389f90d661f0267ffbff40350aea", "ref_doc_id": "3264551e-adb7-42e0-835c-85ee9b04af4a"}, "a00fbf88-f146-484d-8ffc-373c19642105": {"doc_hash": "66abeb03b6a7850a9a296c42141c6e4ade350cfadefa9132d9846a559241f316", "ref_doc_id": "3264551e-adb7-42e0-835c-85ee9b04af4a"}, "ba0b28bc-1efa-4058-a575-56509eb8000a": {"doc_hash": "e8b8f7a77b0725bef03afb0c6aa95c5272652a0379d4612f4f292fa34afe28bd", "ref_doc_id": "3264551e-adb7-42e0-835c-85ee9b04af4a"}, "27c95b30-d23f-490a-9f3a-32f371602007": {"doc_hash": "3c40826b5fe4ee5653623cbe395b05f44f445f22ac9885fe6a382d5858012ff0", "ref_doc_id": "3264551e-adb7-42e0-835c-85ee9b04af4a"}, "8e9178c7-4e8d-4131-90fc-6e89c8cc1495": {"doc_hash": "122bf4f5de770dfc2a428d14dcba3ad47be2625c90d608059c1a675063250c76", "ref_doc_id": "eb8bd20c-e7c9-4a3b-8155-52f535210c2e"}, "7169046d-cd3f-4bbe-a0d1-679edc3fda8f": {"doc_hash": "28b78e2932179b6e0c39f9fa04ea9a0baa08bf8b617805d4df894b4987f0a91b", "ref_doc_id": "2ce20601-f036-4556-82ea-f6320596c932"}, "1a687112-6cc1-4c79-bc59-d3603998a08d": {"doc_hash": "32eb6d41979be60f491b693c88239d52d93df8ca0fd4484e29c3f55d59d52ca1", "ref_doc_id": "b0cc440b-faeb-45bd-8abc-aedbd70dad6f"}, "835974a2-24a2-4800-86f8-1fe649a90d8b": {"doc_hash": "abcb8e9976c111de827957faebe98be10ac9189a4ac019706b046986394dc52a", "ref_doc_id": "69d015c4-ad55-4766-bb8e-cdc41cf1939c"}, "97d70283-d2ee-400d-a365-ca24910d25ee": {"doc_hash": "0a85ea7abd0c0dec51c34d26fe44342ed0e7146770d4fdb2682393205eadcf0e", "ref_doc_id": "ebe28150-bf68-463f-8ec5-d3f9ea36c4f2"}, "124c7cc1-1e79-465e-96e6-3204ee9e22e8": {"doc_hash": "3dd86f597954ef8619d0584156eba1d19f56e14b200191a343de81d7877b4e03", "ref_doc_id": "ebe28150-bf68-463f-8ec5-d3f9ea36c4f2"}, "06d8f725-85d2-449d-bab3-8b125098a1e6": {"doc_hash": "b61158a0073d91fe31311df44fa6cfb4a3e488955abe36f9654830af53a44da3", "ref_doc_id": "ebe28150-bf68-463f-8ec5-d3f9ea36c4f2"}, "2c55c2c4-14fe-4d62-ab03-8a4088fda61d": {"doc_hash": "63464c2fbe9de1824938f173cd540b79ede288498fee86ff61899d695d90e146", "ref_doc_id": "ebe28150-bf68-463f-8ec5-d3f9ea36c4f2"}, "6aabec7c-5715-4658-8372-73523ac1f21e": {"doc_hash": "98b6c90edf0dcea538f7f6d1a218d1a525c8bbfb5a375fd6ab314038f970fa22", "ref_doc_id": "ebe28150-bf68-463f-8ec5-d3f9ea36c4f2"}, "28f2a888-7fac-418e-b0b1-88a95f027629": {"doc_hash": "bbaeaeb7364d3c374caae5eaf3cad3a79052dcb4234bbf04a6e9035dc2293123", "ref_doc_id": "ebe28150-bf68-463f-8ec5-d3f9ea36c4f2"}, "012ebb33-8736-40e5-9703-50b4e3116c8c": {"doc_hash": "d4b5cceb475b430191e6e0822ae1b38b5cac4b8c20b82a3e5ef5799ee8d29b3f", "ref_doc_id": "62ef9d97-c35d-49c3-9a44-7f8b2549c997"}, "09641bb6-cd92-4394-a8ea-1a89d405b5a9": {"doc_hash": "d6eede39f01dd35f13fadf23afe0274c4bba4333d19802e46b9237db06465595", "ref_doc_id": "c4c3862b-7043-46ad-8f44-1e55f33861ce"}, "e1c470a6-7e81-4257-8fe2-ce4733cee212": {"doc_hash": "7d2027831bfffae60724f278f8b35be04ef137e70eca8217f65a4b1e733fbb10", "ref_doc_id": "c4c3862b-7043-46ad-8f44-1e55f33861ce"}, "a74f8232-a40b-49e8-8ea1-80b6d317657d": {"doc_hash": "d926e9fc432d890e4efe335d639763ea4bc3a3270ff76b64d26b59586f3be179", "ref_doc_id": "c4c3862b-7043-46ad-8f44-1e55f33861ce"}, "49efe6d8-dbd3-472c-b0fa-e63078e4ca86": {"doc_hash": "cc298a3eadf0344a1eb83e7c8eb3aaf3c4debbf2fc71e0bab8a8f8e5d5d9c25e", "ref_doc_id": "c4c3862b-7043-46ad-8f44-1e55f33861ce"}, "2de9926e-b19d-4491-9b78-171949d004ee": {"doc_hash": "e3f54bacc8d29cd67564b1c9ec2ab1ff5dc6614e73769f67ca8f836fcf148f8a", "ref_doc_id": "fcc96376-d413-46f0-88bc-b942a88b63bd"}, "7e9ae8e3-727d-4321-bd2c-3c377c514ea9": {"doc_hash": "c59e709b8ea670a681533c1f83d35a78829df5cc6041329a1ea36e5cdac28739", "ref_doc_id": "fcc96376-d413-46f0-88bc-b942a88b63bd"}, "bfbd826e-2364-40b3-a4db-39846f31ad69": {"doc_hash": "45622c72feff9ac213c2ca27be485f7d84ed6e7af26aa8f5121171a507c58db9", "ref_doc_id": "1ce79cde-fed1-4773-80e3-e95041dde82e"}, "648f70ba-78c2-48f5-aafd-42c0635692da": {"doc_hash": "4fdedb7064e1058ca932cf40777b90cc83ddd119cd602f61f2c06e695b05fe4e", "ref_doc_id": "6d2faec1-dc02-45e2-b2d0-f717276c38a2"}, "a6531104-356b-4125-957e-c202d5f23eab": {"doc_hash": "b6bf771edefe1430f131e78e2303e70d0f0fb8c774c2bfb045edeb1ef444e7fc", "ref_doc_id": "6d2faec1-dc02-45e2-b2d0-f717276c38a2"}, "26048846-c140-4720-b5a6-a8d00fbb245e": {"doc_hash": "a009c2dd3af051249eff05b2a919b363d793ead1098c4ddbebbe229e347835cf", "ref_doc_id": "6d2faec1-dc02-45e2-b2d0-f717276c38a2"}, "c9000f17-ab68-43ac-a16d-7b1d2bb1d615": {"doc_hash": "58a07f2ae374a64bfcb3b65ae170bb88e631aef076a9a3309eb9e6b1795ddcea", "ref_doc_id": "6d2faec1-dc02-45e2-b2d0-f717276c38a2"}, "7bd4cf3d-d3fe-4651-b8a8-2ecf4698efbc": {"doc_hash": "a38283be78a35cf6a7d329c4f17445d3f92cae504d30e4319689162def0aae34", "ref_doc_id": "6d2faec1-dc02-45e2-b2d0-f717276c38a2"}, "6324fffb-24a0-49c4-9f14-359decea4f71": {"doc_hash": "87b974f60b681b3f2afe0e91654e5a23e801ff8a7689a694eed86a35625eb895", "ref_doc_id": "6d2faec1-dc02-45e2-b2d0-f717276c38a2"}, "5a6157cb-3d3b-419b-acc5-4b8b79556bc4": {"doc_hash": "038edd5d048ef4ef20d7fdd198bdcb50f74d8c039660c6d761770dcd178999f5", "ref_doc_id": "6d2faec1-dc02-45e2-b2d0-f717276c38a2"}, "474c6ace-2544-4460-8899-e8eb37c50731": {"doc_hash": "6faa268c32f2d46ec86f4b10c45b9e52ee184894834fec8ae828c8e92f380927", "ref_doc_id": "6d2faec1-dc02-45e2-b2d0-f717276c38a2"}, "dc7d43a0-8c11-4fc1-8218-b2e38df923dc": {"doc_hash": "b95939eebc23f7ee05a99eddbaaeb25fad30a2c0fc20633a1b0b6c63ae5c6b3f", "ref_doc_id": "6d2faec1-dc02-45e2-b2d0-f717276c38a2"}, "99cf6d99-9d17-4a02-b017-b1dc6e53bf8f": {"doc_hash": "a57b97af1d5281761a75a20260a31f92ac1685fc37b569ec5df45bf389f7ded1", "ref_doc_id": "60c826da-a142-4d7c-98b5-164d6147c958"}, "707d4435-24e1-47d6-83d2-c8d4e04107e6": {"doc_hash": "139f03234ca67cbbad41cc89709f2bb90e421fbca0a6dbdc4bcba4d359f1db53", "ref_doc_id": "60c826da-a142-4d7c-98b5-164d6147c958"}, "e24b9ef2-fe67-4f6b-8ced-74c07342a56f": {"doc_hash": "0b72c25d60da8d045fb640565cc52c9509f3c3f51a3d10f69fa9d2575515b100", "ref_doc_id": "f22086da-eb85-4063-8fd5-cf5bccbbe89a"}, "27b1ea65-ee6b-4e64-a7c1-ff435aae9280": {"doc_hash": "1343ccd31ffdc474daa08fc4e66b2c3c767f5a5785698c65f79f891c44acd21d", "ref_doc_id": "f22086da-eb85-4063-8fd5-cf5bccbbe89a"}, "6d747fab-eb37-4e44-b049-ecd1617dceec": {"doc_hash": "42d97ad59b05851b8e7f9e5ab9e4cacb8c76691fb3918955f7c748dc3dd7d681", "ref_doc_id": "5dcdc40e-667c-4b65-b20f-971650733e45"}, "4149ce86-92b5-483f-abc8-786721a02f2f": {"doc_hash": "555165b89285b4c2c48f888e20a18f210c3908a0c4367322a4c91bcbbb72705b", "ref_doc_id": "5dcdc40e-667c-4b65-b20f-971650733e45"}, "392676bf-134a-4404-b01c-ed7dfe3d36c6": {"doc_hash": "4dcb992f7842a581b16cb7ce2063660320d7817aac0a897bbe5d1afb2a41ce3a", "ref_doc_id": "5dcdc40e-667c-4b65-b20f-971650733e45"}, "10641147-2345-418a-be03-ff66dab0be89": {"doc_hash": "6bce4b59c20209f3a56b408ec144cee6bbd554102640ddaceabd431af5c7b814", "ref_doc_id": "496312c5-c600-42ef-aed5-9bee50828da7"}, "f8043767-44bb-4417-bc39-63aac7d2455d": {"doc_hash": "bbf33316b2b2b41caae58d196b5323f86e75923728bdaa774817fd7c082be608", "ref_doc_id": "496312c5-c600-42ef-aed5-9bee50828da7"}, "be692c4e-1ce0-46eb-834a-bca8c2701ddc": {"doc_hash": "8bbfb8dd0c6ac93e9511bbf0bf69e6578bbecf9ec8d67fee79db23ce473ee4c2", "ref_doc_id": "496312c5-c600-42ef-aed5-9bee50828da7"}, "d0cd881a-d366-434f-807e-5e90f774ea04": {"doc_hash": "92325b00e65b55f9e152cf9972fa5506c5d5e3a23b9318a4dedddb57b4bd7214", "ref_doc_id": "3de7fe87-a52d-478b-a9fc-5a7aedeaa802"}, "50b6d940-fde8-44be-99c6-4991d4ddf00a": {"doc_hash": "2acc5bbeefe7c850b18aca762ecce6e99793eb920b3fd65fc6fd3b361a9c8c6d", "ref_doc_id": "3de7fe87-a52d-478b-a9fc-5a7aedeaa802"}, "b1db8445-be8c-482a-8968-2f08de082e0d": {"doc_hash": "e026ab77590549d97cccaf2448cc0def506f98d154f2959d7df77fe595a2875c", "ref_doc_id": "a601e842-775f-4005-894a-2388164b0f64"}, "137a2ae1-57b8-48d7-b204-f27cf812b3f2": {"doc_hash": "4f805c6bcc998ee560f483373e615a47e7b03dd2dcc483b5a815a00cad58143a", "ref_doc_id": "f17b1fbf-f81c-4550-bb4c-f75a5efd33c8"}, "a5559283-5081-4ce1-b974-028abc7279e4": {"doc_hash": "05b8580d231cc1ad3dc1179a294da67596291939e36369774231f68cb8681b51", "ref_doc_id": "f17b1fbf-f81c-4550-bb4c-f75a5efd33c8"}, "849391de-8a2d-4bcc-a37d-6209c3ce7b4d": {"doc_hash": "9936fafe606d601cff9f0d045c8966684ff41d1f23e60732683044d4b99fa076", "ref_doc_id": "f89ef0f6-e131-494d-a549-316d80880169"}, "04763b8d-2d37-4c95-89d3-bcb6c789c1e7": {"doc_hash": "a05a5aae20578b7e3c878f7f8c8f35a432a1e9a0d5cf92ccf64b43ad4b68cc7d", "ref_doc_id": "cf30a470-80bb-4a2a-9bca-a65d5a146b4c"}, "5eb9e399-2e9e-429c-a165-fa1cf2604846": {"doc_hash": "1ac2014800852d8425e2e7b370befee12a815dd03cf0d78e117ef9639a3fdcc6", "ref_doc_id": "4c2d1863-361c-4f9e-851b-54a7aae46733"}, "d8ed84ee-dc06-4010-8a94-4b4dbf8c6680": {"doc_hash": "22888115f4b7d82cfa034635aea5df210e9a14259261833102ae2fe685c608a1", "ref_doc_id": "4c2d1863-361c-4f9e-851b-54a7aae46733"}, "0f1e2863-9fa0-43fc-960c-550139e1d589": {"doc_hash": "7b5019ea921b0c1dc37e2b1625878582891ae5ddd2c5b16ac6ee202abc0ceb3e", "ref_doc_id": "3dc97245-9631-4dc9-aed8-aa005eeb830e"}, "1c937164-4647-4606-8eaa-3af8e73ace38": {"doc_hash": "415d242bd3ebb009ee6e1e36e8e01f3294126c29c00bd30ad894356cb7b272e4", "ref_doc_id": "595a8385-4215-47c3-a97c-9fd17f9ea4a6"}, "f6691c51-e0c6-446e-812d-44f86398dd49": {"doc_hash": "572a98d2abd456fc1c57c57c8a13db74c7c822ff50224b42375e66576afcf507", "ref_doc_id": "595a8385-4215-47c3-a97c-9fd17f9ea4a6"}, "aa17b387-561a-44fe-9021-3eac7ac1e751": {"doc_hash": "abc58a5c113e5460ee8010bb99583b485eb4ee7744e4b9bb2de711ad03ea77cc", "ref_doc_id": "595a8385-4215-47c3-a97c-9fd17f9ea4a6"}, "ee659d7c-60c9-4270-90c4-cf1d76fffbf6": {"doc_hash": "85bca07631943802ebf0dec6ce687ecd7a9d0ecb9d058208162afb7f39216730", "ref_doc_id": "fecd60e3-8891-4582-85ba-313f1ccf2bbd"}, "a122208c-2396-4d9d-94a0-7c5cc76e729c": {"doc_hash": "81cb118a8b675fccbfba0271d5e03912aea7cbe9bea8c8ce9e439c1827d92d31", "ref_doc_id": "fecd60e3-8891-4582-85ba-313f1ccf2bbd"}, "35cae732-4792-4703-a0c4-ed9fd80989e3": {"doc_hash": "bf9a7635443279ed827e0c102796148a144b5f8b7c9c754db7339c4f3625d6ed", "ref_doc_id": "4f963b0d-a804-41b8-8da4-04b643e49d21"}, "37f9d637-e329-4df9-ba9d-89bc728531f6": {"doc_hash": "16630705f2d49bba504e14912c344c264f90958142e6b1f17484fe9d6f3e1cab", "ref_doc_id": "4f963b0d-a804-41b8-8da4-04b643e49d21"}, "152a3c51-4ad9-41a9-b8e8-48a25d211827": {"doc_hash": "e04ed01fe11ee027d4f9070c4cbff688256317662ed15bb869f326b3cd63f725", "ref_doc_id": "4f963b0d-a804-41b8-8da4-04b643e49d21"}, "46a9eaa3-1d99-43f2-a655-a8dc9d1ff6ff": {"doc_hash": "fdc4136c07bc5f37c8933ab5c7b67c33f9bfbe6e90694da1f74fc41b375e5642", "ref_doc_id": "4f963b0d-a804-41b8-8da4-04b643e49d21"}, "7ebfc079-0975-4ea9-84d2-3e88b6e57d46": {"doc_hash": "60a8a1b168ab67acbe2540894ed099c7e942e7ccdaa5845c32496942b35f07b8", "ref_doc_id": "4f963b0d-a804-41b8-8da4-04b643e49d21"}, "715aaf34-5c26-4349-9ca3-4139daaec03c": {"doc_hash": "4df9af8c4839ef7ff0ca3d6f7f6c20b07bd39cd19bf82c1f5e537af38ee12e32", "ref_doc_id": "4f963b0d-a804-41b8-8da4-04b643e49d21"}, "9093c401-5267-486c-a024-5c0c75ec1bf6": {"doc_hash": "1301e9f952e910301c073556662a60d7836a14de037254189e8ceaae2748afa7", "ref_doc_id": "57155532-a6e6-43b3-a942-88027d26a07f"}, "4ec18610-0837-4aaa-9d9e-0cfda775b2b5": {"doc_hash": "88178a08cf08998966dbb7da47770b589e6b25243fb222be7212eb5403855ad0", "ref_doc_id": "2718b056-d529-4747-b7e5-99231d1568b0"}, "966b4c54-b23e-4339-ab05-f68340e1be87": {"doc_hash": "23171823c9dc7c1357b2a17410cfaa467353e49511214565d47d67b8b89d4090", "ref_doc_id": "2718b056-d529-4747-b7e5-99231d1568b0"}, "f423cbd7-60de-4dee-9a53-67957a717878": {"doc_hash": "b7ad30dbc00155afae8e749cd71595313dac4ecfb7d687038b044e6d22c56ae5", "ref_doc_id": "2718b056-d529-4747-b7e5-99231d1568b0"}, "afbe5809-1355-4e1c-a61c-ea60390a2c23": {"doc_hash": "a8f8f12f9b1dac2f581b935e900c1ab19c7f6172ef156c4b519cdf346613ee8a", "ref_doc_id": "2718b056-d529-4747-b7e5-99231d1568b0"}, "05088bc7-0763-4c63-a245-0ee5394df08b": {"doc_hash": "7c8b023e4e1e03c8ce136e73b61c4e3e0ce5429a26bdb7d3e3e2ef8db860e885", "ref_doc_id": "2718b056-d529-4747-b7e5-99231d1568b0"}, "1194b8af-491d-4dd6-82db-e03aa4419da0": {"doc_hash": "9c45b456ef01fc4120d56d046aedae49be7f3ff531967f6486b03fce22a484a1", "ref_doc_id": "409732d7-0632-41dc-98e1-8e65dc9439c9"}, "bfaab4c0-ed2f-48e6-8e11-27f1ecbd96f9": {"doc_hash": "6b3db592c625e651dbed96b2b052e15e9ab685844f715030bdc0618bdc7b4c0c", "ref_doc_id": "962baaa4-df10-4228-a65a-dd50e9768fbd"}, "fdfd4afa-09f4-4f69-9e5b-43ced200bbe4": {"doc_hash": "fbd079b80bfada90eea5b07c99df8aa606d6c960f20b11a449e2af242f12bd1a", "ref_doc_id": "962baaa4-df10-4228-a65a-dd50e9768fbd"}, "f81006e0-9484-4c3c-88f7-9546db330edb": {"doc_hash": "8c15857d67cc8f29e8e45bca990a66fa3a66a7219a6a72bf535c8c0868c332e7", "ref_doc_id": "962baaa4-df10-4228-a65a-dd50e9768fbd"}, "2bfd619f-da29-4a51-8b1d-f8e36dec7b71": {"doc_hash": "28fe6001b901697dd690fc7555d7be47037daddeca006bbec74ca19b7dd793f6", "ref_doc_id": "962baaa4-df10-4228-a65a-dd50e9768fbd"}, "0a5178b6-41f5-4e2c-9a74-6a92405a2f1c": {"doc_hash": "75052ee756ce77bdeaf9421ff4bca8a6ef89a21bd650d92d374f87ece184cf51", "ref_doc_id": "962baaa4-df10-4228-a65a-dd50e9768fbd"}, "ebddaea5-6d11-406f-9708-674df1eda2a6": {"doc_hash": "ce93cf408ff31958fc83eab63d4d98a464fe941b593a2c37ead748398b6022e3", "ref_doc_id": "962baaa4-df10-4228-a65a-dd50e9768fbd"}, "6b4c19b2-12b2-4e23-815c-d6220b48f432": {"doc_hash": "8dd0770a4972585747b4b266a181e8ff3a718e4b1a038bbf4ec31cd5048b5a01", "ref_doc_id": "8b848a50-4f1d-4947-bd7e-04e70e2447de"}, "06e53a47-b9bd-475a-abf4-960e18a2869b": {"doc_hash": "3c14bf1e5365c812116544448acf1ebcbfa6a15a99134ba376bf5cf945908db6", "ref_doc_id": "2e9d433d-1b65-44c8-8816-44341bb5aa3e"}, "d45523db-2e2a-4449-b658-733d4a3dca51": {"doc_hash": "0d1003bf86181e3a63a2c56ac1e09b8abd626d52293e53dd1efc8ea280b65db1", "ref_doc_id": "ca5cf40e-22ea-44f3-a8d3-2ffb525bff69"}, "15d816a8-f82b-4460-bd03-f166caf22100": {"doc_hash": "781fe88ca6974acb6d5984852793c65f53c420f6a9a52b8939c2af58ea7a104e", "ref_doc_id": "ca5cf40e-22ea-44f3-a8d3-2ffb525bff69"}, "867e788f-0039-4ae0-9549-98c03e9b32d4": {"doc_hash": "32006a356fa88c63cc7b824ccd15cd6fa1d601e05cbc492523b2c2b63c7197f5", "ref_doc_id": "ca5cf40e-22ea-44f3-a8d3-2ffb525bff69"}, "20ae6d5a-e5d9-434e-829b-29090543b5f1": {"doc_hash": "917c7a3a177b7d2ad52f212e56c0229e55d1f6e2053c085c4d65cde1c44bd85c", "ref_doc_id": "725d28dd-c7dd-418b-bafa-04732d5fd0e6"}, "0f2dd648-82f9-47cd-8154-4610f39a66bc": {"doc_hash": "5855af4199752eef5ae1cfcbe10522cbf49ade23982bbf717557d02747bc3927", "ref_doc_id": "725d28dd-c7dd-418b-bafa-04732d5fd0e6"}, "86bdedd0-a7ba-47b7-956e-44e9e00e0845": {"doc_hash": "c99faf75bb2152f3be16cc346ef3f0198882adfb3b1095c8e6306d47c489700a", "ref_doc_id": "725d28dd-c7dd-418b-bafa-04732d5fd0e6"}, "a1deb5dd-79e4-42f8-8a93-8104130862f6": {"doc_hash": "b957f3bd2af1e63e7c63fe44780e54f0b121ad86f6927f3b8211b16575126409", "ref_doc_id": "40f388c4-6306-4da0-9245-1ae99f4ede53"}, "7d2ddc84-11e5-4ce3-9e7c-df49cd17fcf4": {"doc_hash": "d346521f6417fba4351179e61f1d928582f21877f69aa0fa14c69302f2abfd71", "ref_doc_id": "40f388c4-6306-4da0-9245-1ae99f4ede53"}, "9bda812c-552b-4723-b892-0759b90a7a75": {"doc_hash": "d819ed368b0f3f7d15e99753be25d5fa7929f7e6d9bef4176ad4ea6ffabbac8a", "ref_doc_id": "9faccdf2-047d-43cd-94ee-3e8170b5525f"}, "e1d79949-c453-4d60-b898-e8f66c9101e3": {"doc_hash": "7d8e5df0825e381d00f0a1eed3b5f73b3c6fe3d9726d1822203d935c4ffe5f44", "ref_doc_id": "9faccdf2-047d-43cd-94ee-3e8170b5525f"}, "6dc9be5a-5415-48ea-b0b8-fe64f812b310": {"doc_hash": "3f303d664a99bf661bd680dd318da8a8316d2126e7f31475968a9a83771a6495", "ref_doc_id": "9faccdf2-047d-43cd-94ee-3e8170b5525f"}, "b134b220-ae7b-4e1b-ba53-c883f050369a": {"doc_hash": "9324e64bf6e163693632079afde3bbc4505f88a738c00a3a06e53a428c68c679", "ref_doc_id": "9faccdf2-047d-43cd-94ee-3e8170b5525f"}, "c6e3f609-e36e-47db-a3b0-53025bfcda74": {"doc_hash": "0496c340e9413e96960275b11a5900e4e6d4902a3e5b8c5ce058aadb446beb09", "ref_doc_id": "9faccdf2-047d-43cd-94ee-3e8170b5525f"}, "075b224a-faeb-4850-90b9-38a9a0bc0c03": {"doc_hash": "a09dc7ef16ee91938213ef15714694afee86c3cfe3bc8d2284977cddf82d9e92", "ref_doc_id": "6cc15b8a-2434-44ae-b2f8-11256476f0dd"}, "ae3935c7-258a-4247-a9bd-f91f95fc4c5d": {"doc_hash": "ad10781fc365edbb9f2e4647904fb76a5fcde6db3940e347a6329015504395fe", "ref_doc_id": "6cc15b8a-2434-44ae-b2f8-11256476f0dd"}, "9edca1a7-dd65-4f0b-be37-29df5cc7b46b": {"doc_hash": "792142eaea0bc6ecc67b16402c7cf797bab16c250a2913db9ffbc9b22befdd9c", "ref_doc_id": "9aefe921-ff0a-4a54-a3e4-8fded0fc5e0a"}, "16f27b48-517a-43b1-9ecc-d0d245b9c4e4": {"doc_hash": "e157a5b71e6917b9598ed8f7b944a94facd9ec766604a0dd1a8d2bf8786610bc", "ref_doc_id": "1a9fadcf-88a8-4b08-af74-4b7ee784977e"}, "5da7433a-e00a-4d5e-9d6a-362e6dc7763b": {"doc_hash": "f12740f7bf4a62f5b95140edb3207351448883f0f7d0c353e15aa2283924b1ae", "ref_doc_id": "1a9fadcf-88a8-4b08-af74-4b7ee784977e"}, "6ae6003a-9a14-40d6-b516-f695cf62d2ef": {"doc_hash": "1875f14a33fa6e9fd9ac084e80ca90270db4c40fd1113bb3a29da7118e1539eb", "ref_doc_id": "1a9fadcf-88a8-4b08-af74-4b7ee784977e"}, "9ce15126-b66c-4f12-b4ce-9dcc00f9a919": {"doc_hash": "72a709b6e8da1110dc7eb5192b17b604e6a3f8425b7a6f4aa17e636a371e90a4", "ref_doc_id": "3c584d05-8c35-45c4-a59e-3a5af8aeb69a"}, "fe7965af-4dea-4b8e-87e8-8bc9751c3e24": {"doc_hash": "eaad4a13ed002317e7062121807673fd4e0525e3e1c331c90fd66a386445abd6", "ref_doc_id": "3c584d05-8c35-45c4-a59e-3a5af8aeb69a"}, "b4e69408-d4cd-4786-8bb6-3cd38d7110f6": {"doc_hash": "cadfa538cef01c3c0904522eba59e37ed830ea19b73d56d53d481266ebf17b15", "ref_doc_id": "69c174f7-e4eb-4645-a264-dc7e67c0c0c2"}, "c5dbe178-0bb3-4053-84cb-3f03a5cae431": {"doc_hash": "86e7bae8785c35813e4b69a927f8a7e7b62a7c8ccbef0984981b7bd907af32a4", "ref_doc_id": "7b3b5968-135a-4da1-9d64-63ef173f1bee"}, "6b5a512f-6d73-462f-9d25-48d2707d58b8": {"doc_hash": "ce3ce209985226af3bc767799383a28e91e09f4f651705c865362442f9e3a45f", "ref_doc_id": "45aa02ca-e382-47db-a645-691fd2e7dd64"}, "85f5b39f-ff1d-4965-87ae-8a8608327621": {"doc_hash": "eadc0601bafea36024b62bb6215480d5ca2397132d28b558c4d0d0672fb3b04b", "ref_doc_id": "08ef3069-8708-409f-ac7b-20ebb84dfd90"}, "cbebbd4c-510f-4d29-b239-80db8974e697": {"doc_hash": "070cb0216501b77d1a5630dec20c9354c6a4e0dbcadb9ef203a60b913f82af88", "ref_doc_id": "cbb2b940-e2a1-47b4-b70c-deb8c04dca1e"}, "6535ed8b-ab4b-44b5-bb66-3f96c692c123": {"doc_hash": "60cc46646d76fca0ce5da63af95d41c71351a0d646da77fe31b4c35caaae0138", "ref_doc_id": "cbb2b940-e2a1-47b4-b70c-deb8c04dca1e"}, "eab25dee-6156-4ed1-a1a9-3a6dea84dadc": {"doc_hash": "9c3ccaa422143bdbfbec31bd90e3b4660b689038db216f1416b2b2e69abbfda2", "ref_doc_id": "cbb2b940-e2a1-47b4-b70c-deb8c04dca1e"}, "8d2a217f-eabe-49a1-8e3b-6430ee836314": {"doc_hash": "eeece506d63ad9189ff7681b1ce0f2deffc8845ad6e71e35fc00d7ccc07e7adf", "ref_doc_id": "cbb2b940-e2a1-47b4-b70c-deb8c04dca1e"}, "fd795802-c29a-4920-bbd0-ed8f90143a8d": {"doc_hash": "76886b78dfb71550dc6b0ae6c4a222d435a05811ecaf4c880bb4d34f50d58277", "ref_doc_id": "cbb2b940-e2a1-47b4-b70c-deb8c04dca1e"}, "feb3e321-18bf-4515-9cf5-3635cddd0033": {"doc_hash": "c6ff75d78a6ee54602c8985ef6f578d54d45812f39cdd4257e580ff8fdb5f7bb", "ref_doc_id": "cbb2b940-e2a1-47b4-b70c-deb8c04dca1e"}, "8c33c8b1-f65c-4f4b-8af6-205a2ace7eea": {"doc_hash": "bcf666d3de30d6300754eabbcc4344b252850e22eb639720a51ae4bb3101775f", "ref_doc_id": "cbb2b940-e2a1-47b4-b70c-deb8c04dca1e"}, "43dad33a-9752-4c8f-bba3-561a11ed52db": {"doc_hash": "2613af2ed59144c40175e2f8e183ab04504925a2aa59afa95eba2c047c86ac54", "ref_doc_id": "af92ea33-101d-4c53-9ee7-e49d2fca3886"}, "97a4caad-df27-4600-bf6a-2a48a00166f1": {"doc_hash": "73515f6c73a3a9bf9b5cc2527977819c83534f730fa38cff04b3d62156277c2e", "ref_doc_id": "af92ea33-101d-4c53-9ee7-e49d2fca3886"}, "12b7bb86-c8ac-4e81-a38e-5aa3f4b5a111": {"doc_hash": "8f180310a2af7d2582abd754b82285d9b4efb86c91f6acd8166204222280a0fd", "ref_doc_id": "52970540-8c82-4048-8a12-07d33a8416bf"}, "023bc0a8-6a61-4f36-974d-371936b38a2c": {"doc_hash": "74377702bba77a395047b2c3da5941299e98a284fdb8bd75085fca59a817bbd5", "ref_doc_id": "7aa81704-b92f-4d01-875d-4132a2da7148"}, "23cd5d40-952c-4731-b2d9-0084ca938a5c": {"doc_hash": "ed38e14c0a46899c2edc181d12fc4ac87d86423d4ec88b90d7cbbbd2e87d485a", "ref_doc_id": "7aa81704-b92f-4d01-875d-4132a2da7148"}, "8a9390dc-0962-4c0e-873e-a736ec323419": {"doc_hash": "8cec29ef760d32b03ab3d057d3cc8825a4e1ae3f3048c6b6df6f01e183414687", "ref_doc_id": "7ef6172a-6e7a-4f03-b01c-df2aeff666ce"}, "26f668db-8470-446d-bb28-b11cafae939e": {"doc_hash": "f999b4cd81032f1ce1e45d92f4e3d5a909fc32246a6ee102610dae869c249b32", "ref_doc_id": "793a37b7-3c84-47d8-a51e-cd66a09d0150"}, "32c6f284-2718-4373-ad5d-0abd50743265": {"doc_hash": "43aa44f76499947dfdc0cd60cf15ec7555c81587eb9ff9687a9099bc0f51c430", "ref_doc_id": "793a37b7-3c84-47d8-a51e-cd66a09d0150"}, "4a8fc2de-9da8-491a-b0ff-44cf94954797": {"doc_hash": "8c511ba69ba3b4e8e4ef8a1da2d79e2218d7e5543f5caf44b527a200cc4e0727", "ref_doc_id": "793a37b7-3c84-47d8-a51e-cd66a09d0150"}, "e6633e68-de8e-4cd8-abca-018180f98a5b": {"doc_hash": "ce96b5d3723c13a31de716d5115855d380f3b76c8f032cfeb3f07821ba9829d0", "ref_doc_id": "793a37b7-3c84-47d8-a51e-cd66a09d0150"}, "628d0f2f-665d-44e8-9c0b-2982b6fb2960": {"doc_hash": "9b79898e226c4cfb6d0696dda356b77786ab09e712863b58f850163fdfdf5d84", "ref_doc_id": "793a37b7-3c84-47d8-a51e-cd66a09d0150"}, "5f4ae3e2-1c7d-46c6-a3b3-be306d075c07": {"doc_hash": "d29d6c1b0a42922745ee0d5377ecf7bb3d41a1a931f297e06f830a19bc065ae9", "ref_doc_id": "9ed122ca-445a-487c-b154-135cc4e4d35f"}, "482ee1f6-d213-48b7-acbf-3918dcfa8b06": {"doc_hash": "f69edbea9e1f976f19310ef6a7fe4af33f63cd4a725b97ec89efd80c348339af", "ref_doc_id": "9ed122ca-445a-487c-b154-135cc4e4d35f"}, "a81bd2da-b118-47d5-85ec-c8a81e1c3b54": {"doc_hash": "9ac1d88c04c5281c0dce33dcdfda34583b0542b210a352ca90f1193626fde991", "ref_doc_id": "a39db65f-0d48-4d96-8eb7-5322272e1128"}, "8cab5ed0-f2da-4a4c-a495-a0b6c3b7a87e": {"doc_hash": "55b097abcbdd6906aa175ed50372a8c3872a093be2b9fcf260cd81c07a93d0f3", "ref_doc_id": "a39db65f-0d48-4d96-8eb7-5322272e1128"}, "5d6c3873-a5c2-4703-a819-a78b3af41701": {"doc_hash": "c59c0fb435dd32cfb2691f8158c334c801393b8f952a6cde7715f126511ca433", "ref_doc_id": "0cc251ea-a59f-4243-8304-90086aa9686c"}, "e682f3e6-d548-48e8-ba40-6a48a9c8d4f3": {"doc_hash": "c9e9b39b87c94ab400de7d8f4a1824354c0b1cd5e40b8f1e2ce105d18fc1e353", "ref_doc_id": "8f9936ee-169e-4574-8656-d299981fa7da"}, "bd3e84e4-a6ec-41f9-b033-16dc97a28c89": {"doc_hash": "cfd58e22cc8424a738dff6dfb0fcc47e275949c7fa1dcd3b42e7ff0ecfe5b457", "ref_doc_id": "8f9936ee-169e-4574-8656-d299981fa7da"}, "ae523167-b53c-49ab-8937-4894e4fec3dd": {"doc_hash": "4e2b962e8e9052fe6e517d19964a0677dd41d89e5792ee63ce3f45264d2edfe4", "ref_doc_id": "8f9936ee-169e-4574-8656-d299981fa7da"}, "517e8811-abe8-4a6d-82a0-8fd2adc7bad1": {"doc_hash": "d391d44ee48f01cda92c653de34f99dffb322f88ff0f69ab943cccf1f127f31d", "ref_doc_id": "8f9936ee-169e-4574-8656-d299981fa7da"}, "210051c0-0aa8-4cb2-94ab-eadd9c662eda": {"doc_hash": "d38ebab463a91be8dc8870182cdf5c7f0e91812e31649baaca5dd45e43d135dd", "ref_doc_id": "8f9936ee-169e-4574-8656-d299981fa7da"}, "29460cea-5d74-4157-ba50-6be64559b5f6": {"doc_hash": "16aab6daf6d819abceb1c1107c70075461b37f69fedb97838ea426948a123869", "ref_doc_id": "c9e7554b-bd9c-4c68-a77f-ceb5516df83c"}, "8882bc5a-e105-497d-b299-3b47124917cd": {"doc_hash": "431141115e7f9de38ce5647c012e05884b8c8283daee4441883fdce0eebff674", "ref_doc_id": "7e5f61a6-0dfb-42ea-9cfa-8628653ea453"}, "d97f5e70-97b4-43cb-959b-bd0d2830d149": {"doc_hash": "d8323b546bfb358735d5d6171e3f708d47e98f5c1345921c54441e23e9f1c912", "ref_doc_id": "ecd01a99-7021-4bc3-89ff-81d8f1292fdc"}, "60e7a63c-1616-4f2b-922b-d8343a4e41fd": {"doc_hash": "414c4ed2701c0c953d31a050c91bf85a42490d3ed778149cb352344cb0f0ec39", "ref_doc_id": "ecd01a99-7021-4bc3-89ff-81d8f1292fdc"}, "fbbc87f4-0967-4155-a499-b6825980b154": {"doc_hash": "9b467774e94db18bda35066777567c368fdd921c02150a69975b09edb8a80d38", "ref_doc_id": "aec38711-d522-4e77-963b-c5c04c42dc11"}, "9abb4415-c6d1-4044-afcb-2172852160a7": {"doc_hash": "e57eb87d15254cffa7f1d496361800c91e00d89c25adbbe8695caa2d18d4470a", "ref_doc_id": "aec38711-d522-4e77-963b-c5c04c42dc11"}, "3ad5d927-76c8-4517-967b-fa97eb6018a7": {"doc_hash": "57b0f666ee3fd46436908520b4c350c96368337e5a4bfc86f9c763a0538c6e04", "ref_doc_id": "aec38711-d522-4e77-963b-c5c04c42dc11"}, "af7660aa-36d6-4ec7-9574-5c6cd45a7051": {"doc_hash": "50904980fcfc45188859ae9be145d7628a1a5212646c43819636777ae12d8f24", "ref_doc_id": "a671ed6b-fc0a-46c8-a025-f254081a912d"}, "29112f79-2efe-47b4-98ee-1ca42a51b22b": {"doc_hash": "e7fecf328c3fd36fabde7d23a6ab1402e45283e937b6e0b2950bdc187f6bf201", "ref_doc_id": "d53f67b5-31c2-45f9-a2e6-4b98b9d4a42a"}, "70fdae85-b18e-4727-929e-daebc4fcebc3": {"doc_hash": "943875921f4f1e03158b58d46f5448a71e4ee9444528e58f817ce9418acf6041", "ref_doc_id": "d53f67b5-31c2-45f9-a2e6-4b98b9d4a42a"}, "ba01a406-8226-4bff-8fbc-ea19f88b5506": {"doc_hash": "7e8748ec6ea600ab5614c0051f2c8bc79fce540141925cd8b5b59e17b7ea2dbd", "ref_doc_id": "683786c4-178f-4b2e-baee-5abe59a82c0a"}, "8d6aa45f-5156-4939-98c0-6493a9bd71c6": {"doc_hash": "4e05e98131bd8bd8eb8e5b5ef43262a7a52debbb1358798918f598159fe2a917", "ref_doc_id": "683786c4-178f-4b2e-baee-5abe59a82c0a"}, "88063d80-3687-420c-91fd-5e74c6311e90": {"doc_hash": "ea7dc706d440b7fa0469f222f38f08b05345ef617fcf0bb0b9e967deff3a0ba7", "ref_doc_id": "683786c4-178f-4b2e-baee-5abe59a82c0a"}, "f2c00860-5361-4bd9-a8a0-7b26fc19a9d0": {"doc_hash": "953e1aa7b31926f3c4b89baf1223f849b034da802dcff3bc5d7a5775e13c40de", "ref_doc_id": "532f336d-e9b9-4450-9705-2794d62bf713"}, "eea58d9a-695d-4dba-b86f-74dd191062dc": {"doc_hash": "89f170c9e4ec18b0da82ee9ec285fe78195057b78d61bbd570a2c1893c2a5e75", "ref_doc_id": "40737f00-e136-43d4-9aad-c857a31ff443"}, "4f35a78a-4073-418b-bb73-74afec88a070": {"doc_hash": "9e69bd43d792ee4f0deea0c0c0178e211dbfc11e6869700adaf4cb7f34f7b882", "ref_doc_id": "5f183f3a-e2e0-42c0-b387-99f8b24b4132"}, "57498c3c-af99-438b-8023-0fb25ed1dd93": {"doc_hash": "a37b34032270471ff4ddd5360192944a930a9ca4dcfba5e2f9bd6c932b96babc", "ref_doc_id": "5f183f3a-e2e0-42c0-b387-99f8b24b4132"}, "964904ab-31ea-4153-9d06-22411c6ae7c0": {"doc_hash": "4b35226dcfe226ce195682ee5d169425bee06ac77ca297c734eea3a8b42e8f30", "ref_doc_id": "5f183f3a-e2e0-42c0-b387-99f8b24b4132"}, "fc5bf7d2-e43e-45cd-a840-226089d40427": {"doc_hash": "5b9193abf30c42c64b1eaa6303a136f3f0ffc72becd1ab16d8e9f93f19095f43", "ref_doc_id": "5f183f3a-e2e0-42c0-b387-99f8b24b4132"}, "61ed0246-04c3-46a2-aca8-24eae5e438d2": {"doc_hash": "5919a384c09dc996f3f4f58c3e22885f7b36843fb6ba78fd125e58d0e49797ad", "ref_doc_id": "5f183f3a-e2e0-42c0-b387-99f8b24b4132"}, "91691de3-1f09-4d81-be2b-d2bc94e1bee1": {"doc_hash": "3bec9a1b83a02401b7a91f16fa37f909be2be915c18fdb5932c36425e3c406de", "ref_doc_id": "5f183f3a-e2e0-42c0-b387-99f8b24b4132"}, "89440a92-9dc7-47a8-a439-f7f1fa3bf68a": {"doc_hash": "fa49307d6e52c1100a8436083fddcd193117bed9f592b0e3df29ad01311d396c", "ref_doc_id": "5f183f3a-e2e0-42c0-b387-99f8b24b4132"}, "5870eb92-a648-4052-b7eb-65d3f4d3fa6d": {"doc_hash": "d377d13bea50ebd3cbe3ea8b784f684cdac38575f4d1ae67515a6317f7f9813f", "ref_doc_id": "5f183f3a-e2e0-42c0-b387-99f8b24b4132"}, "81a00d21-66d7-46c3-9c91-78f740483859": {"doc_hash": "8f2907b999b15b4490f893d36de894a6d96961d2804806c7b24779dd3bccf783", "ref_doc_id": "5f183f3a-e2e0-42c0-b387-99f8b24b4132"}, "34f5814b-1482-40dc-b2c5-c6c7c167ff8a": {"doc_hash": "ebe410a87bd98e832dd4f192cf9d6923b04823dc961dcf9230fc92ca6f7b7afc", "ref_doc_id": "5f183f3a-e2e0-42c0-b387-99f8b24b4132"}, "595d028b-96bf-486a-bcec-078fe74f8616": {"doc_hash": "73cdb7c76c5418cccfaca6e9b129aa8c9fd6c9a4676be4fe2bcfd8146a532c10", "ref_doc_id": "5f183f3a-e2e0-42c0-b387-99f8b24b4132"}, "f2a2d483-3213-49a5-9d5d-17507b1ac8be": {"doc_hash": "3b3f91484d407c93bcf7845f61d8fbb0295c15c6dadc55a54e896aa86887dae2", "ref_doc_id": "5f183f3a-e2e0-42c0-b387-99f8b24b4132"}, "ce96e6fa-0fea-42ab-a191-4ea329170c02": {"doc_hash": "d169dc035bef659db36b249543d30268e04173bcaa5ed266483e8fde0b4c9d79", "ref_doc_id": "5f183f3a-e2e0-42c0-b387-99f8b24b4132"}, "0a31dac0-0c7b-44b8-be39-22a21c4b5aab": {"doc_hash": "2c65985fcf702fee17127d6fac7dcebc11430b9c52e1fcd97ca67f609e2b9c86", "ref_doc_id": "5f183f3a-e2e0-42c0-b387-99f8b24b4132"}, "fea28a9d-ca32-4a5c-8311-2a468adfc563": {"doc_hash": "fed9d3864f0d434258f1f9097a38a80c1f97464a65e81219acbbc43cf01de83c", "ref_doc_id": "04c450f2-4611-402c-b202-7b2a25b3b230"}, "18aa502b-1c26-4e24-8a16-a7f2d034b569": {"doc_hash": "aef34c52c9271908237ef1b571d58897338a3ecd9c8a5c0e0b99a2c6e02c5cfd", "ref_doc_id": "04c450f2-4611-402c-b202-7b2a25b3b230"}, "c225d90d-8497-44f9-935b-0320c04c460d": {"doc_hash": "8ad87efa7989cc52bfd1d3da4d2fd76c7f66cf794e4653ec2e927d68f28505f1", "ref_doc_id": "04c450f2-4611-402c-b202-7b2a25b3b230"}, "0d2f7e11-8740-46a2-a850-da21ca1446fe": {"doc_hash": "3c1002741140a50dbe9aa4ea3549cb658e5d7b82502044147e529fa40456a4b4", "ref_doc_id": "ca36a375-9dc5-463a-9d07-3e61d4857f71"}, "a92e0f48-7166-4480-801d-f52fe23e7b1b": {"doc_hash": "0956237d05b400ccd3977e1dfe03bf9f8e1116135390812b25584f63e39b3d06", "ref_doc_id": "1d1a8cd8-b16b-434c-a441-ed945966649d"}, "c5c00d9f-1f49-49a3-bc97-114700b5e72a": {"doc_hash": "d2caed5815fefc6370f420908e0d4ee91058d0dc767a1ab3b6e91d916963413a", "ref_doc_id": "821d4e5f-b7be-4d38-91e7-94e5d254078c"}, "cccb3e0c-8d14-4b82-b5ef-a6a2ca2195b0": {"doc_hash": "e311112f1eb04344ee7a8ee1264e7b3640eb37c8cea3f5cfc6da9cd323d3e41a", "ref_doc_id": "cec55d61-1537-44c9-9238-3e755728df7d"}, "ed59fe60-c5b1-4631-bce8-11477c0dba25": {"doc_hash": "71829df6d443b8a51b3eb779480b8036a327a8113f6ebb11d92d0494fb770092", "ref_doc_id": "cec55d61-1537-44c9-9238-3e755728df7d"}, "e7e938f1-58af-4087-b299-d5e2f5e3cf19": {"doc_hash": "b1b6a72ba97f555a4f91732384d495cb99e62583693e4097965d1f09a948d7f7", "ref_doc_id": "3620b7eb-69dd-49ce-92dd-64e358223b82"}, "fec9a20b-23a3-43c7-8fe4-948cc59ca9c6": {"doc_hash": "54fef5a22f45bac4e3c1b28c6909e42344a29487b86b5de2f9ff128578cf87f8", "ref_doc_id": "58af216c-666f-427a-92ed-296c48f93f94"}, "f251f570-85dc-48fb-a314-137822e7bace": {"doc_hash": "91aca30edf44488e6229b9101dafd7d3d92c87932ee166507d4c2ee44d4098f3", "ref_doc_id": "58af216c-666f-427a-92ed-296c48f93f94"}, "8b358e9c-8e8d-431b-bd77-b37a39aa4997": {"doc_hash": "f74d2853e953bab772a1b8b3f1940a0fb69a62dcf44789c0602bf25c7fb3edcf", "ref_doc_id": "58af216c-666f-427a-92ed-296c48f93f94"}, "a96c892f-98a4-419a-99de-8f755b21c4c5": {"doc_hash": "0dd41289d263bdc87d6b62ed844668520a2d129c06023143b6ea63ea03cc1384", "ref_doc_id": "c5113269-d48d-4d2e-b35c-41ef5aebcc0c"}, "a89b0206-d0e0-43c2-981b-d4b69f7a556c": {"doc_hash": "5f618a5e185d1dd6ca5cabb1943d8404e6b36c942e4da800a1b45f6b613e08ee", "ref_doc_id": "c5113269-d48d-4d2e-b35c-41ef5aebcc0c"}, "44cc48a5-ca20-49c5-863a-ca45df072784": {"doc_hash": "c3d73c4933d9b7dab4ccc08dfafa111d649a05322915ec6a227aec5331a684b7", "ref_doc_id": "344af5a7-bbe4-46f7-945d-7ed459a11b12"}, "832010e3-d697-4b30-a1e8-f0b1ef412ad7": {"doc_hash": "ebd8bf8cb5bff8b079f05b05254c73f08a653ed8da5f6361887624564898519c", "ref_doc_id": "8a5fdb3e-0ae3-4ca6-84ef-9e0c874d06e0"}, "37c1be9d-adc9-451c-9077-9518027637c2": {"doc_hash": "c5bf445658206883b042e17458497a2a6e52681b5280a0327bbedb7c64228f2a", "ref_doc_id": "3657a5d9-3eec-467b-a2ef-34fba5d534de"}, "8431756a-9829-487b-a301-77563cb61db1": {"doc_hash": "fc112ff47543d442aed32d6f8c1db9aa5aca3c57f663e74115b98c015f54802e", "ref_doc_id": "2240882e-4d23-4bd3-b323-899e979e95b4"}, "59ccdaa3-539a-4cdd-9c45-9502acb15b2f": {"doc_hash": "ba4fab0e2da3f051cda140254488cf698a03c1791eb1285f58a5a2005a877705", "ref_doc_id": "542bf419-1582-4833-9f1d-1857456896b2"}, "ae9f0e24-9564-4612-bcc7-3a9fc336a706": {"doc_hash": "08ec7e93cca10e3a184ed52168dae375a15fc8b692246bf48337b416516b2e61", "ref_doc_id": "664f9c79-aacd-4ae6-b0d6-90aa1a6ef35b"}, "f717ef8b-6bce-4154-8e9e-64ab3610b444": {"doc_hash": "55251302b648a7a3ac9cb152408ed7c1883899a00fae2422df6426a80532041f", "ref_doc_id": "d19c23d7-2406-4a7a-982a-87e0797b8be9"}, "fd7cdfa6-a872-4d38-9304-07b8d0470979": {"doc_hash": "66153f436f230ef4af4236e94c591ec55ff43c4e5144ecd6a81d33edbd0cd618", "ref_doc_id": "30cbde39-197f-4005-9af2-82286294fd85"}, "efc12dbe-9fe2-43c5-b595-be3941b070c3": {"doc_hash": "605d6b0a75d4c83744e939ca5fcc7960bc4bfec1cba4c447b6a18398a58747e0", "ref_doc_id": "30cbde39-197f-4005-9af2-82286294fd85"}, "1d3b02eb-451b-4572-808c-77c159c53652": {"doc_hash": "bafa111372d07455897d8705d6b8ee29879856c220399094af985efbbb7dd956", "ref_doc_id": "1e5a4a8f-3018-49d6-9376-cca91b3d3df0"}, "9a0e687f-b8eb-4d38-8aac-4479756cbb2e": {"doc_hash": "16115b17f6e68fcd83258610bb1b9393b43405bc9b9190f3133a709ca26f4c45", "ref_doc_id": "e56d1770-06bc-47cf-ac78-336b3e951043"}, "2bef6a0a-7137-4ec1-877d-401814dede2e": {"doc_hash": "6dc925556d66757c7a9c0769bb93ffd7220a0719015cc7922b58a808f2b71c55", "ref_doc_id": "945e24e1-e868-4be3-86bf-c08be09e92cb"}, "36e635d3-307f-4cc2-936d-3092d4dffc51": {"doc_hash": "4c5cf28775c0db41ac169e9b5c04e6b00342ffb5c4fba7ea9ecd99eb51e96987", "ref_doc_id": "aa2683e8-afec-4b10-84d4-2fa91c1554c8"}, "768d606d-3536-49e3-8a3a-c0ec03aad8fa": {"doc_hash": "2ac2f65222ba3a8fa387905e9767bdd855986cb5be4d8c6a1327b422d3a8e311", "ref_doc_id": "3048cc40-4fcc-4eae-a99b-4c1934713b89"}, "59c32de8-f1d1-41cd-a5d9-62471d0c6f84": {"doc_hash": "e3d14584e237a960ad5dff4581db8a478dd935f75d3fb37624dedebab1582055", "ref_doc_id": "882d30f3-a6f3-46ca-a091-612af66e82ce"}, "614cbef1-cb42-41eb-8d6b-75ff5144d09f": {"doc_hash": "f38fcff63339600daabddce641131a77a1404dcd94ca8595ec50df614156814f", "ref_doc_id": "f646c596-da6c-407f-86ba-4aa719e1b85e"}, "3a0e075f-50fa-494b-9eb0-c688e9632460": {"doc_hash": "73164866d579b6d395caca15b6873acce1f4082ee991da3b2b78aa0afcc39e5c", "ref_doc_id": "63af6ee9-7cd1-43a8-a11a-bba8f31650a9"}, "8a271d68-f87f-4ba5-be0f-368837bc9348": {"doc_hash": "12c5093738e0e52efe36e4c27657090411e7f4948ff5705325e7464ded1d8d21", "ref_doc_id": "cb32afa0-cf4b-4af7-8b8f-f36ec88a3a3a"}, "105eabf9-6e8e-4b30-b998-78ebbbd9b8f7": {"doc_hash": "96d8c2dabfe77c553463c893a8a7c2fd645351ac92cbf2274801f74ecfa5da20", "ref_doc_id": "e09e505e-78a4-44ea-9a3d-be329dac5012"}, "8c1d9ef4-f8a8-4d02-a6d0-60364291fa70": {"doc_hash": "f1e888e142274c6f9f779223a6c10eb905f99032508bcd1ca7fe7cc507dae417", "ref_doc_id": "e09e505e-78a4-44ea-9a3d-be329dac5012"}, "b2fe1fa8-7701-4dcf-99f7-e8acc47eda0f": {"doc_hash": "446822e782928b637722fd2527ea6689efa2bd524f05f525d873c41a71437178", "ref_doc_id": "0e247933-5bc0-401b-b3dd-c8e0ee299a60"}, "3e57ad9a-045c-47af-9724-49ebef5fe745": {"doc_hash": "ce608ac26b9b9e607c4b59f828b0ba2a8edc5b503b7284f2ed16054ef7c4f0cf", "ref_doc_id": "1f295d15-30d1-4af8-be88-3c8de889595c"}, "30742c0c-779e-459d-b92a-e73cfbf43667": {"doc_hash": "43cb533542b69094a6ff710a258b8732fe7b2e380d01431552c727364706772b", "ref_doc_id": "1f295d15-30d1-4af8-be88-3c8de889595c"}, "2f237dd6-8c7a-4e14-a2b0-0f67cc8a4e37": {"doc_hash": "21f3922dd7dacd0c551587972255db02eadc0397cefa87751e840a7eda8c95f7", "ref_doc_id": "2aa04aff-993e-4c33-802f-fc8616890514"}, "d5d53990-ade9-4765-b9ae-a8fd0c22d80e": {"doc_hash": "9da073b275fdaf66b2e40fcd141c31ae84e962b839d515153a0c1f709a1f0ee7", "ref_doc_id": "35931699-d535-499f-a8e4-f38325dd396c"}, "c27391e3-a3c7-472d-8ef2-d9f1465bc0a0": {"doc_hash": "03f6e0594ead98821a43697f4058a8fe67ac812ff9694b2a4af2d3cf1ce49710", "ref_doc_id": "68ee645a-8fab-46e2-a76c-07d82a49da24"}, "b0ee58b9-dc4b-4058-bff0-3076efaf437a": {"doc_hash": "0e82e47e92d1d127e2e1c19d89d7b4a2502e94de9d2c18bb9a3aec3f7e403f24", "ref_doc_id": "6a6b77be-e48c-46aa-a927-62aa06c80d0d"}, "f6e6498c-2a2f-489e-8da1-4e65d47b2556": {"doc_hash": "d3e86ecde484a84c7e79d297469ec8b58bf74e0b18f82e3baa01256212155a6c", "ref_doc_id": "ee2835d5-f31b-4105-b64a-968ae78a3a40"}, "359aaaf9-702d-4e82-9fa1-b0114e88545a": {"doc_hash": "e070883802361f8f03489f32b66def7568085f737efe161acec1a3610220fa22", "ref_doc_id": "1a022b1f-7c35-4952-b135-3ef4769ae435"}, "92c86c2f-4fcf-441d-adf7-fbe6c382f81d": {"doc_hash": "518c884ff48de46615e27b747febb5013e926d4c4d582f23624c67bdb5a7d317", "ref_doc_id": "bf0049ac-0303-4e23-b456-4c203913f543"}, "9b3a4150-9f44-454f-a858-12e04a26e0bb": {"doc_hash": "6c885e615217f8e62cf36e4a317f941327294bcdd083147356dd3e4f0ede35a4", "ref_doc_id": "cc12a813-27e8-43c8-973f-3428a22843b2"}, "b6bb6c04-be55-4b3d-898f-6288b9aba9b4": {"doc_hash": "58bec1b80d1fe00cf0f260f9bc2db4869ac99fa1209781bf762e31ecddb0cb8c", "ref_doc_id": "0fea7603-68dd-4e19-81b5-3ba6c17d1047"}, "65a4c5af-7551-4b37-afb3-ab51121c6399": {"doc_hash": "9f87742c6d9796a22534608ec17b2334f268c3baa77b0be7b9db377b29ffb0b3", "ref_doc_id": "7c6c3917-02ef-4f6b-8a50-205b393ad4d3"}, "6ac92a7b-0cc7-4133-9144-28172c6db6e6": {"doc_hash": "56b03466258d62fe22f4d72bafbdada77085ddf1c056c05a8ce22559b9d1b577", "ref_doc_id": "2644de71-163c-4d81-9dac-62697c70e6b2"}, "dcc3ca45-bf0c-4129-a8c8-e8f15b6dd255": {"doc_hash": "97f4642b6d0e96a0e768bf10b7f0259cb6b0db2d689916bc913f22db7d344a3a", "ref_doc_id": "b2ce08bc-dbb7-4479-ad49-01751647816e"}, "98c4f5b5-4825-4314-9589-ed562e2f5c89": {"doc_hash": "9978b9fd3b14b749cc4bd7a63452e623e35631133de613a786cc400342ae3c83", "ref_doc_id": "16a63730-a4b1-4fff-887a-9a8daaebfb65"}, "3f39c7ed-6b5c-420c-b6c8-af58b7bf02f4": {"doc_hash": "4621c5c525a0dbcdedfb46c96c6e9f5d2d9d9a9e33a48e0805118bb28b97bbdd", "ref_doc_id": "712fabbb-079c-4f1c-ae45-8d65ba983e5d"}, "044a371e-b3bb-41d9-9f19-32d4b03fd8a8": {"doc_hash": "5e2ac61f77591a9a2bb89ecd66da653e7a3f98024aca743c4d234716114d43f9", "ref_doc_id": "5242f9f8-0bb1-469d-a1d7-2ecaff5b1d23"}, "b7feb142-639f-4b25-bff4-568e4f62cc91": {"doc_hash": "14b6fd780be9399a946d08eef0e099f1573b633ec16a7fbc434f58d903071bcd", "ref_doc_id": "7684cc94-0d65-400f-874b-25c9ca0564e9"}, "a0fdc365-8a03-40ed-aca0-73e9263ca786": {"doc_hash": "47397114f6f77055b66fd5a5beb2e2b766daef81c6e6b4e0a1cb07bb20052f95", "ref_doc_id": "780d198e-a690-427a-aa80-bfe21b98a28d"}, "49147ab2-8704-4330-85f8-49f328994aa3": {"doc_hash": "04aaa3ab9a032a41f9e60bc505f7cc05c2652f8e6b6eed4d83c3ea81c1e3d2eb", "ref_doc_id": "fc372d99-3926-4600-b90d-34d8a4fdf2d7"}, "6001e288-ddbc-4c5c-99ec-eb7aa5ec6758": {"doc_hash": "12463e24445af7863b13fc29423c8e62aeaddd24f1fd1efec239b934ab56bf4f", "ref_doc_id": "433af848-399e-49fa-a073-52a8446e972a"}, "ef95d248-6597-4a68-8d8a-e65d0e44284d": {"doc_hash": "6ae269ec452b801e7ef58f8dbd93b4f104e3d3ed4bcc5cd7db87e523c0d1084a", "ref_doc_id": "043c6c3b-abd7-42a3-af00-18fcc24c1032"}, "f012807b-a09f-4141-8ed6-b07228f41519": {"doc_hash": "9de56e4240ba3c3785864b0f3428eb4c9993b0f3079a2bad61a96e394f14a54f", "ref_doc_id": "23ebc8c3-8f4f-44e2-8742-5de3f7a7da15"}, "94d6fafb-9bcd-4701-8d0b-3c618897e0e3": {"doc_hash": "b5e757f1194d059ab36855756a1afb7892e84edd2c94b130f68a5ea11df3d4ff", "ref_doc_id": "d0a6375f-4797-46cd-895c-33102442b313"}, "712cb3b7-60c0-4a0c-aa39-54ef1cf59829": {"doc_hash": "a927cd6456a33b597a3907120906580d9a269c2bcb7e18128f6c349bda1fa36c", "ref_doc_id": "997e19de-a77f-43bf-8a07-e8c3d514190f"}, "80cba1a5-eeb0-4811-be70-2e3c0177c38f": {"doc_hash": "ce1a2957ea6832452e0e3c1b4cecfa5d00709a4fdcac7d56d274d8d1e093a989", "ref_doc_id": "4c8f3ea2-fe7b-4988-a4b8-10330fcaffea"}, "85e6b4d1-ba3b-4c42-91de-8c0a89512264": {"doc_hash": "2cc6259b92cb1ead898146c9cbc242009377a912522f2a4109de68cc97259ce2", "ref_doc_id": "dadb01c7-a678-4996-8be9-120025dad82d"}, "39df4377-0ad3-4329-b95d-f14421201d01": {"doc_hash": "86a82961a66ce451b5273a1a4cce72d2746ad5daa9d053abb86e1e82b3d82db7", "ref_doc_id": "129fca7e-3d07-44fa-a8bf-96bb55cfaddb"}, "d521fa73-f4aa-4027-8736-4cfcaa1e05a3": {"doc_hash": "b65d50c0a6dea35a2451b72ad860dcb9099621c97649eb7edaaab9aa872356bf", "ref_doc_id": "4505efd2-317f-4499-9a0f-eccad646b7e3"}, "08324bec-858e-4d6c-993d-22fbb46482aa": {"doc_hash": "4b8c13785055dd55744d5d02fd29a6db2bcbe0c906aa0ab506cd7932e2fff373", "ref_doc_id": "fde0be83-2da3-4e77-b8e2-681d6ae29b5d"}, "6add70a5-353c-41ed-97bd-02016c0118e6": {"doc_hash": "456f1436a8533c4da6357080c1e6b89e195ebf70e6e34a8b331a7bd6b4f1f33f", "ref_doc_id": "fde0be83-2da3-4e77-b8e2-681d6ae29b5d"}, "e7b25091-b67d-4b41-b8e2-5cacb1a2347c": {"doc_hash": "430669575887f2269a47dd488109b101e370b3a56b375ccd7658ede9d7f79607", "ref_doc_id": "fde0be83-2da3-4e77-b8e2-681d6ae29b5d"}, "f0da29df-a9ca-4212-ac90-16aa1113df23": {"doc_hash": "35f0d77b9700d96a17a1f17587babc21ee118edfd2e24f8482e863563c3032ed", "ref_doc_id": "d2c84527-5e9d-411a-bf6f-a53d74eba6f5"}, "1fd1a737-ef44-40e7-936e-1b30296be5fa": {"doc_hash": "8fa1e139a493f676766809cdce16c52f1b4ec2bdf99dbf813e27e3e8ee8cb48c", "ref_doc_id": "710f430e-fed4-4923-a7a5-76b0c73bae0e"}, "0703eb99-67c1-47e0-96ef-f6b972fc6505": {"doc_hash": "cf5ff5fa9c08c73943ec9f4150512ad5520f96f0ff13d1e080fc8a1d29954e42", "ref_doc_id": "710f430e-fed4-4923-a7a5-76b0c73bae0e"}, "f604392e-7c50-4016-9d8f-f07277502c48": {"doc_hash": "849ffb919d4d284bd9bdf2fd452b7264536daf299e31a5d6870d93c5041bf29f", "ref_doc_id": "1236e457-6819-46ff-a442-08fac9c4cbf4"}, "0a798288-819f-4fbb-ba26-13ea5fb1a549": {"doc_hash": "4ab4f3db859b0b2a8ced22e1cb64bce456fa635e6b90d118177094816a34aacb", "ref_doc_id": "1236e457-6819-46ff-a442-08fac9c4cbf4"}, "f6393100-a0c0-4430-a667-4b4bad148542": {"doc_hash": "647912a0f6f3cee715b95985a1b147513bd7bd049828754043d3f1eee2a35d75", "ref_doc_id": "1236e457-6819-46ff-a442-08fac9c4cbf4"}, "de0bf22a-0b6c-4887-a9d8-e46c78dce9e0": {"doc_hash": "b564436b4466e6759b0f877e6499e5bc5c6700a9eccd58bfc05fc3debb6f9b10", "ref_doc_id": "1236e457-6819-46ff-a442-08fac9c4cbf4"}, "1ea299f7-c87b-45e7-9fc0-2bdd55abbcf1": {"doc_hash": "e3e91ea85d0ef632ceed3eafac6399b4a9cdc171fc19f2b822539294cae25301", "ref_doc_id": "1236e457-6819-46ff-a442-08fac9c4cbf4"}, "f59b2ef6-edaa-4012-af8e-c66b589d21ff": {"doc_hash": "53194f7d8dec09fcb9d2254220ca6397b4307cae426aff7714c780736f2753cf", "ref_doc_id": "1236e457-6819-46ff-a442-08fac9c4cbf4"}, "9894ba4b-fa2a-40de-8121-13f35ca77140": {"doc_hash": "b7381ffbc8930ffd9f2ca11c3911586912d56f0877f8b48aa7087397a46856f7", "ref_doc_id": "1236e457-6819-46ff-a442-08fac9c4cbf4"}, "fdc3c776-9717-4a3e-ad13-7251b25b8196": {"doc_hash": "e821d931763be08b2d47a550e583cfa4674809f249cdef3ab4e3a9f7b3debc33", "ref_doc_id": "31fea909-51a0-4c66-aeb3-1f99739d2473"}, "05ae7e83-0f15-422e-bb82-bf6e29206b25": {"doc_hash": "d79f8656cb1844aadebf813c6f57a082c37dd986678eaddd54841e116cecb026", "ref_doc_id": "31fea909-51a0-4c66-aeb3-1f99739d2473"}, "f85cd28f-93f6-4b9f-894d-dc797bf0bc9a": {"doc_hash": "9c6c56a9abc2dfb21891d5fae95dc3356bf0cfe2ef198172d5fd95893ec696ce", "ref_doc_id": "b9b30a3c-3ff7-4420-a40b-94373302a747"}, "4c554b82-d34b-41de-9b86-d36708003026": {"doc_hash": "6bfe246eb17d2a7ff485b9c7f963294ec98a23bfa0776862450a10a6f12a772e", "ref_doc_id": "b9b30a3c-3ff7-4420-a40b-94373302a747"}, "2a0911c1-39db-45ed-a185-e1304b080fa7": {"doc_hash": "ab20b1ceede6159adca08f7f057ab24489bb27999ecbb96d41ffb50bea7a8b5b", "ref_doc_id": "0b17ab31-7209-4540-aa39-5faeded85a12"}, "87ac740c-397a-4972-ae17-ffa91c933379": {"doc_hash": "0189d962080b3e6157ec822eacbe592738084fcd92c730147c6f2ecc9886ae65", "ref_doc_id": "0b17ab31-7209-4540-aa39-5faeded85a12"}, "dc7f4e1e-9e04-4862-a21d-e7ac3655335b": {"doc_hash": "6a8e9eabe27dbbdb0780678e22c04331329b8ebaba0977b8f6be6c3331569102", "ref_doc_id": "4fd39138-4ea4-44d3-96aa-67dd5027e4de"}, "18d077f0-bd92-406b-9717-07e00c99e2f5": {"doc_hash": "ce278f812d7d72e5623d894e0f91d454ce7c026dc5aed7c105fa02657e88913c", "ref_doc_id": "4fd39138-4ea4-44d3-96aa-67dd5027e4de"}, "eb8666d8-31db-4344-b9a9-a36951da1cb4": {"doc_hash": "7c180bb762562acab597890e68fe6e15c01798facedc7737450e48c11150d989", "ref_doc_id": "4fd39138-4ea4-44d3-96aa-67dd5027e4de"}, "4ac237ed-668d-4a47-832f-aa9f50b6f065": {"doc_hash": "eb115c20dc3d2ac4d01f8e975774e8ffbd5aa4bea30b70fe3458b1b5c6829b33", "ref_doc_id": "468cd467-295d-490f-84d0-41a6ae05388d"}, "a31e9887-127d-4e57-9db5-aedc7c2670e8": {"doc_hash": "170b529f845fefef6313c927f887ba2b03b1d610d2a4c9b5cb4b60e163e28637", "ref_doc_id": "468cd467-295d-490f-84d0-41a6ae05388d"}, "d5d066eb-767b-47a0-9738-06dccbf0bd9b": {"doc_hash": "1d0de4d585691fe26e3ecaccf1b66159af7ece13a08ab38f76cd3ed5de3b2d58", "ref_doc_id": "db773bd3-709e-4c14-9500-84886b4af7ef"}, "5ee1f7c8-41a4-4fcb-b38b-2fee68dd9d17": {"doc_hash": "b971d392893b049be0b0a54088cc7be2d705d95f7dff10ae3917667bbec4e18f", "ref_doc_id": "f2a4cbdd-886c-4712-9fb4-82aeac7167e5"}, "9371f1cd-30e4-4b48-9fda-ef276bac3dea": {"doc_hash": "dbf5d5c20c95f9c3f4a0257e40301caebd21ccfb13ddfa9bd7b40b3dc9c62951", "ref_doc_id": "491475cf-cacd-404f-b002-2df7e43d431c"}, "cdd8d030-838b-43a5-aedb-989e9a835227": {"doc_hash": "09dcd9384a01a8ebbc54e1fff55aba500d026c5935d269ca8075c6593a8e109d", "ref_doc_id": "76091345-5fb6-4607-bb62-58dcf248517c"}, "fb4797d5-5ace-4436-b8d6-742656ea6036": {"doc_hash": "0c7efb036bb3ef1e80e41d7f1b6f7944c5a434328f114283d871cfa84d13718a", "ref_doc_id": "30c534f5-acc9-4a1c-84d7-a820a0cd14bc"}, "edaaf53a-53c6-45ce-b835-e2a74d05d226": {"doc_hash": "ef03eba394530995d5b4d8a1e302711256a8674db152a8128c1e60cd8ba98b8e", "ref_doc_id": "30c534f5-acc9-4a1c-84d7-a820a0cd14bc"}, "43589a32-33ae-40f7-ac9c-9cb9a122e49e": {"doc_hash": "7a12e9e813de6e9d458023918f4abc222c73ed7e3d9fb702cc56a46bc52a360a", "ref_doc_id": "6cf7a400-eb12-4520-aab5-4881c4c0e18f"}, "48d915bb-2fe4-4ef2-a1bb-e223bc799cd4": {"doc_hash": "7583fadcb776d9f96fc2b8b89172aec77354e965a74f2ec1a6ebc7a6d1e84d21", "ref_doc_id": "6cf7a400-eb12-4520-aab5-4881c4c0e18f"}, "b5e25e39-f445-4ac5-a1a3-1acd38aa36e6": {"doc_hash": "4d40b10dab2f67cc3b185bf6fabf8959b7717e720e4798d4c561459da66209b4", "ref_doc_id": "99f430e8-d343-45dc-bebd-937dd8854691"}, "45c1232b-b0c1-47e9-acdf-d60e1c6727d9": {"doc_hash": "8c7821a10cb37f1a49abe1d5425471c661eb5cd365c388f1e7460238a86380b5", "ref_doc_id": "544a9bcd-8a5e-4ba2-9cbf-b49db028b96b"}, "316e469f-0fe5-481d-94ca-0a5f5ac6d196": {"doc_hash": "af7bf18bbe5f103b896c2014dfe10c4830087f24f18f43d3bbef383329d3f669", "ref_doc_id": "544a9bcd-8a5e-4ba2-9cbf-b49db028b96b"}, "2014b8ff-ddc8-4172-b80e-65de756bf805": {"doc_hash": "8818c0a8f920c33f3ba62a451c9204cc1200f0f432bb80fc2b89097b1bdbb919", "ref_doc_id": "0b515ea0-71ac-438a-83ab-b450118b7760"}, "d7a04419-cdc6-44e5-8b24-593b5fed18c7": {"doc_hash": "65ae2cf218f19ed7033fcb83fe741ced84b8e8f39c10accd18741d538cacaa80", "ref_doc_id": "0b515ea0-71ac-438a-83ab-b450118b7760"}, "9fd2f7b5-5a6c-48b2-85b6-851be97a7f2b": {"doc_hash": "222e09beaa360f4788aa37169f179c974cea69db419fe3e8cde168549d0fbd58", "ref_doc_id": "406fcf46-db33-4767-b912-a3c6927e22ae"}, "b9c86518-6fe7-44ad-a45f-d2be5cdb36e0": {"doc_hash": "61ee5a5e130b853471fca34af9a22416b2edcf951d1012a75a13328b6399b9da", "ref_doc_id": "406fcf46-db33-4767-b912-a3c6927e22ae"}, "f0d042f2-760e-447b-b06a-cefb635d4960": {"doc_hash": "c2b48921dc6e46aa90109a0bab8bc3a07d2eac0b807d9e780c895529f80e7f94", "ref_doc_id": "7503e79c-cef9-4179-b511-1fb8b4d8571e"}, "39d14ea1-57ea-420a-8f6d-2bcde4861c3d": {"doc_hash": "66788f953403f3eec67c002e2bcc843e732de8b709705f97b1aa7025e8a116ba", "ref_doc_id": "7503e79c-cef9-4179-b511-1fb8b4d8571e"}, "dd7eee9f-b723-492d-8523-537c6fdac5e4": {"doc_hash": "9785a9ebd78539946df89aa959ae436573e0c0a641ece7ae623e009357f567eb", "ref_doc_id": "2ef85a1e-715f-4d23-8c8f-70d92dfa1f75"}, "f7c0cf8a-5f3b-4bf5-b7e7-1ce2c9898cee": {"doc_hash": "8b704f1167b7669a12adead1eeb372ec734e63ec32c8f8dbe77e348d43ebf5b7", "ref_doc_id": "7d6a38b7-69e7-406f-a22c-c7a8ca327060"}, "3ce6bc0f-e662-4392-8948-cfd488ad5eec": {"doc_hash": "da5ae39575132957ad2d75364c67f380fb507d2c6cbc4bd7cf88d216dbbe3976", "ref_doc_id": "7e94064c-aec7-408d-ae5d-c8f2d92a44af"}, "fddb44a6-e48d-482a-b664-7726fdf0b5fa": {"doc_hash": "44481fdce37e68a183e3bac5817158bb1e5c29ea81c9925a8fc62207dfe72fc4", "ref_doc_id": "7e94064c-aec7-408d-ae5d-c8f2d92a44af"}, "a004d163-293b-4a55-baff-8db49555f9fd": {"doc_hash": "1e17699a67ea6633b4ee768ee10c7f31129edc285a0d039d03ba18b759ea0730", "ref_doc_id": "8c966c86-54e5-447d-b0b4-a2a8b64cce4b"}, "b67ce8a8-0bdc-4258-9642-d0595281c788": {"doc_hash": "8bba4bf9f52cf31678c41d312c93550683b85bcf4323cfc0f4cd940d8f979fd4", "ref_doc_id": "8c966c86-54e5-447d-b0b4-a2a8b64cce4b"}, "02541506-4a99-494a-98a3-c7e83b0a3a2a": {"doc_hash": "8d810264318004084a2d5501896a8759bef218f62888500052c7b15abbd372e1", "ref_doc_id": "d39f55b8-96ca-477b-9cbc-f54d5bc63f6f"}, "8c533a7f-76af-45ee-81ae-3fd35fcf0891": {"doc_hash": "6e2ca6e5d03ae71ea66db1b9955095849a2d47b1df0667d49e3bb9eb8477519f", "ref_doc_id": "74b4bc8a-f7ce-435f-b186-c2aed0db5857"}, "3ba3c880-de86-44f2-ab17-e592c88bd91a": {"doc_hash": "9fcaf59791460d261ec8586ff257efaa1616a725dc72b551f00ed011e7086e88", "ref_doc_id": "a162b09d-f580-40b3-b292-793ad8c72ca7"}, "5c548ec4-f17b-48b4-94b4-f97c5b97d91e": {"doc_hash": "31b50b0f5ff33da5de3f8d259d0c04acae5a67ec28b8e00b0a0d2a4378f4d80d", "ref_doc_id": "e4387adf-cb25-4f48-b60f-e24520778c00"}, "02de5731-7a2c-434d-aeb4-2ed317cf2705": {"doc_hash": "ecf0ac9357532e880ac9fa7f686856ff3de8e0215962c3821600a851941e3e27", "ref_doc_id": "e4387adf-cb25-4f48-b60f-e24520778c00"}, "a82ec975-f243-40cb-9e2f-2c8b5eba507e": {"doc_hash": "65a98554198c69cc7bee4ba2032aa69a4c865bdd577e1d1a8bdf6875fe3ec91a", "ref_doc_id": "665ac598-5466-4707-9e24-bd5049e8c91b"}, "09a25642-a408-4fdb-b047-1d668e98601a": {"doc_hash": "c777e3cbfd6fe68970e062927d66d12583f0de666f16d484f7d8da706a52da35", "ref_doc_id": "b9c16011-d34d-4e77-a437-96473c5acb77"}, "a003eea8-2eed-4ee9-b2e6-74364c72b6d2": {"doc_hash": "53545b47eb2247ded2b9de41f9b6e6993cac9edc859e676fbf0e8990505852f4", "ref_doc_id": "b9c16011-d34d-4e77-a437-96473c5acb77"}, "3e54f82b-7ec1-44b2-97c1-066cdd2efc4a": {"doc_hash": "83ba98b0568f09fcb29c04b3fce984afdaa1d7bb86f7ebc58908880ebcda8ba8", "ref_doc_id": "f580794c-abbb-4ca4-89e9-673213eda821"}, "7d7e9ac2-a0b8-41f0-a928-3ddc9a63ce63": {"doc_hash": "9c0bf55f0ada5b27ccf6bfaa8a4f0fe8d23c7682ee85b926abfc416a1a5c2ca1", "ref_doc_id": "9f08513a-0e1b-4193-b57b-f6904f363f04"}, "3bfb668a-4b06-4050-8034-434434015c67": {"doc_hash": "7ad33e0dee58183bc2715478e6f39df153eaa3ffa4714a635665ea8a6166bed6", "ref_doc_id": "775f29f0-7101-479c-9afd-591bc3345bb6"}, "f38a1c0c-95a1-4dab-b2b9-4f1b708c2be1": {"doc_hash": "2bf1d400a7c8a0479bc65f086207bb9cba68e7f3adad6de154b03199a3059ece", "ref_doc_id": "775f29f0-7101-479c-9afd-591bc3345bb6"}, "ff6c8fdb-c5c2-48aa-848e-1a572b441406": {"doc_hash": "74dfd5f98de32933caa329b58b6bac6799acb72f8cf192d433de43e8f05f8185", "ref_doc_id": "048602cb-ddec-4f30-b471-cc09981f9ec2"}, "af811acf-bf49-4ceb-8efa-de49a8b12b3b": {"doc_hash": "ac05d85ed4329ec16c4c0da2d50f6fe66db76df39597c0b80a15b7b5ebafa490", "ref_doc_id": "048602cb-ddec-4f30-b471-cc09981f9ec2"}, "eaa1c089-62c9-4e6c-aabe-e8bd7e9cd0ca": {"doc_hash": "70f63ae2162b15de824645efc831657e606d1a10c640ece20de81ca27b44e077", "ref_doc_id": "870ea4f0-681b-496e-97b8-12f1978dafff"}, "980d6210-126f-4bba-ad8f-2b5f8a6dd35e": {"doc_hash": "8e4f5d8b2fde04831059c7fe8d6d216544092dd4193bf1c1d190a617c00774da", "ref_doc_id": "870ea4f0-681b-496e-97b8-12f1978dafff"}, "4a78ef6c-4b4f-4ff5-a9cc-93fb7138a5cc": {"doc_hash": "44419bc039771bea86c69902c7d817853163153a4b9d9e55c8b43bdcfa76f2af", "ref_doc_id": "ecda5cdb-5732-4ee4-92af-e8ac2607b766"}, "cfb5b230-880f-45f0-8a11-f32efb5bd714": {"doc_hash": "e18e2fc41d312cb75f3b9eebf3f0e314c725e168c22aa64a52b37746efa9286d", "ref_doc_id": "ecda5cdb-5732-4ee4-92af-e8ac2607b766"}, "b4b5bf85-b9ea-4cf8-af77-2902472d7d48": {"doc_hash": "eef1c7d17a7b8e473e49f7065efee040297b65f4c33515d9942241179b8d6742", "ref_doc_id": "6d2c5dfa-f164-4120-b57d-716a0c2cd099"}, "05834eeb-29df-407f-8105-9aed1fe03ae4": {"doc_hash": "ee69454597921720c40e416768f265b8ebccd1fe96b73f7426a038597931058b", "ref_doc_id": "446ee1b5-41a1-4824-aaab-eeff3cfa4664"}, "31f173b0-3a0e-4c8d-83b2-4bf6cb1258b3": {"doc_hash": "4430ed5d442dcf207bf6801c6f6944653f9866ceb6a28967554cae526dd1988b", "ref_doc_id": "3ec0dbea-ce3d-4408-a0b0-56812611015b"}, "9d7a7966-7f05-4308-86a9-1d4bb63ca0b4": {"doc_hash": "7de264fb50d7547aabb9f0d52f32b969c54e1237b2951f267a86772b1beb10ea", "ref_doc_id": "b1b855bc-3666-4e4f-8c49-c96bf3872b0f"}, "263fdc84-5f98-49cf-a097-2c54524946d1": {"doc_hash": "3795289b52c5d54e21429f5b1db07ff760d6a8b3a366f595312d7bd22aa5ac85", "ref_doc_id": "3ac286c8-4ce0-49fe-98dd-d58129d8c740"}, "b89cee99-3e0d-4e13-ad1e-68037e31f063": {"doc_hash": "4717fe512eeb00b9cf0311ec6717a5c8e6d63c45dccb14809a06b7246d5be9ed", "ref_doc_id": "ceae4b80-7daf-4cd8-877d-8c02698cc7ad"}, "0c405ffa-d681-498d-b35c-4f02c66ff6e2": {"doc_hash": "edfff4d0da3cc3023144ad16e9f0e4e2b5c7e976e2044196ada15a0d830840e0", "ref_doc_id": "f72cad56-6413-4c2e-8898-c3f0f905c62b"}, "4f25f3ab-8d02-41bb-a31d-5377a3f411ff": {"doc_hash": "4937b263e2682ef18cfe06d31e3da290ae2d413aaaa429f1dd3e691c6222a89b", "ref_doc_id": "e3668ca4-053e-471f-a3bb-ffa1f6af5e1f"}, "ffcec956-b1ca-41f3-99c1-6177d12ee7cc": {"doc_hash": "2a1e78f2120f358aa9bc59d13ef198e23a005a0417e23418a514c928cf708ed1", "ref_doc_id": "60ee18d2-19e3-4536-9977-864582938dc9"}, "86e7aa78-01b3-4343-9d7d-966632cae590": {"doc_hash": "c52689a2db8630fe54071c2c48558013bc5e5a81b1d66111939a5f19ed1cd88c", "ref_doc_id": "5480894d-6e80-49eb-88b0-fe798660cb6d"}, "df165ad3-9079-4d67-8311-f5e27aff7e43": {"doc_hash": "4d311d224003b0d1d87580dd2d4bf1bfbce90cb7fe055809e0d7e8b9c7becfb0", "ref_doc_id": "3c7512be-1f6b-406c-9bf9-e11b5aeec80e"}, "2e30ef76-e8fb-4db0-a9f7-15eaa39e4bb9": {"doc_hash": "762a2cf7589919d7b1c40d043afeabedfc994aea7e8fbd4aeb7187f2685f0d54", "ref_doc_id": "f333752f-738e-4d88-b916-7157a5d301b6"}, "d1c3d297-03c2-4152-af30-66f535d89a24": {"doc_hash": "7e4cc0ac32d54abd8b3164f842f3e60e8b924e9ef58df8c934f16023ddae3398", "ref_doc_id": "cd47cd9e-33db-4f93-ae53-5018c44f5c7d"}, "d279b3fc-60a4-48a5-9e51-6d9b516df0e6": {"doc_hash": "fa4c3d8f1bbaa27182ce6ba2759af665df4d94cbccbb819164213c76476c9e5e", "ref_doc_id": "3c0e55b9-fe43-4b89-9418-c5a488cd5b66"}, "bb4f81b4-eaa9-4367-a407-54da1590a8e4": {"doc_hash": "de62f50512a361613366e592cf76c8c1cb8d78c495d6f9f5c245e2d039243eec", "ref_doc_id": "3c0e55b9-fe43-4b89-9418-c5a488cd5b66"}, "f61a5c84-0fcf-45f9-9fee-57c05d2ae939": {"doc_hash": "9c819e584498f80eb163718f495d001fe79212f1b4c92dde0a51f89de70c57ba", "ref_doc_id": "84effbcb-2edf-4a5b-bc2d-c161061bc392"}, "1ac22cd0-f8b7-4cc6-a5b5-6d709c0a397d": {"doc_hash": "1265cf114eb5ea7a5f18b782d565a57cc6f8e38f4dfd374c81916a8d3e4b1c68", "ref_doc_id": "1eb6961e-2b91-4675-8509-c5d0c6c61295"}, "e65a4448-0f05-4ba7-9ef5-53b1258e7d0d": {"doc_hash": "18302656ca733d27be46ca877e4449b89722b5be9fc42e1eea55b5481a49a2ec", "ref_doc_id": "1eb6961e-2b91-4675-8509-c5d0c6c61295"}, "e410a735-d39b-479c-b86e-80845b217967": {"doc_hash": "9b780778f913fe36032c5a35eec73201816b5fbc0a45007b10e76f6a3b1f8e2c", "ref_doc_id": "3f2422da-824a-479b-b610-9803a43733f2"}, "26dc7d64-daa3-468b-8d2f-bb9566711cc4": {"doc_hash": "753d8a16768efdeb756c510eae1e20d174a43d3e737d057ddd9acb42713ca610", "ref_doc_id": "3acaa686-7970-4101-8bd2-8a6ac9eb9f39"}, "fcd85a06-bd88-4cdb-9bda-eb01a8bd2907": {"doc_hash": "90c3211e00f38efad7dc56cfb9e02e178373da2067c5da094769931368811443", "ref_doc_id": "3acaa686-7970-4101-8bd2-8a6ac9eb9f39"}, "b2e5283f-a558-4cd2-8dd7-89a8425d0d3d": {"doc_hash": "f0c9a937e201de2492dcc35b994d6e24bc35e27a86938ce5eba316a6b4e0c68b", "ref_doc_id": "d9e1d4a0-ef4a-4530-b8ca-5c5968a78202"}, "90258727-104e-48c2-aa0a-3fe7177cf5b2": {"doc_hash": "8d94b31c5376658ac26e61cca324719e89aa9728332b16b29e1dfc43a11da77b", "ref_doc_id": "d9e1d4a0-ef4a-4530-b8ca-5c5968a78202"}, "e672b2ee-63e3-4614-a3e4-8665a0c61298": {"doc_hash": "d3fcb260ed5d1d607ff2185d81f6fcff0375d9d70a1755b531cbb3a49ba0e0f9", "ref_doc_id": "d41e021e-d934-4f8d-bac9-6b4eedb64ad0"}, "80a48846-bf81-404a-98af-97c2aee79d19": {"doc_hash": "af3342f4c6796462855701cc1260eb926d36b380158bd35903cb3ab619aa2a47", "ref_doc_id": "1b2dd56b-9ed2-4e4c-a2fc-f6c544d96c3b"}, "9a3bf1e3-79f3-4f73-8196-898f6294d318": {"doc_hash": "3cb30da6d7b7fabb58e8268f68b476bf01092923389c434eb19ff286b8eb4e4a", "ref_doc_id": "1b2dd56b-9ed2-4e4c-a2fc-f6c544d96c3b"}, "45bb0a84-1b17-4078-819c-f240011b8534": {"doc_hash": "f0147992b3679383a13c6aa17dd8e23241169eda41b00c902bd3f71ae6953e97", "ref_doc_id": "a6446dff-c30b-40b9-8c62-fd789df1f984"}, "f35219a5-d573-49c3-9f92-21f9df5ffb56": {"doc_hash": "19e000f6762614e337fdf1918250996ce743e133bf95ce69c0f4b11f07c2fb1d", "ref_doc_id": "33ea15da-c9f5-41b4-bca6-cf1290b1ad97"}, "075bd480-6f3c-425b-b846-961dd3cf5d0b": {"doc_hash": "3767087ba2cfef15de3f6a728dd518659ef711d6e7f588b0bc3b75e443cbe5b2", "ref_doc_id": "d851519a-fabc-4abb-bb7f-5ecdb6a5cd66"}, "50ac58f8-08df-480e-8bfe-10cbb2bb66a4": {"doc_hash": "b93a40ae2dfdc778e2ddaa1f18c826ece8f4ae7c00cb33e2bfcedbf7fbd79f51", "ref_doc_id": "9e9ff103-5211-4d2f-aa3a-871037f18958"}, "2a5b51b7-c138-464d-b12f-4254bb97069d": {"doc_hash": "df7ed8e83a83bf61b6e3fc0005dad548db67750e4b0dbea34d2447ee2760c8f1", "ref_doc_id": "0053cbb2-b5cb-4a63-8240-8322cb153926"}, "5605ce20-8b84-477a-91e8-f8a111e83377": {"doc_hash": "3e4828c541a82e8359547b28341bc1c78b7e85039e688be85e32c0f70e9542b0", "ref_doc_id": "b0b4d8a6-8002-498f-b176-8986de05101b"}, "ab26516f-ea06-45e3-a7a9-f9b801a88a10": {"doc_hash": "a0d9f14831c8188132cbdca57d57c46cf840fc2b9961e26aa17435f30db2fc81", "ref_doc_id": "51180ca5-6342-422d-8303-f68ac94aa602"}, "0b46cf07-4122-4238-bb6d-409b28cd447e": {"doc_hash": "e3a3c05a1e53880048837a4a9187db8b8add522a50cdfc6a5193e6db7d5ee6ba", "ref_doc_id": "c7213594-4e38-476a-a454-042d1b8a0bc9"}, "37769830-0bbf-4528-a8cf-518ebccdd61c": {"doc_hash": "52b5ef79e25319cd703852796e3c53e9fc18e5425252787eeb56bfb0a7533468", "ref_doc_id": "c7213594-4e38-476a-a454-042d1b8a0bc9"}, "fa56275e-b4ee-40d4-92b0-0fabc0e131a2": {"doc_hash": "2161cbde64a553cbdb9f9d1cdbecc300290dc5d00d463ab8a9fbf834076712d1", "ref_doc_id": "2add599a-8674-4ecc-8b28-f844f64b2b72"}, "4563d9f7-97bd-446b-8305-abb94e8fb00f": {"doc_hash": "3810cdbf20cd29964705fee62ae6efc88e5e4c10fae96642bbf98cdacd157075", "ref_doc_id": "2add599a-8674-4ecc-8b28-f844f64b2b72"}, "aad3105b-e0fd-4d40-8707-bc1c37d7f8fe": {"doc_hash": "9c1e830c568574872db0bc61a5bb42172f9d336a15e0d906ba2d1f189baa537a", "ref_doc_id": "1f6cab90-826f-403a-bff9-a5b5dd7f8316"}, "c8daa0bc-7c59-49fd-9a09-db42ca2de41d": {"doc_hash": "d479f9c5d2e39652907286a20b01ff8e5f19b8056c5d67569b4b46d3c41ec856", "ref_doc_id": "14adba67-0f6f-4ba8-bb63-0e3e7d607889"}, "9065b728-f627-4a5d-921e-7a9bce73be81": {"doc_hash": "9274fa64fbf290b395a4ee7fe8e5cdd542504355f9692d0951d6cbe1fb1dbd44", "ref_doc_id": "14adba67-0f6f-4ba8-bb63-0e3e7d607889"}, "fd506470-7d45-415d-88f5-b5ac12e6d30d": {"doc_hash": "3a24e8b0302c5eac6da370e51a6953f969f4228a14dd7847989060363c00a205", "ref_doc_id": "14adba67-0f6f-4ba8-bb63-0e3e7d607889"}, "e8579be3-98d8-4ffe-bdd7-3aa7bea1f747": {"doc_hash": "b7fc4e8fb3c39f178219f74a4ce933a9ef35e8a4d54e0b3db67e7ad870ca3877", "ref_doc_id": "14adba67-0f6f-4ba8-bb63-0e3e7d607889"}, "44cc8a48-be8f-4604-83fc-8c23370fde42": {"doc_hash": "6d20a42bf8241559697e18c213f3de085f85ebc78b72818d03fe02e2a0f70a33", "ref_doc_id": "3fadc6a7-0bd5-460e-8c90-d50ccb115c4f"}, "fce1316c-c57d-4533-b485-d2e8c6442272": {"doc_hash": "2c244d84f53d57b57cdcf68c8e7a812799a5e6b50c46ec27a92035e34dfed676", "ref_doc_id": "3fadc6a7-0bd5-460e-8c90-d50ccb115c4f"}, "dc36b8de-df9a-48a0-951c-d07cb962234b": {"doc_hash": "696a35bb8489be6e424c52e0f561f478b6dbbe4b8ebed7313c4dc225ce2aded8", "ref_doc_id": "3fadc6a7-0bd5-460e-8c90-d50ccb115c4f"}, "ff1f35a9-c8fd-4a6b-bbfd-3e8bbb562fa5": {"doc_hash": "28799a9a1a723f61c4fd5f9e93ae7332f494be941eca682f46ca0d2b9c683427", "ref_doc_id": "98d8b6e7-cd11-40cd-ab15-847b14df99b5"}, "9f92d926-5133-4d79-b83f-7e5426a51cd8": {"doc_hash": "0e0b8b62995bda30da75b09535a07c29c103c13a6c9b1377830c8b2110cc345b", "ref_doc_id": "98d8b6e7-cd11-40cd-ab15-847b14df99b5"}, "8ae3f6ae-36ea-4092-aeb5-1008c79c5ec8": {"doc_hash": "fb2f0a34732fb95e963de1b1448216ce462868fb1a175ac86a4e8cd3688f567a", "ref_doc_id": "98d8b6e7-cd11-40cd-ab15-847b14df99b5"}, "d727703e-1d41-4aa3-861b-6304cbcd7293": {"doc_hash": "3ef35f7bfbf1aacdcdee2cac1ab5ca28888cf6fc23c0ebaab95bf7b0638e3279", "ref_doc_id": "98d8b6e7-cd11-40cd-ab15-847b14df99b5"}, "a2dbffe3-f320-4a3e-8b78-0979c9a5ac31": {"doc_hash": "8f82368db9a60ebb91454d494fd60ed92daa0ba647e9d0d0735d66b3c5c712d4", "ref_doc_id": "98d8b6e7-cd11-40cd-ab15-847b14df99b5"}, "ebc25651-31b8-4452-b04e-7cae5fa0e100": {"doc_hash": "044c83a2253a7178337bc37a6f16653f225c312e1fd47c4e16cc37ed8d761468", "ref_doc_id": "98d8b6e7-cd11-40cd-ab15-847b14df99b5"}, "893b10f0-83a1-48ce-bcde-5547ddacbf50": {"doc_hash": "9cf3e3f817ed4cfa59caeb8e03375c3247a977e198ce5b64b6990d23b4b51619", "ref_doc_id": "98d8b6e7-cd11-40cd-ab15-847b14df99b5"}, "012e682b-0a22-42d6-8949-bc85e30cc2cc": {"doc_hash": "a96084d87363e9042e3d1995ac0ad57f9207d13480e5f8bf8d496dde6ec0488b", "ref_doc_id": "287e32bf-3684-42d4-a8e8-6070a3e53c96"}, "a049b8fc-68a8-4748-b94b-3ade5a66405e": {"doc_hash": "d5797d0424f654858ea867106fc8872aae1612c00667b1c6b7ebe6134e72790c", "ref_doc_id": "287e32bf-3684-42d4-a8e8-6070a3e53c96"}, "8c4eead0-3dda-4a51-a38a-424733ea3d15": {"doc_hash": "49330b186ffe885b8715897ce5233a541ff73560b1ede5917609da384240ff1b", "ref_doc_id": "287e32bf-3684-42d4-a8e8-6070a3e53c96"}, "fee0b9f5-d026-4ff0-8067-aa79bba1b958": {"doc_hash": "3a9c9ad4907f69841fdbbdc3b62637473edaef070b310c0a7863bb4b8eb4c753", "ref_doc_id": "bf00fd1d-c481-495b-a418-087765bd3fa6"}, "1a518941-f795-4b38-95a0-50f4115f7209": {"doc_hash": "baa7da389f3812bb3208162005c037c7739e3db6f24d2e4e7594e8bf71135e0b", "ref_doc_id": "bf00fd1d-c481-495b-a418-087765bd3fa6"}, "ee2827e4-27ba-43a2-888b-217c6f7ab068": {"doc_hash": "31c8fde9eb1ff2959e72a1417f4758783657a32078b760cbfcb4f68d5a982045", "ref_doc_id": "bf00fd1d-c481-495b-a418-087765bd3fa6"}, "6eeca64f-ab4d-43e3-83d7-1052cd798093": {"doc_hash": "76085962701111354eba3ae5388fda777e0d597fea127cbe60f6bed22c20da00", "ref_doc_id": "bf00fd1d-c481-495b-a418-087765bd3fa6"}, "0c817a71-0816-4c95-862e-d8d48e8b51b9": {"doc_hash": "a66aa4eea8530e6fd40718ef89e573e7d49dcf3cb59498577db23fbacaba05e4", "ref_doc_id": "3c0c3742-d705-4e53-b369-4857fe9326ab"}, "e7eb3957-da3a-4c95-8b10-c979538b6986": {"doc_hash": "787877efaf45701f0fc28d6466f36e32462788a88cdd366b235f286de6a4772c", "ref_doc_id": "3c0c3742-d705-4e53-b369-4857fe9326ab"}, "714b41f3-b2c4-453c-b73a-979bbe828b4f": {"doc_hash": "cab417193933d502e253e31d634e01fecd6ab9259b2007e99bdd3e0f4e91c8e3", "ref_doc_id": "3c0c3742-d705-4e53-b369-4857fe9326ab"}, "d1c5aac5-e6c9-4351-a166-e30484ee7650": {"doc_hash": "caec3bfa02c6cb011cbf551d589373461f1c29741f23d8cf6eed961f4f52742c", "ref_doc_id": "3c0c3742-d705-4e53-b369-4857fe9326ab"}, "ba590121-2b55-43cc-9f04-8d5a8a85753b": {"doc_hash": "7f7dd8480b8c14b5f6a5881e861f2f5f4b55383b3d35e39388f6a4f4ba8c9bc8", "ref_doc_id": "3c0c3742-d705-4e53-b369-4857fe9326ab"}, "152085ec-e2e3-403b-9b89-6247243d4fdc": {"doc_hash": "edcb0599b0ee930b79612e98af0781da247aafd26514d113392d4d0856af3613", "ref_doc_id": "eec2804d-d292-430e-9566-2706da4f20fd"}, "b4bc183b-9699-4558-b3e0-8791d7b8287b": {"doc_hash": "7cc43f9d32253bff69215873c87af92320c1bc196b4787ff076bd340283e7f8c", "ref_doc_id": "b7e86265-8d4c-460a-95e7-3b7d5e9cbc24"}, "d4a81238-bb81-42ae-90f3-243e54832e7e": {"doc_hash": "3ff721586ce74122f7d3b3061cfbf2d27544c3af09fc176fe51b5c68505e21b5", "ref_doc_id": "b7e86265-8d4c-460a-95e7-3b7d5e9cbc24"}, "2c118644-acfc-4ac9-a895-e470030888d5": {"doc_hash": "87e5e32629da860deb74fe9992039780a0e8794015e61f4c0d9fad29a80f0546", "ref_doc_id": "b7e86265-8d4c-460a-95e7-3b7d5e9cbc24"}, "ebab48e7-52b9-4d97-a439-f27104f7e514": {"doc_hash": "1430b0709c54031ee414f19733127e77129932af98f6f806690ef52bd0a852a0", "ref_doc_id": "b7e86265-8d4c-460a-95e7-3b7d5e9cbc24"}}, "docstore/ref_doc_info": {"8d3e25b9-ca19-47d8-b006-f237464206de": {"node_ids": ["266dfea7-7564-47a3-9314-527629b00055", "556aa0d4-0471-4299-a4b0-b6c20f0c2994", "69b18b31-0474-4191-b226-412c20301951", "7f18d681-5fac-4301-87ae-a98c71aab0fc"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/FAQ.html", "file_name": "FAQ.html", "file_type": "text/html", "file_size": 48102, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "c4616e64-012d-406c-bcf1-7b6ddb4eb75b": {"node_ids": ["05702f47-edbf-4e37-b549-94298a412794", "b1b9ee1e-7f7a-4317-bcb9-667e0cd97b77"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/advanced_installation.html", "file_name": "advanced_installation.html", "file_type": "text/html", "file_size": 26550, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}}, "7ca686f9-a30a-4bb0-ab89-4cbe457f327f": {"node_ids": ["a4925a19-0d23-4436-8311-4e1679252e82"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/contributing.html", "file_name": "contributing.html", "file_type": "text/html", "file_size": 17607, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "fbda3572-c8bb-4b7f-b0f3-6d4bf2ddfe84": {"node_ids": ["49542a2f-0d16-490b-9b18-88a840f1e763"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/alloc_specs.html", "file_name": "alloc_specs.html", "file_type": "text/html", "file_size": 19081, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}}, "af6b06d7-cc97-4b2a-8e9b-1c0fb8c15354": {"node_ids": ["12750370-0878-483c-a005-3f92deeba168"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/data_structures.html", "file_name": "data_structures.html", "file_type": "text/html", "file_size": 13655, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "1fcebff0-829f-4ea7-be6b-3e755139f0eb": {"node_ids": ["f28382f9-3b21-4a8d-8021-0c85dfacdaf9"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/exit_criteria.html", "file_name": "exit_criteria.html", "file_type": "text/html", "file_size": 18342, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}}, "5c04a5ad-65e7-4b19-8dc2-135017004f34": {"node_ids": ["fb406632-037f-44b8-8167-211ae35c6da7", "45b8647a-63c5-427e-a0de-6bc520122f9f"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/gen_specs.html", "file_name": "gen_specs.html", "file_type": "text/html", "file_size": 32164, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}}, "b72001b1-05e8-4dc9-82c6-52bbc02384d5": {"node_ids": ["724ee8c0-f519-4396-9c35-288e15c2c93a", "41700a42-b122-41c0-a501-51674c0a122b", "587f2abe-f675-4532-b526-54a6a9150e5d", "d6b01d91-eec3-4120-90e7-dc7464447f82", "c52b07e2-c7b2-48c7-92e0-84b5626d36cf", "d5d56557-1863-4f8c-8875-95efdc3498c6", "a28e8c0d-a856-488f-8f41-5784fce186d3"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/libE_specs.html", "file_name": "libE_specs.html", "file_type": "text/html", "file_size": 105395, "creation_date": "2025-11-25", "last_modified_date": "2025-11-17"}}, "c02285d1-05db-4fa7-96ef-caaa56172f6c": {"node_ids": ["0fe810fb-aa7e-4e4e-99e7-b004026cff3f", "0f9a2532-e881-4b85-9a31-2879f9c76f8d"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/persis_info.html", "file_name": "persis_info.html", "file_type": "text/html", "file_size": 26940, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "18e5721c-001b-448e-b1b0-74be6f27799e": {"node_ids": ["90101d8e-71e7-4f36-b56c-a45e363141d9", "2e3cc228-d40e-4acf-8d63-d5ef255d61b3"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/platform_specs.html", "file_name": "platform_specs.html", "file_type": "text/html", "file_size": 41793, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "cd58b26a-161b-4ae6-afb7-4df7aad40e9a": {"node_ids": ["31954eb3-b75e-491b-acfe-3132ceb0b4e0", "e8dcb0a3-129d-4404-8836-adeb5afee934"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/sim_specs.html", "file_name": "sim_specs.html", "file_type": "text/html", "file_size": 30374, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}}, "d54600b5-a38b-4272-a738-deae3021ee8f": {"node_ids": ["8f1b2683-c35b-4f65-bc40-0af9d0e6f38c"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/developer_API.html", "file_name": "developer_API.html", "file_type": "text/html", "file_size": 11575, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "fff28951-1acf-4db9-995c-a1c896b90836": {"node_ids": ["abef79cc-7fed-44e7-89a6-9f494d7d3ed4", "a60932a4-0b7c-4426-af98-2d055ad44909"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/env_resources_module.html", "file_name": "env_resources_module.html", "file_type": "text/html", "file_size": 28869, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}}, "198d1e67-2d1c-4912-8971-419693be1ac2": {"node_ids": ["1f5151d5-a73a-4fdd-9c48-72b45dd5d940"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/history_module.html", "file_name": "history_module.html", "file_type": "text/html", "file_size": 22529, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "660e4cbd-79b8-49e0-b359-27f8a0c3ea67": {"node_ids": ["259942f9-e9b5-444d-99e0-abe2ac1cfb36"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/manager_module.html", "file_name": "manager_module.html", "file_type": "text/html", "file_size": 23736, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "952fb317-689a-4f8d-8bd4-792be7b0c7a7": {"node_ids": ["d8f2b196-cbcd-4e07-ad93-09a8be948caf"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/mpi_resources_module.html", "file_name": "mpi_resources_module.html", "file_type": "text/html", "file_size": 21791, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}}, "42285cd4-f11a-4f7f-b620-2730c3a43482": {"node_ids": ["3fde2aaa-1680-475c-b42d-ad327a6c9479"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/node_resources_module.html", "file_name": "node_resources_module.html", "file_type": "text/html", "file_size": 13834, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}}, "4b55ad4e-8e85-4a2d-a9ec-859984e30dc5": {"node_ids": ["f2853424-6d42-4075-b671-127d191c8dff", "3341403e-9df9-4e4f-8c64-29d56911e7fd"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/resources_module.html", "file_name": "resources_module.html", "file_type": "text/html", "file_size": 33306, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "573d71c6-dda9-40f7-818f-260c82b14f5d": {"node_ids": ["9c7ee6b9-cfea-4305-a3f6-03b7d6845541"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/rset_resources_module.html", "file_name": "rset_resources_module.html", "file_type": "text/html", "file_size": 22745, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}}, "8afc95a2-ed63-4861-87ce-34166e930488": {"node_ids": ["25d3e09b-5e31-4133-8e50-b02d974782d3"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/scheduler_module.html", "file_name": "scheduler_module.html", "file_type": "text/html", "file_size": 20343, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "1da45670-758b-425b-84d2-9aacdc762b9d": {"node_ids": ["27bc94c7-8dfb-45fc-91fb-d348ce134890"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/worker_module.html", "file_name": "worker_module.html", "file_type": "text/html", "file_size": 18692, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}}, "0ac43dda-52e6-46d2-8319-88ad10ad3728": {"node_ids": ["ff6309a1-c464-4d80-81eb-4fb32207f5ff", "9d48b965-8627-4e2f-971c-04cd89aac933"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/worker_resources_module.html", "file_name": "worker_resources_module.html", "file_type": "text/html", "file_size": 35968, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}}, "86f843bf-eb78-49c5-8af5-12c0fb7cc3f1": {"node_ids": ["68e15b75-268c-49f1-9b4a-47c552f80951"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/release_management/release_index.html", "file_name": "release_index.html", "file_type": "text/html", "file_size": 10569, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "bfd329a4-450b-4e6e-b4d1-b8a26b3e47df": {"node_ids": ["6d36352d-09f2-4246-a875-2bda0b4ed5ed"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/release_management/release_platforms/index.html", "file_name": "index.html", "file_type": "text/html", "file_size": 10472, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "3f1f431b-5cbc-44f9-afaa-1b078fdcc463": {"node_ids": ["520f49c7-2972-4871-9ee5-f1e6df1e0bdf"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/release_management/release_platforms/rel_conda.html", "file_name": "rel_conda.html", "file_type": "text/html", "file_size": 13439, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "2e1fa59b-1c78-4a31-b6e0-42f84e7ad13c": {"node_ids": ["95114383-6d68-4a06-a80a-1db6b6d38f27"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/release_management/release_platforms/rel_github.html", "file_name": "rel_github.html", "file_type": "text/html", "file_size": 11099, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "a226b891-b583-4b56-b512-4753d8813f1e": {"node_ids": ["38244e86-fa6d-4a63-a901-a78edf5bab2c"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/release_management/release_platforms/rel_pypi.html", "file_name": "rel_pypi.html", "file_type": "text/html", "file_size": 12081, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "b0a8b1c0-627e-4e23-82b1-87b31f4d97dc": {"node_ids": ["11341703-dcae-404e-847e-9bc247fa7999", "f358fa81-403a-439d-8b23-0e6a4c4500bd"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/release_management/release_platforms/rel_spack.html", "file_name": "rel_spack.html", "file_type": "text/html", "file_size": 20696, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "0302c1a4-b8b7-4ea3-8b28-2efa950817be": {"node_ids": ["48769c34-b39a-4b3a-a5aa-8aa75bdab675"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/release_management/release_process.html", "file_name": "release_process.html", "file_type": "text/html", "file_size": 14984, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "41aa10a9-5cda-4ff8-9e73-99f7853f12ac": {"node_ids": ["928957fc-f57a-4719-8fcf-04f9e08e5962", "0b71ca4e-6fa4-49e4-b325-96f5749e4bef", "2789063d-da53-491f-9cf3-d0de705805b7", "bca693f6-9466-4f19-a958-fe9106adc213", "4f02df31-75de-4319-93e9-308903ece072", "e49d5af0-6547-4fbe-804c-351bfb5ce062", "a61122fb-4f49-47b6-8166-2b8de3d40db3", "906dbc70-d9d1-4b64-a9be-f5f54de5917c"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/alloc_funcs.html", "file_name": "alloc_funcs.html", "file_type": "text/html", "file_size": 93153, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}}, "505c3c09-fdc2-4c27-83bc-46f8df1c5e4d": {"node_ids": ["f23f5083-c5f8-4438-bb87-c66c6c9410c2", "1fb0e566-11b9-4732-9c45-407739f19606", "b44a41ac-98f2-4ecd-bf44-dff7f3dac686"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/aposmm.html", "file_name": "aposmm.html", "file_type": "text/html", "file_size": 31805, "creation_date": "2025-11-25", "last_modified_date": "2025-09-18"}}, "ce9fa6d5-e49c-4bd2-ac9c-46f398b5a98e": {"node_ids": ["d28e5fb6-19a5-447b-b749-57de8030720f"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/ax_multitask.html", "file_name": "ax_multitask.html", "file_type": "text/html", "file_size": 11032, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}}, "3264551e-adb7-42e0-835c-85ee9b04af4a": {"node_ids": ["9153cfda-65d1-44d4-b4de-fa2b821d77ca", "8d1cca14-77f6-4cd1-9daf-fee142575826", "bace9662-9ee0-4814-ae07-8ac876fd0e93", "a00fbf88-f146-484d-8ffc-373c19642105", "ba0b28bc-1efa-4058-a575-56509eb8000a", "27c95b30-d23f-490a-9f3a-32f371602007"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/calling_scripts.html", "file_name": "calling_scripts.html", "file_type": "text/html", "file_size": 78169, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "eb8bd20c-e7c9-4a3b-8155-52f535210c2e": {"node_ids": ["8e9178c7-4e8d-4131-90fc-6e89c8cc1495"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/examples_index.html", "file_name": "examples_index.html", "file_type": "text/html", "file_size": 11719, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "2ce20601-f036-4556-82ea-f6320596c932": {"node_ids": ["7169046d-cd3f-4bbe-a0d1-679edc3fda8f"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/fd_param_finder.html", "file_name": "fd_param_finder.html", "file_type": "text/html", "file_size": 11641, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "b0cc440b-faeb-45bd-8abc-aedbd70dad6f": {"node_ids": ["1a687112-6cc1-4c79-bc59-d3603998a08d"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/gen_funcs.html", "file_name": "gen_funcs.html", "file_type": "text/html", "file_size": 16810, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "69d015c4-ad55-4766-bb8e-cdc41cf1939c": {"node_ids": ["835974a2-24a2-4800-86f8-1fe649a90d8b"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/gpcam.html", "file_name": "gpcam.html", "file_type": "text/html", "file_size": 13751, "creation_date": "2025-11-25", "last_modified_date": "2025-10-06"}}, "ebe28150-bf68-463f-8ec5-d3f9ea36c4f2": {"node_ids": ["97d70283-d2ee-400d-a365-ca24910d25ee", "124c7cc1-1e79-465e-96e6-3204ee9e22e8", "06d8f725-85d2-449d-bab3-8b125098a1e6", "2c55c2c4-14fe-4d62-ab03-8a4088fda61d", "6aabec7c-5715-4658-8372-73523ac1f21e", "28f2a888-7fac-418e-b0b1-88a95f027629"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/persistent_sampling.html", "file_name": "persistent_sampling.html", "file_type": "text/html", "file_size": 74106, "creation_date": "2025-11-25", "last_modified_date": "2025-10-06"}}, "62ef9d97-c35d-49c3-9a44-7f8b2549c997": {"node_ids": ["012ebb33-8736-40e5-9703-50b4e3116c8c"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/persistent_sampling_var_resources.html", "file_name": "persistent_sampling_var_resources.html", "file_type": "text/html", "file_size": 20137, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "c4c3862b-7043-46ad-8f44-1e55f33861ce": {"node_ids": ["09641bb6-cd92-4394-a8ea-1a89d405b5a9", "e1c470a6-7e81-4257-8fe2-ce4733cee212", "a74f8232-a40b-49e8-8ea1-80b6d317657d", "49efe6d8-dbd3-472c-b0fa-e63078e4ca86"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sampling.html", "file_name": "sampling.html", "file_type": "text/html", "file_size": 57970, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "fcc96376-d413-46f0-88bc-b942a88b63bd": {"node_ids": ["2de9926e-b19d-4491-9b78-171949d004ee", "7e9ae8e3-727d-4321-bd2c-3c377c514ea9"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/borehole.html", "file_name": "borehole.html", "file_type": "text/html", "file_size": 33416, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "1ce79cde-fed1-4773-80e3-e95041dde82e": {"node_ids": ["bfbd826e-2364-40b3-a4db-39846f31ad69"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/borehole_kills.html", "file_name": "borehole_kills.html", "file_type": "text/html", "file_size": 25086, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "6d2faec1-dc02-45e2-b2d0-f717276c38a2": {"node_ids": ["648f70ba-78c2-48f5-aafd-42c0635692da", "a6531104-356b-4125-957e-c202d5f23eab", "26048846-c140-4720-b5a6-a8d00fbb245e", "c9000f17-ab68-43ac-a16d-7b1d2bb1d615", "7bd4cf3d-d3fe-4651-b8a8-2ecf4698efbc", "6324fffb-24a0-49c4-9f14-359decea4f71", "5a6157cb-3d3b-419b-acc5-4b8b79556bc4", "474c6ace-2544-4460-8899-e8eb37c50731", "dc7d43a0-8c11-4fc1-8218-b2e38df923dc"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/chwirut1.html", "file_name": "chwirut1.html", "file_type": "text/html", "file_size": 115703, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "60c826da-a142-4d7c-98b5-164d6147c958": {"node_ids": ["99cf6d99-9d17-4a02-b017-b1dc6e53bf8f", "707d4435-24e1-47d6-83d2-c8d4e04107e6"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf.html", "file_name": "forces_simf.html", "file_type": "text/html", "file_size": 32305, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "f22086da-eb85-4063-8fd5-cf5bccbbe89a": {"node_ids": ["e24b9ef2-fe67-4f6b-8ced-74c07342a56f", "27b1ea65-ee6b-4e64-a7c1-ff435aae9280"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_gpu.html", "file_name": "forces_simf_gpu.html", "file_type": "text/html", "file_size": 36133, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "5dcdc40e-667c-4b65-b20f-971650733e45": {"node_ids": ["6d747fab-eb37-4e44-b049-ecd1617dceec", "4149ce86-92b5-483f-abc8-786721a02f2f", "392676bf-134a-4404-b01c-ed7dfe3d36c6"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_gpu_multi_app.html", "file_name": "forces_simf_gpu_multi_app.html", "file_type": "text/html", "file_size": 42926, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "496312c5-c600-42ef-aed5-9bee50828da7": {"node_ids": ["10641147-2345-418a-be03-ff66dab0be89", "f8043767-44bb-4417-bc39-63aac7d2455d", "be692c4e-1ce0-46eb-834a-bca8c2701ddc"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_gpu_vary_resources.html", "file_name": "forces_simf_gpu_vary_resources.html", "file_type": "text/html", "file_size": 37610, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "3de7fe87-a52d-478b-a9fc-5a7aedeaa802": {"node_ids": ["d0cd881a-d366-434f-807e-5e90f774ea04", "50b6d940-fde8-44be-99c6-4991d4ddf00a"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_input_file.html", "file_name": "forces_simf_input_file.html", "file_type": "text/html", "file_size": 37998, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "a601e842-775f-4005-894a-2388164b0f64": {"node_ids": ["b1db8445-be8c-482a-8968-2f08de082e0d"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/inverse_bayes.html", "file_name": "inverse_bayes.html", "file_type": "text/html", "file_size": 15284, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "f17b1fbf-f81c-4550-bb4c-f75a5efd33c8": {"node_ids": ["137a2ae1-57b8-48d7-b204-f27cf812b3f2", "a5559283-5081-4ce1-b974-028abc7279e4"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/mock_sim.html", "file_name": "mock_sim.html", "file_type": "text/html", "file_size": 31599, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "f89ef0f6-e131-494d-a549-316d80880169": {"node_ids": ["849391de-8a2d-4bcc-a37d-6209c3ce7b4d"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/noisy_vector_mapping.html", "file_name": "noisy_vector_mapping.html", "file_type": "text/html", "file_size": 25148, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "cf30a470-80bb-4a2a-9bca-a65d5a146b4c": {"node_ids": ["04763b8d-2d37-4c95-89d3-bcb6c789c1e7"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/periodic_func.html", "file_name": "periodic_func.html", "file_type": "text/html", "file_size": 17095, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "4c2d1863-361c-4f9e-851b-54a7aae46733": {"node_ids": ["5eb9e399-2e9e-429c-a165-fa1cf2604846", "d8ed84ee-dc06-4010-8a94-4b4dbf8c6680"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/rosenbrock.html", "file_name": "rosenbrock.html", "file_type": "text/html", "file_size": 34282, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "3dc97245-9631-4dc9-aed8-aa005eeb830e": {"node_ids": ["0f1e2863-9fa0-43fc-960c-550139e1d589"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/simple_sim.html", "file_name": "simple_sim.html", "file_type": "text/html", "file_size": 16641, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "595a8385-4215-47c3-a97c-9fd17f9ea4a6": {"node_ids": ["1c937164-4647-4606-8eaa-3af8e73ace38", "f6691c51-e0c6-446e-812d-44f86398dd49", "aa17b387-561a-44fe-9021-3eac7ac1e751"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/six_hump_camel.html", "file_name": "six_hump_camel.html", "file_type": "text/html", "file_size": 40560, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "fecd60e3-8891-4582-85ba-313f1ccf2bbd": {"node_ids": ["ee659d7c-60c9-4270-90c4-cf1d76fffbf6", "a122208c-2396-4d9d-94a0-7c5cc76e729c"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/surmise_test_function.html", "file_name": "surmise_test_function.html", "file_type": "text/html", "file_size": 35197, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "4f963b0d-a804-41b8-8da4-04b643e49d21": {"node_ids": ["35cae732-4792-4703-a0c4-ed9fd80989e3", "37f9d637-e329-4df9-ba9d-89bc728531f6", "152a3c51-4ad9-41a9-b8e8-48a25d211827", "46a9eaa3-1d99-43f2-a655-a8dc9d1ff6ff", "7ebfc079-0975-4ea9-84d2-3e88b6e57d46", "715aaf34-5c26-4349-9ca3-4139daaec03c"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/var_resources.html", "file_name": "var_resources.html", "file_type": "text/html", "file_size": 71906, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "57155532-a6e6-43b3-a942-88027d26a07f": {"node_ids": ["9093c401-5267-486c-a024-5c0c75ec1bf6"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs.html", "file_name": "sim_funcs.html", "file_type": "text/html", "file_size": 16227, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "2718b056-d529-4747-b7e5-99231d1568b0": {"node_ids": ["4ec18610-0837-4aaa-9d9e-0cfda775b2b5", "966b4c54-b23e-4339-ab05-f68340e1be87", "f423cbd7-60de-4dee-9a53-67957a717878", "afbe5809-1355-4e1c-a61c-ea60390a2c23", "05088bc7-0763-4c63-a245-0ee5394df08b"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/submission_scripts.html", "file_name": "submission_scripts.html", "file_type": "text/html", "file_size": 38020, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "409732d7-0632-41dc-98e1-8e65dc9439c9": {"node_ids": ["1194b8af-491d-4dd6-82db-e03aa4419da0"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/surmise.html", "file_name": "surmise.html", "file_type": "text/html", "file_size": 11716, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "962baaa4-df10-4228-a65a-dd50e9768fbd": {"node_ids": ["bfaab4c0-ed2f-48e6-8e11-27f1ecbd96f9", "fdfd4afa-09f4-4f69-9e5b-43ced200bbe4", "f81006e0-9484-4c3c-88f7-9546db330edb", "2bfd619f-da29-4a51-8b1d-f8e36dec7b71", "0a5178b6-41f5-4e2c-9a74-6a92405a2f1c", "ebddaea5-6d11-406f-9708-674df1eda2a6"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/tasmanian.html", "file_name": "tasmanian.html", "file_type": "text/html", "file_size": 89531, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "8b848a50-4f1d-4947-bd7e-04e70e2447de": {"node_ids": ["6b4c19b2-12b2-4e23-815c-d6220b48f432"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/uniform_or_localopt.html", "file_name": "uniform_or_localopt.html", "file_type": "text/html", "file_size": 12779, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "2e9d433d-1b65-44c8-8816-44341bb5aa3e": {"node_ids": ["06e53a47-b9bd-475a-abf4-960e18a2869b"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/executor/ex_index.html", "file_name": "ex_index.html", "file_type": "text/html", "file_size": 10922, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}}, "ca5cf40e-22ea-44f3-a8d3-2ffb525bff69": {"node_ids": ["d45523db-2e2a-4449-b658-733d4a3dca51", "15d816a8-f82b-4460-bd03-f166caf22100", "867e788f-0039-4ae0-9549-98c03e9b32d4"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/executor/executor.html", "file_name": "executor.html", "file_type": "text/html", "file_size": 43313, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}}, "725d28dd-c7dd-418b-bafa-04732d5fd0e6": {"node_ids": ["20ae6d5a-e5d9-434e-829b-29090543b5f1", "0f2dd648-82f9-47cd-8154-4610f39a66bc", "86bdedd0-a7ba-47b7-956e-44e9e00e0845"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/executor/mpi_executor.html", "file_name": "mpi_executor.html", "file_type": "text/html", "file_size": 33537, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}}, "40f388c4-6306-4da0-9245-1ae99f4ede53": {"node_ids": ["a1deb5dd-79e4-42f8-8a93-8104130862f6", "7d2ddc84-11e5-4ce3-9e7c-df49cd17fcf4"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/executor/overview.html", "file_name": "overview.html", "file_type": "text/html", "file_size": 28029, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}}, "9faccdf2-047d-43cd-94ee-3e8170b5525f": {"node_ids": ["9bda812c-552b-4723-b892-0759b90a7a75", "e1d79949-c453-4d60-b898-e8f66c9101e3", "6dc9be5a-5415-48ea-b0b8-fe64f812b310", "b134b220-ae7b-4e1b-ba53-c883f050369a", "c6e3f609-e36e-47db-a3b0-53025bfcda74"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/allocator.html", "file_name": "allocator.html", "file_type": "text/html", "file_size": 60584, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "6cc15b8a-2434-44ae-b2f8-11256476f0dd": {"node_ids": ["075b224a-faeb-4850-90b9-38a9a0bc0c03", "ae3935c7-258a-4247-a9bd-f91f95fc4c5d"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/calc_status.html", "file_name": "calc_status.html", "file_type": "text/html", "file_size": 27747, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "9aefe921-ff0a-4a54-a3e4-8fded0fc5e0a": {"node_ids": ["9edca1a7-dd65-4f0b-be37-29df5cc7b46b"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/function_guide_index.html", "file_name": "function_guide_index.html", "file_type": "text/html", "file_size": 14134, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "1a9fadcf-88a8-4b08-af74-4b7ee784977e": {"node_ids": ["16f27b48-517a-43b1-9ecc-d0d245b9c4e4", "5da7433a-e00a-4d5e-9d6a-362e6dc7763b", "6ae6003a-9a14-40d6-b516-f695cf62d2ef"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/generator.html", "file_name": "generator.html", "file_type": "text/html", "file_size": 40933, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}}, "3c584d05-8c35-45c4-a59e-3a5af8aeb69a": {"node_ids": ["9ce15126-b66c-4f12-b4ce-9dcc00f9a919", "fe7965af-4dea-4b8e-87e8-8bc9751c3e24"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/history_array.html", "file_name": "history_array.html", "file_type": "text/html", "file_size": 21267, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "69c174f7-e4eb-4645-a264-dc7e67c0c0c2": {"node_ids": ["b4e69408-d4cd-4786-8bb6-3cd38d7110f6"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/sim_gen_alloc_api.html", "file_name": "sim_gen_alloc_api.html", "file_type": "text/html", "file_size": 23414, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "7b3b5968-135a-4da1-9d64-63ef173f1bee": {"node_ids": ["c5dbe178-0bb3-4053-84cb-3f03a5cae431"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/simulator.html", "file_name": "simulator.html", "file_type": "text/html", "file_size": 23914, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "45aa02ca-e382-47db-a645-691fd2e7dd64": {"node_ids": ["6b5a512f-6d73-462f-9d25-48d2707d58b8"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/work_dict.html", "file_name": "work_dict.html", "file_type": "text/html", "file_size": 16719, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "08ef3069-8708-409f-ac7b-20ebb84dfd90": {"node_ids": ["85f5b39f-ff1d-4965-87ae-8a8608327621"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/worker_array.html", "file_name": "worker_array.html", "file_type": "text/html", "file_size": 14975, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "cbb2b940-e2a1-47b4-b70c-deb8c04dca1e": {"node_ids": ["cbebbd4c-510f-4d29-b239-80db8974e697", "6535ed8b-ab4b-44b5-bb66-3f96c692c123", "eab25dee-6156-4ed1-a1a9-3a6dea84dadc", "8d2a217f-eabe-49a1-8e3b-6430ee836314", "fd795802-c29a-4920-bbd0-ed8f90143a8d", "feb3e321-18bf-4515-9cf5-3635cddd0033", "8c33c8b1-f65c-4f4b-8af6-205a2ace7eea"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/genindex.html", "file_name": "genindex.html", "file_type": "text/html", "file_size": 83956, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}}, "af92ea33-101d-4c53-9ee7-e49d2fca3886": {"node_ids": ["43dad33a-9752-4c8f-bba3-561a11ed52db", "97a4caad-df27-4600-bf6a-2a48a00166f1"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/history_output_logging.html", "file_name": "history_output_logging.html", "file_type": "text/html", "file_size": 28729, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "52970540-8c82-4048-8a12-07d33a8416bf": {"node_ids": ["12b7bb86-c8ac-4e81-a38e-5aa3f4b5a111"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/index.html", "file_name": "index.html", "file_type": "text/html", "file_size": 15055, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "7aa81704-b92f-4d01-875d-4132a2da7148": {"node_ids": ["023bc0a8-6a61-4f36-974d-371936b38a2c", "23cd5d40-952c-4731-b2d9-0084ca938a5c"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/introduction.html", "file_name": "introduction.html", "file_type": "text/html", "file_size": 27571, "creation_date": "2025-11-25", "last_modified_date": "2025-07-01"}}, "7ef6172a-6e7a-4f03-b01c-df2aeff666ce": {"node_ids": ["8a9390dc-0962-4c0e-873e-a736ec323419"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/known_issues.html", "file_name": "known_issues.html", "file_type": "text/html", "file_size": 11558, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}}, "793a37b7-3c84-47d8-a51e-cd66a09d0150": {"node_ids": ["26f668db-8470-446d-bb28-b11cafae939e", "32c6f284-2718-4373-ad5d-0abd50743265", "4a8fc2de-9da8-491a-b0ff-44cf94954797", "e6633e68-de8e-4cd8-abca-018180f98a5b", "628d0f2f-665d-44e8-9c0b-2982b6fb2960"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/libe_module.html", "file_name": "libe_module.html", "file_type": "text/html", "file_size": 73152, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}}, "9ed122ca-445a-487c-b154-135cc4e4d35f": {"node_ids": ["5f4ae3e2-1c7d-46c6-a3b3-be306d075c07", "482ee1f6-d213-48b7-acbf-3918dcfa8b06"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/overview_usecases.html", "file_name": "overview_usecases.html", "file_type": "text/html", "file_size": 21768, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}}, "a39db65f-0d48-4d96-8eb7-5322272e1128": {"node_ids": ["a81bd2da-b118-47d5-85ec-c8a81e1c3b54", "8cab5ed0-f2da-4a4c-a495-a0b6c3b7a87e"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/aurora.html", "file_name": "aurora.html", "file_type": "text/html", "file_size": 24682, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}}, "0cc251ea-a59f-4243-8304-90086aa9686c": {"node_ids": ["5d6c3873-a5c2-4703-a819-a78b3af41701"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/bebop.html", "file_name": "bebop.html", "file_type": "text/html", "file_size": 18511, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}}, "8f9936ee-169e-4574-8656-d299981fa7da": {"node_ids": ["e682f3e6-d548-48e8-ba40-6a48a9c8d4f3", "bd3e84e4-a6ec-41f9-b033-16dc97a28c89", "ae523167-b53c-49ab-8937-4894e4fec3dd", "517e8811-abe8-4a6d-82a0-8fd2adc7bad1", "210051c0-0aa8-4cb2-94ab-eadd9c662eda"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/example_scripts.html", "file_name": "example_scripts.html", "file_type": "text/html", "file_size": 39426, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}}, "c9e7554b-bd9c-4c68-a77f-ceb5516df83c": {"node_ids": ["29460cea-5d74-4157-ba50-6be64559b5f6"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/frontier.html", "file_name": "frontier.html", "file_type": "text/html", "file_size": 17563, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}}, "7e5f61a6-0dfb-42ea-9cfa-8628653ea453": {"node_ids": ["8882bc5a-e105-497d-b299-3b47124917cd"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/improv.html", "file_name": "improv.html", "file_type": "text/html", "file_size": 17503, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}}, "ecd01a99-7021-4bc3-89ff-81d8f1292fdc": {"node_ids": ["d97f5e70-97b4-43cb-959b-bd0d2830d149", "60e7a63c-1616-4f2b-922b-d8343a4e41fd"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/perlmutter.html", "file_name": "perlmutter.html", "file_type": "text/html", "file_size": 32657, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}}, "aec38711-d522-4e77-963b-c5c04c42dc11": {"node_ids": ["fbbc87f4-0967-4155-a499-b6825980b154", "9abb4415-c6d1-4044-afcb-2172852160a7", "3ad5d927-76c8-4517-967b-fa97eb6018a7"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/platforms_index.html", "file_name": "platforms_index.html", "file_type": "text/html", "file_size": 30568, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}}, "a671ed6b-fc0a-46c8-a025-f254081a912d": {"node_ids": ["af7660aa-36d6-4ec7-9574-5c6cd45a7051"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/polaris.html", "file_name": "polaris.html", "file_type": "text/html", "file_size": 19805, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}}, "d53f67b5-31c2-45f9-a2e6-4b98b9d4a42a": {"node_ids": ["29112f79-2efe-47b4-98ee-1ca42a51b22b", "70fdae85-b18e-4727-929e-daebc4fcebc3"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/srun.html", "file_name": "srun.html", "file_type": "text/html", "file_size": 23367, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}}, "683786c4-178f-4b2e-baee-5abe59a82c0a": {"node_ids": ["ba01a406-8226-4bff-8fbc-ea19f88b5506", "8d6aa45f-5156-4939-98c0-6493a9bd71c6", "88063d80-3687-420c-91fd-5e74c6311e90"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/summit.html", "file_name": "summit.html", "file_type": "text/html", "file_size": 27799, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}}, "532f336d-e9b9-4450-9705-2794d62bf713": {"node_ids": ["f2c00860-5361-4bd9-a8a0-7b26fc19a9d0"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/posters.html", "file_name": "posters.html", "file_type": "text/html", "file_size": 10050, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "40737f00-e136-43d4-9aad-c857a31ff443": {"node_ids": ["eea58d9a-695d-4dba-b86f-74dd191062dc"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/programming_libE.html", "file_name": "programming_libE.html", "file_type": "text/html", "file_size": 17160, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}}, "5f183f3a-e2e0-42c0-b387-99f8b24b4132": {"node_ids": ["4f35a78a-4073-418b-bb73-74afec88a070", "57498c3c-af99-438b-8023-0fb25ed1dd93", "964904ab-31ea-4153-9d06-22411c6ae7c0", "fc5bf7d2-e43e-45cd-a840-226089d40427", "61ed0246-04c3-46a2-aca8-24eae5e438d2", "91691de3-1f09-4d81-be2b-d2bc94e1bee1", "89440a92-9dc7-47a8-a439-f7f1fa3bf68a", "5870eb92-a648-4052-b7eb-65d3f4d3fa6d", "81a00d21-66d7-46c3-9c91-78f740483859", "34f5814b-1482-40dc-b2c5-c6c7c167ff8a", "595d028b-96bf-486a-bcec-078fe74f8616", "f2a2d483-3213-49a5-9d5d-17507b1ac8be", "ce96e6fa-0fea-42ab-a191-4ea329170c02", "0a31dac0-0c7b-44b8-be39-22a21c4b5aab"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "04c450f2-4611-402c-b202-7b2a25b3b230": {"node_ids": ["fea28a9d-ca32-4a5c-8311-2a468adfc563", "18aa502b-1c26-4e24-8a16-a7f2d034b569", "c225d90d-8497-44f9-935b-0320c04c460d"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/resource_manager/overview.html", "file_name": "overview.html", "file_type": "text/html", "file_size": 33705, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "ca36a375-9dc5-463a-9d07-3e61d4857f71": {"node_ids": ["0d2f7e11-8740-46a2-a850-da21ca1446fe"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/resource_manager/resource_detection.html", "file_name": "resource_detection.html", "file_type": "text/html", "file_size": 13743, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "1d1a8cd8-b16b-434c-a441-ed945966649d": {"node_ids": ["a92e0f48-7166-4480-801d-f52fe23e7b1b"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/resource_manager/resources_index.html", "file_name": "resources_index.html", "file_type": "text/html", "file_size": 12026, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "821d4e5f-b7be-4d38-91e7-94e5d254078c": {"node_ids": ["c5c00d9f-1f49-49a3-bc97-114700b5e72a"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/resource_manager/scheduler_module.html", "file_name": "scheduler_module.html", "file_type": "text/html", "file_size": 17279, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "cec55d61-1537-44c9-9238-3e755728df7d": {"node_ids": ["cccb3e0c-8d14-4b82-b5ef-a6a2ca2195b0", "ed59fe60-c5b1-4631-bce8-11477c0dba25"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/resource_manager/worker_resources.html", "file_name": "worker_resources.html", "file_type": "text/html", "file_size": 21269, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}}, "3620b7eb-69dd-49ce-92dd-64e358223b82": {"node_ids": ["e7e938f1-58af-4087-b299-d5e2f5e3cf19"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/resource_manager/zero_resource_workers.html", "file_name": "zero_resource_workers.html", "file_type": "text/html", "file_size": 18159, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "58af216c-666f-427a-92ed-296c48f93f94": {"node_ids": ["fec9a20b-23a3-43c7-8fe4-948cc59ca9c6", "f251f570-85dc-48fb-a314-137822e7bace", "8b358e9c-8e8d-431b-bd77-b37a39aa4997"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/running_libE.html", "file_name": "running_libE.html", "file_type": "text/html", "file_size": 27409, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}}, "c5113269-d48d-4d2e-b35c-41ef5aebcc0c": {"node_ids": ["a96c892f-98a4-419a-99de-8f755b21c4c5", "a89b0206-d0e0-43c2-981b-d4b69f7a556c"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/schemas/aposmm_options_schema.json", "file_name": "aposmm_options_schema.json", "file_type": "application/json", "file_size": 5876, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "344af5a7-bbe4-46f7-945d-7ed459a11b12": {"node_ids": ["44cc48a5-ca20-49c5-863a-ca45df072784"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/__init__.py", "file_name": "__init__.py", "file_type": "text/x-python", "file_size": 0, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "8a5fdb3e-0ae3-4ca6-84ef-9e0c874d06e0": {"node_ids": ["832010e3-d697-4b30-a1e8-f0b1ef412ad7"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/check_libE_stats.py", "file_name": "check_libE_stats.py", "file_type": "text/x-python", "file_size": 2271, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "3657a5d9-3eec-467b-a2ef-34fba5d534de": {"node_ids": ["37c1be9d-adc9-451c-9077-9518027637c2"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/common.py", "file_name": "common.py", "file_type": "text/x-python", "file_size": 2379, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "2240882e-4d23-4bd3-b323-899e979e95b4": {"node_ids": ["8431756a-9829-487b-a301-77563cb61db1"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/declare_hfun_and_combine_model_with_jax.py", "file_name": "declare_hfun_and_combine_model_with_jax.py", "file_type": "text/x-python", "file_size": 1136, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "542bf419-1582-4833-9f1d-1857456896b2": {"node_ids": ["59ccdaa3-539a-4cdd-9c45-9502acb15b2f"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/forces_simf.py", "file_name": "forces_simf.py", "file_type": "text/x-python", "file_size": 1276, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "664f9c79-aacd-4ae6-b0d6-90aa1a6ef35b": {"node_ids": ["ae9f0e24-9564-4612-bcc7-3a9fc336a706"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/sine_gen.py", "file_name": "sine_gen.py", "file_type": "text/x-python", "file_size": 756, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "d19c23d7-2406-4a7a-982a-87e0797b8be9": {"node_ids": ["f717ef8b-6bce-4154-8e9e-64ab3610b444"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/sine_sim.py", "file_name": "sine_sim.py", "file_type": "text/x-python", "file_size": 320, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "30cbde39-197f-4005-9af2-82286294fd85": {"node_ids": ["fd7cdfa6-a872-4d38-9304-07b8d0470979", "efc12dbe-9fe2-43c5-b595-be3941b070c3"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/support.py", "file_name": "support.py", "file_type": "text/x-python", "file_size": 3666, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "1e5a4a8f-3018-49d6-9376-cca91b3d3df0": {"node_ids": ["1d3b02eb-451b-4572-808c-77c159c53652"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_1d_sampling.py", "file_name": "test_1d_sampling.py", "file_type": "text/x-python", "file_size": 1744, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "e56d1770-06bc-47cf-ac78-336b3e951043": {"node_ids": ["9a0e687f-b8eb-4d38-8aac-4479756cbb2e"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_1d_sampling_from_files.py", "file_name": "test_1d_sampling_from_files.py", "file_type": "text/x-python", "file_size": 1322, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "945e24e1-e868-4be3-86bf-c08be09e92cb": {"node_ids": ["2bef6a0a-7137-4ec1-877d-401814dede2e"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_1d_sampling_no_comms_given.py", "file_name": "test_1d_sampling_no_comms_given.py", "file_type": "text/x-python", "file_size": 2005, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "aa2683e8-afec-4b10-84d4-2fa91c1554c8": {"node_ids": ["36e635d3-307f-4cc2-936d-3092d4dffc51"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_1d_sampling_with_profile.py", "file_name": "test_1d_sampling_with_profile.py", "file_type": "text/x-python", "file_size": 2162, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "3048cc40-4fcc-4eae-a99b-4c1934713b89": {"node_ids": ["768d606d-3536-49e3-8a3a-c0ec03aad8fa"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_1d_splitcomm.py", "file_name": "test_1d_splitcomm.py", "file_type": "text/x-python", "file_size": 2183, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "882d30f3-a6f3-46ca-a091-612af66e82ce": {"node_ids": ["59c32de8-f1d1-41cd-a5d9-62471d0c6f84"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_1d_subcomm.py", "file_name": "test_1d_subcomm.py", "file_type": "text/x-python", "file_size": 2255, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "f646c596-da6c-407f-86ba-4aa719e1b85e": {"node_ids": ["614cbef1-cb42-41eb-8d6b-75ff5144d09f"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_1d_super_simple.py", "file_name": "test_1d_super_simple.py", "file_type": "text/x-python", "file_size": 2071, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "63af6ee9-7cd1-43a8-a11a-bba8f31650a9": {"node_ids": ["3a0e075f-50fa-494b-9eb0-c688e9632460"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_1d_uniform_sampling_with_comm_dup.py", "file_name": "test_1d_uniform_sampling_with_comm_dup.py", "file_type": "text/x-python", "file_size": 2706, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "cb32afa0-cf4b-4af7-8b8f-f36ec88a3a3a": {"node_ids": ["8a271d68-f87f-4ba5-be0f-368837bc9348"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_2d_sampling.py", "file_name": "test_2d_sampling.py", "file_type": "text/x-python", "file_size": 1728, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "e09e505e-78a4-44ea-9a3d-be329dac5012": {"node_ids": ["105eabf9-6e8e-4b30-b998-78ebbbd9b8f7", "8c1d9ef4-f8a8-4d02-a6d0-60364291fa70"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_GPU_gen_resources.py", "file_name": "test_GPU_gen_resources.py", "file_type": "text/x-python", "file_size": 5139, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "0e247933-5bc0-401b-b3dd-c8e0ee299a60": {"node_ids": ["b2fe1fa8-7701-4dcf-99f7-e8acc47eda0f"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_GPU_variable_resources.py", "file_name": "test_GPU_variable_resources.py", "file_type": "text/x-python", "file_size": 4122, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "1f295d15-30d1-4af8-be88-3c8de889595c": {"node_ids": ["3e57ad9a-045c-47af-9724-49ebef5fe745", "30742c0c-779e-459d-b92a-e73cfbf43667"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_GPU_variable_resources_multi_task.py", "file_name": "test_GPU_variable_resources_multi_task.py", "file_type": "text/x-python", "file_size": 4131, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "2aa04aff-993e-4c33-802f-fc8616890514": {"node_ids": ["2f237dd6-8c7a-4e14-a2b0-0f67cc8a4e37"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_active_persistent_worker_abort.py", "file_name": "test_active_persistent_worker_abort.py", "file_type": "text/x-python", "file_size": 2749, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "35931699-d535-499f-a8e4-f38325dd396c": {"node_ids": ["d5d53990-ade9-4765-b9ae-a8fd0c22d80e"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_asktell_aposmm_nlopt.py", "file_name": "test_asktell_aposmm_nlopt.py", "file_type": "text/x-python", "file_size": 3426, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "68ee645a-8fab-46e2-a76c-07d82a49da24": {"node_ids": ["c27391e3-a3c7-472d-8ef2-d9f1465bc0a0"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_asktell_gpCAM.py", "file_name": "test_asktell_gpCAM.py", "file_type": "text/x-python", "file_size": 3202, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "6a6b77be-e48c-46aa-a927-62aa06c80d0d": {"node_ids": ["b0ee58b9-dc4b-4058-bff0-3076efaf437a"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_asktell_sampling.py", "file_name": "test_asktell_sampling.py", "file_type": "text/x-python", "file_size": 2446, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "ee2835d5-f31b-4105-b64a-968ae78a3a40": {"node_ids": ["f6e6498c-2a2f-489e-8da1-4e65d47b2556"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_asktell_sampling_array_gen.py", "file_name": "test_asktell_sampling_array_gen.py", "file_type": "text/x-python", "file_size": 3661, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "1a022b1f-7c35-4952-b135-3ef4769ae435": {"node_ids": ["359aaaf9-702d-4e82-9fa1-b0114e88545a"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_asktell_sampling_external_gen.py", "file_name": "test_asktell_sampling_external_gen.py", "file_type": "text/x-python", "file_size": 2957, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "bf0049ac-0303-4e23-b456-4c203913f543": {"node_ids": ["92c86c2f-4fcf-441d-adf7-fbe6c382f81d"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_asktell_sampling_vocs_array.py", "file_name": "test_asktell_sampling_vocs_array.py", "file_type": "text/x-python", "file_size": 2929, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "cc12a813-27e8-43c8-973f-3428a22843b2": {"node_ids": ["9b3a4150-9f44-454f-a858-12e04a26e0bb"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_calc_exception.py", "file_name": "test_calc_exception.py", "file_type": "text/x-python", "file_size": 1768, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "0fea7603-68dd-4e19-81b5-3ba6c17d1047": {"node_ids": ["b6bb6c04-be55-4b3d-898f-6288b9aba9b4"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_cancel_in_alloc.py", "file_name": "test_cancel_in_alloc.py", "file_type": "text/x-python", "file_size": 2513, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "7c6c3917-02ef-4f6b-8a50-205b393ad4d3": {"node_ids": ["65a4c5af-7551-4b37-afb3-ab51121c6399"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_comms.py", "file_name": "test_comms.py", "file_type": "text/x-python", "file_size": 2382, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "2644de71-163c-4d81-9dac-62697c70e6b2": {"node_ids": ["6ac92a7b-0cc7-4133-9144-28172c6db6e6"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_elapsed_time_abort.py", "file_name": "test_elapsed_time_abort.py", "file_type": "text/x-python", "file_size": 2121, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "b2ce08bc-dbb7-4479-ad49-01751647816e": {"node_ids": ["dcc3ca45-bf0c-4129-a8c8-e8f15b6dd255"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_ensemble_platform_workdir.py", "file_name": "test_ensemble_platform_workdir.py", "file_type": "text/x-python", "file_size": 3121, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "16a63730-a4b1-4fff-887a-9a8daaebfb65": {"node_ids": ["98c4f5b5-4825-4314-9589-ed562e2f5c89"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_evaluate_existing_plus_gen.py", "file_name": "test_evaluate_existing_plus_gen.py", "file_type": "text/x-python", "file_size": 2569, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "712fabbb-079c-4f1c-ae45-8d65ba983e5d": {"node_ids": ["3f39c7ed-6b5c-420c-b6c8-af58b7bf02f4"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_evaluate_existing_sample.py", "file_name": "test_evaluate_existing_sample.py", "file_type": "text/x-python", "file_size": 1886, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "5242f9f8-0bb1-469d-a1d7-2ecaff5b1d23": {"node_ids": ["044a371e-b3bb-41d9-9f19-32d4b03fd8a8"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_evaluate_mixed_sample.py", "file_name": "test_evaluate_mixed_sample.py", "file_type": "text/x-python", "file_size": 2156, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "7684cc94-0d65-400f-874b-25c9ca0564e9": {"node_ids": ["b7feb142-639f-4b25-bff4-568e4f62cc91"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_executor_forces_tutorial.py", "file_name": "test_executor_forces_tutorial.py", "file_type": "text/x-python", "file_size": 2305, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "780d198e-a690-427a-aa80-bfe21b98a28d": {"node_ids": ["a0fdc365-8a03-40ed-aca0-73e9263ca786"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_executor_forces_tutorial_2.py", "file_name": "test_executor_forces_tutorial_2.py", "file_type": "text/x-python", "file_size": 2384, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "fc372d99-3926-4600-b90d-34d8a4fdf2d7": {"node_ids": ["49147ab2-8704-4330-85f8-49f328994aa3"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_executor_hworld_pass_fail.py", "file_name": "test_executor_hworld_pass_fail.py", "file_type": "text/x-python", "file_size": 3793, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "433af848-399e-49fa-a073-52a8446e972a": {"node_ids": ["6001e288-ddbc-4c5c-99ec-eb7aa5ec6758"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_executor_hworld_timeout.py", "file_name": "test_executor_hworld_timeout.py", "file_type": "text/x-python", "file_size": 3808, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "043c6c3b-abd7-42a3-af00-18fcc24c1032": {"node_ids": ["ef95d248-6597-4a68-8d8a-e65d0e44284d"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_executor_simple.py", "file_name": "test_executor_simple.py", "file_type": "text/x-python", "file_size": 2644, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "23ebc8c3-8f4f-44e2-8742-5de3f7a7da15": {"node_ids": ["f012807b-a09f-4141-8ed6-b07228f41519"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_fast_alloc.py", "file_name": "test_fast_alloc.py", "file_type": "text/x-python", "file_size": 3011, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "d0a6375f-4797-46cd-895c-33102442b313": {"node_ids": ["94d6fafb-9bcd-4701-8d0b-3c618897e0e3"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_gpCAM.py", "file_name": "test_gpCAM.py", "file_type": "text/x-python", "file_size": 3491, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "997e19de-a77f-43bf-8a07-e8c3d514190f": {"node_ids": ["712cb3b7-60c0-4a0c-aa39-54ef1cf59829"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_inverse_bayes_example.py", "file_name": "test_inverse_bayes_example.py", "file_type": "text/x-python", "file_size": 2759, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "4c8f3ea2-fe7b-4988-a4b8-10330fcaffea": {"node_ids": ["80cba1a5-eeb0-4811-be70-2e3c0177c38f"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_local_sine_tutorial.py", "file_name": "test_local_sine_tutorial.py", "file_type": "text/x-python", "file_size": 2049, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "dadb01c7-a678-4996-8be9-120025dad82d": {"node_ids": ["85e6b4d1-ba3b-4c42-91de-8c0a89512264"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_local_sine_tutorial_2.py", "file_name": "test_local_sine_tutorial_2.py", "file_type": "text/x-python", "file_size": 1160, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "129fca7e-3d07-44fa-a8bf-96bb55cfaddb": {"node_ids": ["39df4377-0ad3-4329-b95d-f14421201d01"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_local_sine_tutorial_3.py", "file_name": "test_local_sine_tutorial_3.py", "file_type": "text/x-python", "file_size": 2126, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "4505efd2-317f-4499-9a0f-eccad646b7e3": {"node_ids": ["d521fa73-f4aa-4027-8736-4cfcaa1e05a3"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_comms.py", "file_name": "test_mpi_comms.py", "file_type": "text/x-python", "file_size": 3164, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "fde0be83-2da3-4e77-b8e2-681d6ae29b5d": {"node_ids": ["08324bec-858e-4d6c-993d-22fbb46482aa", "6add70a5-353c-41ed-97bd-02016c0118e6", "e7b25091-b67d-4b41-b8e2-5cacb1a2347c"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_gpu_settings.py", "file_name": "test_mpi_gpu_settings.py", "file_type": "text/x-python", "file_size": 10247, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "d2c84527-5e9d-411a-bf6f-a53d74eba6f5": {"node_ids": ["f0da29df-a9ca-4212-ac90-16aa1113df23"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_gpu_settings_env.py", "file_name": "test_mpi_gpu_settings_env.py", "file_type": "text/x-python", "file_size": 3661, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "710f430e-fed4-4923-a7a5-76b0c73bae0e": {"node_ids": ["1fd1a737-ef44-40e7-936e-1b30296be5fa", "0703eb99-67c1-47e0-96ef-f6b972fc6505"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_gpu_settings_mock_nodes_multi_task.py", "file_name": "test_mpi_gpu_settings_mock_nodes_multi_task.py", "file_type": "text/x-python", "file_size": 5413, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "1236e457-6819-46ff-a442-08fac9c4cbf4": {"node_ids": ["f604392e-7c50-4016-9d8f-f07277502c48", "0a798288-819f-4fbb-ba26-13ea5fb1a549", "f6393100-a0c0-4430-a667-4b4bad148542", "de0bf22a-0b6c-4887-a9d8-e46c78dce9e0", "1ea299f7-c87b-45e7-9fc0-2bdd55abbcf1", "f59b2ef6-edaa-4012-af8e-c66b589d21ff", "9894ba4b-fa2a-40de-8121-13f35ca77140"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners.py", "file_name": "test_mpi_runners.py", "file_type": "text/x-python", "file_size": 13813, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "31fea909-51a0-4c66-aeb3-1f99739d2473": {"node_ids": ["fdc3c776-9717-4a3e-ad13-7251b25b8196", "05ae7e83-0f15-422e-bb82-bf6e29206b25"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_subnode.py", "file_name": "test_mpi_runners_subnode.py", "file_type": "text/x-python", "file_size": 4261, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "b9b30a3c-3ff7-4420-a40b-94373302a747": {"node_ids": ["f85cd28f-93f6-4b9f-894d-dc797bf0bc9a", "4c554b82-d34b-41de-9b86-d36708003026"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_subnode_uneven.py", "file_name": "test_mpi_runners_subnode_uneven.py", "file_type": "text/x-python", "file_size": 5054, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "0b17ab31-7209-4540-aa39-5faeded85a12": {"node_ids": ["2a0911c1-39db-45ed-a185-e1304b080fa7", "87ac740c-397a-4972-ae17-ffa91c933379"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_supernode_uneven.py", "file_name": "test_mpi_runners_supernode_uneven.py", "file_type": "text/x-python", "file_size": 4619, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "4fd39138-4ea4-44d3-96aa-67dd5027e4de": {"node_ids": ["dc7f4e1e-9e04-4862-a21d-e7ac3655335b", "18d077f0-bd92-406b-9717-07e00c99e2f5", "eb8666d8-31db-4344-b9a9-a36951da1cb4"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_zrw_subnode_uneven.py", "file_name": "test_mpi_runners_zrw_subnode_uneven.py", "file_type": "text/x-python", "file_size": 6258, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "468cd467-295d-490f-84d0-41a6ae05388d": {"node_ids": ["4ac237ed-668d-4a47-832f-aa9f50b6f065", "a31e9887-127d-4e57-9db5-aedc7c2670e8"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_zrw_supernode_uneven.py", "file_name": "test_mpi_runners_zrw_supernode_uneven.py", "file_type": "text/x-python", "file_size": 5002, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "db773bd3-709e-4c14-9500-84886b4af7ef": {"node_ids": ["d5d066eb-767b-47a0-9738-06dccbf0bd9b"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_warning.py", "file_name": "test_mpi_warning.py", "file_type": "text/x-python", "file_size": 1691, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "f2a4cbdd-886c-4712-9fb4-82aeac7167e5": {"node_ids": ["5ee1f7c8-41a4-4fcb-b38b-2fee68dd9d17"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_new_field.py", "file_name": "test_new_field.py", "file_type": "text/x-python", "file_size": 1758, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "491475cf-cacd-404f-b002-2df7e43d431c": {"node_ids": ["9371f1cd-30e4-4b48-9fda-ef276bac3dea"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_optimas_ax.py", "file_name": "test_optimas_ax.py", "file_type": "text/x-python", "file_size": 3159, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "76091345-5fb6-4607-bb62-58dcf248517c": {"node_ids": ["cdd8d030-838b-43a5-aedb-989e9a835227"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_optimas_grid_sample.py", "file_name": "test_optimas_grid_sample.py", "file_type": "text/x-python", "file_size": 3187, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "30c534f5-acc9-4a1c-84d7-a820a0cd14bc": {"node_ids": ["fb4797d5-5ace-4436-b8d6-742656ea6036", "edaaf53a-53c6-45ce-b835-e2a74d05d226"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_optimas_sssss.py", "file_name": "test_optimas_sssss.py", "file_type": "text/x-python", "file_size": 3629, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "6cf7a400-eb12-4520-aab5-4881c4c0e18f": {"node_ids": ["43589a32-33ae-40f7-ac9c-9cb9a122e49e", "48d915bb-2fe4-4ef2-a1bb-e223bc799cd4"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_dfols.py", "file_name": "test_persistent_aposmm_dfols.py", "file_type": "text/x-python", "file_size": 4753, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "99f430e8-d343-45dc-bebd-937dd8854691": {"node_ids": ["b5e25e39-f445-4ac5-a1a3-1acd38aa36e6"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_exception.py", "file_name": "test_persistent_aposmm_exception.py", "file_type": "text/x-python", "file_size": 3104, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "544a9bcd-8a5e-4ba2-9cbf-b49db028b96b": {"node_ids": ["45c1232b-b0c1-47e9-acdf-d60e1c6727d9", "316e469f-0fe5-481d-94ca-0a5f5ac6d196"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_external_localopt.py", "file_name": "test_persistent_aposmm_external_localopt.py", "file_type": "text/x-python", "file_size": 4182, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "0b515ea0-71ac-438a-83ab-b450118b7760": {"node_ids": ["2014b8ff-ddc8-4172-b80e-65de756bf805", "d7a04419-cdc6-44e5-8b24-593b5fed18c7"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_ibcdfo_manifold_sampling.py", "file_name": "test_persistent_aposmm_ibcdfo_manifold_sampling.py", "file_type": "text/x-python", "file_size": 4133, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "406fcf46-db33-4767-b912-a3c6927e22ae": {"node_ids": ["9fd2f7b5-5a6c-48b2-85b6-851be97a7f2b", "b9c86518-6fe7-44ad-a45f-d2be5cdb36e0"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_ibcdfo_pounders.py", "file_name": "test_persistent_aposmm_ibcdfo_pounders.py", "file_type": "text/x-python", "file_size": 4642, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "7503e79c-cef9-4179-b511-1fb8b4d8571e": {"node_ids": ["f0d042f2-760e-447b-b06a-cefb635d4960", "39d14ea1-57ea-420a-8f6d-2bcde4861c3d"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_ibcdfo_pounders_jax.py", "file_name": "test_persistent_aposmm_ibcdfo_pounders_jax.py", "file_type": "text/x-python", "file_size": 4216, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "2ef85a1e-715f-4d23-8c8f-70d92dfa1f75": {"node_ids": ["dd7eee9f-b723-492d-8523-537c6fdac5e4"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_nlopt.py", "file_name": "test_persistent_aposmm_nlopt.py", "file_type": "text/x-python", "file_size": 3306, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "7d6a38b7-69e7-406f-a22c-c7a8ca327060": {"node_ids": ["f7c0cf8a-5f3b-4bf5-b7e7-1ce2c9898cee"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_periodic.py", "file_name": "test_persistent_aposmm_periodic.py", "file_type": "text/x-python", "file_size": 3590, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "7e94064c-aec7-408d-ae5d-c8f2d92a44af": {"node_ids": ["3ce6bc0f-e662-4392-8948-cfd488ad5eec", "fddb44a6-e48d-482a-b664-7726fdf0b5fa"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_pounders.py", "file_name": "test_persistent_aposmm_pounders.py", "file_type": "text/x-python", "file_size": 4026, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "8c966c86-54e5-447d-b0b4-a2a8b64cce4b": {"node_ids": ["a004d163-293b-4a55-baff-8db49555f9fd", "b67ce8a8-0bdc-4258-9642-d0595281c788"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_scipy.py", "file_name": "test_persistent_aposmm_scipy.py", "file_type": "text/x-python", "file_size": 4697, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "d39f55b8-96ca-477b-9cbc-f54d5bc63f6f": {"node_ids": ["02541506-4a99-494a-98a3-c7e83b0a3a2a"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_tao_blmvm.py", "file_name": "test_persistent_aposmm_tao_blmvm.py", "file_type": "text/x-python", "file_size": 3432, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "74b4bc8a-f7ce-435f-b186-c2aed0db5857": {"node_ids": ["8c533a7f-76af-45ee-81ae-3fd35fcf0891"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_tao_nm.py", "file_name": "test_persistent_aposmm_tao_nm.py", "file_type": "text/x-python", "file_size": 3037, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "a162b09d-f580-40b3-b292-793ad8c72ca7": {"node_ids": ["3ba3c880-de86-44f2-ab17-e592c88bd91a"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_timeout.py", "file_name": "test_persistent_aposmm_timeout.py", "file_type": "text/x-python", "file_size": 2976, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "e4387adf-cb25-4f48-b60f-e24520778c00": {"node_ids": ["5c548ec4-f17b-48b4-94b4-f97c5b97d91e", "02de5731-7a2c-434d-aeb4-2ed317cf2705"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_with_grad.py", "file_name": "test_persistent_aposmm_with_grad.py", "file_type": "text/x-python", "file_size": 4982, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "665ac598-5466-4707-9e24-bd5049e8c91b": {"node_ids": ["a82ec975-f243-40cb-9e2f-2c8b5eba507e"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_fd_param_finder.py", "file_name": "test_persistent_fd_param_finder.py", "file_type": "text/x-python", "file_size": 2771, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "b9c16011-d34d-4e77-a437-96473c5acb77": {"node_ids": ["09a25642-a408-4fdb-b047-1d668e98601a", "a003eea8-2eed-4ee9-b2e6-74364c72b6d2"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_gp_multitask_ax.py", "file_name": "test_persistent_gp_multitask_ax.py", "file_type": "text/x-python", "file_size": 4145, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "f580794c-abbb-4ca4-89e9-673213eda821": {"node_ids": ["3e54f82b-7ec1-44b2-97c1-066cdd2efc4a"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_sampling_CUDA_variable_resources.py", "file_name": "test_persistent_sampling_CUDA_variable_resources.py", "file_type": "text/x-python", "file_size": 3372, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "9f08513a-0e1b-4193-b57b-f6904f363f04": {"node_ids": ["7d7e9ac2-a0b8-41f0-a928-3ddc9a63ce63"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_sim_uniform_sampling.py", "file_name": "test_persistent_sim_uniform_sampling.py", "file_type": "text/x-python", "file_size": 2910, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "775f29f0-7101-479c-9afd-591bc3345bb6": {"node_ids": ["3bfb668a-4b06-4050-8034-434434015c67", "f38a1c0c-95a1-4dab-b2b9-4f1b708c2be1"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_surmise_calib.py", "file_name": "test_persistent_surmise_calib.py", "file_type": "text/x-python", "file_size": 4596, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "048602cb-ddec-4f30-b471-cc09981f9ec2": {"node_ids": ["ff6c8fdb-c5c2-48aa-848e-1a572b441406", "af811acf-bf49-4ceb-8efa-de49a8b12b3b"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_surmise_killsims.py", "file_name": "test_persistent_surmise_killsims.py", "file_type": "text/x-python", "file_size": 5687, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "870ea4f0-681b-496e-97b8-12f1978dafff": {"node_ids": ["eaa1c089-62c9-4e6c-aabe-e8bd7e9cd0ca", "980d6210-126f-4bba-ad8f-2b5f8a6dd35e"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_tasmanian.py", "file_name": "test_persistent_tasmanian.py", "file_type": "text/x-python", "file_size": 5906, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "ecda5cdb-5732-4ee4-92af-e8ac2607b766": {"node_ids": ["4a78ef6c-4b4f-4ff5-a9cc-93fb7138a5cc", "cfb5b230-880f-45f0-8a11-f32efb5bd714"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_tasmanian_async.py", "file_name": "test_persistent_tasmanian_async.py", "file_type": "text/x-python", "file_size": 3909, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "6d2c5dfa-f164-4120-b57d-716a0c2cd099": {"node_ids": ["b4b5bf85-b9ea-4cf8-af77-2902472d7d48"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_uniform_gen_decides_stop.py", "file_name": "test_persistent_uniform_gen_decides_stop.py", "file_type": "text/x-python", "file_size": 3532, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "446ee1b5-41a1-4824-aaab-eeff3cfa4664": {"node_ids": ["05834eeb-29df-407f-8105-9aed1fe03ae4"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_uniform_sampling.py", "file_name": "test_persistent_uniform_sampling.py", "file_type": "text/x-python", "file_size": 3569, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "3ec0dbea-ce3d-4408-a0b0-56812611015b": {"node_ids": ["31f173b0-3a0e-4c8d-83b2-4bf6cb1258b3"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_uniform_sampling_async.py", "file_name": "test_persistent_uniform_sampling_async.py", "file_type": "text/x-python", "file_size": 2740, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "b1b855bc-3666-4e4f-8c49-c96bf3872b0f": {"node_ids": ["9d7a7966-7f05-4308-86a9-1d4bb63ca0b4"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_uniform_sampling_cancel.py", "file_name": "test_persistent_uniform_sampling_cancel.py", "file_type": "text/x-python", "file_size": 2561, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "3ac286c8-4ce0-49fe-98dd-d58129d8c740": {"node_ids": ["263fdc84-5f98-49cf-a097-2c54524946d1"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_uniform_sampling_nonblocking.py", "file_name": "test_persistent_uniform_sampling_nonblocking.py", "file_type": "text/x-python", "file_size": 2415, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "ceae4b80-7daf-4cd8-877d-8c02698cc7ad": {"node_ids": ["b89cee99-3e0d-4e13-ad1e-68037e31f063"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_uniform_sampling_running_mean.py", "file_name": "test_persistent_uniform_sampling_running_mean.py", "file_type": "text/x-python", "file_size": 3109, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "f72cad56-6413-4c2e-8898-c3f0f905c62b": {"node_ids": ["0c405ffa-d681-498d-b35c-4f02c66ff6e2"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_proxystore_integration.py", "file_name": "test_proxystore_integration.py", "file_type": "text/x-python", "file_size": 2945, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "e3668ca4-053e-471f-a3bb-ffa1f6af5e1f": {"node_ids": ["4f25f3ab-8d02-41bb-a31d-5377a3f411ff"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_runlines_adaptive_workers.py", "file_name": "test_runlines_adaptive_workers.py", "file_type": "text/x-python", "file_size": 3338, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "60ee18d2-19e3-4536-9977-864582938dc9": {"node_ids": ["ffcec956-b1ca-41f3-99c1-6177d12ee7cc"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_runlines_adaptive_workers_persistent.py", "file_name": "test_runlines_adaptive_workers_persistent.py", "file_type": "text/x-python", "file_size": 3516, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "5480894d-6e80-49eb-88b0-fe798660cb6d": {"node_ids": ["86e7aa78-01b3-4343-9d7d-966632cae590"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_runlines_adaptive_workers_persistent_oversubscribe_rsets.py", "file_name": "test_runlines_adaptive_workers_persistent_oversubscribe_rsets.py", "file_type": "text/x-python", "file_size": 3736, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "3c7512be-1f6b-406c-9bf9-e11b5aeec80e": {"node_ids": ["df165ad3-9079-4d67-8311-f5e27aff7e43"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_sim_dirs_per_calc.py", "file_name": "test_sim_dirs_per_calc.py", "file_type": "text/x-python", "file_size": 3253, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "f333752f-738e-4d88-b916-7157a5d301b6": {"node_ids": ["2e30ef76-e8fb-4db0-a9f7-15eaa39e4bb9"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_sim_dirs_per_worker.py", "file_name": "test_sim_dirs_per_worker.py", "file_type": "text/x-python", "file_size": 3476, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "cd47cd9e-33db-4f93-ae53-5018c44f5c7d": {"node_ids": ["d1c3d297-03c2-4152-af30-66f535d89a24"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_sim_dirs_with_exception.py", "file_name": "test_sim_dirs_with_exception.py", "file_type": "text/x-python", "file_size": 2153, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "3c0e55b9-fe43-4b89-9418-c5a488cd5b66": {"node_ids": ["d279b3fc-60a4-48a5-9e51-6d9b516df0e6", "bb4f81b4-eaa9-4367-a407-54da1590a8e4"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_sim_dirs_with_gen_dirs.py", "file_name": "test_sim_dirs_with_gen_dirs.py", "file_type": "text/x-python", "file_size": 4029, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "84effbcb-2edf-4a5b-bc2d-c161061bc392": {"node_ids": ["f61a5c84-0fcf-45f9-9fee-57c05d2ae939"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_sim_input_dir_option.py", "file_name": "test_sim_input_dir_option.py", "file_type": "text/x-python", "file_size": 2390, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "1eb6961e-2b91-4675-8509-c5d0c6c61295": {"node_ids": ["1ac22cd0-f8b7-4cc6-a5b5-6d709c0a397d", "e65a4448-0f05-4ba7-9ef5-53b1258e7d0d"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_stats_output.py", "file_name": "test_stats_output.py", "file_type": "text/x-python", "file_size": 4268, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "3f2422da-824a-479b-b610-9803a43733f2": {"node_ids": ["e410a735-d39b-479c-b86e-80845b217967"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_uniform_sampling.py", "file_name": "test_uniform_sampling.py", "file_type": "text/x-python", "file_size": 3172, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "3acaa686-7970-4101-8bd2-8a6ac9eb9f39": {"node_ids": ["26dc7d64-daa3-468b-8d2f-bb9566711cc4", "fcd85a06-bd88-4cdb-9bda-eb01a8bd2907"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_uniform_sampling_cancel.py", "file_name": "test_uniform_sampling_cancel.py", "file_type": "text/x-python", "file_size": 5467, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "d9e1d4a0-ef4a-4530-b8ca-5c5968a78202": {"node_ids": ["b2e5283f-a558-4cd2-8dd7-89a8425d0d3d", "90258727-104e-48c2-aa0a-3fe7177cf5b2"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_uniform_sampling_one_residual_at_a_time.py", "file_name": "test_uniform_sampling_one_residual_at_a_time.py", "file_type": "text/x-python", "file_size": 4121, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "d41e021e-d934-4f8d-bac9-6b4eedb64ad0": {"node_ids": ["e672b2ee-63e3-4614-a3e4-8665a0c61298"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_uniform_sampling_then_persistent_localopt_runs.py", "file_name": "test_uniform_sampling_then_persistent_localopt_runs.py", "file_type": "text/x-python", "file_size": 3014, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "1b2dd56b-9ed2-4e4c-a2fc-f6c544d96c3b": {"node_ids": ["80a48846-bf81-404a-98af-97c2aee79d19", "9a3bf1e3-79f3-4f73-8196-898f6294d318"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_uniform_sampling_with_variable_resources.py", "file_name": "test_uniform_sampling_with_variable_resources.py", "file_type": "text/x-python", "file_size": 4212, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "a6446dff-c30b-40b9-8c62-fd789df1f984": {"node_ids": ["45bb0a84-1b17-4078-819c-f240011b8534"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_with_app_persistent_aposmm_tao_nm.py", "file_name": "test_with_app_persistent_aposmm_tao_nm.py", "file_type": "text/x-python", "file_size": 3166, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "33ea15da-c9f5-41b4-bca6-cf1290b1ad97": {"node_ids": ["f35219a5-d573-49c3-9f92-21f9df5ffb56"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_worker_exceptions.py", "file_name": "test_worker_exceptions.py", "file_type": "text/x-python", "file_size": 1959, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "d851519a-fabc-4abb-bb7f-5ecdb6a5cd66": {"node_ids": ["075bd480-6f3c-425b-b846-961dd3cf5d0b"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_workflow_dir.py", "file_name": "test_workflow_dir.py", "file_type": "text/x-python", "file_size": 3149, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "9e9ff103-5211-4d2f-aa3a-871037f18958": {"node_ids": ["50ac58f8-08df-480e-8bfe-10cbb2bb66a4"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_xopt_EI.py", "file_name": "test_xopt_EI.py", "file_type": "text/x-python", "file_size": 3020, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "0053cbb2-b5cb-4a63-8240-8322cb153926": {"node_ids": ["2a5b51b7-c138-464d-b12f-4254bb97069d"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_xopt_EI_with_types.py", "file_name": "test_xopt_EI_with_types.py", "file_type": "text/x-python", "file_size": 3071, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "b0b4d8a6-8002-498f-b176-8986de05101b": {"node_ids": ["5605ce20-8b84-477a-91e8-f8a111e83377"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_xopt_EI_xopt_sim.py", "file_name": "test_xopt_EI_xopt_sim.py", "file_type": "text/x-python", "file_size": 2897, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "51180ca5-6342-422d-8303-f68ac94aa602": {"node_ids": ["ab26516f-ea06-45e3-a7a9-f9b801a88a10"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_xopt_nelder_mead.py", "file_name": "test_xopt_nelder_mead.py", "file_type": "text/x-python", "file_size": 2581, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "c7213594-4e38-476a-a454-042d1b8a0bc9": {"node_ids": ["0b46cf07-4122-4238-bb6d-409b28cd447e", "37769830-0bbf-4528-a8cf-518ebccdd61c"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_zero_resource_workers.py", "file_name": "test_zero_resource_workers.py", "file_type": "text/x-python", "file_size": 4360, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "2add599a-8674-4ecc-8b28-f844f64b2b72": {"node_ids": ["fa56275e-b4ee-40d4-92b0-0fabc0e131a2", "4563d9f7-97bd-446b-8305-abb94e8fb00f"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_zero_resource_workers_subnode.py", "file_name": "test_zero_resource_workers_subnode.py", "file_type": "text/x-python", "file_size": 4639, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}}, "1f6cab90-826f-403a-bff9-a5b5dd7f8316": {"node_ids": ["aad3105b-e0fd-4d40-8707-bc1c37d7f8fe"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/search.html", "file_name": "search.html", "file_type": "text/html", "file_size": 8155, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "14adba67-0f6f-4ba8-bb63-0e3e7d607889": {"node_ids": ["c8daa0bc-7c59-49fd-9a09-db42ca2de41d", "9065b728-f627-4a5d-921e-7a9bce73be81", "fd506470-7d45-415d-88f5-b5ac12e6d30d", "e8579be3-98d8-4ffe-bdd7-3aa7bea1f747"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/aposmm_tutorial.html", "file_name": "aposmm_tutorial.html", "file_type": "text/html", "file_size": 40922, "creation_date": "2025-11-25", "last_modified_date": "2025-04-25"}}, "3fadc6a7-0bd5-460e-8c90-d50ccb115c4f": {"node_ids": ["44cc8a48-be8f-4604-83fc-8c23370fde42", "fce1316c-c57d-4533-b485-d2e8c6442272", "dc36b8de-df9a-48a0-951c-d07cb962234b"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/calib_cancel_tutorial.html", "file_name": "calib_cancel_tutorial.html", "file_type": "text/html", "file_size": 34577, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "98d8b6e7-cd11-40cd-ab15-847b14df99b5": {"node_ids": ["ff1f35a9-c8fd-4a6b-bbfd-3e8bbb562fa5", "9f92d926-5133-4d79-b83f-7e5426a51cd8", "8ae3f6ae-36ea-4092-aeb5-1008c79c5ec8", "d727703e-1d41-4aa3-861b-6304cbcd7293", "a2dbffe3-f320-4a3e-8b78-0979c9a5ac31", "ebc25651-31b8-4452-b04e-7cae5fa0e100", "893b10f0-83a1-48ce-bcde-5547ddacbf50"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/executor_forces_tutorial.html", "file_name": "executor_forces_tutorial.html", "file_type": "text/html", "file_size": 93654, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "287e32bf-3684-42d4-a8e8-6070a3e53c96": {"node_ids": ["012e682b-0a22-42d6-8949-bc85e30cc2cc", "a049b8fc-68a8-4748-b94b-3ade5a66405e", "8c4eead0-3dda-4a51-a38a-424733ea3d15"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/forces_gpu_tutorial.html", "file_name": "forces_gpu_tutorial.html", "file_type": "text/html", "file_size": 40380, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "bf00fd1d-c481-495b-a418-087765bd3fa6": {"node_ids": ["fee0b9f5-d026-4ff0-8067-aa79bba1b958", "1a518941-f795-4b38-95a0-50f4115f7209", "ee2827e4-27ba-43a2-888b-217c6f7ab068", "6eeca64f-ab4d-43e3-83d7-1052cd798093"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/gpcam_tutorial.html", "file_name": "gpcam_tutorial.html", "file_type": "text/html", "file_size": 53675, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "3c0c3742-d705-4e53-b369-4857fe9326ab": {"node_ids": ["0c817a71-0816-4c95-862e-d8d48e8b51b9", "e7eb3957-da3a-4c95-8b10-c979538b6986", "714b41f3-b2c4-453c-b73a-979bbe828b4f", "d1c5aac5-e6c9-4351-a166-e30484ee7650", "ba590121-2b55-43cc-9f04-8d5a8a85753b"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/local_sine_tutorial.html", "file_name": "local_sine_tutorial.html", "file_type": "text/html", "file_size": 60909, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "eec2804d-d292-430e-9566-2706da4f20fd": {"node_ids": ["152085ec-e2e3-403b-9b89-6247243d4fdc"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/tutorials.html", "file_name": "tutorials.html", "file_type": "text/html", "file_size": 14104, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}}, "b7e86265-8d4c-460a-95e7-3b7d5e9cbc24": {"node_ids": ["b4bc183b-9699-4558-b3e0-8791d7b8287b", "d4a81238-bb81-42ae-90f3-243e54832e7e", "2c118644-acfc-4ac9-a895-e470030888d5", "ebab48e7-52b9-4d97-a439-f27104f7e514"], "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/utilities.html", "file_name": "utilities.html", "file_type": "text/html", "file_size": 60875, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}}}, "docstore/data": {"266dfea7-7564-47a3-9314-527629b00055": {"__data__": {"id_": "266dfea7-7564-47a3-9314-527629b00055", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/FAQ.html", "file_name": "FAQ.html", "file_type": "text/html", "file_size": 48102, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8d3e25b9-ca19-47d8-b006-f237464206de", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/FAQ.html", "file_name": "FAQ.html", "file_type": "text/html", "file_size": 48102, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "fc098fe74e3cf0e6a043ebb89fc14a4340d27b53f363a82231ec27c44c090e9e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "556aa0d4-0471-4299-a4b0-b6c20f0c2994", "node_type": "1", "metadata": {}, "hash": "fa2a052f5f46cebdf8977119f8f5f69b4141ac1aaa11933a6ae3cc67920cc380", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Frequently Asked Questions \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nDebugging\nCommon Errors\nHPC Errors and Questions\nlibEnsemble Help\nmacOS and Windows Errors\n\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nFrequently Asked Questions\n\n View page source\n\nFrequently Asked Questions\uf0c1\nIf you have any additional questions, feel free to contact us through Support.\n\nDebugging\uf0c1\nWe recommend using the following options to help debug workflows:\nfrom libensemble import logger\nlogger.set_level(\"DEBUG\")\nlibE_specs[\"safe_mode\"] = True\n\nTo make it easier to debug a generator try setting the libE_specs option gen_on_manager.\nTo do so, add the following to your calling script:\nlibE_specs[\"gen_on_manager\"] = True\n\nWith this, pdb breakpoints can be set as usual in the generator.\nFor more debugging options see \u201cHow can I debug specific libEnsemble processes?\u201d below.\n\nCommon Errors\uf0c1\n\n\u201cManager only - must be at least one worker (2 MPI tasks)\u201d when running with multiprocessing and multiple workers specified.\nIf your code was recently switched from MPI to multiprocessing,\nmake sure that libE_specs is populated\nwith \"comms\": \"local\" and \"nworkers\": [int].\n\n\u201cAssertionError: alloc_f did not return any work, although all workers are idle.\u201d\nThis error occurs when the manager is waiting although all workers are idle.\nNote that a worker can be in a persistent state but is marked as idle\nwhen it has returned data to the manager and is ready to receive work.\nSome possible causes of this error are:\n\nAn MPI libEnsemble run was initiated with only one process, resulting in one\nmanager but no workers. Similarly, the error may arise when running with only\ntwo processes when using a persistent generator. The generator will occupy\none worker, leaving none to run simulation functions.\nAn error in the allocation function. For example, perhaps the allocation\nwaiting for all requested evaluations to be returned (e.g., before starting a\nnew generator), but this condition\nis not returning True even though all scheduled evaluations have returned. This\ncan be due to incorrect implementation (e.g., it has not considered points that\nare cancelled or paused or in some other state that prevents the allocation\nfunction from sending them out to workers).\nA persistent worker (usually a generator) has sent a message back to the manager\nbut is still performing work and may return further points. In this case, consider\nstarting the generator in active_recv mode. This can be\nspecified in the allocation function and will cause the worker to maintain its\nactive status.\nA persistent worker has requested resources that prevents any simulations from\ntaking place. By default, persistent workers hold onto resources even when not\nactive. This may require the worker to return from persistent mode.\nWhen returning points to a persistent generator (often the top code block in\nallocation functions). For example, support.avail_worker_ids(persistent=EVAL_GEN_TAG)\nMake sure that the EVAL_GEN_TAG is specified and not just persistent=True.\n\nlibensemble.history (MANAGER_WARNING): Giving entries in H0 back to gen. Marking entries in H0 as \u2018gen_informed\u2019 if \u2018sim_ended\u2019.\nThis warning is harmless. It\u2019s saying that as the provided History array is being \u201creloaded\u201d into the generator, the copy is being slightly modified.\n\nI keep getting: \u201cNot enough processors per worker to honor arguments.\u201d when using the Executor. Can I submit tasks to allocated processors anyway?\nYou may have set enforce_worker_core_bounds to True when setting\nup the Executor. Also, the resource manager can be completely disabled\nwith:\nlibE_specs[\"disable_resource_manager\"] = True\n\nNote that the Executor submit() method has a parameter hyperthreads\nwhich will attempt to use all hyperthreads/SMT threads available if set to True.\n\nFileExistsError: [Errno 17] File exists: \u201c./ensemble\u201d\nThis can happen when libEnsemble tries to create ensemble or simulation directories\nthat already exist from previous runs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4523, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "556aa0d4-0471-4299-a4b0-b6c20f0c2994": {"__data__": {"id_": "556aa0d4-0471-4299-a4b0-b6c20f0c2994", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/FAQ.html", "file_name": "FAQ.html", "file_type": "text/html", "file_size": 48102, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8d3e25b9-ca19-47d8-b006-f237464206de", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/FAQ.html", "file_name": "FAQ.html", "file_type": "text/html", "file_size": 48102, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "fc098fe74e3cf0e6a043ebb89fc14a4340d27b53f363a82231ec27c44c090e9e", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "266dfea7-7564-47a3-9314-527629b00055", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/FAQ.html", "file_name": "FAQ.html", "file_type": "text/html", "file_size": 48102, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "14e5102cdcacc0a204f5f96c3628ae166a9dcbe69b8e2611513d49fbed37c7e6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "69b18b31-0474-4191-b226-412c20301951", "node_type": "1", "metadata": {}, "hash": "4c7f5031db42ef15e950dcc351d0dfe065fa211a4cec8158f526d02974692aad", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Marking entries in H0 as \u2018gen_informed\u2019 if \u2018sim_ended\u2019.\nThis warning is harmless. It\u2019s saying that as the provided History array is being \u201creloaded\u201d into the generator, the copy is being slightly modified.\n\nI keep getting: \u201cNot enough processors per worker to honor arguments.\u201d when using the Executor. Can I submit tasks to allocated processors anyway?\nYou may have set enforce_worker_core_bounds to True when setting\nup the Executor. Also, the resource manager can be completely disabled\nwith:\nlibE_specs[\"disable_resource_manager\"] = True\n\nNote that the Executor submit() method has a parameter hyperthreads\nwhich will attempt to use all hyperthreads/SMT threads available if set to True.\n\nFileExistsError: [Errno 17] File exists: \u201c./ensemble\u201d\nThis can happen when libEnsemble tries to create ensemble or simulation directories\nthat already exist from previous runs. To avoid this, ensure the ensemble directory\npaths are unique by appending some unique value to libE_specs[\"ensemble_dir_path\"],\nor automatically instruct runs to operate in unique directories via libE_specs[\"use_workflow_dir\"] = True.\n\nPETSc and MPI errors with \u201c[unset]: write_line error; fd=-1 buf=:cmd=abort exitcode=59\u201d\nwith python [test with PETSc].py --nworkers 4\nThis error occurs on some platforms when using PETSc with libEnsemble\nin local (multiprocessing) mode. We believe this is due to PETSc initializing MPI\nbefore libEnsemble forks processes using multiprocessing. The recommended solution\nis running libEnsemble in MPI mode. An alternative solution may be using a serial\nbuild of PETSc.\n\nNote\nThis error may depend on how multiprocessing handles an existing MPI\ncommunicator in a particular platform.\n\n\u201cUserWarning: Pydantic serializer warnings:Unexpected extra items present in tuple\nThis warning happens with Pydantic 2.6.0. Upgrading to the latest version\n(2.6.1+) should remove the warning.\n\nHPC Errors and Questions\uf0c1\n\nWhy does libEnsemble hang on certain systems when running with MPI?\nAnother symptom may be the manager only communicating with Worker 1. This issue\nmay occur if matching probes, which mpi4py uses by default, are not supported\nby the communications fabric, like Intel\u2019s Truescale (TMI) fabric. This can be\nsolved by switching fabrics or disabling matching probes before the MPI module\nis first imported.\nAdd these two lines BEFORE from mpi4py import MPI:\nimport mpi4py\nmpi4py.rc.recv_mprobe = False\n\nAlso see https://software.intel.com/en-us/articles/python-mpi4py-on-intel-true-scale-and-omni-path-clusters.\n\ncan\u2019t open hfi unit: -1 (err=23) - [13] MPI startup(): tmi fabric is not available and fallback fabric is not enabled\nThis may occur on TMI when libEnsemble Python processes have been launched to a\nnode and these, in turn, execute tasks on the node; creating too many processes\nfor the available contexts. Note that while processes can share contexts, the\nsystem is confused by the fact that there are two phases: first libEnsemble\nprocesses and then subprocesses to run user tasks. The solution is to either\nreduce the number of processes running or to specify a fallback fabric through\nenvironment variables:\nunset I_MPI_FABRICS\nexport I_MPI_FABRICS_LIST=tmi,tcp\nexport I_MPI_FALLBACK=1\n\nAlternatively, libEnsemble can be run in central mode where all workers run on dedicated\nnodes while launching all tasks onto other nodes. To do this add a node for libEnsemble,\nand add libE_specs[\"dedicated_mode\"] = True to your calling script.\n\nWhat does \u201c_pickle.UnpicklingError: invalid load key, \u201cx00\u201d.\u201d indicate?\nThis has been observed with the OFA fabric when using mpi4py and usually\nindicates MPI messages aren\u2019t being received correctly. The solution\nis to either switch fabric or turn off matching probes. See the answer to \u201cWhy\ndoes libEnsemble hang on certain systems when running with MPI?\u201d\nFor more information see https://bitbucket.org/mpi4py/mpi4py/issues/102/unpicklingerror-on-commrecv-after-iprobe.", "mimetype": "text/plain", "start_char_idx": 3654, "end_char_idx": 7581, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "69b18b31-0474-4191-b226-412c20301951": {"__data__": {"id_": "69b18b31-0474-4191-b226-412c20301951", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/FAQ.html", "file_name": "FAQ.html", "file_type": "text/html", "file_size": 48102, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8d3e25b9-ca19-47d8-b006-f237464206de", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/FAQ.html", "file_name": "FAQ.html", "file_type": "text/html", "file_size": 48102, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "fc098fe74e3cf0e6a043ebb89fc14a4340d27b53f363a82231ec27c44c090e9e", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "556aa0d4-0471-4299-a4b0-b6c20f0c2994", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/FAQ.html", "file_name": "FAQ.html", "file_type": "text/html", "file_size": 48102, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "16cf3a6c2cf1858919a3357f51f6484c834a32d3a685f93e74ee97cb3da14df3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7f18d681-5fac-4301-87ae-a98c71aab0fc", "node_type": "1", "metadata": {}, "hash": "535a6b833396fb70e2cddc1e4086789dbb8e0785d9f856a09d5b618b374a817e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "To do this add a node for libEnsemble,\nand add libE_specs[\"dedicated_mode\"] = True to your calling script.\n\nWhat does \u201c_pickle.UnpicklingError: invalid load key, \u201cx00\u201d.\u201d indicate?\nThis has been observed with the OFA fabric when using mpi4py and usually\nindicates MPI messages aren\u2019t being received correctly. The solution\nis to either switch fabric or turn off matching probes. See the answer to \u201cWhy\ndoes libEnsemble hang on certain systems when running with MPI?\u201d\nFor more information see https://bitbucket.org/mpi4py/mpi4py/issues/102/unpicklingerror-on-commrecv-after-iprobe.\n\nsrun: Job ****** step creation temporarily disabled, retrying (Requested nodes are busy)\nNote that this message has been observed on Perlmutter when none of the problems\nbelow are present, and is likely caused by interference with system processes\nthat run between tasks. In this case, it may cause overhead but does not prevent\ncorrect functioning.\nWhen running on a SLURM system, this implies that you are trying to run on a resource\nthat is already dedicated to another task. The reason can vary, some reasons are:\n\nAll the contexts are in use. This has occurred when using TMI fabric on clusters.\nSee question can\u2019t open hfi unit: -1 (err=23) for more info.\nAll the memory is assigned to the first job-step (srun application), due to a default\nexclusive mode scheduling policy. This has been observed on Perlmutter and SDF.\nIn some cases using these environment variables will stop the issue:\nexport SLURM_EXACT=1\nexport SLURM_MEM_PER_NODE=0\n\nAlternatively, this can be resolved by limiting the memory and other\nresources given to each task using the --exact option to srun along with other\nrelevant options. For example:\nsrun --exact -n 4 -c 1 --mem-per-cpu=4G\n\nwould ensure that one CPU and 4 Gigabytes of memory are assigned to each MPI process.\nThe amount of memory should be determined by the memory on the node divided by\nthe number of CPUs. In the executor, this can be expressed via the extra_args option.\nIf libEnsemble is sharing nodes with submitted tasks (user applications launched by workers),\nthen you may need to do this for your launch of libEnsemble also, ensuring there are enough\nresources for both the libEnsemble manager and workers and the launched tasks. If this is\ncomplicated, we recommended using a dedicated node for libEnsemble.\n\nlibEnsemble Help\uf0c1\n\nHow can I debug specific libEnsemble processes?\nThis is most easily addressed when running libEnsemble locally. Try\nmpiexec -np [num processes] xterm -e \"python [calling script].py\"\nto launch an xterm terminal window specific to each process. Mac users will\nneed to install xQuartz.\nIf running in local mode, try using one of the ForkablePdb\nroutines in libensemble.tools to set breakpoints and debug similarly\nto pdb. How well this works varies by system.\nfrom libensemble.tools import ForkablePdb\nForkablePdb().set_trace()\n\nCan I use the MPI Executor when running libEnsemble with multiprocessing?\nYes. The Executor type determines only how libEnsemble workers\nexecute and interact with user applications and is independent of comms chosen\nfor manager/worker communications.\n\nHow can I disable libEnsemble\u2019s output files?\nSet libE_specs[\"disable_log_files\"] to True.\nIf libEnsemble aborts on an exception, the History array and persis_info\ndictionaries will be dumped. This can be suppressed by\nsetting libE_specs[\"save_H_and_persis_on_abort\"] to False.\nSee here for more information about these files.\n\nHow can I silence libEnsemble or prevent printed warnings?\nSome logger messages at or above the MANAGER_WARNING level are mirrored\nto stderr automatically. To disable this, set the minimum stderr displaying level\nto CRITICAL via the following:\nfrom libensemble import logger\nlogger.set_stderr_level(\"CRITICAL\")\n\nThis effectively puts libEnsemble in silent mode.\nSee the Logger Configuration docs for more information.\n\nmacOS and Windows Errors\uf0c1\n\nCan I run libEnsemble on Windows?\nAlthough we have run many libEnsemble workflows successfully on Windows using\nboth MPI and local comms, Windows is not rigorously supported. We highly\nrecommend Unix-like systems.", "mimetype": "text/plain", "start_char_idx": 7002, "end_char_idx": 11130, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "7f18d681-5fac-4301-87ae-a98c71aab0fc": {"__data__": {"id_": "7f18d681-5fac-4301-87ae-a98c71aab0fc", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/FAQ.html", "file_name": "FAQ.html", "file_type": "text/html", "file_size": 48102, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8d3e25b9-ca19-47d8-b006-f237464206de", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/FAQ.html", "file_name": "FAQ.html", "file_type": "text/html", "file_size": 48102, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "fc098fe74e3cf0e6a043ebb89fc14a4340d27b53f363a82231ec27c44c090e9e", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "69b18b31-0474-4191-b226-412c20301951", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/FAQ.html", "file_name": "FAQ.html", "file_type": "text/html", "file_size": 48102, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "42736da57b2cf43f814e12237bd0400bb6e113df25469f867b9317387dc1a8d2", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "If libEnsemble aborts on an exception, the History array and persis_info\ndictionaries will be dumped. This can be suppressed by\nsetting libE_specs[\"save_H_and_persis_on_abort\"] to False.\nSee here for more information about these files.\n\nHow can I silence libEnsemble or prevent printed warnings?\nSome logger messages at or above the MANAGER_WARNING level are mirrored\nto stderr automatically. To disable this, set the minimum stderr displaying level\nto CRITICAL via the following:\nfrom libensemble import logger\nlogger.set_stderr_level(\"CRITICAL\")\n\nThis effectively puts libEnsemble in silent mode.\nSee the Logger Configuration docs for more information.\n\nmacOS and Windows Errors\uf0c1\n\nCan I run libEnsemble on Windows?\nAlthough we have run many libEnsemble workflows successfully on Windows using\nboth MPI and local comms, Windows is not rigorously supported. We highly\nrecommend Unix-like systems. Windows tends to produce more platform-specific\nissues that are difficult to reproduce and troubleshoot.\n\nWindows - How can I run libEnsemble with MPI comms?\nWe have run Windows workflows with MPI comms. However, as most MPI\ndistributions have either dropped Windows support (MPICH and Open MPI) or are\nno longer being maintained (msmpi), we cannot guarantee success.\nWe recommend experimenting with the many Unix-like\nemulators, containers, virtual machines, and other such systems. The\nInstalling PETSc On Microsoft Windows documentation contains valuable\ninformation.\nOtherwise, install msmpi and mpi4py from conda and experiment, or use local comms.\n\nWindows - \u201cA required privilege is not held by the client\u201d\nAssuming you were trying to use the sim_dir_symlink_files or gen_dir_symlink_files options, this indicates that to\nallow libEnsemble to create symlinks, you need to run your current cmd shell as administrator.\n\u201cRuntimeError: An attempt has been made to start a new process\u2026 this probably means that you are not using fork\u2026\n\u201c if __name__ == \u201c__main__\u201d: freeze_support() \u2026\nYou need to place your main entry point code underneath an if __name__ == \"__main__\": block.\nExplanation: Python chooses one of three methods to start new processes when using multiprocessing\n(--comms local with libEnsemble). These are \"fork\", \"spawn\", and \"forkserver\". \"fork\"\nis the default on Unix, and in our experience is quicker and more reliable, but \"spawn\" is the default\non Windows and macOS (See the Python multiprocessing docs).\nPrior to libEnsemble v0.9.2, if libEnsemble detected macOS, it would automatically switch the multiprocessing\nmethod to \"fork\". We decided to stop doing this to avoid overriding defaults and compatibility issues with\nsome libraries.\nIf you\u2019d prefer to use \"fork\" or not reformat your code, you can set the\nmultiprocessing start method by placing\nthe following near the top of your calling script:\nimport multiprocessing\nmultiprocessing.set_start_method(\"fork\", force=True)\n\n\u201cmacOS - Fatal error in MPI_Init_thread: Other MPI error, error stack: \u2026 gethostbyname failed\u201d\nResolve this by appending 127.0.0.1\u00a0\u00a0 [your hostname] to /etc/hosts.\nUnfortunately, 127.0.0.1\u00a0\u00a0 localhost isn\u2019t satisfactory for preventing this.\n\nmacOS - How do I stop the Firewall Security popups when running with the Executor?\nThere are several ways to address this nuisance, but all involve trial and error.\nAn easy (but insecure) solution is temporarily disabling the firewall through\nSystem Preferences -> Security & Privacy -> Firewall -> Turn Off Firewall.\nAlternatively, adding a firewall \u201cAllow incoming connections\u201d rule can be\nattempted for the offending executable. We\u2019ve had limited success running\nsudo codesign --force --deep --sign - /path/to/application.app\non our executables, then confirming the next alerts for the executable\nand mpiexec.hydra.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 10234, "end_char_idx": 14118, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "05702f47-edbf-4e37-b549-94298a412794": {"__data__": {"id_": "05702f47-edbf-4e37-b549-94298a412794", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/advanced_installation.html", "file_name": "advanced_installation.html", "file_type": "text/html", "file_size": 26550, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c4616e64-012d-406c-bcf1-7b6ddb4eb75b", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/advanced_installation.html", "file_name": "advanced_installation.html", "file_type": "text/html", "file_size": 26550, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "0793ee3f6e7b2db8d976d9b2973180c4e920ae2127936d5a817aa0a28ffafe3d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b1b9ee1e-7f7a-4317-bcb9-667e0cd97b77", "node_type": "1", "metadata": {}, "hash": "e397c928d3d41fb93cbfa6a9a63f17569a5369c87a7d0fb1eff9afa30a12dc49", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Advanced Installation \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nOptional Dependencies for Additional Features\n\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nAdvanced Installation\n\n View page source\n\nAdvanced Installation\uf0c1\nlibEnsemble can be installed from pip, Conda, or Spack.\nlibEnsemble requires the following dependencies, which are typically\nautomatically installed alongside libEnsemble:\n\nPython >= 3.10\nNumPy >= 1.21\npsutil >= 5.9.4\npydantic >= 1.10.12\npyyaml >= v6.0\ntomli >= 1.2.1\n\nGiven libEnsemble\u2019s compiled dependencies, the following installation\nmethods each offer a trade-off between convenience and the ability\nto customize builds, including platform-specific optimizations.\nWe always recommend installing in a virtual environment from Conda or another source.\nFurther recommendations for selected HPC systems are given in the\nHPC platform guides.\n\npip\nTo install the latest PyPI release:\npip install libensemble\n\nTo pip install libEnsemble from the latest develop branch:\npython -m pip install --upgrade git+https://github.com/Libensemble/libensemble.git@develop\n\nInstalling with mpi4py\nIf you wish to use mpi4py with libEnsemble (choosing MPI out of the three\ncommunications options), then this should\nbe installed to work with the existing MPI on your system. For example,\nthe following line:\npip install mpi4py\n\nwill use the mpicc compiler wrapper on your PATH to identify the MPI library.\nTo specify a different compiler wrapper, add the MPICC option.\nYou also may wish to avoid existing binary builds; for example,:\nMPICC=mpiicc pip install mpi4py --no-binary mpi4py\n\nOn Summit, the following line is recommended (with gcc compilers):\nCC=mpicc MPICC=mpicc pip install mpi4py --no-binary mpi4py\n\nconda\nInstall libEnsemble with Conda from the conda-forge channel:\nconda config --add channels conda-forge\nconda install -c conda-forge libensemble\n\nThis package comes with some useful optional dependencies, including\noptimizers and will install quickly as ready binary packages.\nInstalling with mpi4py with Conda\nIf you wish to use mpi4py with libEnsemble (choosing MPI out of the three\ncommunications options), you can use the\nfollowing.\n\nNote\nFor clusters and HPC systems, always install mpi4py to use the\nsystem MPI library (see pip instructions above).\n\nFor a standalone build that comes with an MPI implementation, you can install\nlibEnsemble using one of the following variants.\nTo install libEnsemble with MPICH:\nconda install -c conda-forge libensemble=*=mpi_mpich*\n\nTo install libEnsemble with Open MPI:\nconda install -c conda-forge libensemble=*=mpi_openmpi*\n\nThe asterisks will pick up the latest version and build.\n\nNote\nThis syntax may not work without adjustments on macOS or any non-bash\nshell. In these cases, try:\nconda install -c conda-forge libensemble='*'=mpi_mpich'*'\n\nFor a complete list of builds for libEnsemble on Conda:\nconda search libensemble --channel conda-forge\n\nSpack\nInstall libEnsemble using the Spack distribution:\nspack install py-libensemble\n\nThe above command will install the latest release of libEnsemble with\nthe required dependencies only. Other optional\ndependencies can be specified through variants. The following\nline installs libEnsemble version 0.7.2 with some common variants\n(e.g., using APOSMM):\nspack install py-libensemble @0.7.2 +mpi +scipy +mpmath +petsc4py +nlopt\n\nThe list of variants can be found by running:\nspack info py-libensemble\n\nOn some platforms you may wish to run libEnsemble without mpi4py,\nusing a serial PETSc build.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4067, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "b1b9ee1e-7f7a-4317-bcb9-667e0cd97b77": {"__data__": {"id_": "b1b9ee1e-7f7a-4317-bcb9-667e0cd97b77", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/advanced_installation.html", "file_name": "advanced_installation.html", "file_type": "text/html", "file_size": 26550, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c4616e64-012d-406c-bcf1-7b6ddb4eb75b", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/advanced_installation.html", "file_name": "advanced_installation.html", "file_type": "text/html", "file_size": 26550, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "0793ee3f6e7b2db8d976d9b2973180c4e920ae2127936d5a817aa0a28ffafe3d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "05702f47-edbf-4e37-b549-94298a412794", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/advanced_installation.html", "file_name": "advanced_installation.html", "file_type": "text/html", "file_size": 26550, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "f4ce107a901eb5a115d2fe5ee73621262cbf551b127258db748e9dec7ca8f476", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "In these cases, try:\nconda install -c conda-forge libensemble='*'=mpi_mpich'*'\n\nFor a complete list of builds for libEnsemble on Conda:\nconda search libensemble --channel conda-forge\n\nSpack\nInstall libEnsemble using the Spack distribution:\nspack install py-libensemble\n\nThe above command will install the latest release of libEnsemble with\nthe required dependencies only. Other optional\ndependencies can be specified through variants. The following\nline installs libEnsemble version 0.7.2 with some common variants\n(e.g., using APOSMM):\nspack install py-libensemble @0.7.2 +mpi +scipy +mpmath +petsc4py +nlopt\n\nThe list of variants can be found by running:\nspack info py-libensemble\n\nOn some platforms you may wish to run libEnsemble without mpi4py,\nusing a serial PETSc build. This is often preferable if running on\nthe launch nodes of a three-tier system (e.g., Summit):\nspack install py-libensemble +scipy +mpmath +petsc4py ^py-petsc4py~mpi ^petsc~mpi~hdf5~hypre~superlu-dist\n\nThe installation will create modules for libEnsemble and the dependent\npackages. These can be loaded by running:\nspack load -r py-libensemble\n\nAny Python packages will be added to the PYTHONPATH when the modules are loaded. If you do not have\nmodules on your system you may need to install lmod (also available in Spack):\nspack install lmod\n. $(spack location -i lmod)/lmod/lmod/init/bash\nspack load lmod\n\nAlternatively, Spack could be used to build the serial petsc4py, and Conda could use this by loading\nthe py-petsc4py module thus created.\nHint: When combining Spack and Conda, you can access your Conda Python and packages in your\n~/.spack/packages.yaml while your Conda environment is activated, using CONDA_PREFIX\nFor example, if you have an activated Conda environment with Python 3.10 and SciPy installed:\npackages:\npython:\n externals:\n - spec: \"python\"\n prefix: $CONDA_PREFIX\n buildable: False\npy-numpy:\n externals:\n - spec: \"py-numpy\"\n prefix: $CONDA_PREFIX/lib/python3.10/site-packages/numpy\n buildable: False\npy-scipy:\n externals:\n - spec: \"py-scipy\"\n prefix: $CONDA_PREFIX/lib/python3.10/site-packages/scipy\n buildable: True\n\nFor more information on Spack builds and any particular considerations\nfor specific systems, see the spack_libe repository. In particular, this\nincludes some example packages.yaml files (which go in ~/.spack/).\nThese files are used to specify dependencies that Spack must obtain from\nthe given system (rather than building from scratch). This may include\nPython and the packages distributed with it (e.g., numpy), and will\noften include the system MPI library.\n\nOptional Dependencies for Additional Features\uf0c1\nThe following packages may be installed separately to enable additional features:\n\npyyaml and tomli - Parameterize libEnsemble via yaml or toml\nGlobus Compute - Submit simulation or generator function instances to remote Globus Compute endpoints\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 3290, "end_char_idx": 6291, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a4925a19-0d23-4436-8311-4e1679252e82": {"__data__": {"id_": "a4925a19-0d23-4436-8311-4e1679252e82", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/contributing.html", "file_name": "contributing.html", "file_type": "text/html", "file_size": 17607, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7ca686f9-a30a-4bb0-ab89-4cbe457f327f", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/contributing.html", "file_name": "contributing.html", "file_type": "text/html", "file_size": 17607, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "a6951f132d09a01c2da1647e561bc78f0f912f9b63f65410048b5e36e2c1800d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Contributing to libEnsemble \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nContributing to libEnsemble\n\n View page source\n\nContributing to libEnsemble\uf0c1\nContributions may be made via a GitHub pull request to\n\nhttps://github.com/Libensemble/libensemble\n\nlibEnsemble uses the Gitflow model. Contributors should branch from, and\nmake pull requests to, the develop branch. The main branch is used only\nfor releases. Pull requests may be made from a fork, for those without\nrepository write access.\nCode should pass flake8 tests, allowing for the exceptions\ngiven in the flake8 file in the project directory.\nPython code should be formatted using the latest version of black by running\nthe following in the base libensemble directory:\nblack --config=.black .\n\nIssues can be raised at\n\nhttps://github.com/Libensemble/libensemble/issues\n\nIssues may include reporting bugs or suggested features. Administrators\nwill add issues, as appropriate, to the project board at\n\nhttps://github.com/Libensemble/libensemble/projects\n\nBy convention, user branch names should have a <type>/<name> format, where\nexample types are feature, bugfix, testing, docs, and experimental.\nAdministrators may take a hotfix branch from the main, which will be\nmerged into main (as a patch) and develop. Administrators may also take a\nrelease branch off develop and then merge this branch into main and develop\nfor a release. Most branches should relate to an issue or feature.\nWhen a branch closes a related issue, the pull request message should include\nthe phrase \u201cCloses #N,\u201d where N is the issue number. This will automatically\nclose out the issues when they are pulled into the default branch (currently\nmain).\nlibEnsemble is distributed under a 3-clause BSD license (see LICENSE). The\nact of submitting a pull request (with or without an explicit\nSigned-off-by tag) will be understood as an affirmation of the\nfollowing:\nDeveloper's Certificate of Origin 1.1\n\nBy making a contribution to this project, I certify that:\n\n(a) The contribution was created in whole or in part by me and I\n have the right to submit it under the open source license\n indicated in the file; or\n\n(b) The contribution is based upon previous work that, to the best\n of my knowledge, is covered under an appropriate open source\n license and I have the right under that license to submit that\n work with modifications, whether created in whole or in part\n by me, under the same open source license (unless I am\n permitted to submit under a different license), as indicated\n in the file; or\n\n(c) The contribution was provided directly to me by some other\n person who certified (a), (b) or (c) and I have not modified\n it.\n\n(d) I understand and agree that this project and the contribution\n are public and that a record of the contribution (including all\n personal information I submit with it, including my sign-off) is\n maintained indefinitely and may be redistributed consistent with\n this project or the open source license(s) involved.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3709, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "49542a2f-0d16-490b-9b18-88a840f1e763": {"__data__": {"id_": "49542a2f-0d16-490b-9b18-88a840f1e763", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/alloc_specs.html", "file_name": "alloc_specs.html", "file_type": "text/html", "file_size": 19081, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fbda3572-c8bb-4b7f-b0f3-6d4bf2ddfe84", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/alloc_specs.html", "file_name": "alloc_specs.html", "file_type": "text/html", "file_size": 19081, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "aecf8e27c922ce72bd74452b0aad8423da997bf42bd5f78712bbb4b59adfbb33", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Allocation Specs \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nLibE Specs\nGenerator Specs\nSimulation Specs\nAllocation Specs\nAllocSpecs\n\nPlatform Specs\npersis_info\nExit Criteria\n\nOutput Management\nHistory Array\nResource Manager\nWriting User Functions\nExecutors\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nConfiguring libEnsemble\nAllocation Specs\n\n View page source\n\nAllocation Specs\uf0c1\nAllocation function specifications to be set in the user calling script. Optional.\nCan be constructed and passed to libEnsemble as a Python class or a dictionary.\n\npydantic model libensemble.specs.AllocSpecs\uf0c1\nSpecifications for configuring an Allocation Function.\n\nFields:\n\nalloc_f (object)\nuser (dict | None)\noutputs (list[tuple])\n\nfield alloc_f: object = <function give_sim_work_first>\uf0c1\nPython function matching the alloc_f interface. Decides when simulator and generator functions\nshould be called, and with what resources and parameters.\n\nfield outputs: list[tuple] = [] (alias 'out')\uf0c1\nlist of 2- or 3-tuples corresponding to NumPy dtypes. e.g. (\"dim\", int, (3,)), or (\"path\", str).\nAllocation functions that modify libEnsemble\u2019s History array with additional fields should list those\nfields here. Also used to construct libEnsemble\u2019s history array.\n\nfield user: dict | None = {'num_active_gens': 1}\uf0c1\nA user-data dictionary to place bounds, constants, settings, or other parameters\nfor customizing the allocation function.\n\nNote\n\nlibEnsemble uses the following defaults if the user doesn\u2019t provide their own alloc_specs:\n\nUsers can import and adjust these defaults using:\n\nfrom libensemble.specs import AllocSpecs\nmy_new_alloc = AllocSpecs()\nmy_new_alloc.alloc_f = another_function\n\nSee also\n\ntest_uniform_sampling_one_residual_at_a_time.py specifies fields\nto be used by the allocation function give_sim_work_first from\nfast_alloc_and_pausing.py.\n\n alloc_specs = {\n \"alloc_f\": give_sim_work_first, # Allocation function\n \"user\": {\n \"stop_on_NaNs\": True, # Should alloc preempt evals\n \"batch_mode\": True, # Wait until all sim evals are done\n \"num_active_gens\": 1, # Only allow one active generator\n \"stop_partial_fvec_eval\": True, # Should alloc preempt evals\n },\n }\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2939, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "12750370-0878-483c-a005-3f92deeba168": {"__data__": {"id_": "12750370-0878-483c-a005-3f92deeba168", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/data_structures.html", "file_name": "data_structures.html", "file_type": "text/html", "file_size": 13655, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "af6b06d7-cc97-4b2a-8e9b-1c0fb8c15354", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/data_structures.html", "file_name": "data_structures.html", "file_type": "text/html", "file_size": 13655, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "03c94185e463e49ea07e21f4fcb5d8d65b3d42b02fb13125126aeeed032ff67a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Configuring libEnsemble \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nLibE Specs\nGenerator Specs\nSimulation Specs\nAllocation Specs\nPlatform Specs\npersis_info\nExit Criteria\n\nOutput Management\nHistory Array\nResource Manager\nWriting User Functions\nExecutors\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nConfiguring libEnsemble\n\n View page source\n\nConfiguring libEnsemble\uf0c1\nlibEnsemble workflows are configured via the following data structures.\nSee here for instruction on constructing a complete workflow.\n\nlibEnsemble Specifications:\n\nLibE Specs\nLibeSpecs\nScheduler Options\nOverriding Resource Auto-Detection\nFormatting Options for libE_stats File\n\nGenerator Specs\nGenSpecs\n\nSimulation Specs\nSimSpecs\n\nAllocation Specs\nAllocSpecs\n\nPlatform Specs\nplatform_specs\nplatform\nKnown Platforms List\n\npersis_info\nExit Criteria\nExitCriteria\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1613, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f28382f9-3b21-4a8d-8021-0c85dfacdaf9": {"__data__": {"id_": "f28382f9-3b21-4a8d-8021-0c85dfacdaf9", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/exit_criteria.html", "file_name": "exit_criteria.html", "file_type": "text/html", "file_size": 18342, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1fcebff0-829f-4ea7-be6b-3e755139f0eb", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/exit_criteria.html", "file_name": "exit_criteria.html", "file_type": "text/html", "file_size": 18342, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "5eb0b99f68e5cabd7e1c853622e7942e1744dab5b7c9331f3e92e0887ad4ff9d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Exit Criteria \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nLibE Specs\nGenerator Specs\nSimulation Specs\nAllocation Specs\nPlatform Specs\npersis_info\nExit Criteria\nExitCriteria\n\nOutput Management\nHistory Array\nResource Manager\nWriting User Functions\nExecutors\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nConfiguring libEnsemble\nExit Criteria\n\n View page source\n\nExit Criteria\uf0c1\nThe following criteria (or termination tests) can be used to configure when to stop a workflow.\nCan be constructed and passed to libEnsemble as a Python class or a dictionary.\n\npydantic model libensemble.specs.ExitCriteria\uf0c1\nSpecifications for configuring when libEnsemble should stop a given run.\n\nFields:\n\nsim_max (int | None)\ngen_max (int | None)\nwallclock_max (float | None)\nstop_val (tuple[str, float] | None)\n\nfield gen_max: int | None = None\uf0c1\nStop when this many new points have been generated by generator functions.\n\nfield sim_max: int | None = None\uf0c1\nStop when this many new points have been evaluated by simulation functions.\n\nfield stop_val: tuple[str, float] | None = None\uf0c1\nStop when H[str] < float for the given (str, float) pair.\n\nfield wallclock_max: float | None = None\uf0c1\nStop when this many seconds has elapsed since the manager initialized.\n\nSee also\nFrom test_persistent_aposmm_dfols.py.\n exit_criteria = {\n \"sim_max\": 1000,\n \"wallclock_max\": 100,\n \"stop_val\": (\"f\", 3000),\n }\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2154, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "fb406632-037f-44b8-8167-211ae35c6da7": {"__data__": {"id_": "fb406632-037f-44b8-8167-211ae35c6da7", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/gen_specs.html", "file_name": "gen_specs.html", "file_type": "text/html", "file_size": 32164, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5c04a5ad-65e7-4b19-8dc2-135017004f34", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/gen_specs.html", "file_name": "gen_specs.html", "file_type": "text/html", "file_size": 32164, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "93f05e49af398ca15feefa09ccb890500ad48747c7c9ef3ebc4ebdd19cab6285", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "45b8647a-63c5-427e-a0de-6bc520122f9f", "node_type": "1", "metadata": {}, "hash": "8bae787dd6f05292dcef5d568037e5eb8a9b89a0d9055c8bc0c7885d9edcd673", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Generator Specs \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nLibE Specs\nGenerator Specs\nGenSpecs\n\nSimulation Specs\nAllocation Specs\nPlatform Specs\npersis_info\nExit Criteria\n\nOutput Management\nHistory Array\nResource Manager\nWriting User Functions\nExecutors\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nConfiguring libEnsemble\nGenerator Specs\n\n View page source\n\nGenerator Specs\uf0c1\nUsed to specify the generator function, its inputs and outputs, and user data.\nCan be constructed and passed to libEnsemble as a Python class or a dictionary.\n\nclass\n 1...\n 2import numpy as np\n 3from libensemble import GenSpecs\n 4from generator import gen_random_sample\n 5\n 6...\n 7\n 8gen_specs = GenSpecs(\n 9 gen_f=gen_random_sample,\n10 outputs=[(\"x\", float, (1,))],\n11 user={\n12 \"lower\": np.array([-3]),\n13 \"upper\": np.array([3]),\n14 \"gen_batch_size\": 5,\n15 },\n16)\n17...\n\npydantic model libensemble.specs.GenSpecs\uf0c1\nSpecifications for configuring a Generator Function.\n\nFields:\n\ngen_f (object | None)\ninputs (list[str] | None)\npersis_in (list[str] | None)\noutputs (list[tuple])\nglobus_compute_endpoint (str | None)\nthreaded (bool | None)\nuser (dict | None)\n\nfield gen_f: object | None = None\uf0c1\nPython function matching the gen_f interface. Produces parameters for evaluation by a\nsimulator function, and makes decisions based on simulator function output.\n\nfield globus_compute_endpoint: str | None = ''\uf0c1\nA Globus Compute (https://www.globus.org/compute) ID corresponding to an active endpoint on a remote system.\nlibEnsemble\u2019s workers will submit generator function instances to this endpoint instead of\ncalling them locally.\n\nfield inputs: list[str] | None = [] (alias 'in')\uf0c1\nlist of field names out of the complete history to pass\ninto the generator function upon calling.\n\nfield outputs: list[tuple] = [] (alias 'out')\uf0c1\nlist of 2- or 3-tuples corresponding to NumPy dtypes.\ne.g. (\"dim\", int, (3,)), or (\"path\", str). Typically used to initialize an\noutput array within the generator: out = np.zeros(100, dtype=gen_specs[\"out\"]).\nAlso used to construct libEnsemble\u2019s history array.\n\nfield persis_in: list[str] | None = []\uf0c1\nlist of field names to send to a persistent generator function\nthroughout the run, following initialization.\n\nfield threaded: bool | None = False\uf0c1\nInstruct Worker process to launch user function to a thread.\n\nfield user: dict | None = {}\uf0c1\nA user-data dictionary to place bounds, constants, settings, or other parameters for\ncustomizing the generator function\n\ndict\n 1...\n 2import numpy as np\n 3from generator import gen_random_sample\n 4\n 5...\n 6\n 7gen_specs = {\n 8 \"gen_f\": gen_random_sample,\n 9 \"out\": [(\"x\", float, (1,))],\n10 \"user\": {\n11 \"lower\": np.array([-3]),\n12 \"upper\": np.array([3]),\n13 \"gen_batch_size\": 5,\n14 },\n15}\n\nSee also\n\ntest_uniform_sampling.py:\nthe generator function uniform_random_sample in sampling.py will generate 500 random\npoints uniformly over the 2D domain defined by gen_specs[\"ub\"] and\ngen_specs[\"lb\"].", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3594, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "45b8647a-63c5-427e-a0de-6bc520122f9f": {"__data__": {"id_": "45b8647a-63c5-427e-a0de-6bc520122f9f", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/gen_specs.html", "file_name": "gen_specs.html", "file_type": "text/html", "file_size": 32164, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5c04a5ad-65e7-4b19-8dc2-135017004f34", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/gen_specs.html", "file_name": "gen_specs.html", "file_type": "text/html", "file_size": 32164, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "93f05e49af398ca15feefa09ccb890500ad48747c7c9ef3ebc4ebdd19cab6285", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fb406632-037f-44b8-8167-211ae35c6da7", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/gen_specs.html", "file_name": "gen_specs.html", "file_type": "text/html", "file_size": 32164, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "d71c8b8f3228152419f685197cc6317d6c5f39cb938b8492d2f92d7a7b4ca147", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "field user: dict | None = {}\uf0c1\nA user-data dictionary to place bounds, constants, settings, or other parameters for\ncustomizing the generator function\n\ndict\n 1...\n 2import numpy as np\n 3from generator import gen_random_sample\n 4\n 5...\n 6\n 7gen_specs = {\n 8 \"gen_f\": gen_random_sample,\n 9 \"out\": [(\"x\", float, (1,))],\n10 \"user\": {\n11 \"lower\": np.array([-3]),\n12 \"upper\": np.array([3]),\n13 \"gen_batch_size\": 5,\n14 },\n15}\n\nSee also\n\ntest_uniform_sampling.py:\nthe generator function uniform_random_sample in sampling.py will generate 500 random\npoints uniformly over the 2D domain defined by gen_specs[\"ub\"] and\ngen_specs[\"lb\"].\n\n gen_specs = {\n \"gen_f\": uniform_random_sample, # Function generating sim_f input\n \"out\": [(\"x\", float, (2,))], # Tell libE gen_f output, type, size\n \"user\": {\n \"gen_batch_size\": 500, # Used by this specific gen_f\n \"lb\": np.array([-3, -2]), # Used by this specific gen_f\n \"ub\": np.array([3, 2]), # Used by this specific gen_f\n },\n }\n\nSee also\n\ntest_persistent_aposmm_nlopt.py shows an example where gen_specs[\"in\"] is empty, but\ngen_specs[\"persis_in\"] specifies values to return to the persistent generator.\ntest_persistent_aposmm_with_grad.py shows a similar example where an H0 is used to\nprovide points from a previous run. In this case, gen_specs[\"in\"] is populated to provide\nthe generator with data for the initial points.\nIn some cases you might be able to give different (perhaps fewer) fields in \"persis_in\"\nthan \"in\"; you may not need to give x for example, as the persistent generator\nalready has x for those points. See more example uses of persis_in.\n\nNote\n\nIn all interfaces, custom fields should only be placed in \"user\"\nGenerator \"out\" fields typically match Simulation \"in\" fields, and vice-versa.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 2971, "end_char_idx": 4837, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "724ee8c0-f519-4396-9c35-288e15c2c93a": {"__data__": {"id_": "724ee8c0-f519-4396-9c35-288e15c2c93a", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/libE_specs.html", "file_name": "libE_specs.html", "file_type": "text/html", "file_size": 105395, "creation_date": "2025-11-25", "last_modified_date": "2025-11-17"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b72001b1-05e8-4dc9-82c6-52bbc02384d5", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/libE_specs.html", "file_name": "libE_specs.html", "file_type": "text/html", "file_size": 105395, "creation_date": "2025-11-25", "last_modified_date": "2025-11-17"}, "hash": "7607ae16df58ac7942061a5aea4144f5c5fbfce874a83ef76b105abb032ecfeb", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "41700a42-b122-41c0-a501-51674c0a122b", "node_type": "1", "metadata": {}, "hash": "1ca9e95a81d2ffd4e6784679fe4fdc18c5ce698f7e2055e84934d279722139b8", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "LibE Specs \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nLibE Specs\nLibeSpecs\nScheduler Options\nOverriding Resource Auto-Detection\nFormatting Options for libE_stats File\n\nGenerator Specs\nSimulation Specs\nAllocation Specs\nPlatform Specs\npersis_info\nExit Criteria\n\nOutput Management\nHistory Array\nResource Manager\nWriting User Functions\nExecutors\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nConfiguring libEnsemble\nLibE Specs\n\n View page source\n\nLibE Specs\uf0c1\nlibEnsemble is primarily customized by setting options within a LibeSpecs class or dictionary.\nfrom libensemble.specs import LibeSpecs\n\nspecs = LibeSpecs(\n gen_on_manager=True,\n save_every_k_gens=100,\n sim_dirs_make=True,\n nworkers=4\n)\n\nSettings by Category\n\nGeneral\n\ncomms [str] = \"mpi\":Manager/Worker communications mode: 'mpi', 'local', or 'tcp'.\nIf nworkers is specified, then local comms will be used unless a\nparallel MPI environment is detected.\n\nnworkers [int]:Number of worker processes in \"local\", \"threads\", or \"tcp\".\n\ngen_on_manager [bool] = FalseInstructs Manager process to run generator functions.\nThis generator function can access/modify user objects by reference.\n\nmpi_comm [MPI communicator] = MPI.COMM_WORLD:libEnsemble MPI communicator.\n\ndry_run [bool] = False:Whether libEnsemble should immediately exit after validating all inputs.\n\nabort_on_exception [bool] = True:In MPI mode, whether to call MPI_ABORT on an exception.\nIf False, an exception will be raised by the manager.\n\nworker_timeout [int] = 1:On libEnsemble shutdown, number of seconds after which workers considered timed out,\nthen terminated.\n\nkill_canceled_sims [bool] = False:Try to kill sims with cancel_requested set to True.\nIf False, the manager avoids this moderate overhead.\n\ndisable_log_files [bool] = False:Disable ensemble.log and libE_stats.txt log files.\n\ngen_workers [list of ints]:List of workers that should run only generators. All other workers will run\nonly simulator functions.\n\nDirectories\n\nGeneral\n\nuse_workflow_dir [bool] = False:Whether to place all log files, dumped arrays, and default ensemble-directories in a\nseparate workflow directory. Each run is suffixed with a hash.\nIf copying back an ensemble directory from another location, the copy is placed here.\n\nworkflow_dir_path [str]:Optional path to the workflow directory.\n\nensemble_dir_path [str] = \"./ensemble\":Path to main ensemble directory. Can serve\nas single working directory for workers, or contain calculation directories.\nLibeSpecs.ensemble_dir_path = \"/scratch/my_ensemble\"\n\nensemble_copy_back [bool] = False:Whether to copy back contents of ensemble_dir_path to launch\nlocation. Useful if ensemble_dir_path is located on node-local storage.\n\nreuse_output_dir [bool] = False:Whether to allow overwrites and access to previous ensemble and workflow directories in subsequent runs.\nFalse by default to protect results.\n\ncalc_dir_id_width [int] = 4:The width of the numerical ID component of a calculation directory name. Leading\nzeros are padded to the sim/gen ID.\n\nuse_worker_dirs [bool] = False:Whether to organize calculation directories under worker-specific directories:\n\nFalse\n- /ensemble_dir\n - /sim0000\n - /gen0001\n - /sim0001\n ...\n\nTrue\n- /ensemble_dir\n - /worker1\n - /sim0000\n - /gen0001\n - /sim0004\n ...\n - /worker2\n ...\n\nSims\n\nsim_dirs_make [bool] = False:Whether to make calculation directories for each simulation function call.\n\nsim_dir_copy_files [list]:Paths to files or directories to copy into each sim directory, or ensemble directory.\nList of strings or pathlib.Path objects.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4185, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "41700a42-b122-41c0-a501-51674c0a122b": {"__data__": {"id_": "41700a42-b122-41c0-a501-51674c0a122b", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/libE_specs.html", "file_name": "libE_specs.html", "file_type": "text/html", "file_size": 105395, "creation_date": "2025-11-25", "last_modified_date": "2025-11-17"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b72001b1-05e8-4dc9-82c6-52bbc02384d5", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/libE_specs.html", "file_name": "libE_specs.html", "file_type": "text/html", "file_size": 105395, "creation_date": "2025-11-25", "last_modified_date": "2025-11-17"}, "hash": "7607ae16df58ac7942061a5aea4144f5c5fbfce874a83ef76b105abb032ecfeb", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "724ee8c0-f519-4396-9c35-288e15c2c93a", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/libE_specs.html", "file_name": "libE_specs.html", "file_type": "text/html", "file_size": 105395, "creation_date": "2025-11-25", "last_modified_date": "2025-11-17"}, "hash": "03757fde0c56c6713f1c42410dd2f6f57a0496713b461195b2023b23709a4195", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "587f2abe-f675-4532-b526-54a6a9150e5d", "node_type": "1", "metadata": {}, "hash": "46c8e5c0c6cf1fb326342a4bacd4885a6c8f37bf8aa04ccf3ce9fee35e90eae3", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "False by default to protect results.\n\ncalc_dir_id_width [int] = 4:The width of the numerical ID component of a calculation directory name. Leading\nzeros are padded to the sim/gen ID.\n\nuse_worker_dirs [bool] = False:Whether to organize calculation directories under worker-specific directories:\n\nFalse\n- /ensemble_dir\n - /sim0000\n - /gen0001\n - /sim0001\n ...\n\nTrue\n- /ensemble_dir\n - /worker1\n - /sim0000\n - /gen0001\n - /sim0004\n ...\n - /worker2\n ...\n\nSims\n\nsim_dirs_make [bool] = False:Whether to make calculation directories for each simulation function call.\n\nsim_dir_copy_files [list]:Paths to files or directories to copy into each sim directory, or ensemble directory.\nList of strings or pathlib.Path objects.\n\nsim_dir_symlink_files [list]:Paths to files or directories to symlink into each sim directory, or ensemble directory.\nList of strings or pathlib.Path objects.\n\nsim_input_dir [str]:Copy this directory\u2019s contents into the working directory upon calling the simulation function.\nForms the base of a simulation directory.\n\nGens\n\ngen_dirs_make [bool] = False:Whether to make generator-specific calculation directories for each generator function call.\nEach persistent generator creates a single directory.\n\ngen_dir_copy_files [list]:Paths to copy into the working directory upon calling the generator function.\nList of strings or pathlib.Path objects\n\ngen_dir_symlink_files [list]:Paths to files or directories to symlink into each gen directory.\nList of strings or pathlib.Path objects\n\ngen_input_dir [str]:Copy this directory\u2019s contents into the working directory upon calling the generator function.\nForms the base of a generator directory.\n\nProfiling\n\nprofile [bool] = False:Profile manager and worker logic using cProfile.\n\nsafe_mode [bool] = True:Prevents user functions from overwriting internal fields, but requires moderate overhead.\n\nstats_fmt [dict]:A dictionary of options for formatting \"libE_stats.txt\".\nSee \u201cFormatting Options for libE_stats.txt\u201d.\n\nlive_data [LiveData] = None:Add a live data capture object (e.g., for plotting).\n\nTCP\n\nworkers [list]:TCP Only: A list of worker hostnames.\n\nip [str]:TCP Only: IP address for Manager\u2019s system.\n\nport [int]:TCP Only: Port number for Manager\u2019s system.\n\nauthkey [str]:TCP Only: Authkey for Manager\u2019s system.\n\nworkerID [int]:TCP Only: Worker ID number assigned to the new process.\n\nworker_cmd [list]:TCP Only: Split string corresponding to worker/client Python process invocation. Contains\na local Python path, calling script, and manager/server format-fields for manager_ip,\nmanager_port, authkey, and workerID. nworkers is specified normally.\n\nHistory\n\nsave_every_k_sims [int]:Save history array to file after every k simulated points.\n\nsave_every_k_gens [int]:Save history array to file after every k generated points.\n\nsave_H_and_persis_on_abort [bool] = True:Save states of H and persis_info to file on aborting after an exception.\n\nsave_H_on_completion bool | None = FalseSave state of H to file upon completing a workflow. Also enabled when either save_every_k_sims\nor save_every_k_gens is set.\n\nsave_H_with_date bool | None = FalseSave H filename contains date and timestamp.\n\nH_file_prefix str | None = \"libE_history\"Prefix for H filename.\n\nuse_persis_return_gen [bool] = False:Adds persistent generator output fields to the History array on return.\n\nuse_persis_return_sim [bool] = False:Adds persistent simulator output fields to the History array on return.\n\nfinal_gen_send [bool] = False:Send final simulation results to persistent generators before shutdown.\nThe results will be sent along with the PERSIS_STOP tag.\n\nResources\n\ndisable_resource_manager [bool] = False:Disable the built-in resource manager, including automatic resource detection\nand/or assignment of resources to workers. \"resource_info\" will be ignored.\n\nplatform [str]:Name of a known platform, e.g., LibeSpecs.platform = \"perlmutter_g\"\nAlternatively set the LIBE_PLATFORM environment variable.\n\nplatform_specs [Platform|dict]:A Platform object (or dictionary) specifying settings for a platform..\nFields not provided will be auto-detected. Can be set to a known platform object.\n\nnum_resource_sets [int]:The total number of resource sets into which resources will be divided.\nBy default resources will be divided by workers (excluding\nzero_resource_workers).", "mimetype": "text/plain", "start_char_idx": 3471, "end_char_idx": 7782, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "587f2abe-f675-4532-b526-54a6a9150e5d": {"__data__": {"id_": "587f2abe-f675-4532-b526-54a6a9150e5d", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/libE_specs.html", "file_name": "libE_specs.html", "file_type": "text/html", "file_size": 105395, "creation_date": "2025-11-25", "last_modified_date": "2025-11-17"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b72001b1-05e8-4dc9-82c6-52bbc02384d5", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/libE_specs.html", "file_name": "libE_specs.html", "file_type": "text/html", "file_size": 105395, "creation_date": "2025-11-25", "last_modified_date": "2025-11-17"}, "hash": "7607ae16df58ac7942061a5aea4144f5c5fbfce874a83ef76b105abb032ecfeb", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "41700a42-b122-41c0-a501-51674c0a122b", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/libE_specs.html", "file_name": "libE_specs.html", "file_type": "text/html", "file_size": 105395, "creation_date": "2025-11-25", "last_modified_date": "2025-11-17"}, "hash": "b94683c0af33ac98d04ad00d6764ab5a91d0524a67573e67e542dbcf521a740b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d6b01d91-eec3-4120-90e7-dc7464447f82", "node_type": "1", "metadata": {}, "hash": "723186c25ec08eb944ecadd67a664e8484b0db03a1ea937f84d901c2a43f0c60", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "final_gen_send [bool] = False:Send final simulation results to persistent generators before shutdown.\nThe results will be sent along with the PERSIS_STOP tag.\n\nResources\n\ndisable_resource_manager [bool] = False:Disable the built-in resource manager, including automatic resource detection\nand/or assignment of resources to workers. \"resource_info\" will be ignored.\n\nplatform [str]:Name of a known platform, e.g., LibeSpecs.platform = \"perlmutter_g\"\nAlternatively set the LIBE_PLATFORM environment variable.\n\nplatform_specs [Platform|dict]:A Platform object (or dictionary) specifying settings for a platform..\nFields not provided will be auto-detected. Can be set to a known platform object.\n\nnum_resource_sets [int]:The total number of resource sets into which resources will be divided.\nBy default resources will be divided by workers (excluding\nzero_resource_workers).\n\ngen_num_procs [int] = 0:The default number of processors (MPI ranks) required by generators. Unless\noverridden by equivalent persis_info settings, generators will be allocated\nthis many processors for applications launched via the MPIExecutor.\n\ngen_num_gpus [int] = 0:The default number of GPUs required by generators. Unless overridden by\nthe equivalent persis_info settings, generators will be allocated this\nmany GPUs.\n\ngpus_per_group [int]:Number of GPUs for each group in the scheduler. This can be used when\nrunning on nodes with different numbers of GPUs. In effect a\nblock of this many GPUs will be treated as a virtual node.\nBy default the GPUs on each node are treated as a group.\n\nuse_tiles_as_gpus [bool] = False:If True then treat a GPU tile as one GPU, assuming\ntiles_per_GPU is provided in platform_specs or detected.\n\nenforce_worker_core_bounds [bool] = False:Permit submission of tasks with a\nhigher processor count than the CPUs available to the worker.\nLarger node counts are not allowed. Ignored when\ndisable_resource_manager is set.\n\ndedicated_mode [bool] = False:Instructs libEnsemble\u2019s MPI executor not to run applications on nodes where\nlibEnsemble processes (manager and workers) are running.\n\nzero_resource_workers [list of ints]:List of workers (by IDs) that require no resources. For when a fixed mapping of workers\nto resources is required. Otherwise, use num_resource_sets.\nFor use with supported allocation functions.\n\nresource_info [dict]:Provide resource information that will override automatically detected resources.\nThe allowable fields are given below in \u201cOverriding Resource Auto-Detection\u201d\nIgnored if disable_resource_manager is set.\n\nscheduler_opts [dict]:Options for the resource scheduler.\nSee \u201cScheduler Options\u201d for more options.\n\nComplete Class API\n\npydantic model libensemble.specs.LibeSpecs\uf0c1\nSpecifications for configuring libEnsemble\u2019s runtime behavior.\n\nfield H_file_prefix: str | None = 'libE_history'\uf0c1\nPrefix for H filename.\n\nfield abort_on_exception: bool | None = True\uf0c1\nIn MPI mode, whether to call MPI_ABORT on an exception.\nIf False, an exception will be raised by the manager.\n\nfield authkey: str | None = 'libE_auth_864'\uf0c1\nTCP Only: Authkey for Manager\u2019s system.\n\nfield calc_dir_id_width: int | None = 4\uf0c1\nThe width of the numerical ID component of a calculation directory name. Leading\nzeros are padded to the sim/gen ID.\n\nfield comms: str | None = 'mpi'\uf0c1\nManager/Worker communications mode. 'mpi', 'local', 'threads', or 'tcp'\nIf nworkers is specified, then local comms will be used unless a parallel MPI\nenvironment is detected.\n\nfield dedicated_mode: bool | None = False\uf0c1\nInstructs libEnsemble\u2019s MPI executor not to run applications on nodes where\nlibEnsemble processes (manager and workers) are running.\n\nfield disable_log_files: bool | None = False\uf0c1\nDisable ensemble.log and libE_stats.txt log files.\n\nfield disable_resource_manager: bool | None = False\uf0c1\nDisable the built-in resource manager, including automatic resource detection\nand/or assignment of resources to workers. \"resource_info\" will be ignored.\n\nfield dry_run: bool | None = False\uf0c1\nWhether libEnsemble should immediately exit after validating all inputs.", "mimetype": "text/plain", "start_char_idx": 6911, "end_char_idx": 10964, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d6b01d91-eec3-4120-90e7-dc7464447f82": {"__data__": {"id_": "d6b01d91-eec3-4120-90e7-dc7464447f82", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/libE_specs.html", "file_name": "libE_specs.html", "file_type": "text/html", "file_size": 105395, "creation_date": "2025-11-25", "last_modified_date": "2025-11-17"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b72001b1-05e8-4dc9-82c6-52bbc02384d5", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/libE_specs.html", "file_name": "libE_specs.html", "file_type": "text/html", "file_size": 105395, "creation_date": "2025-11-25", "last_modified_date": "2025-11-17"}, "hash": "7607ae16df58ac7942061a5aea4144f5c5fbfce874a83ef76b105abb032ecfeb", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "587f2abe-f675-4532-b526-54a6a9150e5d", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/libE_specs.html", "file_name": "libE_specs.html", "file_type": "text/html", "file_size": 105395, "creation_date": "2025-11-25", "last_modified_date": "2025-11-17"}, "hash": "b32cd8c85f8b8b67ddf0df0f2bb1d4b3ed456a1aee2afd63780e74783b7ffe74", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c52b07e2-c7b2-48c7-92e0-84b5626d36cf", "node_type": "1", "metadata": {}, "hash": "54601968a84a4e5748041b464a3112cb972812f2578bab5cc3afd7b90324b72e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Leading\nzeros are padded to the sim/gen ID.\n\nfield comms: str | None = 'mpi'\uf0c1\nManager/Worker communications mode. 'mpi', 'local', 'threads', or 'tcp'\nIf nworkers is specified, then local comms will be used unless a parallel MPI\nenvironment is detected.\n\nfield dedicated_mode: bool | None = False\uf0c1\nInstructs libEnsemble\u2019s MPI executor not to run applications on nodes where\nlibEnsemble processes (manager and workers) are running.\n\nfield disable_log_files: bool | None = False\uf0c1\nDisable ensemble.log and libE_stats.txt log files.\n\nfield disable_resource_manager: bool | None = False\uf0c1\nDisable the built-in resource manager, including automatic resource detection\nand/or assignment of resources to workers. \"resource_info\" will be ignored.\n\nfield dry_run: bool | None = False\uf0c1\nWhether libEnsemble should immediately exit after validating all inputs.\n\nfield enforce_worker_core_bounds: bool | None = False\uf0c1\nIf False, the Executor will permit the submission of tasks with a\nhigher processor count than the CPUs available to the worker as\ndetected by the resource manager. Larger node counts are not allowed.\nWhen \"disable_resource_manager\" is True,\nthis argument is ignored\n\nfield ensemble_copy_back: bool | None = False\uf0c1\nWhether to copy back contents of ensemble_dir_path to launch\nlocation. Useful if ensemble_dir_path is located on node-local storage.\n\nfield ensemble_dir_path: str | Path | None = PosixPath('ensemble')\uf0c1\nPath to main ensemble directory. Can serve\nas a single working directory for workers, or contain calculation directories\n\nfield final_gen_send: bool | None = False\uf0c1\nSend final simulation results to persistent generators before shutdown.\nThe results will be sent along with the PERSIS_STOP tag.\n\nfield gen_dir_copy_files: list[str | Path] | None = []\uf0c1\nPaths to copy into the working directory upon calling the generator function.\nlist of strings or pathlib.Path objects\n\nfield gen_dir_symlink_files: list[str | Path] | None = []\uf0c1\nPaths to symlink into the working directory upon calling the generator function.\nlist of strings or pathlib.Path objects.\n\nfield gen_dirs_make: bool | None = False\uf0c1\nWhether to make generator-specific calculation directories for each generator function call.\n\nfield gen_input_dir: str | Path | None = None\uf0c1\nCopy this directory\u2019s contents into the working directory upon calling the generator function.\nForms the base of a generator directory.\n\nfield gen_num_gpus: int | None = 0\uf0c1\nThe default number of GPUs required by generators. Unless overridden by\nthe equivalent persis_info settings, generators will be allocated this\nmany GPUs.\n\nfield gen_num_procs: int | None = 0\uf0c1\nThe default number of processors (MPI ranks) required by generators. Unless\noverridden by the equivalent persis_info settings, generators will be\nallocated this many processors for applications launched via the MPIExecutor.\n\nfield gen_on_manager: bool | None = False\uf0c1\nInstructs Manager process to run generator functions.\nThis generator function can access/modify user objects by reference.\n\nfield gen_workers: list[int] | None = []\uf0c1\nlist of workers that should only run generators. All other workers will only\nrun simulator functions.\n\nfield gpus_per_group: int | None = None\uf0c1\nNumber of GPUs for each group in the scheduler. This can be used to deal\nwith scenarios where nodes have different numbers of GPUs. In effect a\nblock of this many GPUs will be treated as a virtual node.\nBy default the GPUs on a node are treated as a group.\n\nfield ip: str | None = None\uf0c1\nTCP Only: IP address for Manager\u2019s system.\n\nfield kill_canceled_sims: bool | None = False\uf0c1\nTry to kill sims with \"cancel_requested\" set True.\nIf False, the manager avoids this moderate overhead.\n\nfield live_data: object | None = None\uf0c1\nAdd a live data capture object (e.g., for plotting).\n\nfield mpi_comm: object | None = None\uf0c1\nlibEnsemble MPI communicator. Default: MPI.COMM_WORLD\n\nfield num_resource_sets: int | None = 0\uf0c1\nTotal number of resource sets. Resources will be divided into this number.\nIf not set, resources will be divided evenly (excluding zero_resource_workers).", "mimetype": "text/plain", "start_char_idx": 10119, "end_char_idx": 14179, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "c52b07e2-c7b2-48c7-92e0-84b5626d36cf": {"__data__": {"id_": "c52b07e2-c7b2-48c7-92e0-84b5626d36cf", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/libE_specs.html", "file_name": "libE_specs.html", "file_type": "text/html", "file_size": 105395, "creation_date": "2025-11-25", "last_modified_date": "2025-11-17"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b72001b1-05e8-4dc9-82c6-52bbc02384d5", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/libE_specs.html", "file_name": "libE_specs.html", "file_type": "text/html", "file_size": 105395, "creation_date": "2025-11-25", "last_modified_date": "2025-11-17"}, "hash": "7607ae16df58ac7942061a5aea4144f5c5fbfce874a83ef76b105abb032ecfeb", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d6b01d91-eec3-4120-90e7-dc7464447f82", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/libE_specs.html", "file_name": "libE_specs.html", "file_type": "text/html", "file_size": 105395, "creation_date": "2025-11-25", "last_modified_date": "2025-11-17"}, "hash": "9af8f564c38c25372a40968f62b95bb3132eeb4a925a7f3f4fcb4a7371e86848", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d5d56557-1863-4f8c-8875-95efdc3498c6", "node_type": "1", "metadata": {}, "hash": "ee41dc94401bd5a6d3c8ac7a357800afe741a0ffede2b6775785412564ae1560", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "In effect a\nblock of this many GPUs will be treated as a virtual node.\nBy default the GPUs on a node are treated as a group.\n\nfield ip: str | None = None\uf0c1\nTCP Only: IP address for Manager\u2019s system.\n\nfield kill_canceled_sims: bool | None = False\uf0c1\nTry to kill sims with \"cancel_requested\" set True.\nIf False, the manager avoids this moderate overhead.\n\nfield live_data: object | None = None\uf0c1\nAdd a live data capture object (e.g., for plotting).\n\nfield mpi_comm: object | None = None\uf0c1\nlibEnsemble MPI communicator. Default: MPI.COMM_WORLD\n\nfield num_resource_sets: int | None = 0\uf0c1\nTotal number of resource sets. Resources will be divided into this number.\nIf not set, resources will be divided evenly (excluding zero_resource_workers).\n\nfield nworkers: int | None = 0\uf0c1\nNumber of worker processes in \"local\", \"threads\", or \"tcp\".\n\nfield platform: str | None = ''\uf0c1\nName of a known platform defined in the platforms module.\nSee Known Platforms list.\nExample:\nlibE_specs[\"platform\"] = \"perlmutter_g\"\n\nAlternatively set the environment variable LIBE_PLATFORM:\nexport LIBE_PLATFORM=\"perlmutter_g\"\n\nSee also option platform_specs.\n\nfield platform_specs: object | dict | None = {}\uf0c1\nA Platform object or dictionary specifying settings for a platform.\nTo use existing platform:\nfrom libensemble.resources.platforms import PerlmutterGPU\n\nlibE_specs[\"platform_specs\"] = PerlmutterGPU()\n\nSee Known Platforms list.\nOr define a platform:\nfrom libensemble.resources.platforms import Platform\n\nlibE_specs[\"platform_specs\"] = Platform(\n mpi_runner=\"srun\",\n cores_per_node=64,\n logical_cores_per_node=128,\n gpus_per_node=8,\n gpu_setting_type=\"runner_default\",\n scheduler_match_slots=False,\n)\n\nFor list of Platform fields see Platform Fields.\nAny fields not given will be auto-detected by libEnsemble.\nSee also option platform.\n\nfield port: int | None = 0\uf0c1\nTCP Only: Port number for Manager\u2019s system.\n\nfield profile: bool | None = False\uf0c1\nProfile manager and worker logic using cProfile.\n\nfield resource_info: dict | None = {}\uf0c1\nResource information to override automatically detected resources.\nAllowed fields are given below in \u2018Overriding Resource Auto-detection\u2019.\nNote that if disable_resource_manager is set then this option is ignored.\n\nfield reuse_output_dir: bool | None = False\uf0c1\nWhether to allow overwrites and access to previous ensemble and workflow directories in subsequent runs.\nFalse by default to protect results.\n\nfield safe_mode: bool | None = False\uf0c1\nPrevents user functions from overwriting protected History fields, but requires moderate overhead.\n\nfield save_H_and_persis_on_abort: bool | None = True\uf0c1\nSave states of H and persis_info to file on aborting after an exception.\n\nfield save_H_on_completion: bool | None = False\uf0c1\nSave state of H to file upon completing a workflow. Also enabled when either save_every_k_sims\nor save_every_k_gens is set.\n\nfield save_H_with_date: bool | None = False\uf0c1\nH filename contains date and timestamp.\n\nfield save_every_k_gens: int | None = 0\uf0c1\nSave history array to file after every k generated points.\n\nfield save_every_k_sims: int | None = 0\uf0c1\nSave history array to file after every k evaluated points.\n\nfield scheduler_opts: dict | None = {}\uf0c1\nOptions for the resource scheduler. See \u2018Scheduler Options\u2019 for more info\n\nfield sim_dir_copy_files: list[str | Path] | None = []\uf0c1\nPaths to copy into the working directory upon calling the simulation function.\nlist of strings or pathlib.Path objects.\n\nfield sim_dir_symlink_files: list[str | Path] | None = []\uf0c1\nPaths to symlink into the working directory upon calling the simulation function.\nlist of strings or pathlib.Path objects.\n\nfield sim_dirs_make: bool | None = False\uf0c1\nWhether to make calculation directories for each simulation function call.\n\nfield sim_input_dir: str | Path | None = None\uf0c1\nCopy this directory\u2019s contents into the working directory upon calling the simulation function.\nForms the base of a simulation directory.\n\nfield stats_fmt: dict | None = {}\uf0c1\nOptions for formatting 'libE_stats.txt'. See \u2018Formatting libE_stats.txt\u2019.", "mimetype": "text/plain", "start_char_idx": 13447, "end_char_idx": 17468, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d5d56557-1863-4f8c-8875-95efdc3498c6": {"__data__": {"id_": "d5d56557-1863-4f8c-8875-95efdc3498c6", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/libE_specs.html", "file_name": "libE_specs.html", "file_type": "text/html", "file_size": 105395, "creation_date": "2025-11-25", "last_modified_date": "2025-11-17"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b72001b1-05e8-4dc9-82c6-52bbc02384d5", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/libE_specs.html", "file_name": "libE_specs.html", "file_type": "text/html", "file_size": 105395, "creation_date": "2025-11-25", "last_modified_date": "2025-11-17"}, "hash": "7607ae16df58ac7942061a5aea4144f5c5fbfce874a83ef76b105abb032ecfeb", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c52b07e2-c7b2-48c7-92e0-84b5626d36cf", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/libE_specs.html", "file_name": "libE_specs.html", "file_type": "text/html", "file_size": 105395, "creation_date": "2025-11-25", "last_modified_date": "2025-11-17"}, "hash": "810f2a2f78b922adb85c1d453c3051b61e09ff9a1486e1c930c52b3c54273b63", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a28e8c0d-a856-488f-8f41-5784fce186d3", "node_type": "1", "metadata": {}, "hash": "2d5f0c712192e996b9f1e97202e95e2306b6f08bedfa85d1e42f01876aca61a2", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "field scheduler_opts: dict | None = {}\uf0c1\nOptions for the resource scheduler. See \u2018Scheduler Options\u2019 for more info\n\nfield sim_dir_copy_files: list[str | Path] | None = []\uf0c1\nPaths to copy into the working directory upon calling the simulation function.\nlist of strings or pathlib.Path objects.\n\nfield sim_dir_symlink_files: list[str | Path] | None = []\uf0c1\nPaths to symlink into the working directory upon calling the simulation function.\nlist of strings or pathlib.Path objects.\n\nfield sim_dirs_make: bool | None = False\uf0c1\nWhether to make calculation directories for each simulation function call.\n\nfield sim_input_dir: str | Path | None = None\uf0c1\nCopy this directory\u2019s contents into the working directory upon calling the simulation function.\nForms the base of a simulation directory.\n\nfield stats_fmt: dict | None = {}\uf0c1\nOptions for formatting 'libE_stats.txt'. See \u2018Formatting libE_stats.txt\u2019.\n\nfield use_persis_return_gen: bool | None = False\uf0c1\nAdds persistent generator output fields to the History array on return.\n\nfield use_persis_return_sim: bool | None = False\uf0c1\nAdds persistent simulator output fields to the History array on return.\n\nfield use_tiles_as_gpus: bool | None = False\uf0c1\nIf True then treat a GPU tile as one GPU when GPU tiles is provided\nin platform specs or detected.\n\nfield use_worker_dirs: bool | None = False\uf0c1\nWhether to organize calculation directories under worker-specific directories.\n\nfield use_workflow_dir: bool | None = False\uf0c1\nWhether to place all log files, dumped arrays, and default output directories in a\nseparate workflow directory. Each run will be suffixed with a hash.\nIf copying back an ensemble directory from a scratch space, the copy is placed here.\n\nfield workerID: int | None = None\uf0c1\nTCP Only: Worker ID number assigned to the new process.\n\nfield worker_cmd: list[str] | None = []\uf0c1\nTCP Only: Split string corresponding to worker/client Python process invocation. Contains\na local Python path, calling script, and manager/server format-fields for manager_ip,\nmanager_port, authkey, and workerID. nworkers is specified normally.\n\nfield worker_timeout: int | None = 1\uf0c1\nOn libEnsemble shutdown, number of seconds after which workers considered timed out, then terminated.\n\nfield workers: list[str] | None = []\uf0c1\nTCP Only: A list of worker hostnames.\n\nfield workflow_dir_path: str | Path | None = '.'\uf0c1\nOptional path to the workflow directory.\n\nfield zero_resource_workers: list[int] | None = []\uf0c1\nlist of workers that require no resources. For when a fixed mapping of workers\nto resources is required. Otherwise, use num_resource_sets.\nFor use with supported allocation functions.\n\nScheduler Options\uf0c1\nSee options for built-in scheduler.\n\nOverriding Resource Auto-Detection\uf0c1\nNote that \"cores_on_node\" and \"gpus_on_node\" are supported for backward\ncompatibility, but use of Platform specification is\nrecommended for these settings.\n\nResource Info Fields\nThe allowable libE_specs[\"resource_info\"] fields are:\n\"cores_on_node\" [tuple (int, int)]:\n Tuple (physical cores, logical cores) on nodes.\n\n\"gpus_on_node\" [int]:\n Number of GPUs on each node.\n\n\"node_file\" [str]:\n Name of file containing a node-list. Default is \"node_list\".\n\n\"nodelist_env_slurm\" [str]:\n The environment variable giving a node list in Slurm format\n (Default: Uses ``SLURM_NODELIST``). Queried only if\n a ``node_list`` file is not provided and the resource manager is\n enabled.\n\n\"nodelist_env_cobalt\" [str]:\n The environment variable giving a node list in Cobalt format\n (Default: Uses ``COBALT_PARTNAME``) Queried only\n if a ``node_list`` file is not provided and the resource manager\n is enabled.\n\n\"nodelist_env_lsf\" [str]:\n The environment variable giving a node list in LSF format\n (Default: Uses ``LSB_HOSTS``) Queried only\n if a ``node_list`` file is not provided and the resource manager\n is enabled.", "mimetype": "text/plain", "start_char_idx": 16581, "end_char_idx": 20386, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a28e8c0d-a856-488f-8f41-5784fce186d3": {"__data__": {"id_": "a28e8c0d-a856-488f-8f41-5784fce186d3", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/libE_specs.html", "file_name": "libE_specs.html", "file_type": "text/html", "file_size": 105395, "creation_date": "2025-11-25", "last_modified_date": "2025-11-17"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b72001b1-05e8-4dc9-82c6-52bbc02384d5", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/libE_specs.html", "file_name": "libE_specs.html", "file_type": "text/html", "file_size": 105395, "creation_date": "2025-11-25", "last_modified_date": "2025-11-17"}, "hash": "7607ae16df58ac7942061a5aea4144f5c5fbfce874a83ef76b105abb032ecfeb", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d5d56557-1863-4f8c-8875-95efdc3498c6", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/libE_specs.html", "file_name": "libE_specs.html", "file_type": "text/html", "file_size": 105395, "creation_date": "2025-11-25", "last_modified_date": "2025-11-17"}, "hash": "35925996c2e9a3d27e0874b733b714afbd83d83e1488e22b9faac11b758424f2", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"node_file\" [str]:\n Name of file containing a node-list. Default is \"node_list\".\n\n\"nodelist_env_slurm\" [str]:\n The environment variable giving a node list in Slurm format\n (Default: Uses ``SLURM_NODELIST``). Queried only if\n a ``node_list`` file is not provided and the resource manager is\n enabled.\n\n\"nodelist_env_cobalt\" [str]:\n The environment variable giving a node list in Cobalt format\n (Default: Uses ``COBALT_PARTNAME``) Queried only\n if a ``node_list`` file is not provided and the resource manager\n is enabled.\n\n\"nodelist_env_lsf\" [str]:\n The environment variable giving a node list in LSF format\n (Default: Uses ``LSB_HOSTS``) Queried only\n if a ``node_list`` file is not provided and the resource manager\n is enabled.\n\n\"nodelist_env_lsf_shortform\" [str]:\n The environment variable giving a node list in LSF short-form\n format (Default: Uses ``LSB_MCPU_HOSTS``) Queried only\n if a ``node_list`` file is not provided and the resource manager is\n enabled.\n\nFor example:\ncustomizer = {cores_on_node\": (16, 64),\n \"node_file\": \"libe_nodes\"}\n\nlibE_specs[\"resource_info\"] = customizer\n\nFormatting Options for libE_stats File\uf0c1\nThe allowable libE_specs[\"stats_fmt\"] fields are:\n\"task_timing\" [bool] = ``False``:\n Outputs elapsed time for each task launched by the executor.\n\n\"task_datetime\" [bool] = ``False``:\n Outputs the elapsed time and start and end time for each task launched by the executor.\n Can be used with the ``\"plot_libe_tasks_util_v_time.py\"`` to give task utilization plots.\n\n\"show_resource_sets\" [bool] = ``False``:\n Shows the resource set IDs assigned to each worker for each call of the user function.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 19657, "end_char_idx": 21406, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "0fe810fb-aa7e-4e4e-99e7-b004026cff3f": {"__data__": {"id_": "0fe810fb-aa7e-4e4e-99e7-b004026cff3f", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/persis_info.html", "file_name": "persis_info.html", "file_type": "text/html", "file_size": 26940, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c02285d1-05db-4fa7-96ef-caaa56172f6c", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/persis_info.html", "file_name": "persis_info.html", "file_type": "text/html", "file_size": 26940, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "23eb4c450905e62fb8ee321afc1266645404e94dd76fc36d6fc984bc71c0d80b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0f9a2532-e881-4b85-9a31-2879f9c76f8d", "node_type": "1", "metadata": {}, "hash": "f2595f61302663ceed3dd9f19c5a3b587205b3dd3240019bba0464cbde59e02f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "persis_info \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nLibE Specs\nGenerator Specs\nSimulation Specs\nAllocation Specs\nPlatform Specs\npersis_info\nExit Criteria\n\nOutput Management\nHistory Array\nResource Manager\nWriting User Functions\nExecutors\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nConfiguring libEnsemble\npersis_info\n\n View page source\n\npersis_info\uf0c1\nHolds persistent information that can be updated during the ensemble.\nAn initialized persis_info dictionary can be provided to the libE() call\nor as an attribute of the Ensemble class.\nDictionary keys that have an integer value contain entries that are passed to\nand from the corresponding workers. These are received in the persis_info\nargument of user functions, and returned as the optional second return value.\nA typical example is a random number generator stream to be used in consecutive\ncalls to a generator (see\nadd_unique_random_streams())\nAll other entries persist on the manager and can be updated in the calling script\nbetween ensemble invocations, or in the allocation function.\nExamples:\n\nRNG or reusable structures\n\nlibensemble/libensemble/gen_funcs/sampling.py\uf0c1\n 1def uniform_random_sample(_, persis_info, gen_specs):\n 2 \"\"\"\n 3 Generates ``gen_specs[\"user\"][\"gen_batch_size\"]`` points uniformly over the domain\n 4 defined by ``gen_specs[\"user\"][\"ub\"]`` and ``gen_specs[\"user\"][\"lb\"]``.\n 5\n 6 .. seealso::\n 7 `test_uniform_sampling.py <https://github.com/Libensemble/libensemble/blob/develop/libensemble/tests/functionality_tests/test_uniform_sampling.py>`_ # noqa\n 8 \"\"\"\n 9 ub = gen_specs[\"user\"][\"ub\"]\n10 lb = gen_specs[\"user\"][\"lb\"]\n11\n12 n = len(lb)\n13 b = gen_specs[\"user\"][\"gen_batch_size\"]\n14\n15 H_o = np.zeros(b, dtype=gen_specs[\"out\"])\n16\n17 H_o[\"x\"] = persis_info[\"rand_stream\"].uniform(lb, ub, (b, n))\n18\n19 return H_o, persis_info\n20\n21\n\nIncrementing indexes or process counts\n\nlibensemble/alloc_funcs/fast_alloc.py\uf0c1\n1 for wid in support.avail_worker_ids(gen_workers=False):\n2 persis_info = support.skip_canceled_points(H, persis_info)\n3 if persis_info[\"next_to_give\"] < len(H):\n4 try:\n5 Work[wid] = support.sim_work(wid, H, sim_specs[\"in\"], [persis_info[\"next_to_give\"]], [])\n6 except InsufficientFreeResources:\n7 break\n8 persis_info[\"next_to_give\"] += 1\n9\n\nTracking running generators\n\nlibensemble/alloc_funcs/start_only_persistent.py\uf0c1\n 1 avail_workers = support.avail_worker_ids(persistent=False, zero_resource_workers=True, gen_workers=True)\n 2\n 3 for wid in avail_workers:\n 4 if gen_count < user.get(\"num_active_gens\", 1):\n 5 # Finally, start a persistent generator as there is nothing else to do.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3245, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "0f9a2532-e881-4b85-9a31-2879f9c76f8d": {"__data__": {"id_": "0f9a2532-e881-4b85-9a31-2879f9c76f8d", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/persis_info.html", "file_name": "persis_info.html", "file_type": "text/html", "file_size": 26940, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c02285d1-05db-4fa7-96ef-caaa56172f6c", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/persis_info.html", "file_name": "persis_info.html", "file_type": "text/html", "file_size": 26940, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "23eb4c450905e62fb8ee321afc1266645404e94dd76fc36d6fc984bc71c0d80b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0fe810fb-aa7e-4e4e-99e7-b004026cff3f", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/persis_info.html", "file_name": "persis_info.html", "file_type": "text/html", "file_size": 26940, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "11dbd9f6ab6bd0a950322e75da458b05a6d733589dd6aee3aa32b25570f88441", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "6 try:\n 7 Work[wid] = support.gen_work(\n 8 wid,\n 9 gen_specs.get(\"in\", []),\n10 range(len(H)),\n11 persis_info.get(wid),\n12 persistent=True,\n13 active_recv=active_recv_gen,\n14 )\n15 except InsufficientFreeResources:\n16 break\n17\n18 persis_info[\"num_gens_started\"] = persis_info.get(\"num_gens_started\", 0) + 1\n19 gen_count += 1\n20\n\nAllocation function triggers shutdown\n\nlibensemble/alloc_funcs/start_only_persistent.py\uf0c1\n1 if gen_count < persis_info.get(\"num_gens_started\", 0):\n2 # When a persistent worker is done, trigger a shutdown (returning exit condition of 1)\n3 return Work, persis_info, 1\n4\n\nWhen there are repeated calls to libE() or ensemble.run(), users may\nneed to modify or reset the contents of persis_info in some cases.\n\nSee also\nFrom: support.py\npersis_info_1 = {\n \"total_gen_calls\": 0, # Counts gen calls in alloc_f\n \"last_worker\": 0, # Remembers last gen worker in alloc_f\n \"next_to_give\": 0, # Remembers next H row to give in alloc_f\n}\n\npersis_info_1[0] = {\n \"run_order\": {}, # Used by manager to remember run order\n \"total_runs\": 0, # Used by manager to count total runs\n \"rand_stream\": np.random.default_rng(1),\n}\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 3247, "end_char_idx": 4504, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "90101d8e-71e7-4f36-b56c-a45e363141d9": {"__data__": {"id_": "90101d8e-71e7-4f36-b56c-a45e363141d9", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/platform_specs.html", "file_name": "platform_specs.html", "file_type": "text/html", "file_size": 41793, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "18e5721c-001b-448e-b1b0-74be6f27799e", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/platform_specs.html", "file_name": "platform_specs.html", "file_type": "text/html", "file_size": 41793, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "71b2dbfc4b97a3969daacc79a7eb8b091c78bb1fde8ca4b286ab9f8db7ffb553", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2e3cc228-d40e-4acf-8d63-d5ef255d61b3", "node_type": "1", "metadata": {}, "hash": "96340ec269e410ecf8841e0fcd7d7877441c0e2d276434bc8fa21cba23545dc9", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Platform Specs \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nLibE Specs\nGenerator Specs\nSimulation Specs\nAllocation Specs\nPlatform Specs\nplatform_specs\nplatform\nKnown Platforms List\n\npersis_info\nExit Criteria\n\nOutput Management\nHistory Array\nResource Manager\nWriting User Functions\nExecutors\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nConfiguring libEnsemble\nPlatform Specs\n\n View page source\n\nPlatform Specs\uf0c1\nlibEnsemble detects platform specifications including MPI runners and resources.\nUsually this will result in the correct settings. However, users can configure\nplatform specifications via the platform_specs option or indicate a known\nplatform via the platform option.\n\nplatform_specs\uf0c1\nA Platform object or dictionary specifying settings for a platform.\nTo define a platform (in calling script):\n\nPlatform Object\nfrom libensemble.resources.platforms import Platform\n\nlibE_specs[\"platform_specs\"] = Platform(\n mpi_runner=\"srun\",\n cores_per_node=64,\n logical_cores_per_node=128,\n gpus_per_node=8,\n gpu_setting_type=\"runner_default\",\n gpu_env_fallback=\"ROCR_VISIBLE_DEVICES\",\n scheduler_match_slots=False,\n)\n\nDictionary\nlibE_specs[\"platform_specs\"] = {\n \"mpi_runner\": \"srun\",\n \"cores_per_node\": 64,\n \"logical_cores_per_node\": 128,\n \"gpus_per_node\": 8,\n \"gpu_setting_type\": \"runner_default\",\n \"gpu_env_fallback\": \"ROCR_VISIBLE_DEVICES\",\n \"scheduler_match_slots\": False,\n}\n\nThe list of platform fields is given below. Any fields not given will be\nauto-detected by libEnsemble.\n\nPlatform Fields\n\npydantic model libensemble.resources.platforms.Platform\uf0c1\nClass to define attributes of a target platform.\nAll are optional, and any not defined will be determined by libEnsemble\u2019s auto-detection.\n\nConfig:\n\narbitrary_types_allowed: bool = True\npopulate_by_name: bool = True\nextra: str = forbid\nvalidate_assignment: bool = True\nvalidate_by_alias: bool = True\nvalidate_by_name: bool = True\n\nfield mpi_runner: str | None\uf0c1\nMPI runner: One of \"mpich\", \"openmpi\", \"aprun\",\n\"srun\", \"jsrun\", \"msmpi\", \"custom\"\n\nfield runner_name: str | None\uf0c1\nLiteral string of MPI runner command. Only needed if different to the default\nNote that \"mpich\" and \"openmpi\" runners have the default command \"mpirun\"\n\nfield cores_per_node: int | None\uf0c1\nNumber of physical CPU cores on a compute node of the platform\n\nfield logical_cores_per_node: int | None\uf0c1\nNumber of logical CPU cores on a compute node of the platform\n\nfield gpus_per_node: int | None\uf0c1\nNumber of GPU devices on a compute node of the platform\n\nfield tiles_per_gpu: int | None\uf0c1\nNumber of tiles on a GPU\n\nfield gpu_setting_type: str | None\uf0c1\nHow GPUs will be assigned.\nMust take one of the following string options.\n\n\"runner_default\": Use default setting for MPI runner (same as if not set).\n\"env\": Use an environment variable (comma-separated list of slots)\n\"option_gpus_per_node\": Expresses GPUs per node on MPI runner command line.\n\"option_gpus_per_task\": Expresses GPUs per task on MPI runner command line.\n\nWith the exception of \u201crunner_default\u201d, the gpu_setting_name\nattribute is also required when this attribute is set.\nIf \u201cgpu_setting_type\u201d is not provided (same as runner_default) and the\nMPI runner does not have a default GPU setting in libEnsemble, and no other\ninformation is present, then the environment variable CUDA_VISIBLE_DEVICES\nis used.\nExamples:\nUse environment variable ROCR_VISIBLE_DEVICES to assign GPUs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4021, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "2e3cc228-d40e-4acf-8d63-d5ef255d61b3": {"__data__": {"id_": "2e3cc228-d40e-4acf-8d63-d5ef255d61b3", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/platform_specs.html", "file_name": "platform_specs.html", "file_type": "text/html", "file_size": 41793, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "18e5721c-001b-448e-b1b0-74be6f27799e", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/platform_specs.html", "file_name": "platform_specs.html", "file_type": "text/html", "file_size": 41793, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "71b2dbfc4b97a3969daacc79a7eb8b091c78bb1fde8ca4b286ab9f8db7ffb553", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "90101d8e-71e7-4f36-b56c-a45e363141d9", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/platform_specs.html", "file_name": "platform_specs.html", "file_type": "text/html", "file_size": 41793, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "7b00374032e298f987efbcc3ee53d1ff70898e201158bd131571b0109721dbe8", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Must take one of the following string options.\n\n\"runner_default\": Use default setting for MPI runner (same as if not set).\n\"env\": Use an environment variable (comma-separated list of slots)\n\"option_gpus_per_node\": Expresses GPUs per node on MPI runner command line.\n\"option_gpus_per_task\": Expresses GPUs per task on MPI runner command line.\n\nWith the exception of \u201crunner_default\u201d, the gpu_setting_name\nattribute is also required when this attribute is set.\nIf \u201cgpu_setting_type\u201d is not provided (same as runner_default) and the\nMPI runner does not have a default GPU setting in libEnsemble, and no other\ninformation is present, then the environment variable CUDA_VISIBLE_DEVICES\nis used.\nExamples:\nUse environment variable ROCR_VISIBLE_DEVICES to assign GPUs.\n\"gpu_setting_type\" = \"env\"\n\"gpu_setting_name\" = \"ROCR_VISIBLE_DEVICES\"\n\nUse command line option --gpus-per-node\n\"gpu_setting_type\" = \"option_gpus_per_node\"\n\"gpu_setting_name\" = \"--gpus-per-node\"\n\nfield gpu_setting_name: str | None\uf0c1\nName of GPU setting\nSee gpu_setting_type for more details.\n\nfield gpu_env_fallback: str | None\uf0c1\nGPU fallback environment setting if not using an MPI runner.\nFor example:\n\"gpu_setting_type\" = \"runner_default\"\n\"gpu_env_fallback\" = \"ROCR_VISIBLE_DEVICES\"\n\nThis example will use the MPI runner default settings when using an MPI runner, but\nwill otherwise use ROCR_VISIBLE_DEVICES (e.g., if setting via function set_env_to_gpus).\nIf this is not set, the default is \u201cCUDA_VISIBLE_DEVICES\u201d.\n\nfield scheduler_match_slots: bool | None\uf0c1\nWhether the libEnsemble resource scheduler should only assign matching slots when\nthere are multiple (partial) nodes assigned to a sim function.\nDefaults to True, within libEnsemble.\nUseful if setting an environment variable such as CUDA_VISIBLE_DEVICES, where\nthe value should match on each node of an MPI run (choose True).\nWhen using command-line options just as --gpus-per-node, which allow the system\u2019s\napplication-level scheduler to manage GPUs, then match_slots can be False\n(allowing for more efficient scheduling when MPI runs cross nodes).\n\nTo use an existing platform:\nfrom libensemble.resources.platforms import PerlmutterGPU\n\nlibE_specs[\"platform_specs\"] = PerlmutterGPU()\n\nSee known platforms.\n\nplatform\uf0c1\nA string giving the name of a known platform defined in the platforms module.\nlibE_specs[\"platform\"] = \"perlmutter_g\"\n\nNote: the environment variable LIBE_PLATFORM is an alternative way of setting.\nE.g., in the command line or batch submission script:\nexport LIBE_PLATFORM=\"perlmutter_g\"\n\nKnown Platforms List\uf0c1\n\nKnown_platforms\n\npydantic model libensemble.resources.platforms.Known_platforms\uf0c1\nA list of platforms with known configurations.\nThere are three ways to specify a known system:\n\n[\u201cplatform_specs\u201d]\nfrom libensemble.resources.platforms import PerlmutterGPU\n\nlibE_specs[\"platform_specs\"] = PerlmutterGPU()\n\n[\u201cplatform\u201d]\nlibE_specs[\"platform\"] = \"perlmutter_g\"\n\nexport LIBE_PLATFORM\nOn command-line or batch submission script:\nexport LIBE_PLATFORM=\"perlmutter_g\"\n\nIf the platform is not specified, libEnsemble will attempt to detect known\nplatforms (this is not guaranteed).\nNote: libEnsemble should work on any platform, and detects most\nsystem configurations correctly. These options are helpful for optimization and\nwhere auto-detection encounters ambiguity or an unknown feature.\n\nfield aurora: Aurora\uf0c1\n\nfield generic_rocm: GenericROCm\uf0c1\n\nfield frontier: Frontier\uf0c1\n\nfield lumi: Lumi\uf0c1\n\nfield lumi_g: LumiGPU\uf0c1\n\nfield perlmutter: Perlmutter\uf0c1\n\nfield perlmutter_c: PerlmutterCPU\uf0c1\n\nfield perlmutter_g: PerlmutterGPU\uf0c1\n\nfield polaris: Polaris\uf0c1\n\nfield summit: Summit\uf0c1\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 3260, "end_char_idx": 6996, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "31954eb3-b75e-491b-acfe-3132ceb0b4e0": {"__data__": {"id_": "31954eb3-b75e-491b-acfe-3132ceb0b4e0", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/sim_specs.html", "file_name": "sim_specs.html", "file_type": "text/html", "file_size": 30374, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cd58b26a-161b-4ae6-afb7-4df7aad40e9a", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/sim_specs.html", "file_name": "sim_specs.html", "file_type": "text/html", "file_size": 30374, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "c18e354233036a9b12670ef3e5971b7e0cbf9b7ddf83b98bd051c5427d380a9b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e8dcb0a3-129d-4404-8836-adeb5afee934", "node_type": "1", "metadata": {}, "hash": "6d126368f9457b64cc5e47b4ff5ea06cdc50da29a638e32fff670c15de3ab6b3", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Simulation Specs \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nLibE Specs\nGenerator Specs\nSimulation Specs\nSimSpecs\n\nAllocation Specs\nPlatform Specs\npersis_info\nExit Criteria\n\nOutput Management\nHistory Array\nResource Manager\nWriting User Functions\nExecutors\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nConfiguring libEnsemble\nSimulation Specs\n\n View page source\n\nSimulation Specs\uf0c1\nUsed to specify the simulation function, its inputs and outputs, and user data.\nCan be constructed and passed to libEnsemble as a Python class or a dictionary.\n\nclass\n 1...\n 2from libensemble import SimSpecs\n 3from simulator import sim_find_sine\n 4\n 5...\n 6\n 7sim_specs = SimSpecs(\n 8 sim_f=sim_find_sine,\n 9 inputs=[\"x\"],\n10 outputs=[(\"y\", float)],\n11 user={\"batch\": 1234},\n12)\n13...\n\npydantic model libensemble.specs.SimSpecs\uf0c1\nSpecifications for configuring a Simulation Function.\n\nFields:\n\nsim_f (object)\ninputs (list[str] | None)\npersis_in (list[str] | None)\noutputs (list[tuple])\nglobus_compute_endpoint (str | None)\nthreaded (bool | None)\nuser (dict | None)\n\nfield globus_compute_endpoint: str | None = ''\uf0c1\nA Globus Compute (https://www.globus.org/compute) ID corresponding to an active endpoint on a remote system.\nlibEnsemble\u2019s workers will submit simulator function instances to this endpoint instead of\ncalling them locally.\n\nfield inputs: list[str] | None = [] (alias 'in')\uf0c1\nlist of field names out of the complete history to pass\ninto the simulation function upon calling.\n\nfield outputs: list[tuple] = [] (alias 'out')\uf0c1\nlist of 2- or 3-tuples corresponding to NumPy dtypes.\ne.g. (\"dim\", int, (3,)), or (\"path\", str).\nTypically used to initialize an output array within the simulation function:\nout = np.zeros(100, dtype=sim_specs[\"out\"]).\nAlso necessary to construct libEnsemble\u2019s history array.\n\nfield persis_in: list[str] | None = []\uf0c1\nlist of field names to send to a persistent simulation function\nthroughout the run, following initialization.\n\nfield sim_f: object = None\uf0c1\nPython function matching the sim_f interface. Evaluates parameters\nproduced by a generator function.\n\nfield threaded: bool | None = False\uf0c1\nInstruct Worker process to launch user function to a thread.\n\nfield user: dict | None = {}\uf0c1\nA user-data dictionary to place bounds, constants, settings, or other parameters for customizing\nthe simulator function.\n\ndict\n 1...\n 2from simulator import six_hump_camel\n 3\n 4...\n 5\n 6sim_specs = {\n 7 \"sim_f\": six_hump_camel,\n 8 \"in\": [\"x\"],\n 9 \"out\": [(\"y\", float)],\n10 \"user\": {\"batch\": 1234},\n11}\n12...\n\ntest_uniform_sampling.py has a sim_specs that declares\nthe name of the \"in\" field variable, \"x\" (as specified by the\ncorresponding generator \"out\" field \"x\" from the gen_specs\nexample). Only the field name is required in\nsim_specs[\"in\"].\n\n sim_specs = {\n \"sim_f\": six_hump_camel, # Function whose output is being minimized\n \"in\": [\"x\"], # Keys to be given to sim_f\n \"out\": [(\"f\", float)], # Name of the outputs from sim_f\n }\n\nrun_libe_forces.py has a longer sim_specs declaration with a number of\nuser-specific fields. These are given to the corresponding sim_f, which\ncan be found at forces_simf.py.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3769, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "e8dcb0a3-129d-4404-8836-adeb5afee934": {"__data__": {"id_": "e8dcb0a3-129d-4404-8836-adeb5afee934", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/sim_specs.html", "file_name": "sim_specs.html", "file_type": "text/html", "file_size": 30374, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cd58b26a-161b-4ae6-afb7-4df7aad40e9a", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/sim_specs.html", "file_name": "sim_specs.html", "file_type": "text/html", "file_size": 30374, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "c18e354233036a9b12670ef3e5971b7e0cbf9b7ddf83b98bd051c5427d380a9b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "31954eb3-b75e-491b-acfe-3132ceb0b4e0", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/data_structures/sim_specs.html", "file_name": "sim_specs.html", "file_type": "text/html", "file_size": 30374, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "5fe5c9869caadd765cd49a80bfb1285fa6fbf66a57f2d7e6d5911310901615b8", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Only the field name is required in\nsim_specs[\"in\"].\n\n sim_specs = {\n \"sim_f\": six_hump_camel, # Function whose output is being minimized\n \"in\": [\"x\"], # Keys to be given to sim_f\n \"out\": [(\"f\", float)], # Name of the outputs from sim_f\n }\n\nrun_libe_forces.py has a longer sim_specs declaration with a number of\nuser-specific fields. These are given to the corresponding sim_f, which\ncan be found at forces_simf.py.\n\n \"sim_f\": run_forces, # Function whose output is being minimized\n \"in\": [\"x\"], # Name of input for sim_f\n \"out\": [(\"energy\", float)], # Name, type of output from sim_f\n \"user\": {\n \"keys\": [\"seed\"],\n \"cores\": 2,\n \"sim_particles\": 1e3,\n \"sim_timesteps\": 5,\n \"sim_kill_minutes\": 10.0,\n \"particle_variance\": 0.2,\n \"kill_rate\": 0.5,\n \"fail_on_sim\": False,\n \"fail_on_submit\": False, # Won't occur if 'fail_on_sim' True\n },\n}\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 3355, "end_char_idx": 4316, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "8f1b2683-c35b-4f65-bc40-0af9d0e6f38c": {"__data__": {"id_": "8f1b2683-c35b-4f65-bc40-0af9d0e6f38c", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/developer_API.html", "file_name": "developer_API.html", "file_type": "text/html", "file_size": 11575, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d54600b5-a38b-4272-a738-deae3021ee8f", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/developer_API.html", "file_name": "developer_API.html", "file_type": "text/html", "file_size": 11575, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "9501e713708cd5abfd9f4b15871fe553a96e7ca23e1c36f64a03e7f905c8a483", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Internal Modules \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\nManager Module\nWorker Module\nHistory Module\nResources Module\nRSET Resources Module\nWorker Resources Module\nEnvironment Resources Module\nNode Resources Module\nMPI Resources Module\nScheduler Module\n\nlibEnsemble\n\nInternal Modules\n\n View page source\n\nInternal Modules\uf0c1\nThis section documents the internal modules of libEnsemble.\n\nModules:\n\nManager Module\nWorker Module\nHistory Module\nResources Module\nRSET Resources Module\nWorker Resources Module\nEnvironment Resources Module\nNode Resources Module\nMPI Resources Module\nScheduler Module\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1310, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "abef79cc-7fed-44e7-89a6-9f494d7d3ed4": {"__data__": {"id_": "abef79cc-7fed-44e7-89a6-9f494d7d3ed4", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/env_resources_module.html", "file_name": "env_resources_module.html", "file_type": "text/html", "file_size": 28869, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fff28951-1acf-4db9-995c-a1c896b90836", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/env_resources_module.html", "file_name": "env_resources_module.html", "file_type": "text/html", "file_size": 28869, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "79b1109f9966a3e2d0a3824d6aefb44cd651ec5a9acac2e94c5eb3b6b510192d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a60932a4-0b7c-4426-af98-2d055ad44909", "node_type": "1", "metadata": {}, "hash": "07d97cba00bc2b760ee14bfa4801cdff8d4b86d1d848edeb4224c12a69f3c546", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Environment Resources Module \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\nManager Module\nWorker Module\nHistory Module\nResources Module\nRSET Resources Module\nWorker Resources Module\nEnvironment Resources Module\nEnvResources\nEnvResources.__init__()\nEnvResources.get_nodelist()\nEnvResources.abbrev_nodenames()\nEnvResources.cobalt_abbrev_nodenames()\nEnvResources.shortnames()\nEnvResources.get_slurm_nodelist()\nEnvResources.get_cobalt_nodelist()\nEnvResources.get_pbs_nodelist()\nEnvResources.get_lsf_nodelist()\nEnvResources.get_lsf_nodelist_frm_shortform()\n\nNode Resources Module\nMPI Resources Module\nScheduler Module\n\nlibEnsemble\n\nInternal Modules\nEnvironment Resources Module\n\n View page source\n\nEnvironment Resources Module\uf0c1\nThis module stores environment variables for use in resource detection\n\nclass env_resources.EnvResources(nodelist_env_slurm=None, nodelist_env_cobalt=None, nodelist_env_pbs=None, nodelist_env_lsf=None, nodelist_env_lsf_shortform=None)\uf0c1\nStores environment variables to query for system resource information\nClass Attributes:\n\nVariables:\n\ndefault_nodelist_env_slurm (string) \u2013 Default SLRUM nodelist environment variable\ndefault_nodelist_env_cobalt (string) \u2013 Default Cobalt nodelist environment variable\ndefault_nodelist_env_pbs (string) \u2013 Default PBS nodelist environment variable (points to nodefile)\ndefault_nodelist_env_lsf (string) \u2013 Default LSF nodelist environment variable\ndefault_nodelist_env_lsf_shortform (string) \u2013 Default LSF short-form nodelist environment variable\n\nParameters:\n\nnodelist_env_slurm (str | None)\nnodelist_env_cobalt (str | None)\nnodelist_env_pbs (str | None)\nnodelist_env_lsf (str | None)\nnodelist_env_lsf_shortform (str | None)\n\nObject Attributes:\nThese are set on initialization.\n\nVariables:\n\nnodelists (dict) \u2013 Environment variable names to query for nodelists by scheduler\nndlist_funcs (dict) \u2013 Functions to extract nodelists from environment by scheduler\n\nParameters:\n\nnodelist_env_slurm (str | None)\nnodelist_env_cobalt (str | None)\nnodelist_env_pbs (str | None)\nnodelist_env_lsf (str | None)\nnodelist_env_lsf_shortform (str | None)\n\n__init__(nodelist_env_slurm=None, nodelist_env_cobalt=None, nodelist_env_pbs=None, nodelist_env_lsf=None, nodelist_env_lsf_shortform=None)\uf0c1\nInitializes a new EnvResources instance\nDetermines the environment variables to query for resource\ninformation. These are either provided or given defaults.\n\nParameters:\n\nnodelist_env_slurm (String, optional) \u2013 The environment variable giving a node list in Slurm format (Default: uses SLURM_NODELIST).\nNote: This is queried only if a node_list file is not provided.\nnodelist_env_cobalt (String, optional) \u2013 The environment variable giving a node list in Cobalt format (Default: uses COBALT_PARTNAME).\nNote: This is queried only if a node_list file is not provided and disable_resource_manager=True.\nnodelist_env_pbs (String, optional) \u2013 The environment variable giving a path to a nodefile in PBS format (Default: uses PBS_NODEFILE).\nThis is queried if a node_list file is not provided.\nnodelist_env_lsf (String, optional) \u2013 The environment variable giving a node list in LSF format (Default: uses LSB_HOSTS).\nNote: This is queried only if a node_list file is not provided.\nnodelist_env_lsf_shortform (String, optional) \u2013 The environment variable giving a node list in LSF short-form format (Default: uses LSB_MCPU_HOSTS).\nNote: This is queried only if a node_list file is not provided.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4008, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a60932a4-0b7c-4426-af98-2d055ad44909": {"__data__": {"id_": "a60932a4-0b7c-4426-af98-2d055ad44909", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/env_resources_module.html", "file_name": "env_resources_module.html", "file_type": "text/html", "file_size": 28869, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fff28951-1acf-4db9-995c-a1c896b90836", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/env_resources_module.html", "file_name": "env_resources_module.html", "file_type": "text/html", "file_size": 28869, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "79b1109f9966a3e2d0a3824d6aefb44cd651ec5a9acac2e94c5eb3b6b510192d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "abef79cc-7fed-44e7-89a6-9f494d7d3ed4", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/env_resources_module.html", "file_name": "env_resources_module.html", "file_type": "text/html", "file_size": 28869, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "020d77748fdd1e72d336277ccea10b608dedef44fc8d427788d2336f85213167", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "nodelist_env_cobalt (String, optional) \u2013 The environment variable giving a node list in Cobalt format (Default: uses COBALT_PARTNAME).\nNote: This is queried only if a node_list file is not provided and disable_resource_manager=True.\nnodelist_env_pbs (String, optional) \u2013 The environment variable giving a path to a nodefile in PBS format (Default: uses PBS_NODEFILE).\nThis is queried if a node_list file is not provided.\nnodelist_env_lsf (String, optional) \u2013 The environment variable giving a node list in LSF format (Default: uses LSB_HOSTS).\nNote: This is queried only if a node_list file is not provided.\nnodelist_env_lsf_shortform (String, optional) \u2013 The environment variable giving a node list in LSF short-form format (Default: uses LSB_MCPU_HOSTS).\nNote: This is queried only if a node_list file is not provided.\n\nReturn type:\nNone\n\nget_nodelist()\uf0c1\nReturns nodelist from environment or an empty list\n\nReturn type:\nlist[str | Any]\n\nstatic abbrev_nodenames(node_list, prefix=None)\uf0c1\nReturns nodelist with only string up to first dot\n\nParameters:\n\nnode_list (list[str])\nprefix (str | None)\n\nReturn type:\nlist[str]\n\nstatic cobalt_abbrev_nodenames(node_list, prefix='nid')\uf0c1\nReturns nodelist with prefix and leading zeros stripped\n\nParameters:\n\nnode_list (list[str])\nprefix (str)\n\nReturn type:\nlist[str]\n\nshortnames(node_list)\uf0c1\nReturns nodelist with entries in abbreviated form\n\nParameters:\nnode_list (list[str])\n\nReturn type:\nlist[str]\n\nstatic get_slurm_nodelist(node_list_env)\uf0c1\nGets global libEnsemble nodelist from the Slurm environment\n\nParameters:\nnode_list_env (str)\n\nReturn type:\nlist[str | Any]\n\nstatic get_cobalt_nodelist(node_list_env)\uf0c1\nGets global libEnsemble nodelist from the Cobalt environment\n\nParameters:\nnode_list_env (str)\n\nReturn type:\nlist[str | Any]\n\nstatic get_pbs_nodelist(node_list_env)\uf0c1\nGets global libEnsemble nodelist path from PBS environment\n\nParameters:\nnode_list_env (str)\n\nReturn type:\nlist[str | Any]\n\nstatic get_lsf_nodelist(node_list_env)\uf0c1\nGets global libEnsemble nodelist from the LSF environment\n\nParameters:\nnode_list_env (str)\n\nReturn type:\nlist[str | Any]\n\nstatic get_lsf_nodelist_frm_shortform(node_list_env)\uf0c1\nGets global libEnsemble nodelist from the LSF environment from short-form version\n\nParameters:\nnode_list_env (str)\n\nReturn type:\nlist[str | Any]\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 3188, "end_char_idx": 5611, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "1f5151d5-a73a-4fdd-9c48-72b45dd5d940": {"__data__": {"id_": "1f5151d5-a73a-4fdd-9c48-72b45dd5d940", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/history_module.html", "file_name": "history_module.html", "file_type": "text/html", "file_size": 22529, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "198d1e67-2d1c-4912-8971-419693be1ac2", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/history_module.html", "file_name": "history_module.html", "file_type": "text/html", "file_size": 22529, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "af9dc306d522f7dd55eac3da317c3ead69287d9c3abd7e4d9c18665d86e25b0b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "History Module \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\nManager Module\nWorker Module\nHistory Module\nHistory\nHistory.__init__()\nHistory.update_history_f()\nHistory.update_history_x_out()\nHistory.update_history_to_gen()\nHistory.update_history_x_in()\nHistory.grow_H()\nHistory.trim_H()\n\nResources Module\nRSET Resources Module\nWorker Resources Module\nEnvironment Resources Module\nNode Resources Module\nMPI Resources Module\nScheduler Module\n\nlibEnsemble\n\nInternal Modules\nHistory Module\n\n View page source\n\nHistory Module\uf0c1\nNote that this is the developer API reference for the internal history module. See\nhistory array for the user reference.\n\nclass libensemble.history.History(alloc_specs, sim_specs, gen_specs, exit_criteria, H0)\uf0c1\nThe History class provides methods for managing the history array.\nObject Attributes:\nThese are set on initialization.\n\nVariables:\n\nH (numpy.ndarray) \u2013 History array storing rows for each point. Field names are in\nlibensemble/tools/fields_keys.py. Numpy structured array.\noffset (int) \u2013 Starting index for this ensemble (after H0 read in)\nindex (int) \u2013 Index where libEnsemble should start filling in H\nsim_started_count (int) \u2013 Number of points given to sim functions (according to H)\nsim_ended_count (int) \u2013 Number of points evaluated (according to H)\n\nParameters:\n\nalloc_specs (dict)\nsim_specs (dict)\ngen_specs (dict)\nexit_criteria (dict)\nH0 (ndarray[tuple[int, ...], dtype[_ScalarType_co]])\n\nNote that index, sim_started_count and sim_ended_count reflect the total number of points\nin H and therefore include those prepended to H in addition to the current run.\n\n__init__(alloc_specs, sim_specs, gen_specs, exit_criteria, H0)\uf0c1\nForms the numpy structured array that records everything from the\nlibEnsemble run\n\nParameters:\n\nalloc_specs (dict)\nsim_specs (dict)\ngen_specs (dict)\nexit_criteria (dict)\nH0 (ndarray[tuple[int, ...], dtype[_ScalarType_co]])\n\nReturn type:\nNone\n\nupdate_history_f(D, kill_canceled_sims=False)\uf0c1\nUpdates the history after points have been evaluated\n\nParameters:\n\nD (dict)\nkill_canceled_sims (bool)\n\nReturn type:\nNone\n\nupdate_history_x_out(q_inds, sim_worker, kill_canceled_sims=False)\uf0c1\nUpdates the history (in place) when new points have been given out to be evaluated\n\nParameters:\n\nq_inds (numpy.typing.NDArray) \u2013 Row IDs for history array H\nsim_worker (int) \u2013 Worker ID\nkill_canceled_sims (bool)\n\nReturn type:\nNone\n\nupdate_history_to_gen(q_inds)\uf0c1\nUpdates the history (in place) when points are given back to the gen\n\nParameters:\nq_inds (ndarray[tuple[int, ...], dtype[_ScalarType_co]])\n\nupdate_history_x_in(gen_worker, D, gen_started_time)\uf0c1\nUpdates the history (in place) when new points have been returned from a gen\n\nParameters:\n\ngen_worker (int) \u2013 The worker who generated these points\nD (numpy.typing.NDArray) \u2013 Output from gen_func\ngen_started_time (int)\n\nReturn type:\nNone\n\ngrow_H(k)\uf0c1\nAdds k rows to H in response to gen_f producing more points than\navailable rows in H.\n\nParameters:\nk (int) \u2013 Number of rows to add to H\n\nReturn type:\nNone\n\ntrim_H()\uf0c1\nReturns truncated array\n\nReturn type:\nndarray[tuple[int, \u2026], dtype[_ScalarType_co]]\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3815, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "259942f9-e9b5-444d-99e0-abe2ac1cfb36": {"__data__": {"id_": "259942f9-e9b5-444d-99e0-abe2ac1cfb36", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/manager_module.html", "file_name": "manager_module.html", "file_type": "text/html", "file_size": 23736, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "660e4cbd-79b8-49e0-b359-27f8a0c3ea67", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/manager_module.html", "file_name": "manager_module.html", "file_type": "text/html", "file_size": 23736, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "5a740244978543437bbb8c7457dbbeca89d14f99a24fe0a6847629271a48a312", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Manager Module \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\nManager Module\nlibEnsemble manager routines\nmanager_main()\nManager\nManager.__init__()\nManager.term_test_wallclock()\nManager.term_test_sim_max()\nManager.term_test_gen_max()\nManager.term_test_stop_val()\nManager.term_test()\nManager.run()\n\nWorker Module\nHistory Module\nResources Module\nRSET Resources Module\nWorker Resources Module\nEnvironment Resources Module\nNode Resources Module\nMPI Resources Module\nScheduler Module\n\nlibEnsemble\n\nInternal Modules\nManager Module\n\n View page source\n\nManager Module\uf0c1\n\nlibEnsemble manager routines\uf0c1\n\nmanager.manager_main(hist, libE_specs, alloc_specs, sim_specs, gen_specs, exit_criteria, persis_info, wcomms=[])\uf0c1\nManager routine to coordinate the generation and simulation evaluations\n\nParameters:\n\nhist (libensemble.history.History) \u2013 A libEnsemble history type object.\nlibE_specs (dict) \u2013 Specifications for libEnsemble\nalloc_specs (dict) \u2013 Specifications for the allocation function\nsim_specs (dict) \u2013 Specifications for the simulation function\ngen_specs (dict) \u2013 Specifications for the generator function\nexit_criteria (dict) \u2013 Criteria for libEnsemble to stop a run\npersis_info (dict) \u2013 Persistent information to be passed between user functions\nwcomms (list, Optional) \u2013 A list of comm type objects for each worker. Default is an empty list.\n\nReturn type:\n(<class \u2018dict\u2019>, <class \u2018int\u2019>, <class \u2018int\u2019>)\n\nclass manager.Manager(hist, libE_specs, alloc_specs, sim_specs, gen_specs, exit_criteria, wcomms=[])\uf0c1\nManager class for libensemble.\n\nParameters:\n\nlibE_specs (dict)\nalloc_specs (dict)\nsim_specs (dict)\ngen_specs (dict)\nexit_criteria (dict)\nwcomms (list)\n\n__init__(hist, libE_specs, alloc_specs, sim_specs, gen_specs, exit_criteria, wcomms=[])\uf0c1\nInitializes the manager\n\nParameters:\n\nlibE_specs (dict)\nalloc_specs (dict)\nsim_specs (dict)\ngen_specs (dict)\nexit_criteria (dict)\nwcomms (list)\n\nterm_test_wallclock(max_elapsed)\uf0c1\nChecks against wallclock timeout\n\nParameters:\nmax_elapsed (int)\n\nReturn type:\nbool\n\nterm_test_sim_max(sim_max)\uf0c1\nChecks against max simulations\n\nParameters:\nsim_max (int)\n\nReturn type:\nbool\n\nterm_test_gen_max(gen_max)\uf0c1\nChecks against max generator calls\n\nParameters:\ngen_max (int)\n\nReturn type:\nbool\n\nterm_test_stop_val(stop_val)\uf0c1\nChecks against stop value criterion\n\nParameters:\nstop_val (Any)\n\nReturn type:\nbool\n\nterm_test(logged=True)\uf0c1\nChecks termination criteria\n\nParameters:\nlogged (bool)\n\nReturn type:\nbool | int\n\nrun(persis_info)\uf0c1\nRuns the manager\n\nParameters:\npersis_info (dict)\n\nReturn type:\n(<class \u2018dict\u2019>, <class \u2018int\u2019>, <class \u2018int\u2019>)\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3287, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d8f2b196-cbcd-4e07-ad93-09a8be948caf": {"__data__": {"id_": "d8f2b196-cbcd-4e07-ad93-09a8be948caf", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/mpi_resources_module.html", "file_name": "mpi_resources_module.html", "file_type": "text/html", "file_size": 21791, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "952fb317-689a-4f8d-8bd4-792be7b0c7a7", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/mpi_resources_module.html", "file_name": "mpi_resources_module.html", "file_type": "text/html", "file_size": 21791, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "80cf9941f281074f83c75746121cc4aa9095639669d08e94e5effe74586a587e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "MPI Resources Module \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\nManager Module\nWorker Module\nHistory Module\nResources Module\nRSET Resources Module\nWorker Resources Module\nEnvironment Resources Module\nNode Resources Module\nMPI Resources Module\nMPIResourcesException\nget_MPI_variant()\nget_MPI_runner()\ntask_partition()\nget_resources()\ncreate_machinefile()\nget_hostlist()\n\nScheduler Module\n\nlibEnsemble\n\nInternal Modules\nMPI Resources Module\n\n View page source\n\nMPI Resources Module\uf0c1\nManages libensemble resources related to MPI tasks launched from nodes.\n\nexception mpi_resources.MPIResourcesException\uf0c1\nResources module exception\n\nmpi_resources.get_MPI_variant()\uf0c1\nReturns MPI base implementation\n\nReturns:\nmpi_variant \u2013 MPI variant \u2018aprun\u2019 or \u2018jsrun\u2019 or \u2018msmpi\u2019 or \u2018mpich\u2019 or \u2018openmpi\u2019 or \u2018srun\u2019\n\nReturn type:\nstr\n\nmpi_resources.get_MPI_runner(mpi_runner=None)\uf0c1\nReturn whether mpirun is openmpi or mpich\n\nReturn type:\nstr\n\nmpi_resources.task_partition(num_procs, num_nodes, procs_per_node, machinefile=None)\uf0c1\nTakes provided nprocs/nodes/ranks and outputs working\nconfiguration of procs/nodes/ranks or error\n\nParameters:\n\nnum_procs (int | None)\nnum_nodes (int | None)\nprocs_per_node (int | None)\nmachinefile (str | None)\n\nReturn type:\ntuple[None, None, None] | tuple[int, int, int]\n\nmpi_resources.get_resources(resources, num_procs=None, num_nodes=None, procs_per_node=None, hyperthreads=False)\uf0c1\nReconciles user-supplied options with available worker\nresources to produce run configuration.\nDetects resources available to worker, checks whether an existing\nuser-supplied config is valid, and fills in any missing config\ninformation (i.e., num_procs/num_nodes/procs_per_node)\nUser-supplied config options are honored, and an exception is\nraised if these are infeasible.\n\nParameters:\n\nresources (Resources)\nnum_procs (int)\nnum_nodes (int)\nprocs_per_node (int)\nhyperthreads (bool)\n\nReturn type:\ntuple[int, int, int]\n\nmpi_resources.create_machinefile(resources, machinefile=None, num_procs=None, num_nodes=None, procs_per_node=None, hyperthreads=False)\uf0c1\nCreates a machinefile based on user-supplied config options,\ncompleted by detected machine resources\n\nParameters:\n\nresources (Resources)\nmachinefile (str | None)\nnum_procs (int)\nnum_nodes (int | None)\nprocs_per_node (int | None)\nhyperthreads (bool)\n\nReturn type:\ntuple[bool, None, int, int]\n\nmpi_resources.get_hostlist(resources, num_nodes=None)\uf0c1\nCreates a hostlist based on user-supplied config options.\ncompleted by detected machine resources\n\nParameters:\nresources (Resources)\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3245, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "3fde2aaa-1680-475c-b42d-ad327a6c9479": {"__data__": {"id_": "3fde2aaa-1680-475c-b42d-ad327a6c9479", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/node_resources_module.html", "file_name": "node_resources_module.html", "file_type": "text/html", "file_size": 13834, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "42285cd4-f11a-4f7f-b620-2730c3a43482", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/node_resources_module.html", "file_name": "node_resources_module.html", "file_type": "text/html", "file_size": 13834, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "26b57dde2f3a93119a3be78d202292700d62a08922ac2bcdc1e7f5378fc940b9", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Node Resources Module \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\nManager Module\nWorker Module\nHistory Module\nResources Module\nRSET Resources Module\nWorker Resources Module\nEnvironment Resources Module\nNode Resources Module\nget_cpu_cores()\nget_sub_node_resources()\n\nMPI Resources Module\nScheduler Module\n\nlibEnsemble\n\nInternal Modules\nNode Resources Module\n\n View page source\n\nNode Resources Module\uf0c1\nThis module for detects and returns intranode resources\n\nnode_resources.get_cpu_cores(hyperthreads=False)\uf0c1\nReturns the number of cores on the node.\nIf hyperthreads is true, this is the logical CPU cores; else\nthe physical cores are returned.\nNote: This returns cores available on the current node. It will\nnot work for systems of multiple node types\n\nParameters:\nhyperthreads (bool)\n\nReturn type:\nint\n\nnode_resources.get_sub_node_resources(launcher=None, remote_mode=False, env_resources=None)\uf0c1\nReturns logical and physical cores and GPUs per node as a tuple\nFirst checks for environment values, and and then for detected values.\nIf remote_mode is True, then detection launches a job via the MPI launcher.\nAny value that is already valid, is not overwritten by successive stages.\n\nParameters:\n\nlauncher (str | None)\nremote_mode (bool)\n\nReturn type:\ntuple[int, int, int]\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1987, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f2853424-6d42-4075-b671-127d191c8dff": {"__data__": {"id_": "f2853424-6d42-4075-b671-127d191c8dff", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/resources_module.html", "file_name": "resources_module.html", "file_type": "text/html", "file_size": 33306, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4b55ad4e-8e85-4a2d-a9ec-859984e30dc5", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/resources_module.html", "file_name": "resources_module.html", "file_type": "text/html", "file_size": 33306, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "1dfe93d1cf8b22ecb89d97d931473bcfce35073651dada8828908a4e1acf696e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3341403e-9df9-4e4f-8c64-29d56911e7fd", "node_type": "1", "metadata": {}, "hash": "e2dfd97483965d2b8c0c3ff4d81204b4e75a49f6bcf02aea27056d0b0d74d00a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Resources Module \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\nManager Module\nWorker Module\nHistory Module\nResources Module\nResources\nResources.__init__()\nResources.init_resources()\nResources.set_worker_resources()\nResources.set_resource_manager()\nResources.add_comm_info()\n\nGlobalResources\nGlobalResources.__init__()\nGlobalResources.add_comm_info()\nGlobalResources.update_scheduler_opts()\nGlobalResources.is_nodelist_shortnames()\nGlobalResources.remove_nodes()\nGlobalResources.get_global_nodelist()\n\nRSET Resources Module\nWorker Resources Module\nEnvironment Resources Module\nNode Resources Module\nMPI Resources Module\nScheduler Module\n\nlibEnsemble\n\nInternal Modules\nResources Module\n\n View page source\n\nResources Module\uf0c1\nThis module detects and returns system resources\n\nclass resources.resources.Resources(libE_specs, platform_info={}, top_level_dir=None)\uf0c1\nProvides system resources to libEnsemble and executor.\nA resources instance is always initialized unless libE_specs[\"disable_resource_manager\"] is True.\nClass Attributes:\n\nVariables:\nResources \u2013 resources: The resources object is stored here and can be retrieved in user functions.\n\nParameters:\n\nlibE_specs (dict)\nplatform_info (dict)\ntop_level_dir (str)\n\nObject Attributes:\nThese are set on initialization.\n\nVariables:\n\ntop_level_dir (string) \u2013 Directory where searches for node_list file.\nglob_resources (GlobalResources) \u2013 Maintains resources available to libEnsemble.\n\nParameters:\n\nlibE_specs (dict)\nplatform_info (dict)\ntop_level_dir (str)\n\nThe following are set up after manager/worker fork.\nThe resource manager is set up only on the manager, while the worker resources object is set\nup on workers.\n\nVariables:\n\nresource_manager (ResourceManager) \u2013 An object that manages resource set assignment to workers.\nworker_resources (WorkerResources) \u2013 An object that contains worker-specific resources.\n\nParameters:\n\nlibE_specs (dict)\nplatform_info (dict)\ntop_level_dir (str)\n\n__init__(libE_specs, platform_info={}, top_level_dir=None)\uf0c1\nInitiate a new resources object\n\nParameters:\n\nlibE_specs (dict)\nplatform_info (dict)\ntop_level_dir (str | None)\n\nReturn type:\nNone\n\nclassmethod init_resources(libE_specs, platform_info={})\uf0c1\nInitiate resource management\n\nParameters:\n\nlibE_specs (dict)\nplatform_info (dict)\n\nReturn type:\nNone\n\nset_worker_resources(num_workers, workerid)\uf0c1\nInitiate the worker resources component of resources\n\nParameters:\n\nnum_workers (int)\nworkerid (int)\n\nReturn type:\nNone\n\nset_resource_manager(num_workers)\uf0c1\nInitiate the resource manager component of resources\n\nParameters:\nnum_workers (int)\n\nReturn type:\nNone\n\nadd_comm_info(libE_nodes)\uf0c1\nAdds comms-specific information to resources\nRemoves libEnsemble nodes from nodelist if in dedicated_mode.\n\nReturn type:\nNone\n\nclass resources.resources.GlobalResources(libE_specs, platform_info={}, top_level_dir=None)\uf0c1\nObject Attributes:\nThese are set on initialization.\n:ivar str top_level_dir: Directory where searches for node_list file\n:ivar EnvResources env_resources: Object storing environment variables used by resources\n:ivar list global_nodelist: list of all nodes available for running user applications\n:ivar int logical_cores_avail_per_node: Logical cores (including SMT threads) available on a node\n:ivar int physical_cores_avail_per_node: Physical cores available on a node\n:ivar list zero_resource_workers: List of workerIDs to have no resources.\n:ivar bool dedicated_mode: Whether to remove libE nodes from global nodelist.\n:ivar int num_resource_sets: Number of resource sets, if supplied by the user.\n\nParameters:\n\nlibE_specs (dict)\nplatform_info (dict)\ntop_level_dir (str)\n\n__init__(libE_specs, platform_info={}, top_level_dir=None)\uf0c1\nInitializes a new Resources instance\nDetermines the compute resources available for current allocation, including\nnode list and cores/hardware threads available within nodes.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4437, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "3341403e-9df9-4e4f-8c64-29d56911e7fd": {"__data__": {"id_": "3341403e-9df9-4e4f-8c64-29d56911e7fd", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/resources_module.html", "file_name": "resources_module.html", "file_type": "text/html", "file_size": 33306, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4b55ad4e-8e85-4a2d-a9ec-859984e30dc5", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/resources_module.html", "file_name": "resources_module.html", "file_type": "text/html", "file_size": 33306, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "1dfe93d1cf8b22ecb89d97d931473bcfce35073651dada8828908a4e1acf696e", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f2853424-6d42-4075-b671-127d191c8dff", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/resources_module.html", "file_name": "resources_module.html", "file_type": "text/html", "file_size": 33306, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "637473d058b4d7376e476531e24e7b9adf8bed7121e423495bc152e0ad30c1f9", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": ":ivar bool dedicated_mode: Whether to remove libE nodes from global nodelist.\n:ivar int num_resource_sets: Number of resource sets, if supplied by the user.\n\nParameters:\n\nlibE_specs (dict)\nplatform_info (dict)\ntop_level_dir (str)\n\n__init__(libE_specs, platform_info={}, top_level_dir=None)\uf0c1\nInitializes a new Resources instance\nDetermines the compute resources available for current allocation, including\nnode list and cores/hardware threads available within nodes.\nThe following parameters may be extracted from libE_specs\n\nParameters:\n\ntop_level_dir (str, Optional) \u2013 Directory libEnsemble runs in (default is current working directory)\ndedicated_mode (bool, Optional) \u2013 If true, then dedicate nodes to running libEnsemble.\nDedicated mode means that any nodes running libE processes (manager and workers),\nwill not be available to worker-launched tasks (user applications). They will\nbe removed from the nodelist (if present), before dividing into resource sets.\nzero_resource_workers (List[int], Optional) \u2013 List of workers that require no resources.\nnum_resource_sets (int, Optional) \u2013 The total number of resource sets. Resources will be divided into this number.\nDefault: None. If None, resources will be divided by workers (excluding zero_resource_workers).\ncores_on_node (tuple (int, int), Optional) \u2013 If supplied gives (physical cores, logical cores) for the nodes. If not supplied,\nthis will be auto-detected.\ngpus_on_node (int, Optional) \u2013 If supplied gives number of GPUs for the nodes. If not supplied,\nthis will be auto-detected.\nenforce_worker_core_bounds (bool, Optional) \u2013 If True, then libEnsemble\u2019s executor will raise an exception if it detects that\na worker has been instructed to launch tasks with the number of requested processes\nbeing excessive to the number of cores allocated to that worker, or not enough\nprocesses were requested to satisfy allocated cores.\nnode_file (str, Optional) \u2013 If supplied, give the name of a file in the run directory to use as a node-list\nfor use by libEnsemble. Defaults to a file named \u201cnode_list\u201d. If the file does\nnot exist, then the node-list will be auto-detected.\nnodelist_env_slurm (str, Optional) \u2013 The environment variable giving a node list in Slurm format (Default: uses SLURM_NODELIST).\nNote: This is queried only if a node_list file is not provided.\nnodelist_env_cobalt (str, Optional) \u2013 The environment variable giving a node list in Cobalt format (Default: uses COBALT_PARTNAME).\nNote: This is queried only if a node_list file is not provided.\nnodelist_env_lsf (str, Optional) \u2013 The environment variable giving a node list in LSF format (Default: uses LSB_HOSTS).\nNote: This is queried only if a node_list file is not provided.\nnodelist_env_lsf_shortform (str, Optional) \u2013 The environment variable giving a node list in LSF short-form format (Default: uses LSB_MCPU_HOSTS)\nNote: This is only queried if a node_list file is not provided.\nlibE_specs (dict)\nplatform_info (dict)\n\nReturn type:\nNone\n\nadd_comm_info(libE_nodes)\uf0c1\nAdds comms-specific information to resources\nRemoves libEnsemble nodes from nodelist if in dedicated_mode.\n\nupdate_scheduler_opts(scheduler_opts)\uf0c1\nAdd scheduler options from platform_info, if not present\n\nstatic is_nodelist_shortnames(nodelist)\uf0c1\nReturns False if any entry contains a \u2018.\u2019, else True\n\nstatic remove_nodes(global_nodelist_in, remove_list)\uf0c1\nRemoves any nodes in remove_list from the global nodelist\n\nstatic get_global_nodelist(node_file='node_list', rundir=None, env_resources=None)\uf0c1\nReturns the list of nodes available to all libEnsemble workers.\nIf a node_file exists this is used, otherwise the environment\nis interrogated for a node list. If a dedicated manager node is used,\nthen a node_file is recommended.\nIn dedicated mode, any node with a libE worker is removed from the list.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 3972, "end_char_idx": 7891, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "9c7ee6b9-cfea-4305-a3f6-03b7d6845541": {"__data__": {"id_": "9c7ee6b9-cfea-4305-a3f6-03b7d6845541", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/rset_resources_module.html", "file_name": "rset_resources_module.html", "file_type": "text/html", "file_size": 22745, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "573d71c6-dda9-40f7-818f-260c82b14f5d", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/rset_resources_module.html", "file_name": "rset_resources_module.html", "file_type": "text/html", "file_size": 22745, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "97ca2647bf3c295ee8f72dca641bb8903a6441f868eb0dd719c3cc657ad6e4e1", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "RSET Resources Module \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\nManager Module\nWorker Module\nHistory Module\nResources Module\nRSET Resources Module\nRSetResources\nRSetResources.__init__()\nRSetResources.get_group_list()\nRSetResources.best_split()\nRSetResources.get_rsets_on_a_node()\nRSetResources.get_workers2assign2()\nRSetResources.even_assignment()\nRSetResources.expand_list()\nRSetResources.get_split_list()\nRSetResources.get_partitioned_nodelist()\n\nWorker Resources Module\nEnvironment Resources Module\nNode Resources Module\nMPI Resources Module\nScheduler Module\n\nlibEnsemble\n\nInternal Modules\nRSET Resources Module\n\n View page source\n\nRSET Resources Module\uf0c1\n\nclass rset_resources.RSetResources(num_workers, resources)\uf0c1\nA class that creates a fixed mapping of resource sets to the available resources.\nObject Attributes:\nThese are set on initialization and include inherited.\nrsets below is used to abbreviate resource sets.\n\nVariables:\n\nnum_workers (int) \u2013 Total number of workers\nnum_workers_2assign2 (int) \u2013 The number of workers that will be assigned resource sets.\ntotal_num_rsets (int) \u2013 The total number of resource sets.\nsplit_list (list) \u2013 A list of lists, where each element is the list of nodes for a given rset.\nlocal_rsets_list (list) \u2013 A list over rsets, where each element is the number of rsets that share the node.\nrsets_per_node (int) \u2013 The number of rsets per node (if an rset > 1 node, this will be 1)\n\nParameters:\n\nnum_workers (int)\nresources (Resources)\n\n__init__(num_workers, resources)\uf0c1\nInitializes a new RSetResources instance\nDetermines the compute resources available for each resource set.\nUnless resource sets is set explicitly, the number of resource sets is the number of workers,\nexcluding any workers defined as zero resource workers.\n\nParameters:\n\nnum_workers (int) \u2013 The total number of workers\nresources (Resources) \u2013 A Resources object containing global nodelist and intranode information\n\nstatic get_group_list(split_list, gpus_per_node=0, gpus_per_group=None)\uf0c1\nReturn lists of group ids and slot IDs by resource set\n\nstatic best_split(a, n)\uf0c1\nCreates the most even split of list a into n parts and return list of lists\n\nstatic get_rsets_on_a_node(num_rsets, resources)\uf0c1\nReturns the number of resource sets that can be placed on each node\nIf there are more nodes than resource sets, returns 1.\n\nstatic get_workers2assign2(num_workers, resources)\uf0c1\nReturns workers to assign resources to\n\nstatic even_assignment(nnodes, nworkers)\uf0c1\nReturns True if workers are evenly distributed to nodes, else False\n\nstatic expand_list(nnodes, nworkers, nodelist)\uf0c1\nDuplicates each element of nodelist to best map workers to nodes.\nReturns node list with duplicates, and a list of local (on-node) worker\ncounts, both indexed by worker.\n\nstatic get_split_list(num_rsets, resources)\uf0c1\nReturns a list of lists for each worker\nAssumes that self.global_nodelist has been calculated (in __init__).\n\nstatic get_partitioned_nodelist(num_rsets, resources)\uf0c1\nReturns lists of nodes available to all resource sets\nAssumes that self.global_nodelist has been calculated (in __init__).\nAlso self.global_nodelist will have already removed non-application nodes\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3879, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "25d3e09b-5e31-4133-8e50-b02d974782d3": {"__data__": {"id_": "25d3e09b-5e31-4133-8e50-b02d974782d3", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/scheduler_module.html", "file_name": "scheduler_module.html", "file_type": "text/html", "file_size": 20343, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8afc95a2-ed63-4861-87ce-34166e930488", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/scheduler_module.html", "file_name": "scheduler_module.html", "file_type": "text/html", "file_size": 20343, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "c25e9f2607414cd771eb4e3e8af5fa20547bb73c22a32ddd3758d6af75ed79c4", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Scheduler Module \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\nManager Module\nWorker Module\nHistory Module\nResources Module\nRSET Resources Module\nWorker Resources Module\nEnvironment Resources Module\nNode Resources Module\nMPI Resources Module\nScheduler Module\n\nlibEnsemble\n\nInternal Modules\nScheduler Module\n\n View page source\n\nScheduler Module\uf0c1\n\nclass resources.scheduler.ResourceScheduler(user_resources=None, sched_opts={})\nCalculates and returns resource set ids from a dictionary of resource sets\nby group. The available resource sets are read initially from the resources\nmodule or from a resources object passed in.\nResource sets are locally provisioned to work items by a call to the\nassign_resources function, and a cache of available resource sets is\nmaintained for the life of the object (usually corresponding to one call\nof the allocation function). Note that work item resources are formally\nassigned to workers only when a work item is sent to the worker.\n\nassign_resources(rsets_req, use_gpus=None, user_params=[])\nSchedule resource sets to a work item if possible.\nIf the resources required are less than one node, they will be\nallocated to the smallest available sufficient slot.\nIf the resources required are more than one node, then\nthe scheduler will attempt to find an even split. If no even split\nis possible, then enough additional resource sets will be\nassigned to enable an even split.\nReturns a list of resource set IDs or raises an exception (either\nInsufficientResourcesError or InsufficientFreeResources).\n\nfind_rsets_any_slots(valid_rsets_by_group, max_grpsize, rsets_req, ngroups, rsets_per_group)\nFind optimal non-matching slots across groups\n\nfind_candidate(rsets_by_group, group_list, rsets_per_group, max_upper_bound)\nFind a candidate slot in a group\n\nget_avail_rsets_by_group()\nReturn a dictionary of resource set IDs for each group (e.g. node)\nIf groups are not set they will all be in one group (group 0)\nE.g: Say 8 resource sets / 2 nodes\nGROUP 1: [1,2,3,4]\nGROUP 2: [5,6,7,8]\n\nfilter_for_rset_type(avail_rsets_by_group, use_gpus)\nReturn avail_rsets_by_group filtered by rset type (gpus/non-gpus/all)\n\nfilter_out_rset_team(avail_rsets_by_group, rset_team)\nReturn avail_rsets_by_group filtered by rset type (gpus/non-gpus/all)\n\nstatic get_slots_of_len(d, n)\nFilter dictionary to values >= n\n\nget_avail_slots_by_group(rsets_by_group)\nReturn a dictionary of free slot IDS for each group (e.g. node)\n\ncalc_rsets_even_grps(rsets_req, max_grpsize, max_groups, extend)\nCalculate an even breakdown to best fit rsets_req input\n\ncheck_params(user_params, ngroups)\nReturn True if all user params divide by number of groups, else False\n\ncalc_even_split_uneven_groups(rsets_per_grp, ngroups, rsets_req, sorted_lens, max_grps, user_params)\nCalculate an even breakdown to best fit rsets_req with uneven groups\n\nassign_team_from_slots(slots_avail_by_group, cand_groups, cand_slots, rsets_per_group)\nAssign resource set team from slots\n\nstatic get_sorted_lens(avail_rsets)\nGet max length of a list value in a dictionary\n\nget_matching_slots(slots_avail_by_group, num_groups_req, rsets_per_group)\nGet first N matching slots across groups\nAssumes num_groups_req > 0.\n\ncheck_total_rsets(rsets_req, use_gpus)\nRaise exceptions if rsets requested is more than total that exist or available\n\n Previous\n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4014, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "27bc94c7-8dfb-45fc-91fb-d348ce134890": {"__data__": {"id_": "27bc94c7-8dfb-45fc-91fb-d348ce134890", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/worker_module.html", "file_name": "worker_module.html", "file_type": "text/html", "file_size": 18692, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1da45670-758b-425b-84d2-9aacdc762b9d", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/worker_module.html", "file_name": "worker_module.html", "file_type": "text/html", "file_size": 18692, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "752b8f8478e968ee32c88206d0296d1c0fb5b59a3f0cb73ce77545f7651c1e91", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Worker Module \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\nManager Module\nWorker Module\nlibEnsemble worker class\nworker_main()\nWorker\nWorker.__init__()\nWorker.run()\n\nHistory Module\nResources Module\nRSET Resources Module\nWorker Resources Module\nEnvironment Resources Module\nNode Resources Module\nMPI Resources Module\nScheduler Module\n\nlibEnsemble\n\nInternal Modules\nWorker Module\n\n View page source\n\nWorker Module\uf0c1\n\nlibEnsemble worker class\uf0c1\n\nworker.worker_main(comm, sim_specs, gen_specs, libE_specs, workerID=None, log_comm=True, resources=None, executor=None)\uf0c1\nEvaluates calculations given to it by the manager.\nCreates a worker object, receives work from manager, runs worker,\nand communicates results. This routine also creates and writes to\nthe workers summary file.\n\nParameters:\n\ncomm (communicator) \u2013 Comm object for manager communications\nsim_specs (dict) \u2013 Parameters/information for simulation calculations\ngen_specs (dict) \u2013 Parameters/information for generation calculations\nlibE_specs (dict) \u2013 Parameters/information for libE operations\nworkerID (int) \u2013 Manager assigned worker ID (if None, default is comm.rank)\nlog_comm (bool) \u2013 Whether to send logging over comm\nresources (Resources)\nexecutor (Executor)\n\nReturn type:\nNone\n\nclass worker.Worker(comm, dtypes, workerID, sim_specs, gen_specs, libE_specs)\uf0c1\nThe worker class provides methods for controlling sim and gen funcs\nObject Attributes:\nThese are public object attributes.\n\nVariables:\n\ncommunicator (comm) \u2013 Comm object for manager communications\ndtypes (dict) \u2013 Dictionary containing type information for sim and gen inputs\nworkerID (int) \u2013 The libensemble Worker ID\nsim_specs (dict) \u2013 Parameters/information for simulation calculations\ncalc_iter (dict) \u2013 Dictionary containing counts for each type of calc (e.g. sim or gen)\n\nParameters:\n\ncomm (Comm)\ndtypes (npt.DTypeLike)\nworkerID (int)\nsim_specs (dict)\ngen_specs (dict)\nlibE_specs (dict)\n\n__init__(comm, dtypes, workerID, sim_specs, gen_specs, libE_specs)\uf0c1\nInitializes new worker object\n\nParameters:\n\ncomm (Comm)\ndtypes (npt.DTypeLike)\nworkerID (int)\nsim_specs (dict)\ngen_specs (dict)\nlibE_specs (dict)\n\nReturn type:\nNone\n\nrun()\uf0c1\nRuns the main worker loop.\n\nReturn type:\nNone\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2914, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ff6309a1-c464-4d80-81eb-4fb32207f5ff": {"__data__": {"id_": "ff6309a1-c464-4d80-81eb-4fb32207f5ff", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/worker_resources_module.html", "file_name": "worker_resources_module.html", "file_type": "text/html", "file_size": 35968, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0ac43dda-52e6-46d2-8319-88ad10ad3728", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/worker_resources_module.html", "file_name": "worker_resources_module.html", "file_type": "text/html", "file_size": 35968, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "f8d32c1dd390c3056dde1532bc59ad8730440a1aa7403b1a632bde25316d2689", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9d48b965-8627-4e2f-971c-04cd89aac933", "node_type": "1", "metadata": {}, "hash": "462daa3cfff9c0c4c97feea0a238c55c7978aa650b91e891f7e751d5a45dbc0e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Worker Resources Module \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\nManager Module\nWorker Module\nHistory Module\nResources Module\nRSET Resources Module\nWorker Resources Module\nResourceManager\nResourceManager.__init__()\nResourceManager.assign_rsets()\nResourceManager.free_rsets()\nResourceManager.get_index_list()\n\nWorkerResources\nWorkerResources.__init__()\nWorkerResources.get_slots_as_string()\nWorkerResources.set_env_to_slots()\nWorkerResources.set_env_to_gpus()\nWorkerResources.doihave_gpus()\nWorkerResources.set_rset_team()\nWorkerResources.set_gen_procs_gpus()\nWorkerResources.set_slot_count()\nWorkerResources.get_local_nodelist()\n\nEnvironment Resources Module\nNode Resources Module\nMPI Resources Module\nScheduler Module\n\nlibEnsemble\n\nInternal Modules\nWorker Resources Module\n\n View page source\n\nWorker Resources Module\uf0c1\n\nclass resources.worker_resources.ResourceManager(num_workers, resources)\uf0c1\nBases: RSetResources\nProvides methods for managing the assignment of resource sets to workers.\n\nParameters:\n\nnum_workers (int)\nresources (GlobalResources)\n\n__init__(num_workers, resources)\uf0c1\nInitializes a new ResourceManager instance\nInstantiates the numpy structured array that holds information for each\nresource set.\n\nParameters:\n\nnum_workers (int) \u2013 The number of workers\nresources (Resources) \u2013 A Resources object containing global nodelist and intranode information\n\nReturn type:\nNone\n\nassign_rsets(rset_team, worker_id)\uf0c1\nMark the resource sets given by rset_team as assigned to worker_id\n\nfree_rsets(worker=None)\uf0c1\nFree up assigned resource sets\n\nstatic get_index_list(num_workers, num_rsets, zero_resource_list)\uf0c1\nMap WorkerID to index into a nodelist\n\nParameters:\n\nnum_workers (int)\nnum_rsets (int)\nzero_resource_list (list[int | Any])\n\nReturn type:\nlist[int | None]\n\nclass resources.worker_resources.WorkerResources(num_workers, resources, workerID)\uf0c1\nBases: RSetResources\nProvide system resources per worker to libEnsemble and executor.\nObject Attributes:\nSome of these attributes may be updated as the ensemble progresses.\nrsets below is used to abbreviate resource sets.\n\nVariables:\n\nworkerID (int) \u2013 workerID for this worker.\nlocal_nodelist (list) \u2013 A list of all nodes assigned to this worker.\nrset_team (list) \u2013 list of rset IDs currently assigned to this worker.\nnum_rsets (int) \u2013 The number of resource sets assigned to this worker.\nslots (dict) \u2013 A dictionary with a list of slot IDs for each node.\neven_slots (bool) \u2013 True if each node has the same number of slots.\nmatching_slots (bool) \u2013 True if each node has matching slot IDs.\nslot_count (int) \u2013 The number of slots per node if even_slots is True, else None.\nslots_on_node (list) \u2013 A list of slots IDs if matching_slots is True, else None.\nlocal_node_count (int) \u2013 The number of nodes available to this worker (rounded up to whole number).\nrsets_per_node (int) \u2013 The number of rsets per node (if a rset > 1 node, will be 1).\n\nThe worker_resources attributes can be queried, and convenience functions\ncalled, via the resources class attribute. For example:\nWith resources imported:\nfrom libensemble.resources.resources import Resources\n\nA user function (sim/gen) may do:\nresources = Resources.resources.worker_resources\nnum_nodes = resources.local_node_count\ncores_per_node = resources.slot_count # One CPU per GPU\nresources.set_env_to_slots(\"CUDA_VISIBLE_DEVICES\") # Use convenience function.\n\nNote that slots are resource sets enumerated on a node (starting with zero).\nIf a resource set has more than one node, then each node is considered to have slot zero.\nIf even_slots is True, then the attributes slot_count will give the number\nof slots on each node. If matching_slots is True, then slots_on_node will\ngive the slot IDs for all nodes. These can be used for simplicity; otherwise, the\nslots dictionary can be used to get information for each node.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4412, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "9d48b965-8627-4e2f-971c-04cd89aac933": {"__data__": {"id_": "9d48b965-8627-4e2f-971c-04cd89aac933", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/worker_resources_module.html", "file_name": "worker_resources_module.html", "file_type": "text/html", "file_size": 35968, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0ac43dda-52e6-46d2-8319-88ad10ad3728", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/worker_resources_module.html", "file_name": "worker_resources_module.html", "file_type": "text/html", "file_size": 35968, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "f8d32c1dd390c3056dde1532bc59ad8730440a1aa7403b1a632bde25316d2689", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ff6309a1-c464-4d80-81eb-4fb32207f5ff", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/dev_API/worker_resources_module.html", "file_name": "worker_resources_module.html", "file_type": "text/html", "file_size": 35968, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "a7221ef2633d60599170aec0bf699466b43f03fe2e299901f31b6bcdaca1836a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "The worker_resources attributes can be queried, and convenience functions\ncalled, via the resources class attribute. For example:\nWith resources imported:\nfrom libensemble.resources.resources import Resources\n\nA user function (sim/gen) may do:\nresources = Resources.resources.worker_resources\nnum_nodes = resources.local_node_count\ncores_per_node = resources.slot_count # One CPU per GPU\nresources.set_env_to_slots(\"CUDA_VISIBLE_DEVICES\") # Use convenience function.\n\nNote that slots are resource sets enumerated on a node (starting with zero).\nIf a resource set has more than one node, then each node is considered to have slot zero.\nIf even_slots is True, then the attributes slot_count will give the number\nof slots on each node. If matching_slots is True, then slots_on_node will\ngive the slot IDs for all nodes. These can be used for simplicity; otherwise, the\nslots dictionary can be used to get information for each node.\n\n__init__(num_workers, resources, workerID)\uf0c1\nInitializes a new WorkerResources instance\nDetermines the compute resources available for current worker, including\nnode list and cores/hardware threads available within nodes.\n\nParameters:\n\nnum_workers (int) \u2013 The number of workers\nresources (Resources) \u2013 A Resources object containing global nodelist and intranode information\nworkerID (int) \u2013 workerID of current process\n\nget_slots_as_string(multiplier=1, delimiter=',', limit=None)\uf0c1\nReturns list of slots as a string\n\nParameters:\n\nmultiplier \u2013 Optional int. Assume this many items per slot.\ndelimiter \u2013 Optional int. Delimiter for output string.\nlimit \u2013 Optional int. Maximum slots (truncate list after this many slots).\n\nset_env_to_slots(env_var, multiplier=1, delimiter=',')\uf0c1\nSets the given environment variable to slots\n\nParameters:\n\nenv_var \u2013 String. Name of environment variable to set.\nmultiplier \u2013 Optional int. Assume this many items per slot.\ndelimiter \u2013 Optional int. Delimiter for output string.\n\nExample usage in a sim function:\nWith resources imported:\nfrom libensemble.resources.resources import Resources\n\nObtain worker resources:\nresources = Resources.resources.worker_resources\nresources.set_env_to_slots(\"CUDA_VISIBLE_DEVICES\")\n\nset_env_to_gpus(env_var=None, delimiter=',')\uf0c1\nSets the given environment variable to GPUs\n\nParameters:\n\nenv_var \u2013 String. Name of environment variable to set.\ndelimiter \u2013 Optional int. Delimiter for output string.\n\nExample usage in a sim function:\nWith resources imported:\nfrom libensemble.resources.resources import Resources\n\nObtain worker resources:\nresources = Resources.resources.worker_resources\nresources.set_env_to_gpus(\"CUDA_VISIBLE_DEVICES\")\n\ndoihave_gpus()\uf0c1\nAre this workers current resource sets GPU rsets\n\nset_rset_team(rset_team)\uf0c1\nUpdate worker team and local attributes\n\nUpdates: rset_teamlocal_nodelist\nslots (dictionary with list of partitions for each node)\nslot_count - number of slots on each node\nlocal_node_count\n\nParameters:\nrset_team (list[int])\n\nReturn type:\nNone\n\nset_gen_procs_gpus(libE_info)\uf0c1\nAdd gen supplied procs and gpus\n\nset_slot_count()\uf0c1\nSets attributes even_slots and matching_slots.\nAlso sets slot_count if even_slots (else None) and\nsets slots_on_node if matching_slots (else None).\n\nReturn type:\nNone\n\nstatic get_local_nodelist(workerID, rset_team, split_list, rsets_per_node)\uf0c1\nReturns the list of nodes available to the given worker and the slot dictionary\n\nParameters:\n\nworkerID (int)\nrset_team (list[int])\nsplit_list (list[list[str]])\nrsets_per_node (int)\n\nReturn type:\ntuple[list[str], dict[str, list[int]]]\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 3484, "end_char_idx": 7135, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "68e15b75-268c-49f1-9b4a-47c552f80951": {"__data__": {"id_": "68e15b75-268c-49f1-9b4a-47c552f80951", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/release_management/release_index.html", "file_name": "release_index.html", "file_type": "text/html", "file_size": 10569, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "86f843bf-eb78-49c5-8af5-12c0fb7cc3f1", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/release_management/release_index.html", "file_name": "release_index.html", "file_type": "text/html", "file_size": 10569, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "40d2bdfd23e9d80304229bd63dabc0a8b5072fbcc050c5eeeaf95eaad29a3746", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Release Management \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nRelease Process\nRelease Platforms\n\nInternal Modules\n\nlibEnsemble\n\nRelease Management\n\n View page source\n\nRelease Management\uf0c1\nThis section documents the steps to be followed for each libEnsemble release.\n\nlibEnsemble Release Contents:\n\nRelease Process\nBefore release\nDuring release\nAfter release\n\nRelease Platforms\nGitHub release\nPyPI release\nConda release\nSpack release\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1133, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "6d36352d-09f2-4246-a875-2bda0b4ed5ed": {"__data__": {"id_": "6d36352d-09f2-4246-a875-2bda0b4ed5ed", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/release_management/release_platforms/index.html", "file_name": "index.html", "file_type": "text/html", "file_size": 10472, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bfd329a4-450b-4e6e-b4d1-b8a26b3e47df", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/release_management/release_platforms/index.html", "file_name": "index.html", "file_type": "text/html", "file_size": 10472, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "6e04ddb405aea471aa5c2707dc47e3e492050ebed9315052fc998634c0c95622", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Release Platforms \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nRelease Process\nRelease Platforms\nGitHub release\nPyPI release\nConda release\nSpack release\n\nInternal Modules\n\nlibEnsemble\n\nRelease Management\nRelease Platforms\n\n View page source\n\nRelease Platforms\uf0c1\n\nlibEnsemble Release Platforms:\n\nGitHub release\nPyPI release\nConda release\nSpack release\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1049, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "520f49c7-2972-4871-9ee5-f1e6df1e0bdf": {"__data__": {"id_": "520f49c7-2972-4871-9ee5-f1e6df1e0bdf", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/release_management/release_platforms/rel_conda.html", "file_name": "rel_conda.html", "file_type": "text/html", "file_size": 13439, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3f1f431b-5cbc-44f9-afaa-1b078fdcc463", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/release_management/release_platforms/rel_conda.html", "file_name": "rel_conda.html", "file_type": "text/html", "file_size": 13439, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "8da666a14ff823ba1d12cf916e4a62e30106da2eaf2c7f2572f5aa80c73ae4e0", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Conda release \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nRelease Process\nRelease Platforms\nGitHub release\nPyPI release\nConda release\nAutomatic PR\nManual PR\nRelease\n\nSpack release\n\nInternal Modules\n\nlibEnsemble\n\nRelease Management\nRelease Platforms\nConda release\n\n View page source\n\nConda release\uf0c1\nlibEnsemble is released as part of the conda-forge distribution.\nThis enables users to conda install the package.\nThe Conda package is created from the conda-forge feedstock repository.\nThis repository comes with some common dependencies and automatically creates\nthree variants (no-mpi, mpich, Open MPI).\n\nAutomatic PR\uf0c1\nNote that once libEnsemble has been released on PYPI a conda-forge bot will\nusually detect the new release and automatically create a pull request with the\nchanges below. It may take a few hours for this to happen. If no other changes\nare required (e.g., new dependencies), then you can simply wait for the tests to\npass and merge.\n\nManual PR\uf0c1\nIf necessary, a manual PR can be created as follows.\nCreate a fork of the repository (not a branch). In the file recipe/meta.yaml\nbump the version number, set the build number to zero, and update the\nsha256. The latter can be obtained by running sha256sum on the github\ntarball. For example, for v0.6.0:\nsha256sum libensemble-0.6.0.tar.gz\n\nThen, use the phrase @conda-forge-admin, please rerender in a comment in\nthe pull request for automated rerendering. The github-actions bot will\nreply with a message when ready to merge.\n\nRelease\uf0c1\nApprovals from other libEnsemble administrators will be required.\nOnce the pull request is merged, the new package should become available to\nConda, in the conda-forge channel, after a processing delay.\nYou can then check the three versions:\n\nconda install libensemble\nconda install libensemble=*=mpi_mpich*.\nconda install libensemble=*=mpi_openmpi*\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2550, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "95114383-6d68-4a06-a80a-1db6b6d38f27": {"__data__": {"id_": "95114383-6d68-4a06-a80a-1db6b6d38f27", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/release_management/release_platforms/rel_github.html", "file_name": "rel_github.html", "file_type": "text/html", "file_size": 11099, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2e1fa59b-1c78-4a31-b6e0-42f84e7ad13c", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/release_management/release_platforms/rel_github.html", "file_name": "rel_github.html", "file_type": "text/html", "file_size": 11099, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "2f00d0c960ef69539463fa67bb0c97edee0a71108a677e85a1c54592e72e9fda", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "GitHub release \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nRelease Process\nRelease Platforms\nGitHub release\nPyPI release\nConda release\nSpack release\n\nInternal Modules\n\nlibEnsemble\n\nRelease Management\nRelease Platforms\nGitHub release\n\n View page source\n\nGitHub release\uf0c1\nThe administrator should follow the GitHub instructions to draft a new release.\nThese can currently be found at\nhttps://help.github.com/en/articles/creating-releases.\nBoth the version and title will be of the form vX.Y.Z, for example, v0.5.0.\nFrom version 1.0, these should follow semantic versioning, where X/Y/Z\nare major, minor, and patch revisions.\nPrior to version 1.0, the second number may include breaking API changes, and\nthe third number may include minor additions.\nThe release notes should be included in the description. These should already\nbe in docs/release_notes.rst. The release notes should be copied only for the\ncurrent release, starting from the date. Hint: To see example of raw input,\nclick edit next to one of the previous releases.\nNote that unlike some platforms (e.g., PyPI), GitHub releases can be edited or\ndeleted once created.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1828, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "38244e86-fa6d-4a63-a901-a78edf5bab2c": {"__data__": {"id_": "38244e86-fa6d-4a63-a901-a78edf5bab2c", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/release_management/release_platforms/rel_pypi.html", "file_name": "rel_pypi.html", "file_type": "text/html", "file_size": 12081, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a226b891-b583-4b56-b512-4753d8813f1e", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/release_management/release_platforms/rel_pypi.html", "file_name": "rel_pypi.html", "file_type": "text/html", "file_size": 12081, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "990244fea159e108867afad59a0054da6d1463fefcd8daa9ec7d6794fbf2dfd4", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "PyPI release \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nRelease Process\nRelease Platforms\nGitHub release\nPyPI release\nConda release\nSpack release\n\nInternal Modules\n\nlibEnsemble\n\nRelease Management\nRelease Platforms\nPyPI release\n\n View page source\n\nPyPI release\uf0c1\nlibEnsemble is released on the Python Package Index (commonly known as PyPI).\nThis enables users to pip install the package.\nThe package is stored on PyPI in the form of a source distribution (commonly\nknown as a tarball). The tarball should be created as detailed below (which\ncreates the distribution package using the MANIFEST.in file in the git root\ndirectory. Do not use the tarball on GitHub, which does not follow MANIFEST.in\nand does not contain the required PKG-INFO file.\nYou will need logon credentials for the libEnsemble PyPI. You will also need\ntwine (which can be pip or Conda installed).\nIn the package directory on the main branch (the one containing setup.py) do\nthe following:\nCreate distribution:\npython setup.py sdist\n\nUpload (you will need username/password here):\ntwine upload dist/*\n\nIf you now run\npip install libensemble\n\nit should find the new version.\nIt should also be visible here:\nhttps://pypi.org/project/libensemble/\nFor more details on creating PyPI packages see\nhttps://betterscientificsoftware.github.io/python-for-hpc/tutorials/python-pypi-packaging/\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2051, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "11341703-dcae-404e-847e-9bc247fa7999": {"__data__": {"id_": "11341703-dcae-404e-847e-9bc247fa7999", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/release_management/release_platforms/rel_spack.html", "file_name": "rel_spack.html", "file_type": "text/html", "file_size": 20696, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b0a8b1c0-627e-4e23-82b1-87b31f4d97dc", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/release_management/release_platforms/rel_spack.html", "file_name": "rel_spack.html", "file_type": "text/html", "file_size": 20696, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "2dbcc48fd25f8e96ee04a5d27a19ce583de72c781f3bb7cfe19813300693a8d8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f358fa81-403a-439d-8b23-0e6a4c4500bd", "node_type": "1", "metadata": {}, "hash": "b7f31622838ed545b7341b1ef71244df56f641ff0a751be3cf61679c53918208", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "A workflow for updating libEnsemble on Spack \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nRelease Process\nRelease Platforms\nGitHub release\nPyPI release\nConda release\nSpack release\nUpdating (the develop branch)\nMaking changes\nQuick example to update libEnsemble\nExpress Summary: Make Fork Identical to Upstream\n\nInternal Modules\n\nlibEnsemble\n\nRelease Management\nRelease Platforms\nA workflow for updating libEnsemble on Spack\n\n View page source\n\nA workflow for updating libEnsemble on Spack\uf0c1\nThis assumes you have already:\n\nmade a PyPI package for the new libEnsemble version and\nmade a GitHub fork of Spack and cloned it to your local system.\n\nDetails on how to create forks can be found at https://help.github.com/articles/fork-a-repo.\nYou now have a configuration like that shown at https://stackoverflow.com/a/6286877/6346040.\nUpstream, in this case, is the official Spack repository on GitHub. Origin is\nyour fork on GitHub, and Local Machine is your local clone (from your fork).\nMake sure SPACK_ROOT is set and Spack binary is in your path:\nexport SPACK_ROOT=<PATH/TO/LOCAL/SPACK/REPO>\nexport PATH=$SPACK_ROOT/bin:$PATH\n\nDo ONCE in your local checkout:\nTo set upstream repo:\ngit remote add upstream https://github.com/spack/spack.git\ngit remote -v # check added\n\n(Optional) To prevent accidental pushes to upstream:\ngit remote set-url --push upstream no_push\ngit remote -v # Check for line: `upstream no_push (push)`\n\nUpdating (the develop branch)\uf0c1\nYou will now update your local machine from the upstream repo (if in doubt,\nmake a copy of the local repo in your file system before doing the following).\nCheck that the upstream remote is present:\ngit remote -v\n\nEnsure that you are on the develop branch:\ngit checkout develop\n\nFetch from the upstream repo:\ngit fetch upstream\n\nTo update your local machine, you may wish to rebase or overwrite your local files.\nSelect from the following:\nNow make your local machine identical to the upstream repo (WARNING: Any local changes will be lost!):\ngit reset --hard upstream/develop\n\nAlternatively, if you have existing local changes to go \u201con top\u201d of the latest\ncode (usually we will make our release updates after this):\ngit rebase upstream/develop\n\n(Optional) You may want to update your forked (origin) repo on GitHub at this point.\nThis may require a forced push:\ngit push origin develop --force\n\nMaking changes\uf0c1\nThe instructions below assume you make changes on the default develop branch.\nYou can optionally create a branch to make changes on. Doing so may be a good\nidea, especially if you have multiple packages, to make separate branches for\neach package.\nSee the Spack packaging and contribution guides for more info.\n\nQuick example to update libEnsemble\uf0c1\nThis will open the libEnsemble package.py file in your editor (given by\nenvironment variable EDITOR):\nspack edit py-libensemble # SPACK_ROOT must be set (see above) (Python packages use \"py-\" prefix)\n\nOr just open it manually: var/spack/repos/builtin/packages/py-libensemble/package.py.\nNow get the checksum for new lines:\nGet the tarball (see PyPI instructions), for the new release and use:\nsha256sum libensemble-*.tar.gz\n\nUpdate the package.py file by pasting in the new checksum lines (and make\nsure the URL line points to the latest version). Also update any dependencies\nfor the new version.\nCheck package:\nspack style\n\nThis will install a few Python Spack packages and run style checks on just\nyour changes. Make adjustments if needed, until this passes.\nIf okay - add, commit, and push to origin (forked repo).", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4105, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f358fa81-403a-439d-8b23-0e6a4c4500bd": {"__data__": {"id_": "f358fa81-403a-439d-8b23-0e6a4c4500bd", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/release_management/release_platforms/rel_spack.html", "file_name": "rel_spack.html", "file_type": "text/html", "file_size": 20696, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b0a8b1c0-627e-4e23-82b1-87b31f4d97dc", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/release_management/release_platforms/rel_spack.html", "file_name": "rel_spack.html", "file_type": "text/html", "file_size": 20696, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "2dbcc48fd25f8e96ee04a5d27a19ce583de72c781f3bb7cfe19813300693a8d8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "11341703-dcae-404e-847e-9bc247fa7999", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/release_management/release_platforms/rel_spack.html", "file_name": "rel_spack.html", "file_type": "text/html", "file_size": 20696, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "e89ef8fe55b609cc6fd6304c7e89065770a4f23837cee0a4f5f01379ef3221a0", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Now get the checksum for new lines:\nGet the tarball (see PyPI instructions), for the new release and use:\nsha256sum libensemble-*.tar.gz\n\nUpdate the package.py file by pasting in the new checksum lines (and make\nsure the URL line points to the latest version). Also update any dependencies\nfor the new version.\nCheck package:\nspack style\n\nThis will install a few Python Spack packages and run style checks on just\nyour changes. Make adjustments if needed, until this passes.\nIf okay - add, commit, and push to origin (forked repo). For example, if your version\nnumber is 1.2.2:\ngit commit -am \"libEnsemble: add v1.2.2\"\ngit push origin develop --force\n\nOnce the branch is pushed to the forked repo, go to GitHub and do a pull request from this\nbranch on the fork to the develop branch on the upstream.\n\nExpress Summary: Make Fork Identical to Upstream\uf0c1\nQuick summary for bringing the develop branch on a forked repo up to speed with upstream\n(YOU WILL LOSE ANY CHANGES):\ngit remote add upstream https://github.com/spack/spack.git\ngit fetch upstream\ngit checkout develop\ngit reset --hard upstream/develop\ngit push origin develop --force\n\nReference: <https://stackoverflow.com/questions/9646167/clean-up-a-fork-and-restart-it-from-the-upstream/39628366>\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 3574, "end_char_idx": 4951, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "48769c34-b39a-4b3a-a5aa-8aa75bdab675": {"__data__": {"id_": "48769c34-b39a-4b3a-a5aa-8aa75bdab675", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/release_management/release_process.html", "file_name": "release_process.html", "file_type": "text/html", "file_size": 14984, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0302c1a4-b8b7-4ea3-8b28-2efa950817be", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/dev_guide/release_management/release_process.html", "file_name": "release_process.html", "file_type": "text/html", "file_size": 14984, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "c0737f98a0c7c5421d15f6167a4778cd00fe2c0c329ce46c9cd67dd50a813d44", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Release Process \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nRelease Process\nBefore release\nDuring release\nAfter release\n\nRelease Platforms\n\nInternal Modules\n\nlibEnsemble\n\nRelease Management\nRelease Process\n\n View page source\n\nRelease Process\uf0c1\nA release can be undertaken only by a project administrator. A project\nadministrator should have an administrator role on the libEnsemble GitHub,\nPyPI, and readthedocs pages.\n\nBefore release\uf0c1\n\nA GitHub issue is created with a checklist for the release.\nA release branch should be taken off develop (or develop pulls controlled).\nRelease notes for this version are added to the documentation with release\ndate, including a list of supported (tested) platforms.\nVersion number is updated wherever it appears (and +dev suffix is removed)\n(in libensemble/version.py).\nYear in LICENSE is checked for correctness.\n(Note: The year generated in docs by docs/conf.py should be automatic).\npyproject.toml and libensemble/__init__.py are checked to ensure all\ninformation is up to date.\nUpdate .wci.yml in root directory (version, date and any other\ninformation).\nMANIFEST.in is checked. Locally, try out python setup.py sdist and\ncheck the created tarball contains correct files and directories for PyPI\npackage.\nTests are run with source to be released (this may iterate):\n\nOn-line CI (GitHub Actions) tests must pass.\nLaunch and verify extra tests:\ngh workflow run libEnsemble-complete-CI --ref branch_name\nScaling tests must be run on HPC platforms listed as supported in release\nnotes. Test variants by platform, launch mechanism, scale, and other\nfactors can be configured and exported by the libE-Templater.\nCoverage must not have decreased unless there is a justifiable reason.\nDocumentation must build and display correctly wherever hosted (currently\nreadthedocs.com).\n\nLocally check that the example code in the README works with both local\ncomms and mpi4py.\nPull request from either the develop or release branch to main requesting\none or more reviewers (including at least one other administrator).\nReviewer will check that all tests have passed and will then approve merge.\n\nDuring release\uf0c1\nAn administrator will take the following steps.\n\nMerge the pull request into main.\nMake the following releases:\n\nA GitHub release will be taken from the main\n(github release).\nA tarball (source distribution) will be uploaded to PyPI\n(PyPI release).\nThe Conda package will be updated (Conda release).\nSpack package will be updated (Spack release).\n\nIf the merge was made from a release branch (instead of develop), merge this\nbranch into develop.\nCreate a new commit on develop that appends +dev to the version number\n(wherever is appears).\n\nAfter release\uf0c1\n\nEmail the libEnsemble mailing list, and notify the everyone channel in the\nlibEnsemble Slack workspace with an announcement and quick summary of the\nrelease.\nEnsure all relevant GitHub issues are closed and moved to the Done column\non the kanban project board (inc. the release checklist). Those that were\nalready in Done should be archived.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3735, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "928957fc-f57a-4719-8fcf-04f9e08e5962": {"__data__": {"id_": "928957fc-f57a-4719-8fcf-04f9e08e5962", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/alloc_funcs.html", "file_name": "alloc_funcs.html", "file_type": "text/html", "file_size": 93153, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "41aa10a9-5cda-4ff8-9e73-99f7853f12ac", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/alloc_funcs.html", "file_name": "alloc_funcs.html", "file_type": "text/html", "file_size": 93153, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "9ecc2c33472c07520bdff9be1dfb12252fab0800a26866341bf068be0860e6e6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0b71ca4e-6fa4-49e4-b325-96f5749e4bef", "node_type": "1", "metadata": {}, "hash": "40cc843e867dfa7ef644ebe793425a032ce8b576e7eab3c270c553291059d981", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Allocation Functions \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\ngive_sim_work_first\ngive_sim_work_first()\n\nfast_alloc\ngive_sim_work_first()\n\nstart_only_persistent\nonly_persistent_gens()\n\nstart_persistent_local_opt_gens\nstart_persistent_local_opt_gens()\n\nfast_alloc_and_pausing\ngive_sim_work_first()\n\nonly_one_gen_alloc\nensure_one_active_gen()\n\nstart_fd_persistent\nfinite_diff_alloc()\n\npersistent_aposmm_alloc\npersistent_aposmm_alloc()\n\ngive_pregenerated_work\ngive_pregenerated_sim_work()\n\ninverse_bayes_allocf\nonly_persistent_gens_for_inverse_bayes()\n\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nAllocation Functions\n\n View page source\n\nAllocation Functions\uf0c1\nBelow are example allocation functions available in libEnsemble.\nMany users use these unmodified.\n\nImportant\nSee the API for allocation functions here.\n\nNote\nThe default allocation function (for non-persistent generators) is give_sim_work_first.\nThe most commonly used (for persistent generators) is start_only_persistent.\n\ngive_sim_work_first\uf0c1\n\ngive_sim_work_first.give_sim_work_first(W, H, sim_specs, gen_specs, alloc_specs, persis_info, libE_info)\uf0c1\nDecide what should be given to workers. This allocation function gives any\navailable simulation work first, and only when all simulations are\ncompleted or running does it start (at most alloc_specs[\"user\"][\"num_active_gens\"])\ngenerator instances.\nAllows for a alloc_specs[\"user\"][\"batch_mode\"] where no generation\nwork is given out unless all entries in H are returned.\nCan give points in highest priority, if \"priority\" is a field in H.\nIf alloc_specs[\"user\"][\"give_all_with_same_priority\"] is set to True, then\nall points with the same priority value are given as a batch to the sim.\nWorkers performing sims will be assigned resources given in H[\u201cresource_sets\u201d]\nthis field exists, else defaulting to one. Workers performing gens are\nassigned resource_sets given by persis_info[\u201cgen_resources\u201d] or zero.\nThis is the default allocation function if one is not defined.\ntags: alloc, default, batch, priority\n\nSee also\ntest_uniform_sampling.py\n\nParameters:\n\nW (ndarray[tuple[int, ...], dtype[_ScalarType_co]])\nH (ndarray[tuple[int, ...], dtype[_ScalarType_co]])\nsim_specs (dict)\ngen_specs (dict)\nalloc_specs (dict)\npersis_info (dict)\nlibE_info (dict)\n\nReturn type:\ntuple[dict]\n\ngive_sim_work_first.py\n 1import time\n 2\n 3import numpy as np\n 4import numpy.typing as npt\n 5\n 6from libensemble.tools.alloc_support import AllocSupport, InsufficientFreeResources\n 7\n 8\n 9def give_sim_work_first(\n10 W: npt.NDArray,\n11 H: npt.NDArray,\n12 sim_specs: dict,\n13 gen_specs: dict,\n14 alloc_specs: dict,\n15 persis_info: dict,\n16 libE_info: dict,\n17) -> tuple[dict]:\n18 \"\"\"\n19 Decide what should be given to workers. This allocation function gives any\n20 available simulation work first, and only when all simulations are\n21 completed or running does it start (at most ``alloc_specs[\"user\"][\"num_active_gens\"]``)\n22 generator instances.\n23\n24 Allows for a ``alloc_specs[\"user\"][\"batch_mode\"]`` where no generation\n25 work is given out unless all entries in ``H`` are returned.\n26\n27 Can give points in highest priority, if ``\"priority\"`` is a field in ``H``.\n28 If ``alloc_specs[\"user\"][\"give_all_with_same_priority\"]`` is set to True, then\n29 all points with the same priority value are given as a batch to the sim.\n30\n31 Workers performing sims will be assigned resources given in H[\"resource_sets\"]\n32 this field exists, else defaulting to one.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4003, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "0b71ca4e-6fa4-49e4-b325-96f5749e4bef": {"__data__": {"id_": "0b71ca4e-6fa4-49e4-b325-96f5749e4bef", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/alloc_funcs.html", "file_name": "alloc_funcs.html", "file_type": "text/html", "file_size": 93153, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "41aa10a9-5cda-4ff8-9e73-99f7853f12ac", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/alloc_funcs.html", "file_name": "alloc_funcs.html", "file_type": "text/html", "file_size": 93153, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "9ecc2c33472c07520bdff9be1dfb12252fab0800a26866341bf068be0860e6e6", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "928957fc-f57a-4719-8fcf-04f9e08e5962", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/alloc_funcs.html", "file_name": "alloc_funcs.html", "file_type": "text/html", "file_size": 93153, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "514a1d9435db2cadeffc92e029798160389949d266888b0647a7e17152ee5429", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2789063d-da53-491f-9cf3-d0de705805b7", "node_type": "1", "metadata": {}, "hash": "f440166aa07b368409340f2fc836ce577a74b9c8569d1053bb416a0ece2c2db0", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "This allocation function gives any\n20 available simulation work first, and only when all simulations are\n21 completed or running does it start (at most ``alloc_specs[\"user\"][\"num_active_gens\"]``)\n22 generator instances.\n23\n24 Allows for a ``alloc_specs[\"user\"][\"batch_mode\"]`` where no generation\n25 work is given out unless all entries in ``H`` are returned.\n26\n27 Can give points in highest priority, if ``\"priority\"`` is a field in ``H``.\n28 If ``alloc_specs[\"user\"][\"give_all_with_same_priority\"]`` is set to True, then\n29 all points with the same priority value are given as a batch to the sim.\n30\n31 Workers performing sims will be assigned resources given in H[\"resource_sets\"]\n32 this field exists, else defaulting to one. Workers performing gens are\n33 assigned resource_sets given by persis_info[\"gen_resources\"] or zero.\n34\n35 This is the default allocation function if one is not defined.\n36\n37 tags: alloc, default, batch, priority\n38\n39 .. seealso::\n40 `test_uniform_sampling.py <https://github.com/Libensemble/libensemble/blob/develop/libensemble/tests/functionality_tests/test_uniform_sampling.py>`_ # noqa\n41 \"\"\"\n42\n43 user = alloc_specs.get(\"user\", {})\n44\n45 if \"cancel_sims_time\" in user:\n46 # Cancel simulations that are taking too long\n47 rows = np.where(np.logical_and.reduce((H[\"sim_started\"], ~H[\"sim_ended\"], ~H[\"cancel_requested\"])))[0]\n48 inds = time.time() - H[\"sim_started_time\"][rows] > user[\"cancel_sims_time\"]\n49 to_request_cancel = rows[inds]\n50 for row in to_request_cancel:\n51 H[row][\"cancel_requested\"] = True\n52\n53 if libE_info[\"sim_max_given\"] or not libE_info[\"any_idle_workers\"]:\n54 return {}, persis_info\n55\n56 # Initialize alloc_specs[\"user\"] as user.\n57 batch_give = user.get(\"give_all_with_same_priority\", False)\n58 gen_in = gen_specs.get(\"in\", [])\n59\n60 manage_resources = libE_info[\"use_resource_sets\"]\n61 support = AllocSupport(W, manage_resources, persis_info, libE_info)\n62 gen_count = support.count_gens()\n63 Work = {}\n64\n65 points_to_evaluate = ~H[\"sim_started\"] & ~H[\"cancel_requested\"]\n66\n67 if np.any(points_to_evaluate):\n68 for wid in support.avail_worker_ids(gen_workers=False):\n69 sim_ids_to_send = support.points_by_priority(H, points_avail=points_to_evaluate, batch=batch_give)\n70 try:\n71 Work[wid] = support.sim_work(wid, H, sim_specs[\"in\"], sim_ids_to_send, persis_info.get(wid))\n72 except InsufficientFreeResources:\n73 break\n74 points_to_evaluate[sim_ids_to_send] = False\n75 if not np.any(points_to_evaluate):\n76 break\n77 else:\n78 for wid in support.avail_worker_ids(gen_workers=True):\n79 # Allow at most num_active_gens active generator instances\n80 if gen_count >= user.get(\"num_active_gens\", gen_count + 1):\n81 break\n82\n83 # Do not start gen instances in batch mode if workers still working\n84 if user.get(\"batch_mode\") and not support.all_sim_ended(H):\n85 break\n86\n87 # Give gen work\n88 return_rows = range(len(H)) if gen_in else []\n89 try:\n90 Work[wid] = support.gen_work(wid, gen_in, return_rows, persis_info.get(wid))\n91 except InsufficientFreeResources:\n92 break\n93 gen_count += 1\n94\n95 return Work, persis_info\n\nfast_alloc\uf0c1\n\nfast_alloc.give_sim_work_first(W, H, sim_specs, gen_specs, alloc_specs, persis_info, libE_info)\uf0c1\nThis allocation function gives (in order) entries in H to idle workers\nto evaluate in the simulation function. The fields in sim_specs[\"in\"]\nare given. If all entries in H have been given a be evaluated, a worker\nis told to call the generator function, provided this wouldn\u2019t result in\nmore than alloc_specs[\"user\"][\"num_active_gen\"] active generators.", "mimetype": "text/plain", "start_char_idx": 3273, "end_char_idx": 6818, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "2789063d-da53-491f-9cf3-d0de705805b7": {"__data__": {"id_": "2789063d-da53-491f-9cf3-d0de705805b7", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/alloc_funcs.html", "file_name": "alloc_funcs.html", "file_type": "text/html", "file_size": 93153, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "41aa10a9-5cda-4ff8-9e73-99f7853f12ac", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/alloc_funcs.html", "file_name": "alloc_funcs.html", "file_type": "text/html", "file_size": 93153, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "9ecc2c33472c07520bdff9be1dfb12252fab0800a26866341bf068be0860e6e6", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0b71ca4e-6fa4-49e4-b325-96f5749e4bef", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/alloc_funcs.html", "file_name": "alloc_funcs.html", "file_type": "text/html", "file_size": 93153, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "be540da3fd88550f89cacfbe3aaf7e5889a9d31784d2acf43e981d22b272bf15", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bca693f6-9466-4f19-a958-fe9106adc213", "node_type": "1", "metadata": {}, "hash": "fa0fbda7a0ccb443aa26ee4a28137a04c9743962f4ed6db0df73f20be1cacac3", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "The fields in sim_specs[\"in\"]\nare given. If all entries in H have been given a be evaluated, a worker\nis told to call the generator function, provided this wouldn\u2019t result in\nmore than alloc_specs[\"user\"][\"num_active_gen\"] active generators.\nThis fast_alloc variation of give_sim_work_first is useful for cases that\nsimply iterate through H, issuing evaluations in order and, in particular,\nis likely to be faster if there will be many short simulation evaluations,\ngiven that this function contains fewer column length operations.\ntags: alloc, simple, fast\n\nSee also\ntest_fast_alloc.py\n\nfast_alloc.py\n 1from libensemble.tools.alloc_support import AllocSupport, InsufficientFreeResources\n 2\n 3\n 4def give_sim_work_first(W, H, sim_specs, gen_specs, alloc_specs, persis_info, libE_info):\n 5 \"\"\"\n 6 This allocation function gives (in order) entries in ``H`` to idle workers\n 7 to evaluate in the simulation function. The fields in ``sim_specs[\"in\"]``\n 8 are given. If all entries in `H` have been given a be evaluated, a worker\n 9 is told to call the generator function, provided this wouldn't result in\n10 more than ``alloc_specs[\"user\"][\"num_active_gen\"]`` active generators.\n11\n12 This fast_alloc variation of give_sim_work_first is useful for cases that\n13 simply iterate through H, issuing evaluations in order and, in particular,\n14 is likely to be faster if there will be many short simulation evaluations,\n15 given that this function contains fewer column length operations.\n16\n17 tags: alloc, simple, fast\n18\n19 .. seealso::\n20 `test_fast_alloc.py <https://github.com/Libensemble/libensemble/blob/develop/libensemble/tests/functionality_tests/test_fast_alloc.py>`_ # noqa\n21 \"\"\"\n22\n23 if libE_info[\"sim_max_given\"] or not libE_info[\"any_idle_workers\"]:\n24 return {}, persis_info\n25\n26 user = alloc_specs.get(\"user\", {})\n27 manage_resources = libE_info[\"use_resource_sets\"]\n28\n29 support = AllocSupport(W, manage_resources, persis_info, libE_info)\n30\n31 gen_count = support.count_gens()\n32 Work = {}\n33 gen_in = gen_specs.get(\"in\", [])\n34\n35 # Give sim work if possible\n36 for wid in support.avail_worker_ids(gen_workers=False):\n37 persis_info = support.skip_canceled_points(H, persis_info)\n38 if persis_info[\"next_to_give\"] < len(H):\n39 try:\n40 Work[wid] = support.sim_work(wid, H, sim_specs[\"in\"], [persis_info[\"next_to_give\"]], [])\n41 except InsufficientFreeResources:\n42 break\n43 persis_info[\"next_to_give\"] += 1\n44\n45 # Give gen work if possible\n46 if persis_info[\"next_to_give\"] >= len(H):\n47 for wid in support.avail_worker_ids(gen_workers=True):\n48 if wid not in Work and gen_count < user.get(\"num_active_gens\", gen_count + 1):\n49 return_rows = range(len(H)) if gen_in else []\n50 try:\n51 Work[wid] = support.gen_work(wid, gen_in, return_rows, persis_info.get(wid))\n52 except InsufficientFreeResources:\n53 break\n54 gen_count += 1\n55 persis_info[\"total_gen_calls\"] += 1\n56\n57 return Work, persis_info\n\nstart_only_persistent\uf0c1\n\nstart_only_persistent.only_persistent_gens(W, H, sim_specs, gen_specs, alloc_specs, persis_info, libE_info)\uf0c1\nThis allocation function will give simulation work if possible, but\notherwise start up to alloc_specs[\"user\"][\"num_active_gens\"]\npersistent generators (defaulting to one).\nBy default, evaluation results are given back to the generator once\nall generated points have been returned from the simulation evaluation.\nIf alloc_specs[\"user\"][\"async_return\"] is set to True, then any\nreturned points are given back to the generator.\nIf any workers are marked as zero_resource_workers, then these will only\nbe used for generators.\nIf any of the persistent generators has exited, then ensemble shutdown\nis triggered.\nUser options:\nTo be provided in calling script: E.g., alloc_specs[\"user\"][\"async_return\"] = True\n\ninit_sample_size: int, optionalInitial sample size - always return in batch.", "mimetype": "text/plain", "start_char_idx": 6577, "end_char_idx": 10404, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "bca693f6-9466-4f19-a958-fe9106adc213": {"__data__": {"id_": "bca693f6-9466-4f19-a958-fe9106adc213", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/alloc_funcs.html", "file_name": "alloc_funcs.html", "file_type": "text/html", "file_size": 93153, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "41aa10a9-5cda-4ff8-9e73-99f7853f12ac", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/alloc_funcs.html", "file_name": "alloc_funcs.html", "file_type": "text/html", "file_size": 93153, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "9ecc2c33472c07520bdff9be1dfb12252fab0800a26866341bf068be0860e6e6", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2789063d-da53-491f-9cf3-d0de705805b7", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/alloc_funcs.html", "file_name": "alloc_funcs.html", "file_type": "text/html", "file_size": 93153, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "8c2f92b5fec468f24fa2b15c4419c2ca78f271a90b689ecb09b68c8d34618fb7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4f02df31-75de-4319-93e9-308903ece072", "node_type": "1", "metadata": {}, "hash": "0a509912298404aac0a0134af75d9229aade2b1c98d1999c20f0d989efb59f6c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "By default, evaluation results are given back to the generator once\nall generated points have been returned from the simulation evaluation.\nIf alloc_specs[\"user\"][\"async_return\"] is set to True, then any\nreturned points are given back to the generator.\nIf any workers are marked as zero_resource_workers, then these will only\nbe used for generators.\nIf any of the persistent generators has exited, then ensemble shutdown\nis triggered.\nUser options:\nTo be provided in calling script: E.g., alloc_specs[\"user\"][\"async_return\"] = True\n\ninit_sample_size: int, optionalInitial sample size - always return in batch. Default: 0\n\nnum_active_gens: int, optionalMaximum number of persistent generators to start. Default: 1\n\nasync_return: Boolean, optionalReturn results to gen as they come in (after sample). Default: False (batch return).\n\ngive_all_with_same_priority: Boolean, optionalIf True, then all points with the same priority value are given as a batch to the sim.\nDefault is False\n\nactive_recv_gen: Boolean, optionalCreate gen in active receive mode. If True, the manager does not need to wait\nfor a return from the generator before sending further returned points.\nDefault: False\n\ntags: alloc, batch, async, persistent, priority\n\nSee also\ntest_persistent_uniform_sampling.py\ntest_persistent_uniform_sampling_async.py\ntest_persistent_surmise_calib.py\ntest_persistent_uniform_gen_decides_stop.py\n\nstart_only_persistent.py\n 1import numpy as np\n 2\n 3from libensemble.message_numbers import EVAL_GEN_TAG, EVAL_SIM_TAG\n 4from libensemble.tools.alloc_support import AllocSupport, InsufficientFreeResources\n 5\n 6\n 7def only_persistent_gens(W, H, sim_specs, gen_specs, alloc_specs, persis_info, libE_info):\n 8 \"\"\"\n 9 This allocation function will give simulation work if possible, but\n 10 otherwise start up to ``alloc_specs[\"user\"][\"num_active_gens\"]``\n 11 persistent generators (defaulting to one).\n 12\n 13 By default, evaluation results are given back to the generator once\n 14 all generated points have been returned from the simulation evaluation.\n 15 If ``alloc_specs[\"user\"][\"async_return\"]`` is set to True, then any\n 16 returned points are given back to the generator.\n 17\n 18 If any workers are marked as zero_resource_workers, then these will only\n 19 be used for generators.\n 20\n 21 If any of the persistent generators has exited, then ensemble shutdown\n 22 is triggered.\n 23\n 24 **User options**:\n 25\n 26 To be provided in calling script: E.g., ``alloc_specs[\"user\"][\"async_return\"] = True``\n 27\n 28 init_sample_size: int, optional\n 29 Initial sample size - always return in batch. Default: 0\n 30\n 31 num_active_gens: int, optional\n 32 Maximum number of persistent generators to start. Default: 1\n 33\n 34 async_return: Boolean, optional\n 35 Return results to gen as they come in (after sample). Default: False (batch return).\n 36\n 37 give_all_with_same_priority: Boolean, optional\n 38 If True, then all points with the same priority value are given as a batch to the sim.\n 39 Default is False\n 40\n 41 active_recv_gen: Boolean, optional\n 42 Create gen in active receive mode. If True, the manager does not need to wait\n 43 for a return from the generator before sending further returned points.", "mimetype": "text/plain", "start_char_idx": 9795, "end_char_idx": 12993, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "4f02df31-75de-4319-93e9-308903ece072": {"__data__": {"id_": "4f02df31-75de-4319-93e9-308903ece072", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/alloc_funcs.html", "file_name": "alloc_funcs.html", "file_type": "text/html", "file_size": 93153, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "41aa10a9-5cda-4ff8-9e73-99f7853f12ac", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/alloc_funcs.html", "file_name": "alloc_funcs.html", "file_type": "text/html", "file_size": 93153, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "9ecc2c33472c07520bdff9be1dfb12252fab0800a26866341bf068be0860e6e6", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bca693f6-9466-4f19-a958-fe9106adc213", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/alloc_funcs.html", "file_name": "alloc_funcs.html", "file_type": "text/html", "file_size": 93153, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "dbb1dec46b167a42c1c55f584d699f006501b1a8c0b9dcb9fb6785fff41c5e11", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e49d5af0-6547-4fbe-804c-351bfb5ce062", "node_type": "1", "metadata": {}, "hash": "d9d30182b31593022d873bea383b39f761b616dc43d115b9091ed647e7c256cf", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Default: 0\n 30\n 31 num_active_gens: int, optional\n 32 Maximum number of persistent generators to start. Default: 1\n 33\n 34 async_return: Boolean, optional\n 35 Return results to gen as they come in (after sample). Default: False (batch return).\n 36\n 37 give_all_with_same_priority: Boolean, optional\n 38 If True, then all points with the same priority value are given as a batch to the sim.\n 39 Default is False\n 40\n 41 active_recv_gen: Boolean, optional\n 42 Create gen in active receive mode. If True, the manager does not need to wait\n 43 for a return from the generator before sending further returned points.\n 44 Default: False\n 45\n 46 tags: alloc, batch, async, persistent, priority\n 47\n 48 .. seealso::\n 49 `test_persistent_uniform_sampling.py <https://github.com/Libensemble/libensemble/blob/develop/libensemble/tests/functionality_tests/test_persistent_uniform_sampling.py>`_ # noqa\n 50 `test_persistent_uniform_sampling_async.py <https://github.com/Libensemble/libensemble/blob/develop/libensemble/tests/functionality_tests/test_persistent_uniform_sampling_async.py>`_ # noqa\n 51 `test_persistent_surmise_calib.py <https://github.com/Libensemble/libensemble/blob/develop/libensemble/tests/regression_tests/test_persistent_surmise_calib.py>`_ # noqa\n 52 `test_persistent_uniform_gen_decides_stop.py <https://github.com/Libensemble/libensemble/blob/develop/libensemble/tests/functionality_tests/test_persistent_uniform_gen_decides_stop.py>`_ # noqa\n 53 \"\"\"\n 54\n 55 if libE_info[\"sim_max_given\"] or not libE_info[\"any_idle_workers\"]:\n 56 return {}, persis_info\n 57\n 58 # Initialize alloc_specs[\"user\"] as user.", "mimetype": "text/plain", "start_char_idx": 12382, "end_char_idx": 13997, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "e49d5af0-6547-4fbe-804c-351bfb5ce062": {"__data__": {"id_": "e49d5af0-6547-4fbe-804c-351bfb5ce062", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/alloc_funcs.html", "file_name": "alloc_funcs.html", "file_type": "text/html", "file_size": 93153, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "41aa10a9-5cda-4ff8-9e73-99f7853f12ac", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/alloc_funcs.html", "file_name": "alloc_funcs.html", "file_type": "text/html", "file_size": 93153, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "9ecc2c33472c07520bdff9be1dfb12252fab0800a26866341bf068be0860e6e6", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4f02df31-75de-4319-93e9-308903ece072", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/alloc_funcs.html", "file_name": "alloc_funcs.html", "file_type": "text/html", "file_size": 93153, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "c6632eac9c3bff58500591958e54dd409fadb54b11c5f17578d3c6fd61afd438", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a61122fb-4f49-47b6-8166-2b8de3d40db3", "node_type": "1", "metadata": {}, "hash": "4bbaefabd34b3aaa890d3958037988fac2da9ccd1e7fd19d2dab6d307021e22e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "59 user = alloc_specs.get(\"user\", {})\n 60 manage_resources = libE_info[\"use_resource_sets\"]\n 61\n 62 active_recv_gen = user.get(\"active_recv_gen\", False) # Persistent gen can handle irregular communications\n 63 init_sample_size = user.get(\"init_sample_size\", 0) # Always batch return until this many evals complete\n 64 batch_give = user.get(\"give_all_with_same_priority\", False)\n 65\n 66 support = AllocSupport(W, manage_resources, persis_info, libE_info)\n 67 gen_count = support.count_persis_gens()\n 68 Work = {}\n 69\n 70 # Asynchronous return to generator\n 71 async_return = user.get(\"async_return\", False) and sum(H[\"sim_ended\"]) >= init_sample_size\n 72\n 73 if gen_count < persis_info.get(\"num_gens_started\", 0):\n 74 # When a persistent worker is done, trigger a shutdown (returning exit condition of 1)\n 75 return Work, persis_info, 1\n 76\n 77 # Give evaluated results back to a running persistent gen\n 78 for wid in support.avail_worker_ids(persistent=EVAL_GEN_TAG, active_recv=active_recv_gen):\n 79 gen_inds = H[\"gen_worker\"] == wid\n 80 returned_but_not_given = np.logical_and.reduce((H[\"sim_ended\"], ~H[\"gen_informed\"], gen_inds))\n 81 if np.any(returned_but_not_given):\n 82 if async_return or support.all_sim_ended(H, gen_inds):\n 83 point_ids = np.where(returned_but_not_given)[0]\n 84 Work[wid] = support.gen_work(\n 85 wid,\n 86 gen_specs[\"persis_in\"],\n 87 point_ids,\n 88 persis_info.get(wid),\n 89 persistent=True,\n 90 active_recv=active_recv_gen,\n 91 )\n 92 returned_but_not_given[point_ids] = False\n 93\n 94 # Now the give_sim_work_first part\n 95 points_to_evaluate = ~H[\"sim_started\"] & ~H[\"cancel_requested\"]\n 96 avail_workers = support.avail_worker_ids(persistent=False, zero_resource_workers=False, gen_workers=False)\n 97 if user.get(\"alt_type\"):\n 98 avail_workers = list(\n 99 set(support.avail_worker_ids(persistent=False, zero_resource_workers=False))\n100 | set(support.avail_worker_ids(persistent=EVAL_SIM_TAG, zero_resource_workers=False))\n101 )\n102 for wid in avail_workers:\n103 if not np.any(points_to_evaluate):\n104 break\n105\n106 sim_ids_to_send = support.points_by_priority(H, points_avail=points_to_evaluate, batch=batch_give)\n107\n108 try:\n109 if user.get(\"alt_type\"):\n110 Work[wid] = support.sim_work(\n111 wid, H, sim_specs[\"in\"], sim_ids_to_send, persis_info.get(wid), persistent=True\n112 )\n113 else:\n114 Work[wid] = support.sim_work(wid, H, sim_specs[\"in\"], sim_ids_to_send, persis_info.get(wid))\n115 except InsufficientFreeResources:\n116 break\n117\n118 points_to_evaluate[sim_ids_to_send] = False\n119\n120 # Start persistent gens if no worker to give out. Uses zero_resource_workers if defined.\n121 if not np.any(points_to_evaluate):\n122 avail_workers = support.avail_worker_ids(persistent=False, zero_resource_workers=True, gen_workers=True)\n123\n124 for wid in avail_workers:\n125 if gen_count < user.get(\"num_active_gens\", 1):\n126 # Finally, start a persistent generator as there is nothing else to do.", "mimetype": "text/plain", "start_char_idx": 13999, "end_char_idx": 16919, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a61122fb-4f49-47b6-8166-2b8de3d40db3": {"__data__": {"id_": "a61122fb-4f49-47b6-8166-2b8de3d40db3", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/alloc_funcs.html", "file_name": "alloc_funcs.html", "file_type": "text/html", "file_size": 93153, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "41aa10a9-5cda-4ff8-9e73-99f7853f12ac", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/alloc_funcs.html", "file_name": "alloc_funcs.html", "file_type": "text/html", "file_size": 93153, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "9ecc2c33472c07520bdff9be1dfb12252fab0800a26866341bf068be0860e6e6", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e49d5af0-6547-4fbe-804c-351bfb5ce062", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/alloc_funcs.html", "file_name": "alloc_funcs.html", "file_type": "text/html", "file_size": 93153, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "c1253f9c20d83ac9694f80282a9b4de98eca627627f0a4058721dcaa04f192e7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "906dbc70-d9d1-4b64-a9be-f5f54de5917c", "node_type": "1", "metadata": {}, "hash": "182988b5dce3c9bc0872f855b2d52365f6db6c20a6d7c9fd0710f5f8b8f5cb19", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Uses zero_resource_workers if defined.\n121 if not np.any(points_to_evaluate):\n122 avail_workers = support.avail_worker_ids(persistent=False, zero_resource_workers=True, gen_workers=True)\n123\n124 for wid in avail_workers:\n125 if gen_count < user.get(\"num_active_gens\", 1):\n126 # Finally, start a persistent generator as there is nothing else to do.\n127 try:\n128 Work[wid] = support.gen_work(\n129 wid,\n130 gen_specs.get(\"in\", []),\n131 range(len(H)),\n132 persis_info.get(wid),\n133 persistent=True,\n134 active_recv=active_recv_gen,\n135 )\n136 except InsufficientFreeResources:\n137 break\n138\n139 persis_info[\"num_gens_started\"] = persis_info.get(\"num_gens_started\", 0) + 1\n140 gen_count += 1\n141\n142 return Work, persis_info, 0\n\nstart_persistent_local_opt_gens\uf0c1\n\nstart_persistent_local_opt_gens.start_persistent_local_opt_gens(W, H, sim_specs, gen_specs, alloc_specs, persis_info, libE_info)\uf0c1\nThis allocation function will do the following:\n\nStart up a persistent generator that is a local opt run at the first point\nidentified by APOSMM\u2019s decide_where_to_start_localopt. Note, it will do\nthis only if at least one worker will be left to perform simulation evaluations.\nIf multiple starting points are available, the one with smallest function\nvalue is chosen.\nIf no candidate starting points exist, points from existing runs will be\nevaluated (oldest first).\nIf no points are left, call the generation function.\n\ntags: alloc, persistent, aposmm\n\nSee also\ntest_uniform_sampling_then_persistent_localopt_runs.py\n\nfast_alloc_and_pausing\uf0c1\n\nfast_alloc_and_pausing.give_sim_work_first(W, H, sim_specs, gen_specs, alloc_specs, persis_info, libE_info)\uf0c1\nThis allocation function gives (in order) entries in H to idle workers\nto evaluate in the simulation function. The fields in sim_specs[\"in\"]\nare given. If all entries in H have been given a be evaluated, a worker\nis told to call the generator function, provided this wouldn\u2019t result in\nmore than alloc_specs[\"user\"][\"num_active_gen\"] active generators. Also allows\nfor a \u201cbatch_mode\u201d.\nWhen there are multiple objective components, this allocation function\ndoes not evaluate further components for some point in the following\nscenarios:\n\nalloc_specs[\u201cuser\u201d][\u201cstop_on_NaNs\u201d]: True \u2014 after a NaN has been found in returned in someobjective component\n\nalloc_specs[\u201cuser\u201d][\u201cstop_partial_fvec_eval\u201d]: True \u2014 after the value returned fromcombine_component_func is larger than a known upper bound on the objective.\n\nSee also\ntest_uniform_sampling_one_residual_at_a_time.py\n\nonly_one_gen_alloc\uf0c1\n\nonly_one_gen_alloc.ensure_one_active_gen(W, H, sim_specs, gen_specs, alloc_specs, persis_info, libE_info)\uf0c1\nThis allocation function gives (in order) entries in H to idle workers\nto evaluate in the simulation function. The fields in sim_specs[\"in\"]\nare given. If there is no active generator, then one is started.\n\nSee also\ntest_fast_alloc.py\n\nstart_fd_persistent\uf0c1\n\nstart_fd_persistent.finite_diff_alloc(W, H, sim_specs, gen_specs, alloc_specs, persis_info, libE_info)\uf0c1\nThis allocation function will give simulation work if possible, but\notherwise start 1 persistent generator. If all points requested by\nthe persistent generator for a given (x_ind, f_ind) pair have been returned from the\nsimulation evaluation, then this information is given back to the\npersistent generator (where x_ind is in range(n) and f_ind is in range(p))\n\nSee also\ntest_persistent_fd_param_finder.py\n\npersistent_aposmm_alloc\uf0c1\n\npersistent_aposmm_alloc.persistent_aposmm_alloc(W, H, sim_specs, gen_specs, alloc_specs, persis_info, libE_info)\uf0c1\nThis allocation function will give simulation work if possible, but\notherwise start a persistent APOSMM generator. If all points requested by\nthe persistent generator have been returned from the simulation evaluation,\nthen this information is given back to the persistent generator.\nThis function assumes that one persistent APOSMM will be started and never\nstopped (until some exit_criterion is satisfied).", "mimetype": "text/plain", "start_char_idx": 16572, "end_char_idx": 20522, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "906dbc70-d9d1-4b64-a9be-f5f54de5917c": {"__data__": {"id_": "906dbc70-d9d1-4b64-a9be-f5f54de5917c", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/alloc_funcs.html", "file_name": "alloc_funcs.html", "file_type": "text/html", "file_size": 93153, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "41aa10a9-5cda-4ff8-9e73-99f7853f12ac", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/alloc_funcs.html", "file_name": "alloc_funcs.html", "file_type": "text/html", "file_size": 93153, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "9ecc2c33472c07520bdff9be1dfb12252fab0800a26866341bf068be0860e6e6", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a61122fb-4f49-47b6-8166-2b8de3d40db3", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/alloc_funcs.html", "file_name": "alloc_funcs.html", "file_type": "text/html", "file_size": 93153, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "e623b2ebe9810c3c53e2e68d626623b7349a3fd6c0dfa98c1761b71d60fc6995", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "If all points requested by\nthe persistent generator for a given (x_ind, f_ind) pair have been returned from the\nsimulation evaluation, then this information is given back to the\npersistent generator (where x_ind is in range(n) and f_ind is in range(p))\n\nSee also\ntest_persistent_fd_param_finder.py\n\npersistent_aposmm_alloc\uf0c1\n\npersistent_aposmm_alloc.persistent_aposmm_alloc(W, H, sim_specs, gen_specs, alloc_specs, persis_info, libE_info)\uf0c1\nThis allocation function will give simulation work if possible, but\notherwise start a persistent APOSMM generator. If all points requested by\nthe persistent generator have been returned from the simulation evaluation,\nthen this information is given back to the persistent generator.\nThis function assumes that one persistent APOSMM will be started and never\nstopped (until some exit_criterion is satisfied).\n\nSee also\ntest_persistent_aposmm_with_grad.py\n\ngive_pregenerated_work\uf0c1\n\ngive_pregenerated_work.give_pregenerated_sim_work(W, H, sim_specs, gen_specs, alloc_specs, persis_info, libE_info)\uf0c1\nThis allocation function gives (in order) entries in alloc_spec[\u201cx\u201d] to\nidle workers. It is an example use case where no gen_func is used.\n\nSee also\ntest_fast_alloc.py\n\ninverse_bayes_allocf\uf0c1\n\ninverse_bayes_allocf.only_persistent_gens_for_inverse_bayes(W, H, sim_specs, gen_specs, alloc_specs, persis_info, libE_info)\uf0c1\nStarts up to gen_count number of persistent generators.\nThese persistent generators produce points (x) in batches and subbatches.\nThe points x are given in subbatches to workers to perform a calculation.\nWhen all subbatches have returned, their output is given back to the\ncorresponding persistent generator.\nThe first time called there are no persis_w 1st for loop is not done\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 19676, "end_char_idx": 21533, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f23f5083-c5f8-4438-bb87-c66c6c9410c2": {"__data__": {"id_": "f23f5083-c5f8-4438-bb87-c66c6c9410c2", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/aposmm.html", "file_name": "aposmm.html", "file_type": "text/html", "file_size": 31805, "creation_date": "2025-11-25", "last_modified_date": "2025-09-18"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "505c3c09-fdc2-4c27-83bc-46f8df1c5e4d", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/aposmm.html", "file_name": "aposmm.html", "file_type": "text/html", "file_size": 31805, "creation_date": "2025-11-25", "last_modified_date": "2025-09-18"}, "hash": "86bd321c61bfe442e182437efe36e40220fbe6ca1523c727d843ca14f581e116", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1fb0e566-11b9-4732-9c45-407739f19606", "node_type": "1", "metadata": {}, "hash": "124f8cccf4eb6fd5e7740ddcd7c42fe2cb8758a0bd732324b937d595b7e42581", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "APOSMM \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSampling\nOptimization\nAPOSMM\nConfiguring APOSMM\nPersistent APOSMM\nLocalOptInterfacer\n\nuniform_or_localopt\nax_multitask\nVTMOP\nytopt\nconsensus\nDEAP-NSGA-II\n\nModeling and Approximation\n\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nGenerator Functions\nAPOSMM\n\n View page source\n\nAPOSMM\uf0c1\nAsynchronously Parallel Optimization Solver for finding Multiple Minima\n(APOSMM) coordinates concurrent local optimization runs to identify\nmany local minima faster on parallel hardware.\nSupported local optimization routines include:\n\nDFO-LS Derivative-free solver for (bound constrained) nonlinear least-squares minimization\nNLopt Library for nonlinear optimization, providing a common interface for various methods\nscipy.optimize Open-source solvers for nonlinear problems, linear programming,\nconstrained and nonlinear least-squares, root finding, and curve fitting.\nPETSc/TAO Routines for the scalable (parallel) solution of scientific applications\n\nRequired: mpmath, SciPy\nOptional (see below): petsc4py, nlopt, DFO-LS\n\nConfiguring APOSMM\uf0c1\nAPOSMM works with a choice of optimizers, some requiring external packages. Specify\nthem on a global level before importing APOSMM:\nimport libensemble.gen_funcs\nlibensemble.gen_funcs.rc.aposmm_optimizers = <optimizers>\n\nwhere optimizers is a string (or list-of-strings) from:\n\"petsc\", \"nlopt\", \"dfols\", \"scipy\", \"external\"\n\nIssues with ensemble hanging or failed simulations with PETSc?\nIf using the MPIExecutor or other MPI routines\nand your MPI backend is Open MPI, then you must:\n\nUse local comms for libEnsemble (no mpirun, mpiexec, aprun, etc.).\nMust NOT include the aposmm_optimizers line above.\n\nThis is because PETSc imports MPI, and a global import of PETSc results\nin nested MPI (which is not supported by Open MPI).\n\nTo see the optimization algorithms supported, see LocalOptInterfacer.\n\nSee also\nPersistent APOSMM Tutorial\n\nPersistent APOSMM\uf0c1\nThis module contains methods used our implementation of the Asynchronously\nParallel Optimization Solver for finding Multiple Minima (APOSMM) method.\nhttps://doi.org/10.1007/s12532-017-0131-4\nThis implementation of APOSMM was developed by Kaushik Kulkarni and Jeffrey\nLarson in the summer of 2019.\n\npersistent_aposmm.aposmm(H, persis_info, gen_specs, libE_info)\uf0c1\nAPOSMM coordinates multiple local optimization runs, dramatically reducing time for\ndiscovering multiple minima on parallel systems. APOSMM tracks these fields:\n\n\"x\" [n floats]: Parameters being optimized over\n\"x_on_cube\" [n floats]: Parameters scaled to the unit cube\n\"f\" [float]: Objective function being minimized\n\"local_pt\" [bool]: True if point from a local optimization run\n\"started_run\" [bool]: True if point has started a local opt run\n\"num_active_runs\" [int]: Number of active local runs point is in\n\"local_min\" [float]: True if point has been ruled a local minima\n\"sim_id\" [int]: Row number of entry in history\n\nand optionally\n\n\"fvec\" [m floats]: All objective components (if performing a least-squares calculation)\n\"grad\" [n floats]: The gradient (if available) of the objective with respect to x.\n\nNote:\n\nIf any of the above fields are desired after a libEnsemble run, name\nthem in gen_specs[\"out\"].\nIf intitializing APOSMM with past function values, make sure to include\n\"x\", \"x_on_cube\", \"f\", \"local_pt\", etc.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3879, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "1fb0e566-11b9-4732-9c45-407739f19606": {"__data__": {"id_": "1fb0e566-11b9-4732-9c45-407739f19606", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/aposmm.html", "file_name": "aposmm.html", "file_type": "text/html", "file_size": 31805, "creation_date": "2025-11-25", "last_modified_date": "2025-09-18"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "505c3c09-fdc2-4c27-83bc-46f8df1c5e4d", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/aposmm.html", "file_name": "aposmm.html", "file_type": "text/html", "file_size": 31805, "creation_date": "2025-11-25", "last_modified_date": "2025-09-18"}, "hash": "86bd321c61bfe442e182437efe36e40220fbe6ca1523c727d843ca14f581e116", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f23f5083-c5f8-4438-bb87-c66c6c9410c2", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/aposmm.html", "file_name": "aposmm.html", "file_type": "text/html", "file_size": 31805, "creation_date": "2025-11-25", "last_modified_date": "2025-09-18"}, "hash": "a92af07d611b1f1df2bfa5397cc026b5d02b682d93100dbd2f847f61faa53e0f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b44a41ac-98f2-4ecd-bf44-dff7f3dac686", "node_type": "1", "metadata": {}, "hash": "1be83f4e9923993535beee894f255e8f87c7847b852c03160c084962d042a06d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "If intitializing APOSMM with past function values, make sure to include\n\"x\", \"x_on_cube\", \"f\", \"local_pt\", etc. in\ngen_specs[\"in\"] (and, of course, include them in the H0 array given\nto libensemble).\n\nNecessary quantities in gen_specs[\"user\"] are:\n\n\"lb\" [n floats]: Lower bound on search domain\n\"ub\" [n floats]: Upper bound on search domain\n\"localopt_method\" [str]: Name of an NLopt, PETSc/TAO, or SciPy method\n(see \u201cadvance_local_run\u201d below for supported methods). When using a SciPy\nmethod, must supply \"opt_return_codes\", a list of integers that will\nbe used to determine if the x produced by the localopt method should be\nruled a local minimum. (For example, SciPy\u2019s COBYLA has a \u201cstatus\u201d of 1 if\nat an optimum, but SciPy\u2019s Nelder-Mead and BFGS have a \u201cstatus\u201d of 0 if at\nan optimum.)\n\"initial_sample_size\" [int]: Number of uniformly sampled points\nto be evaluated before starting the localopt runs. Can be\nzero if no additional sampling is desired, but if zero there must be past\nsim_f values given to libEnsemble in H0.\n\nOptional gen_specs[\"user\"] entries are:\n\n\"max_active_runs\" [int]: Bound on number of runs APOSMM is advancing\n\"sample_points\" [numpy array]: Points to be sampled (original domain).\nIf more sample points are needed by APOSMM during the course of the\noptimization, points will be drawn uniformly over the domain\n\"components\" [int]: Number of objective components\n\"dist_to_bound_multiple\" [float in (0, 1]]: What fraction of the\ndistance to the nearest boundary should the initial step size be in\nlocalopt runs\n\"lhs_divisions\" [int]: Number of Latin hypercube sampling partitions\n(0 or 1 results in uniform sampling)\n\"mu\" [float]: Distance from the boundary that all localopt starting\npoints must satisfy\n\"nu\" [float]: Distance from identified minima that all starting\npoints must satisfy\n\"rk_const\" [float]: Multiplier in front of the r_k value\n\"stop_after_k_minima\" [int]: Tell APOSMM to stop after this many\nlocal minima have been identified by a local optimization run.\n\"stop_after_k_runs\" [int]: Tell APOSMM to stop after this many runs\nhave ended. (The number of ended runs may be less than the number of\nminima if, for example, a local optimization run ends due to a evaluation\nconstraint, but not convergence criteria.)\n\nIf the rules in decide_where_to_start_localopt produces more than\n\"max_active_runs\" in some iteration, then existing runs are prioritized.\nAnd gen_specs[\"user\"] must also contain fields for the given\nlocalopt_method\u2019s convergence tolerances (e.g., gatol/grtol for PETSC/TAO\nor ftol_rel for NLopt)\n\nSee also\ntest_persistent_aposmm_scipy\nfor basic APOSMM usage.\n\nSee also\ntest_persistent_aposmm_with_grad\nfor an example where past function values are given to libEnsemble/APOSMM.\n\nSee also\ntest_aposmm_starting_point_finder\nfor an example the APOSMM r_k radius logic is adjusted to produce a certain number of localopt starting points.\n\nLocalOptInterfacer\uf0c1\nThis module contains methods for APOSMM to interface with various local\noptimization routines.\n\nclass aposmm_localopt_support.LocalOptInterfacer(user_specs, x0, f0, grad0=None)\uf0c1\nThis class defines the APOSMM interface to various local optimization routines.", "mimetype": "text/plain", "start_char_idx": 3768, "end_char_idx": 6933, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "b44a41ac-98f2-4ecd-bf44-dff7f3dac686": {"__data__": {"id_": "b44a41ac-98f2-4ecd-bf44-dff7f3dac686", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/aposmm.html", "file_name": "aposmm.html", "file_type": "text/html", "file_size": 31805, "creation_date": "2025-11-25", "last_modified_date": "2025-09-18"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "505c3c09-fdc2-4c27-83bc-46f8df1c5e4d", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/aposmm.html", "file_name": "aposmm.html", "file_type": "text/html", "file_size": 31805, "creation_date": "2025-11-25", "last_modified_date": "2025-09-18"}, "hash": "86bd321c61bfe442e182437efe36e40220fbe6ca1523c727d843ca14f581e116", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1fb0e566-11b9-4732-9c45-407739f19606", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/aposmm.html", "file_name": "aposmm.html", "file_type": "text/html", "file_size": 31805, "creation_date": "2025-11-25", "last_modified_date": "2025-09-18"}, "hash": "5d9ae7eec0ae62a52b575c9583568cd1c7b4a3f90bd619286792d66727ca7ae2", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "And gen_specs[\"user\"] must also contain fields for the given\nlocalopt_method\u2019s convergence tolerances (e.g., gatol/grtol for PETSC/TAO\nor ftol_rel for NLopt)\n\nSee also\ntest_persistent_aposmm_scipy\nfor basic APOSMM usage.\n\nSee also\ntest_persistent_aposmm_with_grad\nfor an example where past function values are given to libEnsemble/APOSMM.\n\nSee also\ntest_aposmm_starting_point_finder\nfor an example the APOSMM r_k radius logic is adjusted to produce a certain number of localopt starting points.\n\nLocalOptInterfacer\uf0c1\nThis module contains methods for APOSMM to interface with various local\noptimization routines.\n\nclass aposmm_localopt_support.LocalOptInterfacer(user_specs, x0, f0, grad0=None)\uf0c1\nThis class defines the APOSMM interface to various local optimization routines.\nCurrently supported routines are\n\nNLopt ['LN_SBPLX', LN_BOBYQA', 'LN_COBYLA', 'LN_NEWUOA', 'LN_NELDERMEAD', 'LD_MMA']\nPETSc/TAO ['pounders', 'blmvm', 'nm']\nSciPy ['scipy_Nelder-Mead', 'scipy_COBYLA', 'scipy_BFGS']\nDFOLS ['dfols']\nIBCDFO ['pounders', 'manifold_sampling_primal']\nExternal local optimizer ['external_localopt'] (which use files to pass/receive x/f values)\n\niterate(data)\uf0c1\nReturns an instance of either numpy.ndarray corresponding to the next\niterative guess or ConvergedMsg when the solver has completed its run.\n\nParameters:\n\nx_on_cube \u2013 A numpy array of the point being evaluated (for a handshake)\nf \u2013 A numpy array of the function evaluation.\ngrad \u2013 A numpy array of the function\u2019s gradient.\nfvec \u2013 A numpy array of the function\u2019s component values.\n\ndestroy()\uf0c1\nRecursively kill any optimizer processes still running\n\nclose()\uf0c1\nJoin process and close queue\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 6160, "end_char_idx": 7932, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d28e5fb6-19a5-447b-b749-57de8030720f": {"__data__": {"id_": "d28e5fb6-19a5-447b-b749-57de8030720f", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/ax_multitask.html", "file_name": "ax_multitask.html", "file_type": "text/html", "file_size": 11032, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ce9fa6d5-e49c-4bd2-ac9c-46f398b5a98e", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/ax_multitask.html", "file_name": "ax_multitask.html", "file_type": "text/html", "file_size": 11032, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "a75f5d844ae9fb7bef246ee2d53e05c561613aab444917ecbdd67bc193536b70", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "persistent_ax_multitask \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSampling\nOptimization\nAPOSMM\nuniform_or_localopt\nax_multitask\nVTMOP\nytopt\nconsensus\nDEAP-NSGA-II\n\nModeling and Approximation\n\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nGenerator Functions\npersistent_ax_multitask\n\n View page source\n\npersistent_ax_multitask\uf0c1\nRequired: ax-platform>=0.5.0\nExample usage: gp_multitask_ax\nTo install:\npip install ax-platform\n\nAn example of the Ax multitask GP.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1146, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "9153cfda-65d1-44d4-b4de-fa2b821d77ca": {"__data__": {"id_": "9153cfda-65d1-44d4-b4de-fa2b821d77ca", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/calling_scripts.html", "file_name": "calling_scripts.html", "file_type": "text/html", "file_size": 78169, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3264551e-adb7-42e0-835c-85ee9b04af4a", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/calling_scripts.html", "file_name": "calling_scripts.html", "file_type": "text/html", "file_size": 78169, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "ca8e4bf792548d87373d5c57d2b43de275c6f0e962380a80b04469c5db454866", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8d1cca14-77f6-4cd1-9daf-fee142575826", "node_type": "1", "metadata": {}, "hash": "f4c5c4e28361ee3a2684c00de5d7349cfeaf7db055e5af447109112614661d2d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Calling Scripts \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nLocal Sine Tutorial\nElectrostatic Forces with Executor\nTraditional Version\nObject + yaml Version\n\nPersistent APOSMM with Gradients\n\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nCalling Scripts\n\n View page source\n\nCalling Scripts\uf0c1\nBelow are example calling scripts used to populate specifications for each user\nfunction and libEnsemble before initiating libEnsemble via the primary libE()\ncall. The primary libEnsemble-relevant portions have been highlighted in each\nexample. Non-highlighted portions may include setup routines, compilation steps\nfor user applications, or output processing. The first two scripts correspond to\nrandom sampling calculations, while the third corresponds to an optimization routine.\nMany other examples of calling scripts can be found in libEnsemble\u2019s regression tests.\n\nLocal Sine Tutorial\uf0c1\nThis example is from the Local Sine Tutorial,\nmeant to run with Python\u2019s multiprocessing as the primary comms method.\n\nexamples/tutorials/simple_sine/test_local_sine_tutorial.py\uf0c1\n 1import numpy as np\n 2from sine_gen import gen_random_sample\n 3from sine_sim import sim_find_sine\n 4\n 5from libensemble import Ensemble\n 6from libensemble.specs import ExitCriteria, GenSpecs, LibeSpecs, SimSpecs\n 7\n 8if __name__ == \"__main__\": # Python-quirk required on macOS and windows\n 9 libE_specs = LibeSpecs(nworkers=4, comms=\"local\")\n10\n11 gen_specs = GenSpecs(\n12 gen_f=gen_random_sample, # Our generator function\n13 out=[(\"x\", float, (1,))], # gen_f output (name, type, size)\n14 user={\n15 \"lower\": np.array([-3]), # lower boundary for random sampling\n16 \"upper\": np.array([3]), # upper boundary for random sampling\n17 \"gen_batch_size\": 5, # number of x's gen_f generates per call\n18 },\n19 )\n20\n21 sim_specs = SimSpecs(\n22 sim_f=sim_find_sine, # Our simulator function\n23 inputs=[\"x\"], # InputArray field names. \"x\" from gen_f output\n24 out=[(\"y\", float)], # sim_f output. \"y\" = sine(\"x\")\n25 ) # sim_specs_end_tag\n26\n27 exit_criteria = ExitCriteria(sim_max=80) # Stop libEnsemble after 80 simulations\n28\n29 ensemble = Ensemble(sim_specs, gen_specs, exit_criteria, libE_specs)\n30 ensemble.add_random_streams() # setup the random streams unique to each worker\n31 ensemble.run() # start the ensemble. Blocks until completion.\n32\n33 history = ensemble.H # start visualizing our results\n34\n35 print([i for i in history.dtype.fields]) # (optional) to visualize our history array\n36 print(history)\n37\n38 import matplotlib.pyplot as plt\n39\n40 colors = [\"b\", \"g\", \"r\", \"y\", \"m\", \"c\", \"k\", \"w\"]\n41\n42 for i in range(1, libE_specs.nworkers + 1):\n43 worker_xy = np.extract(history[\"sim_worker\"] == i, history)\n44 x = [entry.tolist()[0] for entry in worker_xy[\"x\"]]\n45 y = [entry for entry in worker_xy[\"y\"]]\n46 plt.scatter(x, y, label=\"Worker {}\".format(i), c=colors[i - 1])\n47\n48 plt.title(\"Sine calculations for a uniformly sampled random distribution\")\n49 plt.xlabel(\"x\")\n50 plt.ylabel(\"sine(x)\")\n51 plt.legend(loc=\"lower right\")\n52 plt.savefig(\"tutorial_sines.png\")\n\nElectrostatic Forces with Executor\uf0c1\nThese examples are from a test for evaluating the scaling capabilities of libEnsemble\nby calculating particle electrostatic forces through a user application. This\napplication is registered with the MPIExecutor, then submitted\nfor execution in the sim_f.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3880, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "8d1cca14-77f6-4cd1-9daf-fee142575826": {"__data__": {"id_": "8d1cca14-77f6-4cd1-9daf-fee142575826", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/calling_scripts.html", "file_name": "calling_scripts.html", "file_type": "text/html", "file_size": 78169, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3264551e-adb7-42e0-835c-85ee9b04af4a", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/calling_scripts.html", "file_name": "calling_scripts.html", "file_type": "text/html", "file_size": 78169, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "ca8e4bf792548d87373d5c57d2b43de275c6f0e962380a80b04469c5db454866", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9153cfda-65d1-44d4-b4de-fa2b821d77ca", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/calling_scripts.html", "file_name": "calling_scripts.html", "file_type": "text/html", "file_size": 78169, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "55dba88858b4d7b5de92d05a467d63727f567003a4c9afd9dbedb5fbe0ef5848", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bace9662-9ee0-4814-ae07-8ac876fd0e93", "node_type": "1", "metadata": {}, "hash": "44a6cb6ca4528fca2a42db61f0c1a651382331b7e8562a6ccaf635e1853c45b2", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "This\napplication is registered with the MPIExecutor, then submitted\nfor execution in the sim_f. Note the use of the parse_args=True which allows\nreading arguments such as the number of workers from the command line.\n\nTraditional Version\uf0c1\nRun using five workers with:\npython run_libe_forces.py -n 5\n\nOne worker runs a persistent generator and the other four run the forces simulations.\n\ntests/scaling_tests/forces/forces_simple/run_libe_forces.py\uf0c1\n 1#!/usr/bin/env python\n 2import os\n 3import sys\n 4\n 5import numpy as np\n 6from forces_simf import run_forces # Sim func from current dir\n 7\n 8from libensemble import Ensemble\n 9from libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\n10from libensemble.executors import MPIExecutor\n11from libensemble.gen_funcs.persistent_sampling import persistent_uniform as gen_f\n12from libensemble.specs import AllocSpecs, ExitCriteria, GenSpecs, LibeSpecs, SimSpecs\n13\n14if __name__ == \"__main__\":\n15 # Initialize MPI Executor\n16 exctr = MPIExecutor()\n17\n18 # Register simulation executable with executor\n19 sim_app = os.path.join(os.getcwd(), \"../forces_app/forces.x\")\n20\n21 if not os.path.isfile(sim_app):\n22 sys.exit(\"forces.x not found - please build first in ../forces_app dir\")\n23\n24 exctr.register_app(full_path=sim_app, app_name=\"forces\")\n25\n26 # Parse number of workers, comms type, etc. from arguments\n27 ensemble = Ensemble(parse_args=True, executor=exctr)\n28 nsim_workers = ensemble.nworkers - 1 # One worker is for persistent generator\n29\n30 # Persistent gen does not need resources\n31 ensemble.libE_specs = LibeSpecs(\n32 num_resource_sets=nsim_workers,\n33 sim_dirs_make=True,\n34 )\n35\n36 ensemble.sim_specs = SimSpecs(\n37 sim_f=run_forces,\n38 inputs=[\"x\"],\n39 outputs=[(\"energy\", float)],\n40 )\n41\n42 ensemble.gen_specs = GenSpecs(\n43 gen_f=gen_f,\n44 inputs=[], # No input when start persistent generator\n45 persis_in=[\"sim_id\"], # Return sim_ids of evaluated points to generator\n46 outputs=[(\"x\", float, (1,))],\n47 user={\n48 \"initial_batch_size\": nsim_workers,\n49 \"lb\": np.array([1000]), # min particles\n50 \"ub\": np.array([3000]), # max particles\n51 },\n52 )\n53\n54 # Starts one persistent generator. Simulated values are returned in batch.\n55 ensemble.alloc_specs = AllocSpecs(\n56 alloc_f=alloc_f,\n57 user={\n58 \"async_return\": False, # False causes batch returns\n59 },\n60 )\n61\n62 # Instruct libEnsemble to exit after this many simulations\n63 ensemble.exit_criteria = ExitCriteria(sim_max=8)\n64\n65 # Seed random streams for each worker, particularly for gen_f\n66 ensemble.add_random_streams()\n67\n68 # Run ensemble\n69 ensemble.run()\n70\n71 if ensemble.is_manager:\n72 # Note, this will change if changing sim_max, nworkers, lb, ub, etc.", "mimetype": "text/plain", "start_char_idx": 3785, "end_char_idx": 6498, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "bace9662-9ee0-4814-ae07-8ac876fd0e93": {"__data__": {"id_": "bace9662-9ee0-4814-ae07-8ac876fd0e93", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/calling_scripts.html", "file_name": "calling_scripts.html", "file_type": "text/html", "file_size": 78169, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3264551e-adb7-42e0-835c-85ee9b04af4a", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/calling_scripts.html", "file_name": "calling_scripts.html", "file_type": "text/html", "file_size": 78169, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "ca8e4bf792548d87373d5c57d2b43de275c6f0e962380a80b04469c5db454866", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8d1cca14-77f6-4cd1-9daf-fee142575826", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/calling_scripts.html", "file_name": "calling_scripts.html", "file_type": "text/html", "file_size": 78169, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "22a33e4f71df6de67732c096332ffa9171cbe4ac8fa0ac3d5689af98c3befb72", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a00fbf88-f146-484d-8ffc-373c19642105", "node_type": "1", "metadata": {}, "hash": "48e1feb865a0ca4599fc0e87d44f70ddb6ababb98a2fbd9b43fa36d5ec30f7ac", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Simulated values are returned in batch.\n55 ensemble.alloc_specs = AllocSpecs(\n56 alloc_f=alloc_f,\n57 user={\n58 \"async_return\": False, # False causes batch returns\n59 },\n60 )\n61\n62 # Instruct libEnsemble to exit after this many simulations\n63 ensemble.exit_criteria = ExitCriteria(sim_max=8)\n64\n65 # Seed random streams for each worker, particularly for gen_f\n66 ensemble.add_random_streams()\n67\n68 # Run ensemble\n69 ensemble.run()\n70\n71 if ensemble.is_manager:\n72 # Note, this will change if changing sim_max, nworkers, lb, ub, etc.\n73 print(f'Final energy checksum: {np.sum(ensemble.H[\"energy\"])}')\n\nObject + yaml Version\uf0c1\n\ntests/scaling_tests/forces/forces_adv/run_libe_forces_from_yaml.py\uf0c1\n 1#!/usr/bin/env python\n 2import os\n 3import sys\n 4\n 5import numpy as np\n 6\n 7from libensemble.ensemble import Ensemble\n 8from libensemble.executors.mpi_executor import MPIExecutor\n 9from libensemble.tools import add_unique_random_streams\n10\n11####################\n12\n13sim_app = os.path.join(os.getcwd(), \"../forces_app/forces.x\")\n14\n15if not os.path.isfile(sim_app):\n16 sys.exit(\"forces.x not found - please build first in ../forces_app dir\")\n17\n18\n19####################\n20\n21forces = Ensemble(parse_args=True)\n22forces.from_yaml(\"forces.yaml\")\n23\n24forces.logger.set_level(\"INFO\")\n25\n26if forces.is_manager:\n27 print(f\"\\nRunning with {forces.nworkers} workers\\n\")\n28\n29exctr = MPIExecutor()\n30exctr.register_app(full_path=sim_app, app_name=\"forces\")\n31\n32forces.libE_specs[\"ensemble_dir_path\"] = \"./ensemble\"\n33forces.gen_specs.user.update(\n34 {\n35 \"lb\": np.array([0]),\n36 \"ub\": np.array([32767]),\n37 }\n38)\n39\n40forces.persis_info = add_unique_random_streams({}, forces.nworkers + 1)\n41\n42forces.run()\n43forces.save_output(__file__)\n\ntests/scaling_tests/forces/forces_adv/forces.yaml\uf0c1\n 1libE_specs:\n 2 save_every_k_gens: 1000\n 3 sim_dirs_make: True\n 4 profile: False\n 5\n 6exit_criteria:\n 7 sim_max: 8\n 8\n 9sim_specs:\n10 sim_f: forces_simf.run_forces\n11 inputs:\n12 - x\n13 outputs:\n14 energy:\n15 type: float\n16\n17 user:\n18 keys:\n19 - seed\n20 cores: 1\n21 sim_particles: 1.e+3\n22 sim_timesteps: 5\n23 sim_kill_minutes: 10.0\n24 particle_variance: 0.2\n25 kill_rate: 0.5\n26 fail_on_sim: False\n27 fail_on_submit: False\n28\n29gen_specs:\n30 gen_f: libensemble.gen_funcs.sampling.uniform_random_sample\n31 outputs:\n32 x:\n33 type: float\n34 size: 1\n35 user:\n36 gen_batch_size: 1000\n37\n38alloc_specs:\n39 alloc_f: libensemble.alloc_funcs.give_sim_work_first.give_sim_work_first\n40 outputs:\n41 allocated:\n42 type: bool\n43 user:\n44 batch_mode: True\n45 num_active_gens: 1\n\nPersistent APOSMM with Gradients\uf0c1\nThis example is also from the regression tests and demonstrates configuring a\npersistent run via a custom allocation function.\n\ntests/regression_tests/test_persistent_aposmm_with_grad.py\uf0c1\n 1\"\"\"\n 2Runs libEnsemble with APOSMM with an NLopt local optimizer that uses gradient\n 3information from the sim_f\n 4\n 5Execute via one of the following commands (e.g. 3 workers):\n 6 mpiexec -np 4 python test_persistent_aposmm_with_grad.py\n 7 python test_persistent_aposmm_with_grad.py --nworkers 3\n 8 python test_persistent_aposmm_with_grad.py --nworkers 3 --comms tcp\n 9\n 10When running with the above commands, the number of concurrent evaluations of\n 11the objective function will be 2, as one of the three workers will be the\n 12persistent generator.", "mimetype": "text/plain", "start_char_idx": 5966, "end_char_idx": 9292, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a00fbf88-f146-484d-8ffc-373c19642105": {"__data__": {"id_": "a00fbf88-f146-484d-8ffc-373c19642105", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/calling_scripts.html", "file_name": "calling_scripts.html", "file_type": "text/html", "file_size": 78169, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3264551e-adb7-42e0-835c-85ee9b04af4a", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/calling_scripts.html", "file_name": "calling_scripts.html", "file_type": "text/html", "file_size": 78169, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "ca8e4bf792548d87373d5c57d2b43de275c6f0e962380a80b04469c5db454866", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bace9662-9ee0-4814-ae07-8ac876fd0e93", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/calling_scripts.html", "file_name": "calling_scripts.html", "file_type": "text/html", "file_size": 78169, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "5f44256dbe9c3db0577adae29b10d1235028389f90d661f0267ffbff40350aea", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ba0b28bc-1efa-4058-a575-56509eb8000a", "node_type": "1", "metadata": {}, "hash": "0e54eca3305f133668d80b8211004662c4be2f06855c87d540ff7cb147073a7b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "tests/regression_tests/test_persistent_aposmm_with_grad.py\uf0c1\n 1\"\"\"\n 2Runs libEnsemble with APOSMM with an NLopt local optimizer that uses gradient\n 3information from the sim_f\n 4\n 5Execute via one of the following commands (e.g. 3 workers):\n 6 mpiexec -np 4 python test_persistent_aposmm_with_grad.py\n 7 python test_persistent_aposmm_with_grad.py --nworkers 3\n 8 python test_persistent_aposmm_with_grad.py --nworkers 3 --comms tcp\n 9\n 10When running with the above commands, the number of concurrent evaluations of\n 11the objective function will be 2, as one of the three workers will be the\n 12persistent generator.\n 13\"\"\"\n 14\n 15# Do not change these lines - they are parsed by run-tests.sh\n 16# TESTSUITE_COMMS: local mpi tcp\n 17# TESTSUITE_NPROCS: 4\n 18# TESTSUITE_EXTRA: true\n 19\n 20import multiprocessing\n 21import sys\n 22from math import gamma, pi, sqrt\n 23\n 24import numpy as np\n 25\n 26import libensemble.gen_funcs\n 27\n 28# Import libEnsemble items for this test\n 29from libensemble.libE import libE\n 30from libensemble.sim_funcs.six_hump_camel import six_hump_camel as sim_f\n 31from libensemble.sim_funcs.six_hump_camel import six_hump_camel_func, six_hump_camel_grad\n 32\n 33libensemble.gen_funcs.rc.aposmm_optimizers = \"nlopt\"\n 34from time import time\n 35\n 36from libensemble.alloc_funcs.persistent_aposmm_alloc import persistent_aposmm_alloc as alloc_f\n 37from libensemble.gen_funcs.persistent_aposmm import aposmm as gen_f\n 38from libensemble.tests.regression_tests.support import six_hump_camel_minima as minima\n 39from libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n 40\n 41# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).", "mimetype": "text/plain", "start_char_idx": 8677, "end_char_idx": 10406, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ba0b28bc-1efa-4058-a575-56509eb8000a": {"__data__": {"id_": "ba0b28bc-1efa-4058-a575-56509eb8000a", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/calling_scripts.html", "file_name": "calling_scripts.html", "file_type": "text/html", "file_size": 78169, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3264551e-adb7-42e0-835c-85ee9b04af4a", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/calling_scripts.html", "file_name": "calling_scripts.html", "file_type": "text/html", "file_size": 78169, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "ca8e4bf792548d87373d5c57d2b43de275c6f0e962380a80b04469c5db454866", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a00fbf88-f146-484d-8ffc-373c19642105", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/calling_scripts.html", "file_name": "calling_scripts.html", "file_type": "text/html", "file_size": 78169, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "66abeb03b6a7850a9a296c42141c6e4ade350cfadefa9132d9846a559241f316", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "27c95b30-d23f-490a-9f3a-32f371602007", "node_type": "1", "metadata": {}, "hash": "b98f72d46cef318f7dfbe7813ada65d98b991fdaed10b085945e47cc2adea815", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "42if __name__ == \"__main__\":\n 43 multiprocessing.set_start_method(\"fork\", force=True)\n 44\n 45 nworkers, is_manager, libE_specs, _ = parse_args()\n 46\n 47 if is_manager:\n 48 start_time = time()\n 49\n 50 if nworkers < 2:\n 51 sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n 52\n 53 n = 2\n 54 sim_specs = {\n 55 \"sim_f\": sim_f,\n 56 \"in\": [\"x\"],\n 57 \"out\": [(\"f\", float), (\"grad\", float, n)],\n 58 }\n 59\n 60 gen_out = [\n 61 (\"x\", float, n),\n 62 (\"x_on_cube\", float, n),\n 63 (\"sim_id\", int),\n 64 (\"local_min\", bool),\n 65 (\"local_pt\", bool),\n 66 ]\n 67\n 68 gen_in = [\"x\", \"f\", \"grad\", \"local_pt\", \"sim_id\", \"sim_ended\", \"x_on_cube\", \"local_min\"]\n 69\n 70 gen_specs = {\n 71 \"gen_f\": gen_f,\n 72 \"in\": gen_in,\n 73 \"persis_in\": gen_in,\n 74 \"out\": gen_out,\n 75 \"user\": {\n 76 \"initial_sample_size\": 0, # Don't need to do evaluations because the sampling already done below\n 77 \"localopt_method\": \"LD_MMA\",\n 78 \"rk_const\": 0.5 * ((gamma(1 + (n / 2)) * 5) ** (1 / n)) / sqrt(pi),\n 79 \"stop_after_k_minima\": 15,\n 80 \"xtol_rel\": 1e-6,\n 81 \"ftol_rel\": 1e-6,\n 82 \"max_active_runs\": 6,\n 83 \"lb\": np.array([-3, -2]),\n 84 \"ub\": np.array([3, 2]),\n 85 },\n 86 }\n 87\n 88 alloc_specs = {\"alloc_f\": alloc_f}\n 89\n 90 persis_info = add_unique_random_streams({}, nworkers + 1)\n 91\n 92 exit_criteria = {\"sim_max\": 1000}\n 93\n 94 # Load in \"already completed\" set of 'x','f','grad' values to give to libE/persistent_aposmm\n 95 sample_size = len(minima)\n 96\n 97 H0_dtype = [\n 98 (\"x\", float, n),\n 99 (\"grad\", float, n),\n100 (\"sim_id\", int),\n101 (\"x_on_cube\", float, n),\n102 (\"sim_ended\", bool),\n103 (\"f\", float),\n104 (\"gen_informed\", bool),\n105 (\"sim_started\", bool),\n106 ]\n107 H0 = np.zeros(sample_size, dtype=H0_dtype)\n108\n109 # Two points in the following sample have the same best function value, which\n110 # tests the corner case for some APOSMM logic\n111 H0[\"x\"] = np.round(minima, 1)\n112 H0[\"x_on_cube\"] = (H0[\"x\"] - gen_specs[\"user\"][\"lb\"]) / (gen_specs[\"user\"][\"ub\"] - gen_specs[\"user\"][\"lb\"])\n113 H0[\"sim_id\"] = range(sample_size)\n114 H0[[\"sim_started\", \"gen_informed\", \"sim_ended\"]] = True\n115\n116 for i in range(sample_size):\n117 H0[\"f\"][i] = six_hump_camel_func(H0[\"x\"][i])\n118 H0[\"grad\"][i] = six_hump_camel_grad(H0[\"x\"][i])\n119\n120 # Perform the run\n121 H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs, H0=H0)\n122\n123 if is_manager:\n124 assert persis_info[1].get(\"run_order\"), \"Run_order should have been given back\"\n125 assert (\n126 len(persis_info[1][\"run_order\"]) >= gen_specs[\"user\"][\"stop_after_k_minima\"]\n127 ), \"This test should have many runs started.\"", "mimetype": "text/plain", "start_char_idx": 10408, "end_char_idx": 13030, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "27c95b30-d23f-490a-9f3a-32f371602007": {"__data__": {"id_": "27c95b30-d23f-490a-9f3a-32f371602007", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/calling_scripts.html", "file_name": "calling_scripts.html", "file_type": "text/html", "file_size": 78169, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3264551e-adb7-42e0-835c-85ee9b04af4a", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/calling_scripts.html", "file_name": "calling_scripts.html", "file_type": "text/html", "file_size": 78169, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "ca8e4bf792548d87373d5c57d2b43de275c6f0e962380a80b04469c5db454866", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ba0b28bc-1efa-4058-a575-56509eb8000a", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/calling_scripts.html", "file_name": "calling_scripts.html", "file_type": "text/html", "file_size": 78169, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "e8b8f7a77b0725bef03afb0c6aa95c5272652a0379d4612f4f292fa34afe28bd", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "128 assert len(H) < exit_criteria[\"sim_max\"], \"Test should have stopped early due to 'stop_after_k_minima'\"\n129\n130 print(\"[Manager]:\", H[np.where(H[\"local_min\"])][\"x\"])\n131 print(\"[Manager]: Time taken =\", time() - start_time, flush=True)\n132\n133 tol = 1e-5\n134 for m in minima:\n135 # The minima are known on this test problem.\n136 # We use their values to test APOSMM has identified all minima\n137 print(np.min(np.sum((H[H[\"local_min\"]][\"x\"] - m) ** 2, 1)), flush=True)\n138 assert np.min(np.sum((H[H[\"local_min\"]][\"x\"] - m) ** 2, 1)) < tol\n139\n140 save_libE_output(H, persis_info, __file__, nworkers)\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 13031, "end_char_idx": 13760, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "8e9178c7-4e8d-4131-90fc-6e89c8cc1495": {"__data__": {"id_": "8e9178c7-4e8d-4131-90fc-6e89c8cc1495", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/examples_index.html", "file_name": "examples_index.html", "file_type": "text/html", "file_size": 11719, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "eb8bd20c-e7c9-4a3b-8155-52f535210c2e", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/examples_index.html", "file_name": "examples_index.html", "file_type": "text/html", "file_size": 11719, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "4648142b9d1e921db4c1456a3936026e433ee2ab2ad23c51e51ea9540f35a3ef", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Overview of Examples \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nOverview of Examples\n\n View page source\n\nOverview of Examples\uf0c1\nHere we give example generation, simulation, and allocation functions for\nlibEnsemble, as well as example calling scripts.\nThe examples come from the libEnsemble repository and the libEnsemble Community Repository.\n\nlibEnsemble Example Functions:\n\nGenerator Functions\nSampling\nOptimization\nModeling and Approximation\n\nSimulation Functions\nSimple simulation functions\nFunctions that run user applications\nSpecial simulation functions\n\nAllocation Functions\ngive_sim_work_first\nfast_alloc\nstart_only_persistent\nstart_persistent_local_opt_gens\nfast_alloc_and_pausing\nonly_one_gen_alloc\nstart_fd_persistent\npersistent_aposmm_alloc\ngive_pregenerated_work\ninverse_bayes_allocf\n\nCalling Scripts\nLocal Sine Tutorial\nElectrostatic Forces with Executor\nPersistent APOSMM with Gradients\n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1617, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "7169046d-cd3f-4bbe-a0d1-679edc3fda8f": {"__data__": {"id_": "7169046d-cd3f-4bbe-a0d1-679edc3fda8f", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/fd_param_finder.html", "file_name": "fd_param_finder.html", "file_type": "text/html", "file_size": 11641, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2ce20601-f036-4556-82ea-f6320596c932", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/fd_param_finder.html", "file_name": "fd_param_finder.html", "file_type": "text/html", "file_size": 11641, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "afa046dab617509aed36f3be31c40f9ed2a1357c1038d95bf702ea5ea9e03de9", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "persistent_fd_param_finder \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSampling\nOptimization\nModeling and Approximation\ngpCAM\npersistent_tasmanian\npersistent_fd_param_finder\nfd_param_finder()\n\npersistent_surmise\n\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nGenerator Functions\npersistent_fd_param_finder\n\n View page source\n\npersistent_fd_param_finder\uf0c1\n\npersistent_fd_param_finder.fd_param_finder(H, persis_info, gen_specs, libE_info)\uf0c1\nThis generation function loops through a set of suitable finite difference\nparameters for a mapping F from R^n to R^m.\n\nSee also\ntest_persistent_fd_param_finder.py <https://github.com/Libensemble/libensemble/blob/develop/libensemble/tests/regression_tests/test_persistent_fd_param_finder.py>`_\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1416, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "1a687112-6cc1-4c79-bc59-d3603998a08d": {"__data__": {"id_": "1a687112-6cc1-4c79-bc59-d3603998a08d", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/gen_funcs.html", "file_name": "gen_funcs.html", "file_type": "text/html", "file_size": 16810, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b0cc440b-faeb-45bd-8abc-aedbd70dad6f", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/gen_funcs.html", "file_name": "gen_funcs.html", "file_type": "text/html", "file_size": 16810, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "eacf8fc5142a19309dc6a93022cc0a0d01e2c404a760d7e2b863e5732ae2cf46", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Generator Functions \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSampling\nsampling\npersistent_sampling\npersistent_sampling_var_resources\n\nOptimization\nAPOSMM\nuniform_or_localopt\nax_multitask\nVTMOP\nytopt\nconsensus\nDEAP-NSGA-II\n\nModeling and Approximation\ngpCAM\npersistent_tasmanian\npersistent_fd_param_finder\npersistent_surmise\n\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nGenerator Functions\n\n View page source\n\nGenerator Functions\uf0c1\nHere we list many generator functions included with libEnsemble.\n\nImportant\nSee the API for generator functions here.\n\nSampling\uf0c1\n\nBasic sampling\nVarious generators for sampling a space. The non-persistent function is called as needed.\n\nPersistent sampling\nVarious persistent generators (persists on a worker) for sampling a space. After the initial\nbatch each generator creates p new random points for every p points that are returned.\n\nPersistent sampling with variable resources\nVarious persistent sampling generators that assign different resources to each simulation.\n\nOptimization\uf0c1\n\nAPOSMM\nAsynchronously Parallel Optimization Solver for finding Multiple Minima (APOSMM).\n\nAx Multitask\nBayesian optimization with a Gaussian process driven by an Ax multi-task algorithm.\n\nDEAP-NSGA-II\nDistributed evolutionary algorithms (community example)\n\nDistributed optimization\nDistributed optimization methods for minimizing sums of convex functions. (community example)\n\nuniform_or_localopt\nSamples uniformly in non-persistent mode then runs an NLopt local optimization runs in persistent mode.\n\nVTMOP\nMultiobjective multidisciplinary design optimization using the VTMOP Fortran package. (community example)\n\nytopt\nBayesian Optimization package for determining optimal input parameter configurations for applications/executables using ytopt. (community example)\n\nModeling and Approximation\uf0c1\n\nFinite-difference parameter finder\nUses ECNoise to determine a suitable finite difference parameters for a mapping F from R^n to R^m.\n\ngpCAM\nGaussian Process-based adaptive sampling using gpcam.\n\nsurmise\nModular Bayesian calibration/inference framework using Surmise (demonstration of cancelling previous issued simulations).\n\nTasmanian\nEvaluates points generators by the Tasmanian sparse grid library\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2908, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "835974a2-24a2-4800-86f8-1fe649a90d8b": {"__data__": {"id_": "835974a2-24a2-4800-86f8-1fe649a90d8b", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/gpcam.html", "file_name": "gpcam.html", "file_type": "text/html", "file_size": 13751, "creation_date": "2025-11-25", "last_modified_date": "2025-10-06"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "69d015c4-ad55-4766-bb8e-cdc41cf1939c", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/gpcam.html", "file_name": "gpcam.html", "file_type": "text/html", "file_size": 13751, "creation_date": "2025-11-25", "last_modified_date": "2025-10-06"}, "hash": "3fb317bcad646dc06dc7f1a477a243fb95a6bd5b63f98de90d71be6b0b14d74e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "gpCAM \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSampling\nOptimization\nModeling and Approximation\ngpCAM\npersistent_gpCAM()\npersistent_gpCAM_covar()\n\npersistent_tasmanian\npersistent_fd_param_finder\npersistent_surmise\n\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nGenerator Functions\ngpCAM\n\n View page source\n\ngpCAM\uf0c1\nRequired: gpcam\nExample usage: test_gpCAM\nThis module provides persistent generators for Gaussian Process-based adaptive sampling.\nPersistent generator exposing gpCAM functionality\n\npersistent_gpCAM.persistent_gpCAM(H_in, persis_info, gen_specs, libE_info)\uf0c1\nThis generation function constructs a global surrogate of f values. It is\na batched method that produces a first batch uniformly random from (lb, ub).\nOn subsequent iterations, it calls an optimization method to produce the next\nbatch of points. This optimization might be too slow (relative to the\nsimulation evaluation time) for some use cases.\n\nSee also\ntest_gpCAM.py\n\npersistent_gpCAM.persistent_gpCAM_covar(H_in, persis_info, gen_specs, libE_info)\uf0c1\nThis generation function constructs a global surrogate of f values.\nIt is a batched method that produces a first batch uniformly random from\n(lb, ub) and on following iterations samples the GP posterior covariance\nfunction to find sample points.\nIf gen_specs[\u201cuser\u201d][\u201cuse_grid\u201d] is set to True, the parameter space is\ndivided into a mesh of candidate points (num_points in each dimension).\nSubsequent points are chosen with maximum covariance that are at least a\ndistance r away from each other to explore difference regions.\nIf gen_specs[\u201cuser\u201d][\u201ctest_points_file\u201d] is set to a file of evaluated\npoints, then the gpCAM predications are compared at these points to assess\nmodel quality.\n\nSee also\ntest_gpCAM.py\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2425, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "97d70283-d2ee-400d-a365-ca24910d25ee": {"__data__": {"id_": "97d70283-d2ee-400d-a365-ca24910d25ee", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/persistent_sampling.html", "file_name": "persistent_sampling.html", "file_type": "text/html", "file_size": 74106, "creation_date": "2025-11-25", "last_modified_date": "2025-10-06"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ebe28150-bf68-463f-8ec5-d3f9ea36c4f2", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/persistent_sampling.html", "file_name": "persistent_sampling.html", "file_type": "text/html", "file_size": 74106, "creation_date": "2025-11-25", "last_modified_date": "2025-10-06"}, "hash": "84ce24418dca4088a238f3b2949880f3f3d6e10d3c4d804391c2e459cda7ab8d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "124c7cc1-1e79-465e-96e6-3204ee9e22e8", "node_type": "1", "metadata": {}, "hash": "76c134687db6186cea88001b05cde5223cdd63139f0604393d4879b3df0df630", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "persistent_sampling \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSampling\nsampling\npersistent_sampling\npersistent_uniform()\npersistent_uniform_final_update()\npersistent_request_shutdown()\nuniform_nonblocking()\nbatched_history_matching()\npersistent_uniform_with_cancellations()\n\npersistent_sampling_var_resources\n\nOptimization\nModeling and Approximation\n\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nGenerator Functions\npersistent_sampling\n\n View page source\n\npersistent_sampling\uf0c1\nPersistent generator providing points using sampling\n\npersistent_sampling.persistent_uniform(_, persis_info, gen_specs, libE_info)\uf0c1\nPersistent Input Fields: ['sim_id']\nOutput Datatypes: [('x', <class 'float'>, (2,))]\nThis generation function always enters into persistent mode and returns\ngen_specs[\"initial_batch_size\"] uniformly sampled points the first time it\nis called. Afterwards, it returns the number of points given. This can be\nused in either a batch or asynchronous mode by adjusting the allocation\nfunction.\n\nSee also\ntest_persistent_uniform_sampling.py\ntest_persistent_uniform_sampling_async.py\n\npersistent_sampling.persistent_uniform_final_update(_, persis_info, gen_specs, libE_info)\uf0c1\nAssuming the value \"f\" returned from sim_f is stochastic, this\ngeneration is updating an estimated mean \"f_est\" of the sim_f output at\neach of the corners of the domain.\n\nSee also\ntest_persistent_uniform_sampling_running_mean.py\n\npersistent_sampling.persistent_request_shutdown(_, persis_info, gen_specs, libE_info)\uf0c1\nThis generation function is similar in structure to persistent_uniform,\nbut uses a count to test exiting on a threshold value. This principle can\nbe used with a supporting allocation function (e.g. start_only_persistent)\nto shutdown an ensemble when a condition is met.\n\nSee also\ntest_persistent_uniform_gen_decides_stop.py\n\npersistent_sampling.uniform_nonblocking(_, persis_info, gen_specs, libE_info)\uf0c1\nThis generation function is designed to test non-blocking receives.\n\nSee also\ntest_persistent_uniform_sampling.py\n\npersistent_sampling.batched_history_matching(_, persis_info, gen_specs, libE_info)\uf0c1\nGiven\n- sim_f with an input of x with len(x)=n\n- b, the batch size of points to generate\n- q<b, the number of best samples to use in the following iteration\nPseudocode:\nLet (mu, Sigma) denote a mean and covariance matrix initialized to the\norigin and the identity, respectively.\nWhile true (batch synchronous for now):\n\nDraw b samples x_1, \u2026 , x_b from MVN( mu, Sigma)\nEvaluate f(x_1), \u2026 , f(x_b) and determine the set of q x_i whose f(x_i) values are smallest (breaking ties lexicographically)\nUpdate (mu, Sigma) based on the sample mean and sample covariance of these q x values.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3240, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "124c7cc1-1e79-465e-96e6-3204ee9e22e8": {"__data__": {"id_": "124c7cc1-1e79-465e-96e6-3204ee9e22e8", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/persistent_sampling.html", "file_name": "persistent_sampling.html", "file_type": "text/html", "file_size": 74106, "creation_date": "2025-11-25", "last_modified_date": "2025-10-06"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ebe28150-bf68-463f-8ec5-d3f9ea36c4f2", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/persistent_sampling.html", "file_name": "persistent_sampling.html", "file_type": "text/html", "file_size": 74106, "creation_date": "2025-11-25", "last_modified_date": "2025-10-06"}, "hash": "84ce24418dca4088a238f3b2949880f3f3d6e10d3c4d804391c2e459cda7ab8d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "97d70283-d2ee-400d-a365-ca24910d25ee", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/persistent_sampling.html", "file_name": "persistent_sampling.html", "file_type": "text/html", "file_size": 74106, "creation_date": "2025-11-25", "last_modified_date": "2025-10-06"}, "hash": "0a85ea7abd0c0dec51c34d26fe44342ed0e7146770d4fdb2682393205eadcf0e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "06d8f725-85d2-449d-bab3-8b125098a1e6", "node_type": "1", "metadata": {}, "hash": "f622a5a6872e252df1be101bed4af6d659cbd03505dbb9ec56a937f5936cdcef", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "See also\ntest_persistent_uniform_sampling.py\n\npersistent_sampling.batched_history_matching(_, persis_info, gen_specs, libE_info)\uf0c1\nGiven\n- sim_f with an input of x with len(x)=n\n- b, the batch size of points to generate\n- q<b, the number of best samples to use in the following iteration\nPseudocode:\nLet (mu, Sigma) denote a mean and covariance matrix initialized to the\norigin and the identity, respectively.\nWhile true (batch synchronous for now):\n\nDraw b samples x_1, \u2026 , x_b from MVN( mu, Sigma)\nEvaluate f(x_1), \u2026 , f(x_b) and determine the set of q x_i whose f(x_i) values are smallest (breaking ties lexicographically)\nUpdate (mu, Sigma) based on the sample mean and sample covariance of these q x values.\n\nSee also\ntest_persistent_uniform_sampling.py\n\npersistent_sampling.persistent_uniform_with_cancellations(_, persis_info, gen_specs, libE_info)\uf0c1\n\npersistent_sampling.py\n 1\"\"\"Persistent generator providing points using sampling\"\"\"\n 2\n 3import numpy as np\n 4\n 5from libensemble.message_numbers import EVAL_GEN_TAG, FINISHED_PERSISTENT_GEN_TAG, PERSIS_STOP, STOP_TAG\n 6from libensemble.specs import output_data, persistent_input_fields\n 7from libensemble.tools.persistent_support import PersistentSupport\n 8\n 9__all__ = [\n 10 \"persistent_uniform\",\n 11 \"persistent_uniform_final_update\",\n 12 \"persistent_request_shutdown\",\n 13 \"uniform_nonblocking\",\n 14 \"batched_history_matching\",\n 15 \"persistent_uniform_with_cancellations\",\n 16]\n 17\n 18\n 19def _get_user_params(user_specs):\n 20 \"\"\"Extract user params\"\"\"\n 21 b = user_specs[\"initial_batch_size\"]\n 22 ub = user_specs[\"ub\"]\n 23 lb = user_specs[\"lb\"]\n 24 n = len(lb) # dimension\n 25 assert isinstance(b, int), \"Batch size must be an integer\"\n 26 assert isinstance(n, int), \"Dimension must be an integer\"\n 27 assert isinstance(lb, np.ndarray), \"lb must be a numpy array\"\n 28 assert isinstance(ub, np.ndarray), \"ub must be a numpy array\"\n 29 return b, n, lb, ub\n 30\n 31\n 32@persistent_input_fields([\"sim_id\"])\n 33@output_data([(\"x\", float, (2,))]) # The dimension of 2 is a default and can be overwritten\n 34def persistent_uniform(_, persis_info, gen_specs, libE_info):\n 35 \"\"\"\n 36 This generation function always enters into persistent mode and returns\n 37 ``gen_specs[\"initial_batch_size\"]`` uniformly sampled points the first time it\n 38 is called. Afterwards, it returns the number of points given. This can be\n 39 used in either a batch or asynchronous mode by adjusting the allocation\n 40 function.", "mimetype": "text/plain", "start_char_idx": 2529, "end_char_idx": 4987, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "06d8f725-85d2-449d-bab3-8b125098a1e6": {"__data__": {"id_": "06d8f725-85d2-449d-bab3-8b125098a1e6", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/persistent_sampling.html", "file_name": "persistent_sampling.html", "file_type": "text/html", "file_size": 74106, "creation_date": "2025-11-25", "last_modified_date": "2025-10-06"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ebe28150-bf68-463f-8ec5-d3f9ea36c4f2", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/persistent_sampling.html", "file_name": "persistent_sampling.html", "file_type": "text/html", "file_size": 74106, "creation_date": "2025-11-25", "last_modified_date": "2025-10-06"}, "hash": "84ce24418dca4088a238f3b2949880f3f3d6e10d3c4d804391c2e459cda7ab8d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "124c7cc1-1e79-465e-96e6-3204ee9e22e8", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/persistent_sampling.html", "file_name": "persistent_sampling.html", "file_type": "text/html", "file_size": 74106, "creation_date": "2025-11-25", "last_modified_date": "2025-10-06"}, "hash": "3dd86f597954ef8619d0584156eba1d19f56e14b200191a343de81d7877b4e03", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2c55c2c4-14fe-4d62-ab03-8a4088fda61d", "node_type": "1", "metadata": {}, "hash": "f9b89061f732b5472cef2269ca305677a91b540ccefb22c4c1bc1bdae83b877a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Afterwards, it returns the number of points given. This can be\n 39 used in either a batch or asynchronous mode by adjusting the allocation\n 40 function.\n 41\n 42 .. seealso::\n 43 `test_persistent_uniform_sampling.py <https://github.com/Libensemble/libensemble/blob/develop/libensemble/tests/functionality_tests/test_persistent_uniform_sampling.py>`_\n 44 `test_persistent_uniform_sampling_async.py <https://github.com/Libensemble/libensemble/blob/develop/libensemble/tests/functionality_tests/test_persistent_uniform_sampling_async.py>`_\n 45 \"\"\" # noqa\n 46\n 47 b, n, lb, ub = _get_user_params(gen_specs[\"user\"])\n 48 ps = PersistentSupport(libE_info, EVAL_GEN_TAG)\n 49\n 50 # Send batches until manager sends stop tag\n 51 tag = None\n 52 while tag not in [STOP_TAG, PERSIS_STOP]:\n 53 H_o = np.zeros(b, dtype=gen_specs[\"out\"])\n 54 H_o[\"x\"] = persis_info[\"rand_stream\"].uniform(lb, ub, (b, n))\n 55 if \"obj_component\" in H_o.dtype.fields:\n 56 H_o[\"obj_component\"] = persis_info[\"rand_stream\"].integers(\n 57 low=0, high=gen_specs[\"user\"][\"num_components\"], size=b\n 58 )\n 59 tag, Work, calc_in = ps.send_recv(H_o)\n 60 if hasattr(calc_in, \"__len__\"):\n 61 b = len(calc_in)\n 62\n 63 return None, persis_info, FINISHED_PERSISTENT_GEN_TAG\n 64\n 65\n 66def persistent_uniform_final_update(_, persis_info, gen_specs, libE_info):\n 67 \"\"\"\n 68 Assuming the value ``\"f\"`` returned from sim_f is stochastic, this\n 69 generation is updating an estimated mean ``\"f_est\"`` of the sim_f output at\n 70 each of the corners of the domain.", "mimetype": "text/plain", "start_char_idx": 4835, "end_char_idx": 6341, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "2c55c2c4-14fe-4d62-ab03-8a4088fda61d": {"__data__": {"id_": "2c55c2c4-14fe-4d62-ab03-8a4088fda61d", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/persistent_sampling.html", "file_name": "persistent_sampling.html", "file_type": "text/html", "file_size": 74106, "creation_date": "2025-11-25", "last_modified_date": "2025-10-06"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ebe28150-bf68-463f-8ec5-d3f9ea36c4f2", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/persistent_sampling.html", "file_name": "persistent_sampling.html", "file_type": "text/html", "file_size": 74106, "creation_date": "2025-11-25", "last_modified_date": "2025-10-06"}, "hash": "84ce24418dca4088a238f3b2949880f3f3d6e10d3c4d804391c2e459cda7ab8d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "06d8f725-85d2-449d-bab3-8b125098a1e6", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/persistent_sampling.html", "file_name": "persistent_sampling.html", "file_type": "text/html", "file_size": 74106, "creation_date": "2025-11-25", "last_modified_date": "2025-10-06"}, "hash": "b61158a0073d91fe31311df44fa6cfb4a3e488955abe36f9654830af53a44da3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6aabec7c-5715-4658-8372-73523ac1f21e", "node_type": "1", "metadata": {}, "hash": "0a2bd42b8bab21d428d77ac2122ce0ef33cf390481c880a7a2e5fd5d77796fcb", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "71\n 72 .. seealso::\n 73 `test_persistent_uniform_sampling_running_mean.py <https://github.com/Libensemble/libensemble/blob/develop/libensemble/tests/functionality_tests/test_persistent_uniform_sampling_running_mean.py>`_\n 74 \"\"\" # noqa\n 75\n 76 b, n, lb, ub = _get_user_params(gen_specs[\"user\"])\n 77 ps = PersistentSupport(libE_info, EVAL_GEN_TAG)\n 78\n 79 def generate_corners(x, y):\n 80 n = len(x)\n 81 corner_indices = np.arange(2**n)\n 82 corners = []\n 83 for index in corner_indices:\n 84 corner = [x[i] if index & (1 << i) else y[i] for i in range(n)]\n 85 corners.append(corner)\n 86 return corners\n 87\n 88 def sample_corners_with_probability(corners, p, b):\n 89 selected_corners = np.random.choice(len(corners), size=b, p=p)\n 90 sampled_corners = [corners[i] for i in selected_corners]\n 91 return sampled_corners, selected_corners\n 92\n 93 corners = generate_corners(lb, ub)\n 94\n 95 # Start with equal probabilities\n 96 p = np.ones(2**n) / 2**n\n 97\n 98 running_total = np.nan * np.ones(2**n)\n 99 number_of_samples = np.zeros(2**n)\n100 sent = np.array([], dtype=int)\n101\n102 # Send batches of `b` points until manager sends stop tag\n103 tag = None\n104 next_id = 0\n105 while tag not in [STOP_TAG, PERSIS_STOP]:\n106 H_o = np.zeros(b, dtype=gen_specs[\"out\"])\n107 H_o[\"sim_id\"] = range(next_id, next_id + b)\n108 next_id += b\n109\n110 sampled_corners, corner_ids = sample_corners_with_probability(corners, p, b)\n111\n112 H_o[\"corner_id\"] = corner_ids\n113 H_o[\"x\"] = sampled_corners\n114 sent = np.append(sent, corner_ids)\n115\n116 tag, Work, calc_in = ps.send_recv(H_o)\n117 if hasattr(calc_in, \"__len__\"):\n118 b = len(calc_in)\n119 for row in calc_in:\n120 number_of_samples[row[\"corner_id\"]] += 1\n121 if np.isnan(running_total[row[\"corner_id\"]]):\n122 running_total[row[\"corner_id\"]] = row[\"f\"]\n123 else:\n124 running_total[row[\"corner_id\"]] += row[\"f\"]\n125\n126 # Having received a PERSIS_STOP, update f_est field for all points and return\n127 # For manager to honor final H_o return, must have set libE_specs[\"use_persis_return_gen\"] = True\n128 f_est = running_total / number_of_samples\n129 H_o = np.zeros(len(sent), dtype=[(\"sim_id\", int), (\"corner_id\", int), (\"f_est\", float)])\n130 for count, i in enumerate(sent):\n131 H_o[\"sim_id\"][count] = count\n132 H_o[\"corner_id\"][count] = i\n133 H_o[\"f_est\"][count] = f_est[i]\n134\n135 return H_o, persis_info, FINISHED_PERSISTENT_GEN_TAG\n136\n137\n138def persistent_request_shutdown(_, persis_info, gen_specs, libE_info):\n139 \"\"\"\n140 This generation function is similar in structure to persistent_uniform,\n141 but uses a count to test exiting on a threshold value. This principle can\n142 be used with a supporting allocation function (e.g. start_only_persistent)\n143 to shutdown an ensemble when a condition is met.", "mimetype": "text/plain", "start_char_idx": 6343, "end_char_idx": 9084, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "6aabec7c-5715-4658-8372-73523ac1f21e": {"__data__": {"id_": "6aabec7c-5715-4658-8372-73523ac1f21e", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/persistent_sampling.html", "file_name": "persistent_sampling.html", "file_type": "text/html", "file_size": 74106, "creation_date": "2025-11-25", "last_modified_date": "2025-10-06"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ebe28150-bf68-463f-8ec5-d3f9ea36c4f2", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/persistent_sampling.html", "file_name": "persistent_sampling.html", "file_type": "text/html", "file_size": 74106, "creation_date": "2025-11-25", "last_modified_date": "2025-10-06"}, "hash": "84ce24418dca4088a238f3b2949880f3f3d6e10d3c4d804391c2e459cda7ab8d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2c55c2c4-14fe-4d62-ab03-8a4088fda61d", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/persistent_sampling.html", "file_name": "persistent_sampling.html", "file_type": "text/html", "file_size": 74106, "creation_date": "2025-11-25", "last_modified_date": "2025-10-06"}, "hash": "63464c2fbe9de1824938f173cd540b79ede288498fee86ff61899d695d90e146", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "28f2a888-7fac-418e-b0b1-88a95f027629", "node_type": "1", "metadata": {}, "hash": "5056b47b8c78c9151a7eca0395b9348cc1c28beb4727532350059a39d77ecf00", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "This principle can\n142 be used with a supporting allocation function (e.g. start_only_persistent)\n143 to shutdown an ensemble when a condition is met.\n144\n145 .. seealso::\n146 `test_persistent_uniform_gen_decides_stop.py <https://github.com/Libensemble/libensemble/blob/develop/libensemble/tests/functionality_tests/test_persistent_uniform_gen_decides_stop.py>`_\n147 \"\"\" # noqa\n148 b, n, lb, ub = _get_user_params(gen_specs[\"user\"])\n149 shutdown_limit = gen_specs[\"user\"][\"shutdown_limit\"]\n150 f_count = 0\n151 ps = PersistentSupport(libE_info, EVAL_GEN_TAG)\n152\n153 # Send batches until manager sends stop tag\n154 tag = None\n155 while tag not in [STOP_TAG, PERSIS_STOP]:\n156 H_o = np.zeros(b, dtype=gen_specs[\"out\"])\n157 H_o[\"x\"] = persis_info[\"rand_stream\"].uniform(lb, ub, (b, n))\n158 tag, Work, calc_in = ps.send_recv(H_o)\n159 if hasattr(calc_in, \"__len__\"):\n160 b = len(calc_in)\n161 f_count += b\n162 if f_count >= shutdown_limit:\n163 print(\"Reached threshold.\", f_count, flush=True)\n164 break # End the persistent gen\n165\n166 return None, persis_info, FINISHED_PERSISTENT_GEN_TAG\n167\n168\n169def uniform_nonblocking(_, persis_info, gen_specs, libE_info):\n170 \"\"\"\n171 This generation function is designed to test non-blocking receives.\n172\n173 .. seealso::\n174 `test_persistent_uniform_sampling.py <https://github.com/Libensemble/libensemble/blob/develop/libensemble/tests/functionality_tests/test_persistent_uniform_sampling.py>`_\n175 \"\"\" # noqa\n176 b, n, lb, ub = _get_user_params(gen_specs[\"user\"])\n177 ps = PersistentSupport(libE_info, EVAL_GEN_TAG)\n178\n179 # Send batches until manager sends stop tag\n180 tag = None\n181 while tag not in [STOP_TAG, PERSIS_STOP]:\n182 H_o = np.zeros(b, dtype=gen_specs[\"out\"])\n183 H_o[\"x\"] = persis_info[\"rand_stream\"].uniform(lb, ub, (b, n))\n184 ps.send(H_o)\n185\n186 received = False\n187 spin_count = 0\n188 while not received:\n189 tag, Work, calc_in = ps.recv(blocking=False)\n190 if tag is not None:\n191 received = True\n192 else:\n193 spin_count += 1\n194\n195 persis_info[\"spin_count\"] = spin_count\n196\n197 if hasattr(calc_in, \"__len__\"):\n198 b = len(calc_in)\n199\n200 return None, persis_info, FINISHED_PERSISTENT_GEN_TAG\n201\n202\n203def batched_history_matching(_, persis_info, gen_specs, libE_info):\n204 \"\"\"\n205 Given\n206 - sim_f with an input of x with len(x)=n\n207 - b, the batch size of points to generate\n208 - q<b, the number of best samples to use in the following iteration\n209\n210 Pseudocode:\n211 Let (mu, Sigma) denote a mean and covariance matrix initialized to the\n212 origin and the identity, respectively.\n213\n214 While true (batch synchronous for now):\n215\n216 Draw b samples x_1, ... , x_b from MVN( mu, Sigma)\n217 Evaluate f(x_1), ... , f(x_b) and determine the set of q x_i whose f(x_i) values are smallest (breaking ties lexicographically)\n218 Update (mu, Sigma) based on the sample mean and sample covariance of these q x values.", "mimetype": "text/plain", "start_char_idx": 8934, "end_char_idx": 11820, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "28f2a888-7fac-418e-b0b1-88a95f027629": {"__data__": {"id_": "28f2a888-7fac-418e-b0b1-88a95f027629", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/persistent_sampling.html", "file_name": "persistent_sampling.html", "file_type": "text/html", "file_size": 74106, "creation_date": "2025-11-25", "last_modified_date": "2025-10-06"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ebe28150-bf68-463f-8ec5-d3f9ea36c4f2", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/persistent_sampling.html", "file_name": "persistent_sampling.html", "file_type": "text/html", "file_size": 74106, "creation_date": "2025-11-25", "last_modified_date": "2025-10-06"}, "hash": "84ce24418dca4088a238f3b2949880f3f3d6e10d3c4d804391c2e459cda7ab8d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6aabec7c-5715-4658-8372-73523ac1f21e", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/persistent_sampling.html", "file_name": "persistent_sampling.html", "file_type": "text/html", "file_size": 74106, "creation_date": "2025-11-25", "last_modified_date": "2025-10-06"}, "hash": "98b6c90edf0dcea538f7f6d1a218d1a525c8bbfb5a375fd6ab314038f970fa22", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "213\n214 While true (batch synchronous for now):\n215\n216 Draw b samples x_1, ... , x_b from MVN( mu, Sigma)\n217 Evaluate f(x_1), ... , f(x_b) and determine the set of q x_i whose f(x_i) values are smallest (breaking ties lexicographically)\n218 Update (mu, Sigma) based on the sample mean and sample covariance of these q x values.\n219\n220 .. seealso::\n221 `test_persistent_uniform_sampling.py <https://github.com/Libensemble/libensemble/blob/develop/libensemble/tests/functionality_tests/test_persistent_uniform_sampling.py>`_\n222 \"\"\" # noqa\n223 lb = gen_specs[\"user\"][\"lb\"]\n224\n225 n = len(lb)\n226 b = gen_specs[\"user\"][\"initial_batch_size\"]\n227 q = gen_specs[\"user\"][\"num_best_vals\"]\n228 ps = PersistentSupport(libE_info, EVAL_GEN_TAG)\n229\n230 mu = np.zeros(n)\n231 Sigma = np.eye(n)\n232 tag = None\n233\n234 while tag not in [STOP_TAG, PERSIS_STOP]:\n235 H_o = np.zeros(b, dtype=gen_specs[\"out\"])\n236 H_o[\"x\"] = persis_info[\"rand_stream\"].multivariate_normal(mu, Sigma, b)\n237\n238 # Send data and get next assignment\n239 tag, Work, calc_in = ps.send_recv(H_o)\n240 if calc_in is not None:\n241 all_inds = np.argsort(calc_in[\"f\"])\n242 best_inds = all_inds[:q]\n243 mu = np.mean(H_o[\"x\"][best_inds], axis=0)\n244 Sigma = np.cov(H_o[\"x\"][best_inds].T)\n245\n246 return None, persis_info, FINISHED_PERSISTENT_GEN_TAG\n247\n248\n249def persistent_uniform_with_cancellations(_, persis_info, gen_specs, libE_info):\n250 ub = gen_specs[\"user\"][\"ub\"]\n251 lb = gen_specs[\"user\"][\"lb\"]\n252 n = len(lb)\n253 b = gen_specs[\"user\"][\"initial_batch_size\"]\n254\n255 # Start cancelling points from half initial batch onward\n256 cancel_from = b // 2 # Should get at least this many points back\n257\n258 ps = PersistentSupport(libE_info, EVAL_GEN_TAG)\n259\n260 # Send batches until manager sends stop tag\n261 tag = None\n262 while tag not in [STOP_TAG, PERSIS_STOP]:\n263 H_o = np.zeros(b, dtype=gen_specs[\"out\"])\n264 H_o[\"x\"] = persis_info[\"rand_stream\"].uniform(lb, ub, (b, n))\n265 tag, Work, calc_in = ps.send_recv(H_o)\n266\n267 if hasattr(calc_in, \"__len__\"):\n268 b = len(calc_in)\n269\n270 # Cancel as many points as got back\n271 cancel_ids = list(range(cancel_from, cancel_from + b))\n272 cancel_from += b\n273 ps.request_cancel_sim_ids(cancel_ids)\n274\n275 return None, persis_info, FINISHED_PERSISTENT_GEN_TAG\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 11491, "end_char_idx": 13891, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "012ebb33-8736-40e5-9703-50b4e3116c8c": {"__data__": {"id_": "012ebb33-8736-40e5-9703-50b4e3116c8c", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/persistent_sampling_var_resources.html", "file_name": "persistent_sampling_var_resources.html", "file_type": "text/html", "file_size": 20137, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "62ef9d97-c35d-49c3-9a44-7f8b2549c997", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/persistent_sampling_var_resources.html", "file_name": "persistent_sampling_var_resources.html", "file_type": "text/html", "file_size": 20137, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "eadc78d0ee9e90a84059ff412d3698409292429286f27e9634cd44a69dc7e957", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "persistent_sampling_var_resources \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSampling\nsampling\npersistent_sampling\npersistent_sampling_var_resources\nuniform_sample()\nuniform_sample_with_var_gpus()\nuniform_sample_with_procs_gpus()\nuniform_sample_with_var_priorities()\nuniform_sample_diff_simulations()\nuniform_sample_with_sim_gen_resources()\n\nOptimization\nModeling and Approximation\n\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nGenerator Functions\npersistent_sampling_var_resources\n\n View page source\n\npersistent_sampling_var_resources\uf0c1\nPersistent random sampling using various methods of dynamic resource assignment\nEach function generates points uniformly over the domain defined by gen_specs[\"user\"][\"ub\"]\nand gen_specs[\"user\"][\"lb\"].\nMost functions use a random request of resources over a range, setting num_procs, num_gpus, or\nresource sets. The function uniform_sample_with_var_gpus uses the x value to determine\nthe number of GPUs requested.\n\npersistent_sampling_var_resources.uniform_sample(_, persis_info, gen_specs, libE_info)\uf0c1\nRandomly requests a different number of resource sets to be used in the\nevaluation of the generated points.\n\nSee also\ntest_uniform_sampling_with_variable_resources.py\n\npersistent_sampling_var_resources.uniform_sample_with_var_gpus(_, persis_info, gen_specs, libE_info)\uf0c1\nRequests a number of GPUs based on the x value to be used in the evaluation\nof the generated points. By default, simulations will assign one MPI processor\nper GPU.\nNote that the num_gpus gen_specs[\u201cout\u201d] option (similar to num_procs) does\nnot need to be passed as a sim_specs[\u201cin\u201d]. It will automatically be passed to\nsimulation functions and used by any MPI Executor unless overridden in the\nexecutor.submit function.\n\nSee also\ntest_GPU_variable_resources.py\n\npersistent_sampling_var_resources.uniform_sample_with_procs_gpus(_, persis_info, gen_specs, libE_info)\uf0c1\nRandomly requests a different number of processors and gpus to be used in the\nevaluation of the generated points.\n\nSee also\ntest_GPU_variable_resources.py\n\npersistent_sampling_var_resources.uniform_sample_with_var_priorities(_, persis_info, gen_specs, libE_info)\uf0c1\nInitial batch has matching priorities, after which a different number of\nresource sets and priorities are requested for each point.\n\npersistent_sampling_var_resources.uniform_sample_diff_simulations(_, persis_info, gen_specs, libE_info)\uf0c1\nRandomly requests a different number of processors for each simulation.\nOne simulation type also uses GPUs.\n\nSee also\ntest_GPU_variable_resources_multi_task.py\n\npersistent_sampling_var_resources.uniform_sample_with_sim_gen_resources(_, persis_info, gen_specs, libE_info)\uf0c1\nRandomly requests a different number of processors and gpus to be used in the\nevaluation of the generated points.\n\nSee also\ntest_GPU_variable_resources.py\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3490, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "09641bb6-cd92-4394-a8ea-1a89d405b5a9": {"__data__": {"id_": "09641bb6-cd92-4394-a8ea-1a89d405b5a9", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sampling.html", "file_name": "sampling.html", "file_type": "text/html", "file_size": 57970, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c4c3862b-7043-46ad-8f44-1e55f33861ce", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sampling.html", "file_name": "sampling.html", "file_type": "text/html", "file_size": 57970, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "a12c45cc082092d4a50e132da786f675e817ef91759330839270f801122d7006", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e1c470a6-7e81-4257-8fe2-ce4733cee212", "node_type": "1", "metadata": {}, "hash": "6f84038a6b64d00494a24a34f26dc7b34bb0f91fb38496e6decc938893204e6a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "sampling \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSampling\nsampling\nuniform_random_sample()\nuniform_random_sample_with_variable_resources()\nuniform_random_sample_with_var_priorities_and_resources()\nuniform_random_sample_obj_components()\nlatin_hypercube_sample()\nuniform_random_sample_cancel()\n\npersistent_sampling\npersistent_sampling_var_resources\n\nOptimization\nModeling and Approximation\n\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nGenerator Functions\nsampling\n\n View page source\n\nsampling\uf0c1\nThis module contains multiple generator functions for sampling a domain.\n\nsampling.uniform_random_sample(_, persis_info, gen_specs)\uf0c1\nOutput Datatypes: [('x', <class 'float'>, 2)]\nGenerates gen_specs[\"user\"][\"gen_batch_size\"] points uniformly over the domain\ndefined by gen_specs[\"user\"][\"ub\"] and gen_specs[\"user\"][\"lb\"].\n\nSee also\ntest_uniform_sampling.py\n\nsampling.uniform_random_sample_with_variable_resources(_, persis_info, gen_specs)\uf0c1\nGenerates gen_specs[\"user\"][\"gen_batch_size\"] points uniformly over the domain\ndefined by gen_specs[\"user\"][\"ub\"] and gen_specs[\"user\"][\"lb\"].\nAlso randomly requests a different number of resource sets to be used in each evaluation.\nThis generator is used to test/demonstrate setting of resource sets.\n\nSee also\ntest_uniform_sampling_with_variable_resources.py\n\nsampling.uniform_random_sample_with_var_priorities_and_resources(H, persis_info, gen_specs)\uf0c1\nGenerates points uniformly over the domain defined by gen_specs[\"user\"][\"ub\"] and\ngen_specs[\"user\"][\"lb\"]. Also, randomly requests a different priority and number of\nresource sets to be used in the evaluation of the generated points, after the initial batch.\nThis generator is used to test/demonstrate setting of priorities and resource sets.\n\nsampling.uniform_random_sample_obj_components(H, persis_info, gen_specs)\uf0c1\nGenerates points uniformly over the domain defined by gen_specs[\"user\"][\"ub\"]\nand gen_specs[\"user\"][\"lb\"] but requests each obj_component be evaluated\nseparately.\n\nSee also\ntest_uniform_sampling_one_residual_at_a_time.py\n\nsampling.latin_hypercube_sample(_, persis_info, gen_specs)\uf0c1\nOutput Datatypes: [('x', <class 'float'>, (1,))]\nGenerates gen_specs[\"user\"][\"gen_batch_size\"] points in a Latin\nhypercube sample over the domain defined by gen_specs[\"user\"][\"ub\"] and\ngen_specs[\"user\"][\"lb\"].\n\nSee also\ntest_1d_sampling.py\n\nsampling.uniform_random_sample_cancel(_, persis_info, gen_specs)\uf0c1\nSimilar to uniform_random_sample but with immediate cancellation of\nselected points for testing.\n\nsampling.py\n 1\"\"\"\n 2This module contains multiple generator functions for sampling a domain.\n 3\"\"\"\n 4\n 5import numpy as np\n 6\n 7from libensemble.specs import output_data\n 8\n 9__all__ = [\n 10 \"uniform_random_sample\",\n 11 \"uniform_random_sample_with_variable_resources\",\n 12 \"uniform_random_sample_with_var_priorities_and_resources\",\n 13 \"uniform_random_sample_obj_components\",\n 14 \"latin_hypercube_sample\",\n 15 \"uniform_random_sample_cancel\",\n 16]\n 17\n 18\n 19@output_data([(\"x\", float, 2)]) # default: can be overwritten in gen_specs\n 20def uniform_random_sample(_, persis_info, gen_specs):\n 21 \"\"\"\n 22 Generates ``gen_specs[\"user\"][\"gen_batch_size\"]`` points uniformly over the domain\n 23 defined by ``gen_specs[\"user\"][\"ub\"]`` and ``gen_specs[\"user\"][\"lb\"]``.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3818, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "e1c470a6-7e81-4257-8fe2-ce4733cee212": {"__data__": {"id_": "e1c470a6-7e81-4257-8fe2-ce4733cee212", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sampling.html", "file_name": "sampling.html", "file_type": "text/html", "file_size": 57970, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c4c3862b-7043-46ad-8f44-1e55f33861ce", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sampling.html", "file_name": "sampling.html", "file_type": "text/html", "file_size": 57970, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "a12c45cc082092d4a50e132da786f675e817ef91759330839270f801122d7006", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "09641bb6-cd92-4394-a8ea-1a89d405b5a9", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sampling.html", "file_name": "sampling.html", "file_type": "text/html", "file_size": 57970, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "d6eede39f01dd35f13fadf23afe0274c4bba4333d19802e46b9237db06465595", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a74f8232-a40b-49e8-8ea1-80b6d317657d", "node_type": "1", "metadata": {}, "hash": "7d2d8aae1b962253cc8315605dd4fcf11099dca692af73ca15c25d4b6db7bc7e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "3\"\"\"\n 4\n 5import numpy as np\n 6\n 7from libensemble.specs import output_data\n 8\n 9__all__ = [\n 10 \"uniform_random_sample\",\n 11 \"uniform_random_sample_with_variable_resources\",\n 12 \"uniform_random_sample_with_var_priorities_and_resources\",\n 13 \"uniform_random_sample_obj_components\",\n 14 \"latin_hypercube_sample\",\n 15 \"uniform_random_sample_cancel\",\n 16]\n 17\n 18\n 19@output_data([(\"x\", float, 2)]) # default: can be overwritten in gen_specs\n 20def uniform_random_sample(_, persis_info, gen_specs):\n 21 \"\"\"\n 22 Generates ``gen_specs[\"user\"][\"gen_batch_size\"]`` points uniformly over the domain\n 23 defined by ``gen_specs[\"user\"][\"ub\"]`` and ``gen_specs[\"user\"][\"lb\"]``.\n 24\n 25 .. seealso::\n 26 `test_uniform_sampling.py <https://github.com/Libensemble/libensemble/blob/develop/libensemble/tests/functionality_tests/test_uniform_sampling.py>`_ # noqa\n 27 \"\"\"\n 28 ub = gen_specs[\"user\"][\"ub\"]\n 29 lb = gen_specs[\"user\"][\"lb\"]\n 30\n 31 n = len(lb)\n 32 b = gen_specs[\"user\"][\"gen_batch_size\"]\n 33\n 34 H_o = np.zeros(b, dtype=gen_specs[\"out\"])\n 35\n 36 H_o[\"x\"] = persis_info[\"rand_stream\"].uniform(lb, ub, (b, n))\n 37\n 38 return H_o, persis_info\n 39\n 40\n 41def uniform_random_sample_with_variable_resources(_, persis_info, gen_specs):\n 42 \"\"\"\n 43 Generates ``gen_specs[\"user\"][\"gen_batch_size\"]`` points uniformly over the domain\n 44 defined by ``gen_specs[\"user\"][\"ub\"]`` and ``gen_specs[\"user\"][\"lb\"]``.\n 45\n 46 Also randomly requests a different number of resource sets to be used in each evaluation.\n 47\n 48 This generator is used to test/demonstrate setting of resource sets.\n 49\n 50 .. seealso::\n 51 `test_uniform_sampling_with_variable_resources.py <https://github.com/Libensemble/libensemble/blob/develop/libensemble/tests/functionality_tests/test_uniform_sampling_with_variable_resources.py>`_ # noqa\n 52 \"\"\"\n 53\n 54 ub = gen_specs[\"user\"][\"ub\"]\n 55 lb = gen_specs[\"user\"][\"lb\"]\n 56 max_rsets = gen_specs[\"user\"][\"max_resource_sets\"]\n 57\n 58 n = len(lb)\n 59 b = gen_specs[\"user\"][\"gen_batch_size\"]\n 60\n 61 H_o = np.zeros(b, dtype=gen_specs[\"out\"])\n 62\n 63 H_o[\"x\"] = persis_info[\"rand_stream\"].uniform(lb, ub, (b, n))\n 64 H_o[\"resource_sets\"] = persis_info[\"rand_stream\"].integers(1, max_rsets + 1, b)\n 65\n 66 print(f'GEN: H rsets requested: {H_o[\"resource_sets\"]}')\n 67\n 68 return H_o, persis_info\n 69\n 70\n 71def uniform_random_sample_with_var_priorities_and_resources(H, persis_info, gen_specs):\n 72 \"\"\"\n 73 Generates points uniformly over the domain defined by ``gen_specs[\"user\"][\"ub\"]`` and\n 74 ``gen_specs[\"user\"][\"lb\"]``. Also, randomly requests a different priority and number of\n 75 resource sets to be used in the evaluation of the generated points, after the initial batch.\n 76\n 77 This generator is used to test/demonstrate setting of priorities and resource sets.", "mimetype": "text/plain", "start_char_idx": 3152, "end_char_idx": 5929, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a74f8232-a40b-49e8-8ea1-80b6d317657d": {"__data__": {"id_": "a74f8232-a40b-49e8-8ea1-80b6d317657d", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sampling.html", "file_name": "sampling.html", "file_type": "text/html", "file_size": 57970, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c4c3862b-7043-46ad-8f44-1e55f33861ce", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sampling.html", "file_name": "sampling.html", "file_type": "text/html", "file_size": 57970, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "a12c45cc082092d4a50e132da786f675e817ef91759330839270f801122d7006", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e1c470a6-7e81-4257-8fe2-ce4733cee212", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sampling.html", "file_name": "sampling.html", "file_type": "text/html", "file_size": 57970, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "7d2027831bfffae60724f278f8b35be04ef137e70eca8217f65a4b1e733fbb10", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "49efe6d8-dbd3-472c-b0fa-e63078e4ca86", "node_type": "1", "metadata": {}, "hash": "9d0464df55ea98f86404a936312b34900589a061b87649d0e72d14db6fd64168", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Also, randomly requests a different priority and number of\n 75 resource sets to be used in the evaluation of the generated points, after the initial batch.\n 76\n 77 This generator is used to test/demonstrate setting of priorities and resource sets.\n 78\n 79 \"\"\"\n 80 ub = gen_specs[\"user\"][\"ub\"]\n 81 lb = gen_specs[\"user\"][\"lb\"]\n 82 max_rsets = gen_specs[\"user\"][\"max_resource_sets\"]\n 83\n 84 n = len(lb)\n 85\n 86 if len(H) == 0:\n 87 b = gen_specs[\"user\"][\"initial_batch_size\"]\n 88\n 89 H_o = np.zeros(b, dtype=gen_specs[\"out\"])\n 90 for i in range(0, b):\n 91 # x= i*np.ones(n)\n 92 x = persis_info[\"rand_stream\"].uniform(lb, ub, (1, n))\n 93 H_o[\"x\"][i] = x\n 94 H_o[\"resource_sets\"][i] = 1\n 95 H_o[\"priority\"] = 1\n 96\n 97 else:\n 98 H_o = np.zeros(1, dtype=gen_specs[\"out\"])\n 99 # H_o[\"x\"] = len(H)*np.ones(n) # Can use a simple count for testing.\n100 H_o[\"x\"] = persis_info[\"rand_stream\"].uniform(lb, ub)\n101 H_o[\"resource_sets\"] = persis_info[\"rand_stream\"].integers(1, max_rsets + 1)\n102 H_o[\"priority\"] = 10 * H_o[\"resource_sets\"]\n103 # print(\"Created sim for {} resource sets\".format(H_o[\"resource_sets\"]), flush=True)\n104\n105 return H_o, persis_info\n106\n107\n108def uniform_random_sample_obj_components(H, persis_info, gen_specs):\n109 \"\"\"\n110 Generates points uniformly over the domain defined by ``gen_specs[\"user\"][\"ub\"]``\n111 and ``gen_specs[\"user\"][\"lb\"]`` but requests each ``obj_component`` be evaluated\n112 separately.\n113\n114 .. seealso::\n115 `test_uniform_sampling_one_residual_at_a_time.py <https://github.com/Libensemble/libensemble/blob/develop/libensemble/tests/functionality_tests/test_uniform_sampling_one_residual_at_a_time.py>`_ # noqa\n116 \"\"\"\n117 ub = gen_specs[\"user\"][\"ub\"]\n118 lb = gen_specs[\"user\"][\"lb\"]\n119\n120 n = len(lb)\n121 m = gen_specs[\"user\"][\"components\"]\n122 b = gen_specs[\"user\"][\"gen_batch_size\"]\n123\n124 H_o = np.zeros(b * m, dtype=gen_specs[\"out\"])\n125 for i in range(0, b):\n126 x = persis_info[\"rand_stream\"].uniform(lb, ub, (1, n))\n127 H_o[\"x\"][i * m : (i + 1) * m, :] = np.tile(x, (m, 1))\n128 H_o[\"priority\"][i * m : (i + 1) * m] = persis_info[\"rand_stream\"].uniform(0, 1, m)\n129 H_o[\"obj_component\"][i * m : (i + 1) * m] = np.arange(0, m)\n130\n131 H_o[\"pt_id\"][i * m : (i + 1) * m] = len(H) // m + i\n132\n133 return H_o, persis_info\n134\n135\n136def uniform_random_sample_cancel(_, persis_info, gen_specs):\n137 \"\"\"\n138 Similar to uniform_random_sample but with immediate cancellation of\n139 selected points for testing.", "mimetype": "text/plain", "start_char_idx": 5682, "end_char_idx": 8133, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "49efe6d8-dbd3-472c-b0fa-e63078e4ca86": {"__data__": {"id_": "49efe6d8-dbd3-472c-b0fa-e63078e4ca86", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sampling.html", "file_name": "sampling.html", "file_type": "text/html", "file_size": 57970, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c4c3862b-7043-46ad-8f44-1e55f33861ce", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sampling.html", "file_name": "sampling.html", "file_type": "text/html", "file_size": 57970, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "a12c45cc082092d4a50e132da786f675e817ef91759330839270f801122d7006", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a74f8232-a40b-49e8-8ea1-80b6d317657d", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sampling.html", "file_name": "sampling.html", "file_type": "text/html", "file_size": 57970, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "d926e9fc432d890e4efe335d639763ea4bc3a3270ff76b64d26b59586f3be179", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "140\n141 \"\"\"\n142 ub = gen_specs[\"user\"][\"ub\"]\n143 lb = gen_specs[\"user\"][\"lb\"]\n144\n145 n = len(lb)\n146 b = gen_specs[\"user\"][\"gen_batch_size\"]\n147\n148 H_o = np.zeros(b, dtype=gen_specs[\"out\"])\n149 for i in range(b):\n150 if i % 10 == 0:\n151 H_o[i][\"cancel_requested\"] = True\n152\n153 H_o[\"x\"] = persis_info[\"rand_stream\"].uniform(lb, ub, (b, n))\n154\n155 return H_o, persis_info\n156\n157\n158@output_data([(\"x\", float, (1,))])\n159def latin_hypercube_sample(_, persis_info, gen_specs):\n160 \"\"\"\n161 Generates ``gen_specs[\"user\"][\"gen_batch_size\"]`` points in a Latin\n162 hypercube sample over the domain defined by ``gen_specs[\"user\"][\"ub\"]`` and\n163 ``gen_specs[\"user\"][\"lb\"]``.\n164\n165 .. seealso::\n166 `test_1d_sampling.py <https://github.com/Libensemble/libensemble/blob/develop/libensemble/tests/regression_tests/test_1d_sampling.py>`_ # noqa\n167 \"\"\"\n168\n169 ub = gen_specs[\"user\"][\"ub\"]\n170 lb = gen_specs[\"user\"][\"lb\"]\n171\n172 n = len(lb)\n173 b = gen_specs[\"user\"][\"gen_batch_size\"]\n174\n175 H_o = np.zeros(b, dtype=gen_specs[\"out\"])\n176\n177 A = lhs_sample(n, b, persis_info[\"rand_stream\"])\n178\n179 H_o[\"x\"] = A * (ub - lb) + lb\n180\n181 return H_o, persis_info\n182\n183\n184def lhs_sample(n, k, stream):\n185 # Generate the intervals and random values\n186 intervals = np.linspace(0, 1, k + 1)\n187 rand_source = stream.uniform(0, 1, (k, n))\n188 rand_pts = np.zeros((k, n))\n189 sample = np.zeros((k, n))\n190\n191 # Add a point uniformly in each interval\n192 a = intervals[:k]\n193 b = intervals[1:]\n194 for j in range(n):\n195 rand_pts[:, j] = rand_source[:, j] * (b - a) + a\n196\n197 # Randomly perturb\n198 for j in range(n):\n199 sample[:, j] = rand_pts[stream.permutation(k), j]\n200\n201 return sample\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 8134, "end_char_idx": 9952, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "2de9926e-b19d-4491-9b78-171949d004ee": {"__data__": {"id_": "2de9926e-b19d-4491-9b78-171949d004ee", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/borehole.html", "file_name": "borehole.html", "file_type": "text/html", "file_size": 33416, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fcc96376-d413-46f0-88bc-b942a88b63bd", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/borehole.html", "file_name": "borehole.html", "file_type": "text/html", "file_size": 33416, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "436e82374b4cbffba4b319b434bf9d151024d1ac210ec32243084bcba4c7e2ac", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7e9ae8e3-727d-4321-bd2c-3c377c514ea9", "node_type": "1", "metadata": {}, "hash": "a08aa8d0f242cd0b4e1fa30a41b63688aa1c4c38338939fe1fe941294ebae626", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "borehole \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nSimple simulation functions\nBorehole function\nborehole()\nborehole_func()\ngen_borehole_input()\n\nBorehole function with kills\nChwirut1 vector-valued function\nInverse Bayesian likelihood\nNorm\nRosenbrock test optimization function\nSix Hump Camel\nTest noisy function\nTest periodic function\n\nFunctions that run user applications\nSpecial simulation functions\n\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nSimulation Functions\nborehole\n\n View page source\n\nborehole\uf0c1\n\nborehole.borehole(H, persis_info, sim_specs, _)\uf0c1\nWraps the borehole function\n\nborehole.borehole_func(x)\uf0c1\nThis evaluates the Borehole function for n-by-8 input\nmatrix x, and returns the flow rate through the Borehole. (Harper and Gupta, 1983)\ninput:\n\nParameters:\nx (numpy.typing.NDArray) \u2013 x[:,0]: Tu, transmissivity of upper aquifer (m^2/year)\nx[:,1]: Tl, transmissivity of lower aquifer (m^2/year)\nx[:,2]: Hu, potentiometric head of upper aquifer (m)\nx[:,3]: Hl, potentiometric head of lower aquifer (m)\nx[:,4]: r, radius of influence (m)\nx[:,5]: rw, radius of borehole (m)\nx[:,6]: Kw, hydraulic conductivity of borehole (m/year)\nx[:,7]: L, length of borehole (m)\n\nReturns:\nf \u2013 vector of dimension (n, 1): flow rate through the Borehole (m^3/year)\n\nReturn type:\nnumpy.ndarray\n\nborehole.gen_borehole_input(n)\uf0c1\nGenerates and returns n inputs for the Borehole function, according to distributions\noutlined in Harper and Gupta (1983).\n\ninput:n: number of input to generate\n\noutput:matrix of (n, 8), input to borehole_func(x) function\n\nborehole.py\n 1import numpy as np\n 2import numpy.typing as npt\n 3\n 4bounds = np.array(\n 5 [\n 6 [63070, 115600],\n 7 [63.1, 116],\n 8 [990, 1110],\n 9 [700, 820],\n10 [0, np.inf], # Not sure if the physics have a more meaningful upper bound\n11 [0.05, 0.15], # Very low probability of being outside of this range\n12 [9855, 12045],\n13 [1120, 1680],\n14 ]\n15)\n16\n17\n18def borehole(H, persis_info, sim_specs, _):\n19 \"\"\"\n20 Wraps the borehole function\n21 \"\"\"\n22 H_o = np.zeros(H[\"x\"].shape[0], dtype=sim_specs[\"out\"])\n23 H_o[\"f\"] = borehole_func(H[\"x\"])\n24\n25 return H_o, persis_info\n26\n27\n28def borehole_func(x: npt.NDArray):\n29 \"\"\"This evaluates the Borehole function for n-by-8 input\n30 matrix x, and returns the flow rate through the Borehole.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2839, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "7e9ae8e3-727d-4321-bd2c-3c377c514ea9": {"__data__": {"id_": "7e9ae8e3-727d-4321-bd2c-3c377c514ea9", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/borehole.html", "file_name": "borehole.html", "file_type": "text/html", "file_size": 33416, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fcc96376-d413-46f0-88bc-b942a88b63bd", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/borehole.html", "file_name": "borehole.html", "file_type": "text/html", "file_size": 33416, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "436e82374b4cbffba4b319b434bf9d151024d1ac210ec32243084bcba4c7e2ac", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2de9926e-b19d-4491-9b78-171949d004ee", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/borehole.html", "file_name": "borehole.html", "file_type": "text/html", "file_size": 33416, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "e3f54bacc8d29cd67564b1c9ec2ab1ff5dc6614e73769f67ca8f836fcf148f8a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "(Harper and Gupta, 1983)\n31 input:\n32\n33 Parameters\n34 ----------\n35\n36 x: numpy.typing.NDArray\n37\n38 .. code-block::\n39\n40 x[:,0]: Tu, transmissivity of upper aquifer (m^2/year)\n41 x[:,1]: Tl, transmissivity of lower aquifer (m^2/year)\n42 x[:,2]: Hu, potentiometric head of upper aquifer (m)\n43 x[:,3]: Hl, potentiometric head of lower aquifer (m)\n44 x[:,4]: r, radius of influence (m)\n45 x[:,5]: rw, radius of borehole (m)\n46 x[:,6]: Kw, hydraulic conductivity of borehole (m/year)\n47 x[:,7]: L, length of borehole (m)\n48\n49 Returns\n50 -------\n51\n52 f: numpy.ndarray\n53 vector of dimension (n, 1): flow rate through the Borehole (m^3/year)\n54\n55 \"\"\"\n56\n57 assert np.all(x >= bounds[:, 0]) and np.all(x <= bounds[:, 1]), \"Point not within bounds\"\n58\n59 axis = 1\n60 if x.ndim == 1:\n61 axis = 0\n62\n63 (Tu, Tl, Hu, Hl, r, rw, Kw, L) = np.split(x, 8, axis)\n64\n65 numer = 2 * np.pi * Tu * (Hu - Hl)\n66 denom1 = 2 * L * Tu / (np.log(r / rw) * rw**2 * Kw)\n67 denom2 = Tu / Tl\n68\n69 return ((numer / (np.log(r / rw) * (1 + denom1 + denom2))).reshape(-1))[0]\n70\n71\n72def gen_borehole_input(n):\n73 \"\"\"Generates and returns n inputs for the Borehole function, according to distributions\n74 outlined in Harper and Gupta (1983).\n75\n76 input:\n77 n: number of input to generate\n78 output:\n79 matrix of (n, 8), input to borehole_func(x) function\n80 \"\"\"\n81\n82 Tu = np.random.uniform(63070, 115600, n)\n83 Tl = np.random.uniform(63.1, 116, n)\n84 Hu = np.random.uniform(990, 1110, n)\n85 Hl = np.random.uniform(700, 820, n)\n86 r = np.random.lognormal(7.71, 1.0056, n)\n87 rw = np.random.normal(0.1, 0.0161812, n)\n88 Kw = np.random.uniform(9855, 12045, n)\n89 L = np.random.uniform(1120, 1680, n)\n90\n91 x = np.column_stack((Tu, Tl, Hu, Hl, r, rw, Kw, L))\n92 return x\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 2840, "end_char_idx": 4710, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "bfbd826e-2364-40b3-a4db-39846f31ad69": {"__data__": {"id_": "bfbd826e-2364-40b3-a4db-39846f31ad69", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/borehole_kills.html", "file_name": "borehole_kills.html", "file_type": "text/html", "file_size": 25086, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1ce79cde-fed1-4773-80e3-e95041dde82e", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/borehole_kills.html", "file_name": "borehole_kills.html", "file_type": "text/html", "file_size": 25086, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "55ecbf42c88b5f0c44990346f4ec243b94857f8ed9de17d716ed161eb307b8fc", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "borehole_kills \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nSimple simulation functions\nBorehole function\nBorehole function with kills\nsubproc_borehole()\nborehole()\n\nChwirut1 vector-valued function\nInverse Bayesian likelihood\nNorm\nRosenbrock test optimization function\nSix Hump Camel\nTest noisy function\nTest periodic function\n\nFunctions that run user applications\nSpecial simulation functions\n\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nSimulation Functions\nborehole_kills\n\n View page source\n\nborehole_kills\uf0c1\n\nborehole_kills.subproc_borehole(H, delay)\uf0c1\nThis evaluates the Borehole function using a subprocess\nrunning compiled code.\nNote that the Executor base class submit runs a\nserial process in-place. This should work on compute nodes\nso long as there are free contexts.\n\nborehole_kills.borehole(H, persis_info, sim_specs, libE_info)\uf0c1\nWraps the borehole function\nSubprocess to test receiving kill signals from manager\n\nborehole_kills.py\n 1import numpy as np\n 2\n 3from libensemble.executors.executor import Executor\n 4from libensemble.message_numbers import MAN_KILL_SIGNALS, TASK_FAILED, UNSET_TAG\n 5from libensemble.sim_funcs.surmise_test_function import borehole_true\n 6\n 7\n 8def subproc_borehole(H, delay):\n 9 \"\"\"This evaluates the Borehole function using a subprocess\n10 running compiled code.\n11\n12 Note that the Executor base class submit runs a\n13 serial process in-place. This should work on compute nodes\n14 so long as there are free contexts.\n15\n16 \"\"\"\n17 with open(\"input\", \"w\") as f:\n18 H[\"thetas\"][0].tofile(f)\n19 H[\"x\"][0].tofile(f)\n20\n21 exctr = Executor.executor\n22 args = \"input\" + \" \" + str(delay)\n23\n24 task = exctr.submit(app_name=\"borehole\", app_args=args, stdout=\"out.txt\", stderr=\"err.txt\")\n25 calc_status = exctr.polling_loop(task, delay=0.01, poll_manager=True)\n26\n27 if calc_status in MAN_KILL_SIGNALS + [TASK_FAILED]:\n28 f = np.inf\n29 else:\n30 f = float(task.read_stdout())\n31 return f, calc_status\n32\n33\n34def borehole(H, persis_info, sim_specs, libE_info):\n35 \"\"\"\n36 Wraps the borehole function\n37 Subprocess to test receiving kill signals from manager\n38 \"\"\"\n39 calc_status = UNSET_TAG # Calc_status gets printed in libE_stats.txt\n40 H_o = np.zeros(H[\"x\"].shape[0], dtype=sim_specs[\"out\"])\n41\n42 # Add a delay so subprocessed borehole takes longer\n43 sim_id = libE_info[\"H_rows\"][0]\n44 delay = 0\n45 if sim_id > sim_specs[\"user\"][\"init_sample_size\"]:\n46 delay = 2 + np.random.normal(scale=0.5)\n47\n48 f, calc_status = subproc_borehole(H, delay)\n49\n50 if calc_status in MAN_KILL_SIGNALS and \"sim_killed\" in H_o.dtype.names:\n51 H_o[\"sim_killed\"] = True # For calling script to print only.\n52 else:\n53 # Failure model (excluding observations)\n54 if sim_id > sim_specs[\"user\"][\"num_obs\"]:\n55 if (f / borehole_true(H[\"x\"])) > 0.019:\n56 f = np.inf\n57 calc_status = TASK_FAILED\n58 print(f\"Failure of sim_id {sim_id}\", flush=True)\n59\n60 H_o[\"f\"] = f\n61 return H_o, persis_info, calc_status\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3602, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "648f70ba-78c2-48f5-aafd-42c0635692da": {"__data__": {"id_": "648f70ba-78c2-48f5-aafd-42c0635692da", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/chwirut1.html", "file_name": "chwirut1.html", "file_type": "text/html", "file_size": 115703, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "6d2faec1-dc02-45e2-b2d0-f717276c38a2", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/chwirut1.html", "file_name": "chwirut1.html", "file_type": "text/html", "file_size": 115703, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "9e3133f9c79e9ff8686db307d49767784d90affe61433dc02dd851118f21dec8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a6531104-356b-4125-957e-c202d5f23eab", "node_type": "1", "metadata": {}, "hash": "e10e23e7066c3b3822bb0570d01e834e23969ecb7b487f364a7ece01cdf68f45", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "chwirut1 \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nSimple simulation functions\nBorehole function\nBorehole function with kills\nChwirut1 vector-valued function\nchwirut_eval()\n\nInverse Bayesian likelihood\nNorm\nRosenbrock test optimization function\nSix Hump Camel\nTest noisy function\nTest periodic function\n\nFunctions that run user applications\nSpecial simulation functions\n\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nSimulation Functions\nchwirut1\n\n View page source\n\nchwirut1\uf0c1\n\nchwirut1.chwirut_eval(H, _, sim_specs)\uf0c1\nEvaluates the chwirut objective function at a given set of points in\nH[\"x\"]. If \"obj_component\" is a field in sim_specs[\"out\"], only that\ncomponent of the objective will be evaluated. Otherwise, all 214 components\nare evaluated and returned in the \"fvec\" field.\n\nSee also\ntest_persistent_aposmm_pounders.py \nfor an example where the entire fvec is computed each call.\n\nSee also\ntest_uniform_sampling_one_residual_at_a_time.py \nfor an example where one component of fvec is computed per call\n\nchwirut1.py\n 1__all__ = [\"chwirut_eval\"]\n 2import numpy as np\n 3\n 4NOBSERVATIONS = 214\n 5\n 6y = np.zeros(214)\n 7t = np.zeros(214)\n 8\n 9# fmt: off\n 10y[0] = 92.9000; t[0] = 0.5000;\n 11y[1] = 78.7000; t[1] = 0.6250;\n 12y[2] = 64.2000; t[2] = 0.7500;\n 13y[3] = 64.9000; t[3] = 0.8750;\n 14y[4] = 57.1000; t[4] = 1.0000;\n 15y[5] = 43.3000; t[5] = 1.2500;\n 16y[6] = 31.1000; t[6] = 1.7500;\n 17y[7] = 23.6000; t[7] = 2.2500;\n 18y[8] = 31.0500; t[8] = 1.7500;\n 19y[9] = 23.7750; t[9] = 2.2500;\n 20y[10] = 17.7375; t[10] = 2.7500;\n 21y[11] = 13.8000; t[11] = 3.2500;\n 22y[12] = 11.5875; t[12] = 3.7500;\n 23y[13] = 9.4125; t[13] = 4.2500;\n 24y[14] = 7.7250; t[14] = 4.7500;\n 25y[15] = 7.3500; t[15] = 5.2500;\n 26y[16] = 8.0250; t[16] = 5.7500;\n 27y[17] = 90.6000; t[17] = 0.5000;\n 28y[18] = 76.9000; t[18] = 0.6250;\n 29y[19] = 71.6000; t[19] = 0.7500;\n 30y[20] = 63.6000; t[20] = 0.8750;", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2448, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a6531104-356b-4125-957e-c202d5f23eab": {"__data__": {"id_": "a6531104-356b-4125-957e-c202d5f23eab", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/chwirut1.html", "file_name": "chwirut1.html", "file_type": "text/html", "file_size": 115703, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "6d2faec1-dc02-45e2-b2d0-f717276c38a2", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/chwirut1.html", "file_name": "chwirut1.html", "file_type": "text/html", "file_size": 115703, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "9e3133f9c79e9ff8686db307d49767784d90affe61433dc02dd851118f21dec8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "648f70ba-78c2-48f5-aafd-42c0635692da", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/chwirut1.html", "file_name": "chwirut1.html", "file_type": "text/html", "file_size": 115703, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "4fdedb7064e1058ca932cf40777b90cc83ddd119cd602f61f2c06e695b05fe4e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "26048846-c140-4720-b5a6-a8d00fbb245e", "node_type": "1", "metadata": {}, "hash": "50c65ce3ddb4a926744d5120c000cdb3813d916f6204b41985bbaaf2e15fb4a6", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "23y[13] = 9.4125; t[13] = 4.2500;\n 24y[14] = 7.7250; t[14] = 4.7500;\n 25y[15] = 7.3500; t[15] = 5.2500;\n 26y[16] = 8.0250; t[16] = 5.7500;\n 27y[17] = 90.6000; t[17] = 0.5000;\n 28y[18] = 76.9000; t[18] = 0.6250;\n 29y[19] = 71.6000; t[19] = 0.7500;\n 30y[20] = 63.6000; t[20] = 0.8750;\n 31y[21] = 54.0000; t[21] = 1.0000;\n 32y[22] = 39.2000; t[22] = 1.2500;\n 33y[23] = 29.3000; t[23] = 1.7500;\n 34y[24] = 21.4000; t[24] = 2.2500;\n 35y[25] = 29.1750; t[25] = 1.7500;\n 36y[26] = 22.1250; t[26] = 2.2500;\n 37y[27] = 17.5125; t[27] = 2.7500;\n 38y[28] = 14.2500; t[28] = 3.2500;\n 39y[29] = 9.4500; t[29] = 3.7500;\n 40y[30] = 9.1500; t[30] = 4.2500;\n 41y[31] = 7.9125; t[31] = 4.7500;\n 42y[32] = 8.4750; t[32] = 5.2500;\n 43y[33] = 6.1125; t[33] = 5.7500;\n 44y[34] = 80.0000; t[34] = 0.5000;\n 45y[35] = 79.0000; t[35] = 0.6250;\n 46y[36] = 63.8000; t[36] = 0.7500;\n 47y[37] = 57.2000; t[37] = 0.8750;\n 48y[38] = 53.2000; t[38] = 1.0000;\n 49y[39] = 42.5000; t[39] = 1.2500;\n 50y[40] = 26.8000; t[40] = 1.7500;\n 51y[41] = 20.4000; t[41] = 2.2500;\n 52y[42] = 26.8500; t[42] = 1.7500;\n 53y[43] = 21.0000; t[43] = 2.2500;\n 54y[44] = 16.4625; t[44] = 2.7500;\n 55y[45] = 12.5250; t[45] = 3.2500;\n 56y[46] = 10.5375; t[46] = 3.7500;\n 57y[47] = 8.5875; t[47] = 4.2500;\n 58y[48] = 7.1250; t[48] = 4.7500;\n 59y[49] = 6.1125; t[49] = 5.2500;\n 60y[50] = 5.9625; t[50] = 5.7500;", "mimetype": "text/plain", "start_char_idx": 2166, "end_char_idx": 3519, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "26048846-c140-4720-b5a6-a8d00fbb245e": {"__data__": {"id_": "26048846-c140-4720-b5a6-a8d00fbb245e", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/chwirut1.html", "file_name": "chwirut1.html", "file_type": "text/html", "file_size": 115703, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "6d2faec1-dc02-45e2-b2d0-f717276c38a2", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/chwirut1.html", "file_name": "chwirut1.html", "file_type": "text/html", "file_size": 115703, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "9e3133f9c79e9ff8686db307d49767784d90affe61433dc02dd851118f21dec8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a6531104-356b-4125-957e-c202d5f23eab", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/chwirut1.html", "file_name": "chwirut1.html", "file_type": "text/html", "file_size": 115703, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "b6bf771edefe1430f131e78e2303e70d0f0fb8c774c2bfb045edeb1ef444e7fc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c9000f17-ab68-43ac-a16d-7b1d2bb1d615", "node_type": "1", "metadata": {}, "hash": "3a7dd125ee98218729a16aabac0bbfc3c883b7f9b55da8395705366d6f0dc227", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "53y[43] = 21.0000; t[43] = 2.2500;\n 54y[44] = 16.4625; t[44] = 2.7500;\n 55y[45] = 12.5250; t[45] = 3.2500;\n 56y[46] = 10.5375; t[46] = 3.7500;\n 57y[47] = 8.5875; t[47] = 4.2500;\n 58y[48] = 7.1250; t[48] = 4.7500;\n 59y[49] = 6.1125; t[49] = 5.2500;\n 60y[50] = 5.9625; t[50] = 5.7500;\n 61y[51] = 74.1000; t[51] = 0.5000;\n 62y[52] = 67.3000; t[52] = 0.6250;\n 63y[53] = 60.8000; t[53] = 0.7500;\n 64y[54] = 55.5000; t[54] = 0.8750;\n 65y[55] = 50.3000; t[55] = 1.0000;\n 66y[56] = 41.0000; t[56] = 1.2500;\n 67y[57] = 29.4000; t[57] = 1.7500;\n 68y[58] = 20.4000; t[58] = 2.2500;\n 69y[59] = 29.3625; t[59] = 1.7500;\n 70y[60] = 21.1500; t[60] = 2.2500;\n 71y[61] = 16.7625; t[61] = 2.7500;\n 72y[62] = 13.2000; t[62] = 3.2500;\n 73y[63] = 10.8750; t[63] = 3.7500;\n 74y[64] = 8.1750; t[64] = 4.2500;\n 75y[65] = 7.3500; t[65] = 4.7500;\n 76y[66] = 5.9625; t[66] = 5.2500;\n 77y[67] = 5.6250; t[67] = 5.7500;\n 78y[68] = 81.5000; t[68] = .5000;\n 79y[69] = 62.4000; t[69] = .7500;\n 80y[70] = 32.5000; t[70] = 1.5000;\n 81y[71] = 12.4100; t[71] = 3.0000;\n 82y[72] = 13.1200; t[72] = 3.0000;\n 83y[73] = 15.5600; t[73] = 3.0000;\n 84y[74] = 5.6300; t[74] = 6.0000;\n 85y[75] = 78.0000; t[75] = .5000;\n 86y[76] = 59.9000; t[76] = .7500;\n 87y[77] = 33.2000; t[77] = 1.5000;\n 88y[78] = 13.8400; t[78] = 3.0000;\n 89y[79] = 12.7500; t[79] = 3.0000;\n 90y[80] = 14.6200; t[80] = 3.0000;", "mimetype": "text/plain", "start_char_idx": 3237, "end_char_idx": 4590, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "c9000f17-ab68-43ac-a16d-7b1d2bb1d615": {"__data__": {"id_": "c9000f17-ab68-43ac-a16d-7b1d2bb1d615", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/chwirut1.html", "file_name": "chwirut1.html", "file_type": "text/html", "file_size": 115703, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "6d2faec1-dc02-45e2-b2d0-f717276c38a2", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/chwirut1.html", "file_name": "chwirut1.html", "file_type": "text/html", "file_size": 115703, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "9e3133f9c79e9ff8686db307d49767784d90affe61433dc02dd851118f21dec8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "26048846-c140-4720-b5a6-a8d00fbb245e", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/chwirut1.html", "file_name": "chwirut1.html", "file_type": "text/html", "file_size": 115703, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "a009c2dd3af051249eff05b2a919b363d793ead1098c4ddbebbe229e347835cf", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7bd4cf3d-d3fe-4651-b8a8-2ecf4698efbc", "node_type": "1", "metadata": {}, "hash": "f4112ec2d6cce46eb50e1ed56ff9faaa4670e8b7e56aed62c714884de7ae4a8f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "0000;\n 83y[73] = 15.5600; t[73] = 3.0000;\n 84y[74] = 5.6300; t[74] = 6.0000;\n 85y[75] = 78.0000; t[75] = .5000;\n 86y[76] = 59.9000; t[76] = .7500;\n 87y[77] = 33.2000; t[77] = 1.5000;\n 88y[78] = 13.8400; t[78] = 3.0000;\n 89y[79] = 12.7500; t[79] = 3.0000;\n 90y[80] = 14.6200; t[80] = 3.0000;\n 91y[81] = 3.9400; t[81] = 6.0000;\n 92y[82] = 76.8000; t[82] = .5000;\n 93y[83] = 61.0000; t[83] = .7500;\n 94y[84] = 32.9000; t[84] = 1.5000;\n 95y[85] = 13.8700; t[85] = 3.0000;\n 96y[86] = 11.8100; t[86] = 3.0000;\n 97y[87] = 13.3100; t[87] = 3.0000;\n 98y[88] = 5.4400; t[88] = 6.0000;\n 99y[89] = 78.0000; t[89] = .5000;\n100y[90] = 63.5000; t[90] = .7500;\n101y[91] = 33.8000; t[91] = 1.5000;\n102y[92] = 12.5600; t[92] = 3.0000;\n103y[93] = 5.6300; t[93] = 6.0000;\n104y[94] = 12.7500; t[94] = 3.0000;\n105y[95] = 13.1200; t[95] = 3.0000;\n106y[96] = 5.4400; t[96] = 6.0000;\n107y[97] = 76.8000; t[97] = .5000;\n108y[98] = 60.0000; t[98] = .7500;\n109y[99] = 47.8000; t[99] = 1.0000;\n110y[100] = 32.0000; t[100] = 1.5000;\n111y[101] = 22.2000; t[101] = 2.0000;\n112y[102] = 22.5700; t[102] = 2.0000;\n113y[103] = 18.8200; t[103] = 2.5000;\n114y[104] = 13.9500; t[104] = 3.0000;\n115y[105] = 11.2500; t[105] = 4.0000;\n116y[106] = 9.0000; t[106] = 5.0000;\n117y[107] = 6.6700; t[107] = 6.0000;\n118y[108] = 75.8000; t[108] = .5000;\n119y[109] = 62.0000; t[109] = .7500;\n120y[110] = 48.8000; t[110] = 1.0000;\n121y[111] = 35.2000; t[111] = 1.5000;\n122y[112] = 20.0000;", "mimetype": "text/plain", "start_char_idx": 4300, "end_char_idx": 5737, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "7bd4cf3d-d3fe-4651-b8a8-2ecf4698efbc": {"__data__": {"id_": "7bd4cf3d-d3fe-4651-b8a8-2ecf4698efbc", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/chwirut1.html", "file_name": "chwirut1.html", "file_type": "text/html", "file_size": 115703, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "6d2faec1-dc02-45e2-b2d0-f717276c38a2", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/chwirut1.html", "file_name": "chwirut1.html", "file_type": "text/html", "file_size": 115703, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "9e3133f9c79e9ff8686db307d49767784d90affe61433dc02dd851118f21dec8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c9000f17-ab68-43ac-a16d-7b1d2bb1d615", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/chwirut1.html", "file_name": "chwirut1.html", "file_type": "text/html", "file_size": 115703, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "58a07f2ae374a64bfcb3b65ae170bb88e631aef076a9a3309eb9e6b1795ddcea", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6324fffb-24a0-49c4-9f14-359decea4f71", "node_type": "1", "metadata": {}, "hash": "9ff285ee7d284c7228058c71d58e4751f518e9b8da80ec0f9830503e2ebddb26", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "9500; t[104] = 3.0000;\n115y[105] = 11.2500; t[105] = 4.0000;\n116y[106] = 9.0000; t[106] = 5.0000;\n117y[107] = 6.6700; t[107] = 6.0000;\n118y[108] = 75.8000; t[108] = .5000;\n119y[109] = 62.0000; t[109] = .7500;\n120y[110] = 48.8000; t[110] = 1.0000;\n121y[111] = 35.2000; t[111] = 1.5000;\n122y[112] = 20.0000; t[112] = 2.0000;\n123y[113] = 20.3200; t[113] = 2.0000;\n124y[114] = 19.3100; t[114] = 2.5000;\n125y[115] = 12.7500; t[115] = 3.0000;\n126y[116] = 10.4200; t[116] = 4.0000;\n127y[117] = 7.3100; t[117] = 5.0000;\n128y[118] = 7.4200; t[118] = 6.0000;\n129y[119] = 70.5000; t[119] = .5000;\n130y[120] = 59.5000; t[120] = .7500;\n131y[121] = 48.5000; t[121] = 1.0000;\n132y[122] = 35.8000; t[122] = 1.5000;\n133y[123] = 21.0000; t[123] = 2.0000;\n134y[124] = 21.6700; t[124] = 2.0000;\n135y[125] = 21.0000; t[125] = 2.5000;\n136y[126] = 15.6400; t[126] = 3.0000;\n137y[127] = 8.1700; t[127] = 4.0000;\n138y[128] = 8.5500; t[128] = 5.0000;\n139y[129] = 10.1200; t[129] = 6.0000;\n140y[130] = 78.0000; t[130] = .5000;\n141y[131] = 66.0000; t[131] = .6250;\n142y[132] = 62.0000; t[132] = .7500;\n143y[133] = 58.0000; t[133] = .8750;\n144y[134] = 47.7000; t[134] = 1.0000;\n145y[135] = 37.8000; t[135] = 1.2500;\n146y[136] = 20.2000; t[136] = 2.2500;\n147y[137] = 21.0700; t[137] = 2.2500;\n148y[138] = 13.8700; t[138] = 2.7500;\n149y[139] = 9.6700; t[139] = 3.2500;\n150y[140] = 7.7600; t[140] = 3.7500;\n151y[141] = 5.4400; t[141] = 4.2500;\n152y[142] = 4.8700; t[142] = 4.7500;\n153y[143] = 4.0100; t[143] = 5.2500;\n154y[144] = 3.7500;", "mimetype": "text/plain", "start_char_idx": 5432, "end_char_idx": 6937, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "6324fffb-24a0-49c4-9f14-359decea4f71": {"__data__": {"id_": "6324fffb-24a0-49c4-9f14-359decea4f71", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/chwirut1.html", "file_name": "chwirut1.html", "file_type": "text/html", "file_size": 115703, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "6d2faec1-dc02-45e2-b2d0-f717276c38a2", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/chwirut1.html", "file_name": "chwirut1.html", "file_type": "text/html", "file_size": 115703, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "9e3133f9c79e9ff8686db307d49767784d90affe61433dc02dd851118f21dec8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7bd4cf3d-d3fe-4651-b8a8-2ecf4698efbc", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/chwirut1.html", "file_name": "chwirut1.html", "file_type": "text/html", "file_size": 115703, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "a38283be78a35cf6a7d329c4f17445d3f92cae504d30e4319689162def0aae34", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5a6157cb-3d3b-419b-acc5-4b8b79556bc4", "node_type": "1", "metadata": {}, "hash": "78897fa76c1511eede17b745d88f5fa7250d183f280043a2401be0d64e83f38a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "2000; t[136] = 2.2500;\n147y[137] = 21.0700; t[137] = 2.2500;\n148y[138] = 13.8700; t[138] = 2.7500;\n149y[139] = 9.6700; t[139] = 3.2500;\n150y[140] = 7.7600; t[140] = 3.7500;\n151y[141] = 5.4400; t[141] = 4.2500;\n152y[142] = 4.8700; t[142] = 4.7500;\n153y[143] = 4.0100; t[143] = 5.2500;\n154y[144] = 3.7500; t[144] = 5.7500;\n155y[145] = 24.1900; t[145] = 3.0000;\n156y[146] = 25.7600; t[146] = 3.0000;\n157y[147] = 18.0700; t[147] = 3.0000;\n158y[148] = 11.8100; t[148] = 3.0000;\n159y[149] = 12.0700; t[149] = 3.0000;\n160y[150] = 16.1200; t[150] = 3.0000;\n161y[151] = 70.8000; t[151] = .5000;\n162y[152] = 54.7000; t[152] = .7500;\n163y[153] = 48.0000; t[153] = 1.0000;\n164y[154] = 39.8000; t[154] = 1.5000;\n165y[155] = 29.8000; t[155] = 2.0000;\n166y[156] = 23.7000; t[156] = 2.5000;\n167y[157] = 29.6200; t[157] = 2.0000;\n168y[158] = 23.8100; t[158] = 2.5000;\n169y[159] = 17.7000; t[159] = 3.0000;\n170y[160] = 11.5500; t[160] = 4.0000;\n171y[161] = 12.0700; t[161] = 5.0000;\n172y[162] = 8.7400; t[162] = 6.0000;\n173y[163] = 80.7000; t[163] = .5000;\n174y[164] = 61.3000; t[164] = .7500;\n175y[165] = 47.5000; t[165] = 1.0000;\n176y[166] = 29.0000; t[166] = 1.5000;\n177y[167] = 24.0000; t[167] = 2.0000;\n178y[168] = 17.7000; t[168] = 2.5000;\n179y[169] = 24.5600; t[169] = 2.0000;\n180y[170] = 18.6700; t[170] = 2.5000;\n181y[171] = 16.2400; t[171] = 3.0000;\n182y[172] = 8.7400; t[172] = 4.0000;\n183y[173] = 7.8700; t[173] = 5.0000;\n184y[174] = 8.5100; t[174] = 6.0000;\n185y[175] = 66.7000; t[175] = .5000;\n186y[176] = 59.", "mimetype": "text/plain", "start_char_idx": 6634, "end_char_idx": 8139, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "5a6157cb-3d3b-419b-acc5-4b8b79556bc4": {"__data__": {"id_": "5a6157cb-3d3b-419b-acc5-4b8b79556bc4", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/chwirut1.html", "file_name": "chwirut1.html", "file_type": "text/html", "file_size": 115703, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "6d2faec1-dc02-45e2-b2d0-f717276c38a2", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/chwirut1.html", "file_name": "chwirut1.html", "file_type": "text/html", "file_size": 115703, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "9e3133f9c79e9ff8686db307d49767784d90affe61433dc02dd851118f21dec8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6324fffb-24a0-49c4-9f14-359decea4f71", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/chwirut1.html", "file_name": "chwirut1.html", "file_type": "text/html", "file_size": 115703, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "87b974f60b681b3f2afe0e91654e5a23e801ff8a7689a694eed86a35625eb895", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "474c6ace-2544-4460-8899-e8eb37c50731", "node_type": "1", "metadata": {}, "hash": "571a8f301573a9683c392ffe0c03efb337fdc901439bd625265491c5bd495ff1", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "178y[168] = 17.7000; t[168] = 2.5000;\n179y[169] = 24.5600; t[169] = 2.0000;\n180y[170] = 18.6700; t[170] = 2.5000;\n181y[171] = 16.2400; t[171] = 3.0000;\n182y[172] = 8.7400; t[172] = 4.0000;\n183y[173] = 7.8700; t[173] = 5.0000;\n184y[174] = 8.5100; t[174] = 6.0000;\n185y[175] = 66.7000; t[175] = .5000;\n186y[176] = 59.2000; t[176] = .7500;\n187y[177] = 40.8000; t[177] = 1.0000;\n188y[178] = 30.7000; t[178] = 1.5000;\n189y[179] = 25.7000; t[179] = 2.0000;\n190y[180] = 16.3000; t[180] = 2.5000;\n191y[181] = 25.9900; t[181] = 2.0000;\n192y[182] = 16.9500; t[182] = 2.5000;\n193y[183] = 13.3500; t[183] = 3.0000;\n194y[184] = 8.6200; t[184] = 4.0000;\n195y[185] = 7.2000; t[185] = 5.0000;\n196y[186] = 6.6400; t[186] = 6.0000;\n197y[187] = 13.6900; t[187] = 3.0000;\n198y[188] = 81.0000; t[188] = .5000;\n199y[189] = 64.5000; t[189] = .7500;\n200y[190] = 35.5000; t[190] = 1.5000;\n201y[191] = 13.3100; t[191] = 3.0000;\n202y[192] = 4.8700; t[192] = 6.0000;\n203y[193] = 12.9400; t[193] = 3.0000;\n204y[194] = 5.0600; t[194] = 6.0000;\n205y[195] = 15.1900; t[195] = 3.0000;\n206y[196] = 14.6200; t[196] = 3.0000;\n207y[197] = 15.6400; t[197] = 3.0000;\n208y[198] = 25.5000; t[198] = 1.7500;\n209y[199] = 25.9500; t[199] = 1.7500;\n210y[200] = 81.7000; t[200] = .5000;\n211y[201] = 61.6000; t[201] = .7500;\n212y[202] = 29.8000; t[202] = 1.7500;\n213y[203] = 29.8100; t[203] = 1.7500;\n214y[204] = 17.1700; t[204] = 2.7500;\n215y[205] = 10.3900; t[205] = 3.7500;\n216y[206] = 28.4000; t[206] = 1.7500;\n217y[207] = 28.6900; t[207] = 1.7500;", "mimetype": "text/plain", "start_char_idx": 7824, "end_char_idx": 9329, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "474c6ace-2544-4460-8899-e8eb37c50731": {"__data__": {"id_": "474c6ace-2544-4460-8899-e8eb37c50731", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/chwirut1.html", "file_name": "chwirut1.html", "file_type": "text/html", "file_size": 115703, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "6d2faec1-dc02-45e2-b2d0-f717276c38a2", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/chwirut1.html", "file_name": "chwirut1.html", "file_type": "text/html", "file_size": 115703, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "9e3133f9c79e9ff8686db307d49767784d90affe61433dc02dd851118f21dec8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5a6157cb-3d3b-419b-acc5-4b8b79556bc4", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/chwirut1.html", "file_name": "chwirut1.html", "file_type": "text/html", "file_size": 115703, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "038edd5d048ef4ef20d7fdd198bdcb50f74d8c039660c6d761770dcd178999f5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "dc7d43a0-8c11-4fc1-8218-b2e38df923dc", "node_type": "1", "metadata": {}, "hash": "39039e2021e6bc121801eb99b23acff8b861aa969987078b23cdf461379d0ddb", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "t[199] = 1.7500;\n210y[200] = 81.7000; t[200] = .5000;\n211y[201] = 61.6000; t[201] = .7500;\n212y[202] = 29.8000; t[202] = 1.7500;\n213y[203] = 29.8100; t[203] = 1.7500;\n214y[204] = 17.1700; t[204] = 2.7500;\n215y[205] = 10.3900; t[205] = 3.7500;\n216y[206] = 28.4000; t[206] = 1.7500;\n217y[207] = 28.6900; t[207] = 1.7500;\n218y[208] = 81.3000; t[208] = .5000;\n219y[209] = 60.9000; t[209] = .7500;\n220y[210] = 16.6500; t[210] = 2.7500;\n221y[211] = 10.0500; t[211] = 3.7500;\n222y[212] = 28.9000; t[212] = 1.7500;\n223y[213] = 28.9500; t[213] = 1.7500;\n224# fmt: on\n225\n226\n227def func_def(x, i):\n228 return y[i] - np.exp(-x[0] * t[i]) / (x[1] + x[2] * t[i])\n229\n230\n231def EvaluateFunction(x, component=np.nan):\n232 \"\"\"\n233 Evaluates the chwirut function\n234 \"\"\"\n235 if np.isnan(component):\n236 f = np.zeros(NOBSERVATIONS)\n237 for i in range(NOBSERVATIONS):\n238 f[i] = func_def(x, i)\n239 else:\n240 f = func_def(x, component)\n241\n242 return f\n243\n244\n245def EvaluateJacobian(x):\n246 \"\"\"\n247 Evaluates the chwirut Jacobian\n248 \"\"\"\n249 j = np.zeros((NOBSERVATIONS, 3))\n250\n251 for i in range(NOBSERVATIONS):\n252 base = np.exp(-x[0] * t[i]) / (x[1] + x[2] * t[i])\n253\n254 j[i][0] = t[i] * base\n255 j[i][1] = base / (x[1] + x[2] * t[i])\n256 j[i][2] = base * t[i] / (x[1] + x[2] * t[i])\n257\n258 return j\n259\n260\n261def chwirut_eval(H, _, sim_specs):\n262 \"\"\"\n263 Evaluates the chwirut objective function at a given set of points in\n264 ``H[\"x\"]``. If ``\"obj_component\"`` is a field in ``sim_specs[\"out\"]``, only that\n265 component of the objective will be evaluated. Otherwise, all 214 components\n266 are evaluated and returned in the ``\"fvec\"`` field.\n267\n268 .. seealso::\n269 `test_persistent_aposmm_pounders.py <https://github.com/Libensemble/libensemble/blob/develop/libensemble/tests/regression_tests/test_persistent_aposmm_pounders.py>`_ # noqa\n270 for an example where the entire fvec is computed each call.", "mimetype": "text/plain", "start_char_idx": 9011, "end_char_idx": 10911, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "dc7d43a0-8c11-4fc1-8218-b2e38df923dc": {"__data__": {"id_": "dc7d43a0-8c11-4fc1-8218-b2e38df923dc", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/chwirut1.html", "file_name": "chwirut1.html", "file_type": "text/html", "file_size": 115703, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "6d2faec1-dc02-45e2-b2d0-f717276c38a2", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/chwirut1.html", "file_name": "chwirut1.html", "file_type": "text/html", "file_size": 115703, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "9e3133f9c79e9ff8686db307d49767784d90affe61433dc02dd851118f21dec8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "474c6ace-2544-4460-8899-e8eb37c50731", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/chwirut1.html", "file_name": "chwirut1.html", "file_type": "text/html", "file_size": 115703, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "6faa268c32f2d46ec86f4b10c45b9e52ee184894834fec8ae828c8e92f380927", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "_, sim_specs):\n262 \"\"\"\n263 Evaluates the chwirut objective function at a given set of points in\n264 ``H[\"x\"]``. If ``\"obj_component\"`` is a field in ``sim_specs[\"out\"]``, only that\n265 component of the objective will be evaluated. Otherwise, all 214 components\n266 are evaluated and returned in the ``\"fvec\"`` field.\n267\n268 .. seealso::\n269 `test_persistent_aposmm_pounders.py <https://github.com/Libensemble/libensemble/blob/develop/libensemble/tests/regression_tests/test_persistent_aposmm_pounders.py>`_ # noqa\n270 for an example where the entire fvec is computed each call.\n271\n272 .. seealso::\n273 `test_uniform_sampling_one_residual_at_a_time.py <https://github.com/Libensemble/libensemble/blob/develop/libensemble/tests/functionality_tests/test_uniform_sampling_one_residual_at_a_time.py>`_ # noqa\n274 for an example where one component of fvec is computed per call\n275 \"\"\"\n276\n277 batch = len(H[\"x\"])\n278 O = np.zeros(batch, dtype=sim_specs[\"out\"])\n279\n280 for i, x in enumerate(H[\"x\"]):\n281 if \"obj_component\" in H.dtype.names:\n282 if (\n283 \"user\" in sim_specs\n284 and \"component_nan_frequency\" in sim_specs[\"user\"]\n285 and np.random.uniform(0, 1) < sim_specs[\"user\"][\"component_nan_frequency\"]\n286 ):\n287 O[\"f_i\"][i] = np.nan\n288 else:\n289 O[\"f_i\"][i] = EvaluateFunction(x, H[\"obj_component\"][i])\n290\n291 else:\n292 O[\"fvec\"][i] = EvaluateFunction(x)\n293 if \"combine_component_func\" in sim_specs[\"user\"]:\n294 O[\"f\"][i] = sim_specs[\"user\"][\"combine_component_func\"](O[\"fvec\"][i])\n295 else:\n296 O[\"f\"][i] = np.sum(O[\"fvec\"][i] ** 2)\n297\n298 return O\n299\n300\n301# if __name__ == \"__main__\":\n302# x = np.zeros(3)\n303# x[0] = 0.15;\n304# x[1] = 0.008;\n305# x[2] = 0.010;\n306\n307# f = EvaluateFunction(x)\n308# J = EvaluateJacobian(x)\n309\n310# print(f, J)\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 10333, "end_char_idx": 12217, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "99cf6d99-9d17-4a02-b017-b1dc6e53bf8f": {"__data__": {"id_": "99cf6d99-9d17-4a02-b017-b1dc6e53bf8f", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf.html", "file_name": "forces_simf.html", "file_type": "text/html", "file_size": 32305, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "60c826da-a142-4d7c-98b5-164d6147c958", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf.html", "file_name": "forces_simf.html", "file_type": "text/html", "file_size": 32305, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "6de6f840b12f02bd4665a5b97eb56e86df65a83318f5e00e9b60a8d2c85e90b0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "707d4435-24e1-47d6-83d2-c8d4e04107e6", "node_type": "1", "metadata": {}, "hash": "abfd37c580ea7c03ee264488ee2a8c1df12f3ea9d4bbedd78573d00070af8029", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Template for CPU executables \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nSimple simulation functions\nFunctions that run user applications\nVariable resources\nTemplate for CPU executables\nrun_forces()\n\nTemplate for CPU executables with input file\nTemplate for GPU executables\nTemplate for GPU executables with dynamic resources\nTemplate with dynamic resources (CPU app and GPU app)\nWarpX Example\n\nSpecial simulation functions\n\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nSimulation Functions\nTemplate for CPU executables\n\n View page source\n\nTemplate for CPU executables\uf0c1\n\nforces_simple.forces_simf.run_forces(H, persis_info, sim_specs, libE_info)\uf0c1\nRuns the forces MPI application.\nBy default assigns the number of MPI ranks to the number\nof cores available to this worker.\nTo assign a different number give e.g., num_procs=4 to\nexctr.submit.\n\nforces_simf.py\n 1import numpy as np\n 2\n 3# Optional status codes to display in libE_stats.txt for each gen or sim\n 4from libensemble.message_numbers import TASK_FAILED, WORKER_DONE\n 5\n 6\n 7def run_forces(H, persis_info, sim_specs, libE_info):\n 8 \"\"\"Runs the forces MPI application.\n 9\n10 By default assigns the number of MPI ranks to the number\n11 of cores available to this worker.\n12\n13 To assign a different number give e.g., `num_procs=4` to\n14 ``exctr.submit``.\n15 \"\"\"\n16\n17 calc_status = 0\n18\n19 # Parse out num particles, from generator function\n20 particles = str(int(H[\"x\"][0][0]))\n21\n22 # app arguments: num particles, timesteps, also using num particles as seed\n23 args = particles + \" \" + str(10) + \" \" + particles\n24\n25 # Retrieve our MPI Executor\n26 exctr = libE_info[\"executor\"]\n27\n28 # Submit our forces app for execution.\n29 task = exctr.submit(app_name=\"forces\", app_args=args)\n30\n31 # Block until the task finishes\n32 task.wait()\n33\n34 # Try loading final energy reading, set the sim's status\n35 statfile = \"forces.stat\"\n36 try:\n37 data = np.loadtxt(statfile)\n38 final_energy = data[-1]\n39 calc_status = WORKER_DONE\n40 except Exception:\n41 final_energy = np.nan\n42 calc_status = TASK_FAILED\n43\n44 # Define our output array, populate with energy reading\n45 output = np.zeros(1, dtype=sim_specs[\"out\"])\n46 output[\"energy\"] = final_energy\n47\n48 # Return final information to worker, for reporting to manager\n49 return output, persis_info, calc_status\n\nExample usage\n 1#!/usr/bin/env python\n 2import os\n 3import sys\n 4\n 5import numpy as np\n 6from forces_simf import run_forces # Sim func from current dir\n 7\n 8from libensemble import Ensemble\n 9from libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\n10from libensemble.executors import MPIExecutor\n11from libensemble.gen_funcs.persistent_sampling import persistent_uniform as gen_f\n12from libensemble.specs import AllocSpecs, ExitCriteria, GenSpecs, LibeSpecs, SimSpecs\n13\n14if __name__ == \"__main__\":\n15 # Initialize MPI Executor\n16 exctr = MPIExecutor()\n17\n18 # Register simulation executable with executor\n19 sim_app = os.path.join(os.getcwd(), \"../forces_app/forces.x\")\n20\n21 if not os.path.isfile(sim_app):\n22 sys.exit(\"forces.x not found - please build first in ../forces_app dir\")\n23\n24 exctr.register_app(full_path=sim_app, app_name=\"forces\")\n25\n26 # Parse number of workers, comms type, etc.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3802, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "707d4435-24e1-47d6-83d2-c8d4e04107e6": {"__data__": {"id_": "707d4435-24e1-47d6-83d2-c8d4e04107e6", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf.html", "file_name": "forces_simf.html", "file_type": "text/html", "file_size": 32305, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "60c826da-a142-4d7c-98b5-164d6147c958", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf.html", "file_name": "forces_simf.html", "file_type": "text/html", "file_size": 32305, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "6de6f840b12f02bd4665a5b97eb56e86df65a83318f5e00e9b60a8d2c85e90b0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "99cf6d99-9d17-4a02-b017-b1dc6e53bf8f", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf.html", "file_name": "forces_simf.html", "file_type": "text/html", "file_size": 32305, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "a57b97af1d5281761a75a20260a31f92ac1685fc37b569ec5df45bf389f7ded1", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "from arguments\n27 ensemble = Ensemble(parse_args=True, executor=exctr)\n28 nsim_workers = ensemble.nworkers - 1 # One worker is for persistent generator\n29\n30 # Persistent gen does not need resources\n31 ensemble.libE_specs = LibeSpecs(\n32 num_resource_sets=nsim_workers,\n33 sim_dirs_make=True,\n34 )\n35\n36 ensemble.sim_specs = SimSpecs(\n37 sim_f=run_forces,\n38 inputs=[\"x\"],\n39 outputs=[(\"energy\", float)],\n40 )\n41\n42 ensemble.gen_specs = GenSpecs(\n43 gen_f=gen_f,\n44 inputs=[], # No input when start persistent generator\n45 persis_in=[\"sim_id\"], # Return sim_ids of evaluated points to generator\n46 outputs=[(\"x\", float, (1,))],\n47 user={\n48 \"initial_batch_size\": nsim_workers,\n49 \"lb\": np.array([1000]), # min particles\n50 \"ub\": np.array([3000]), # max particles\n51 },\n52 )\n53\n54 # Starts one persistent generator. Simulated values are returned in batch.\n55 ensemble.alloc_specs = AllocSpecs(\n56 alloc_f=alloc_f,\n57 user={\n58 \"async_return\": False, # False causes batch returns\n59 },\n60 )\n61\n62 # Instruct libEnsemble to exit after this many simulations\n63 ensemble.exit_criteria = ExitCriteria(sim_max=8)\n64\n65 # Seed random streams for each worker, particularly for gen_f\n66 ensemble.add_random_streams()\n67\n68 # Run ensemble\n69 ensemble.run()\n70\n71 if ensemble.is_manager:\n72 # Note, this will change if changing sim_max, nworkers, lb, ub, etc.\n73 print(f'Final energy checksum: {np.sum(ensemble.H[\"energy\"])}')\n\nAlso see the Forces tutorial.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 3803, "end_char_idx": 5375, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "e24b9ef2-fe67-4f6b-8ced-74c07342a56f": {"__data__": {"id_": "e24b9ef2-fe67-4f6b-8ced-74c07342a56f", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_gpu.html", "file_name": "forces_simf_gpu.html", "file_type": "text/html", "file_size": 36133, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f22086da-eb85-4063-8fd5-cf5bccbbe89a", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_gpu.html", "file_name": "forces_simf_gpu.html", "file_type": "text/html", "file_size": 36133, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "16f5a99fe54e2cc588d67447ec053b5fc711b6688d5ab4bc8e14cbcd607a56f5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "27b1ea65-ee6b-4e64-a7c1-ff435aae9280", "node_type": "1", "metadata": {}, "hash": "afc2c03b5e884957a15f07fe043af6cd2afe90a8db34d6bd38e6ac840f0161a3", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Template for GPU executables \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nSimple simulation functions\nFunctions that run user applications\nVariable resources\nTemplate for CPU executables\nTemplate for CPU executables with input file\nTemplate for GPU executables\nrun_forces()\n\nTemplate for GPU executables with dynamic resources\nTemplate with dynamic resources (CPU app and GPU app)\nWarpX Example\n\nSpecial simulation functions\n\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nSimulation Functions\nTemplate for GPU executables\n\n View page source\n\nTemplate for GPU executables\uf0c1\n\nforces_gpu.forces_simf.run_forces(H, persis_info, sim_specs, libE_info)\uf0c1\nLaunches the forces MPI app and auto-assigns ranks and GPU resources.\nAssigns one MPI rank to each GPU assigned to the worker.\n\nforces_simf.py\n 1import numpy as np\n 2\n 3# Optional status codes to display in libE_stats.txt for each gen or sim\n 4from libensemble.message_numbers import TASK_FAILED, WORKER_DONE\n 5\n 6# Optional - to print GPU settings\n 7from libensemble.tools.test_support import check_gpu_setting\n 8\n 9\n10def run_forces(H, persis_info, sim_specs, libE_info):\n11 \"\"\"Launches the forces MPI app and auto-assigns ranks and GPU resources.\n12\n13 Assigns one MPI rank to each GPU assigned to the worker.\n14 \"\"\"\n15\n16 calc_status = 0\n17\n18 # Parse out num particles, from generator function\n19 particles = str(int(H[\"x\"][0][0]))\n20\n21 # app arguments: num particles, timesteps, also using num particles as seed\n22 args = particles + \" \" + str(10) + \" \" + particles\n23\n24 # Retrieve our MPI Executor\n25 exctr = libE_info[\"executor\"]\n26\n27 # Submit our forces app for execution.\n28 task = exctr.submit(\n29 app_name=\"forces\",\n30 app_args=args,\n31 auto_assign_gpus=True,\n32 match_procs_to_gpus=True,\n33 )\n34\n35 # Block until the task finishes\n36 task.wait()\n37\n38 # Optional - prints GPU assignment (method and numbers)\n39 check_gpu_setting(task, assert_setting=False, print_setting=True)\n40\n41 # Try loading final energy reading, set the sim's status\n42 statfile = \"forces.stat\"\n43 try:\n44 data = np.loadtxt(statfile)\n45 final_energy = data[-1]\n46 calc_status = WORKER_DONE\n47 except Exception:\n48 final_energy = np.nan\n49 calc_status = TASK_FAILED\n50\n51 # Define our output array, populate with energy reading\n52 output = np.zeros(1, dtype=sim_specs[\"out\"])\n53 output[\"energy\"] = final_energy\n54\n55 # Return final information to worker, for reporting to manager\n56 return output, persis_info, calc_status\n\nExample usage\n 1#!/usr/bin/env python\n 2\n 3\"\"\"\n 4This example is based on the simple forces test. The default number of\n 5particles is increased considerably to give perceptible time on the GPUs when\n 6live-checking GPU usage.\n 7\n 8The forces.c application should be built by setting the GPU preprocessor condition\n 9(usually -DGPU) in addition to openMP GPU flags for the given system. See examples\n10in ../forces_app/build_forces.sh. We recommend running forces.x standalone first\n11and confirm it is running on the GPU (this is given clearly in the output).\n12\n13To mock on a non-GPU system, uncomment the resource_info line in libE_specs. You\n14will compile forces without -DGPU option. It is recommended that the ub and/or lb for\n15particle counts are reduced for CPU performance.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3801, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "27b1ea65-ee6b-4e64-a7c1-ff435aae9280": {"__data__": {"id_": "27b1ea65-ee6b-4e64-a7c1-ff435aae9280", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_gpu.html", "file_name": "forces_simf_gpu.html", "file_type": "text/html", "file_size": 36133, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f22086da-eb85-4063-8fd5-cf5bccbbe89a", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_gpu.html", "file_name": "forces_simf_gpu.html", "file_type": "text/html", "file_size": 36133, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "16f5a99fe54e2cc588d67447ec053b5fc711b6688d5ab4bc8e14cbcd607a56f5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e24b9ef2-fe67-4f6b-8ced-74c07342a56f", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_gpu.html", "file_name": "forces_simf_gpu.html", "file_type": "text/html", "file_size": 36133, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "0b72c25d60da8d045fb640565cc52c9509f3c3f51a3d10f69fa9d2575515b100", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "The default number of\n 5particles is increased considerably to give perceptible time on the GPUs when\n 6live-checking GPU usage.\n 7\n 8The forces.c application should be built by setting the GPU preprocessor condition\n 9(usually -DGPU) in addition to openMP GPU flags for the given system. See examples\n10in ../forces_app/build_forces.sh. We recommend running forces.x standalone first\n11and confirm it is running on the GPU (this is given clearly in the output).\n12\n13To mock on a non-GPU system, uncomment the resource_info line in libE_specs. You\n14will compile forces without -DGPU option. It is recommended that the ub and/or lb for\n15particle counts are reduced for CPU performance.\n16\"\"\"\n17\n18import os\n19import sys\n20\n21import numpy as np\n22from forces_simf import run_forces # Sim func from current dir\n23\n24from libensemble import Ensemble\n25from libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\n26from libensemble.executors import MPIExecutor\n27from libensemble.gen_funcs.persistent_sampling import persistent_uniform as gen_f\n28from libensemble.specs import AllocSpecs, ExitCriteria, GenSpecs, LibeSpecs, SimSpecs\n29\n30if __name__ == \"__main__\":\n31 # Initialize MPI Executor\n32 exctr = MPIExecutor()\n33 sim_app = os.path.join(os.getcwd(), \"../forces_app/forces.x\")\n34\n35 if not os.path.isfile(sim_app):\n36 sys.exit(\"forces.x not found - please build first in ../forces_app dir\")\n37\n38 exctr.register_app(full_path=sim_app, app_name=\"forces\")\n39\n40 # Parse number of workers, comms type, etc. from arguments\n41 ensemble = Ensemble(parse_args=True, executor=exctr)\n42 nsim_workers = ensemble.nworkers - 1 # One worker is for persistent generator\n43\n44 # Persistent gen does not need resources\n45 ensemble.libE_specs = LibeSpecs(\n46 num_resource_sets=nsim_workers,\n47 sim_dirs_make=True,\n48 # resource_info = {\"gpus_on_node\": 4} # for mocking GPUs\n49 )\n50\n51 ensemble.sim_specs = SimSpecs(\n52 sim_f=run_forces,\n53 inputs=[\"x\"],\n54 outputs=[(\"energy\", float)],\n55 )\n56\n57 ensemble.gen_specs = GenSpecs(\n58 gen_f=gen_f,\n59 inputs=[], # No input when start persistent generator\n60 persis_in=[\"sim_id\"], # Return sim_ids of evaluated points to generator\n61 outputs=[(\"x\", float, (1,))],\n62 user={\n63 \"initial_batch_size\": nsim_workers,\n64 \"lb\": np.array([50000]), # min particles\n65 \"ub\": np.array([100000]), # max particles\n66 },\n67 )\n68\n69 # Starts one persistent generator. Simulated values are returned in batch.\n70 ensemble.alloc_specs = AllocSpecs(\n71 alloc_f=alloc_f,\n72 user={\n73 \"async_return\": False, # False causes batch returns\n74 },\n75 )\n76\n77 # Instruct libEnsemble to exit after this many simulations\n78 ensemble.exit_criteria = ExitCriteria(sim_max=8)\n79\n80 # Seed random streams for each worker, particularly for gen_f\n81 ensemble.add_random_streams()\n82\n83 # Run ensemble\n84 ensemble.run()\n85\n86 if ensemble.is_manager:\n87 # Note, this will change if changing sim_max, nworkers, lb, ub, etc.\n88 if ensemble.exit_criteria.sim_max == 8:\n89 chksum = np.sum(ensemble.H[\"energy\"])\n90 assert np.isclose(chksum, 96288744.35136001), f\"energy check sum is {chksum}\"\n91 print(\"Checksum passed\")\n92 else:\n93 print(\"Run complete. A checksum has not been provided for the given sim_max\")\n\nAlso see the Forces GPU tutorial and the\nvideo demonstration on Frontier.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 3114, "end_char_idx": 6548, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "6d747fab-eb37-4e44-b049-ecd1617dceec": {"__data__": {"id_": "6d747fab-eb37-4e44-b049-ecd1617dceec", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_gpu_multi_app.html", "file_name": "forces_simf_gpu_multi_app.html", "file_type": "text/html", "file_size": 42926, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5dcdc40e-667c-4b65-b20f-971650733e45", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_gpu_multi_app.html", "file_name": "forces_simf_gpu_multi_app.html", "file_type": "text/html", "file_size": 42926, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "1d1a89f6605370c7b46391ed268a88b743859f7b760d1e2bdd2ec6927a5d458c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4149ce86-92b5-483f-abc8-786721a02f2f", "node_type": "1", "metadata": {}, "hash": "6f89f940a2f0ef714eb4602a16013f43b355da154c13df063fbb4234165c280a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Template with dynamic resources (CPU app and GPU app) \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nSimple simulation functions\nFunctions that run user applications\nVariable resources\nTemplate for CPU executables\nTemplate for CPU executables with input file\nTemplate for GPU executables\nTemplate for GPU executables with dynamic resources\nTemplate with dynamic resources (CPU app and GPU app)\nrun_forces()\n\nWarpX Example\n\nSpecial simulation functions\n\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nSimulation Functions\nTemplate with dynamic resources (CPU app and GPU app)\n\n View page source\n\nTemplate with dynamic resources (CPU app and GPU app)\uf0c1\nLaunches either the CPU-only or GPU version of the forces MPI app and auto-assigns\nranks and GPU resources as requested by the generator.\nThis makes efficient use of each node as the expensive GPU simulations will use the GPUs on\nthe node/s, while the rest of the CPU cores are assigned to the simple CPU-only simulations.\nSee this publication for a real-world demonstration of these capabilities.\n\nforces_multi_app.forces_simf.run_forces(H, persis_info, sim_specs, libE_info)\uf0c1\nLaunches the either the CPU-only or GPU version of the forces MPI app\nand auto-assigns ranks and GPU resources as requested by the generator.\n\nforces_simf.py\n 1import numpy as np\n 2\n 3# Optional status codes to display in libE_stats.txt for each gen or sim\n 4from libensemble.message_numbers import TASK_FAILED, WORKER_DONE\n 5\n 6# Optional - to print GPU settings\n 7from libensemble.tools.test_support import check_gpu_setting\n 8\n 9\n10def run_forces(H, persis_info, sim_specs, libE_info):\n11 \"\"\"Launches the either the CPU-only or GPU version of the forces MPI app\n12 and auto-assigns ranks and GPU resources as requested by the generator.\n13 \"\"\"\n14\n15 calc_status = 0\n16\n17 # Parse out num particles, from generator function\n18 particles = str(int(H[\"x\"][0][0]))\n19\n20 # app arguments: num particles, timesteps, also using num particles as seed\n21 args = particles + \" \" + str(10) + \" \" + particles\n22\n23 # Retrieve our MPI Executor\n24 exctr = libE_info[\"executor\"]\n25\n26 app_type = H[\"app_type\"][0].decode()\n27\n28 # Submit our forces app for execution.\n29 task = exctr.submit(\n30 app_name=app_type,\n31 app_args=args,\n32 )\n33\n34 # Block until the task finishes\n35 task.wait()\n36\n37 # Optional - prints GPU assignment (method and numbers)\n38 check_gpu_setting(task, assert_setting=False, print_setting=True, desc=app_type)\n39\n40 # Stat file to check for bad runs\n41 statfile = \"forces.stat\"\n42\n43 # Try loading final energy reading, set the sim's status\n44 try:\n45 data = np.loadtxt(statfile)\n46 final_energy = data[-1]\n47 calc_status = WORKER_DONE\n48 except Exception:\n49 final_energy = np.nan\n50 calc_status = TASK_FAILED\n51\n52 # Define our output array, populate with energy reading\n53 outspecs = sim_specs[\"out\"]\n54 output = np.zeros(1, dtype=outspecs)\n55 output[\"energy\"] = final_energy\n56\n57 # Return final information to worker, for reporting to manager\n58 return output, persis_info, calc_status\n\nThe generator in the example below assigns to each simulation either the CPU application\nor the GPU application and also randomly assigns the number of processors for each\nsimulation. For the GPU application, one GPU is used for each MPI rank. As many nodes\nas necessary will be used for each application.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3893, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "4149ce86-92b5-483f-abc8-786721a02f2f": {"__data__": {"id_": "4149ce86-92b5-483f-abc8-786721a02f2f", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_gpu_multi_app.html", "file_name": "forces_simf_gpu_multi_app.html", "file_type": "text/html", "file_size": 42926, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5dcdc40e-667c-4b65-b20f-971650733e45", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_gpu_multi_app.html", "file_name": "forces_simf_gpu_multi_app.html", "file_type": "text/html", "file_size": 42926, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "1d1a89f6605370c7b46391ed268a88b743859f7b760d1e2bdd2ec6927a5d458c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6d747fab-eb37-4e44-b049-ecd1617dceec", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_gpu_multi_app.html", "file_name": "forces_simf_gpu_multi_app.html", "file_type": "text/html", "file_size": 42926, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "42d97ad59b05851b8e7f9e5ab9e4cacb8c76691fb3918955f7c748dc3dd7d681", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "392676bf-134a-4404-b01c-ed7dfe3d36c6", "node_type": "1", "metadata": {}, "hash": "4292f2cfbf9f5c813fbf09b2749ffcfee8fd32111c84bdd934976c390e213adb", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "For the GPU application, one GPU is used for each MPI rank. As many nodes\nas necessary will be used for each application.\nThe special generator output fields \u201cnum_procs\u201d and \u201cnum_gpus\u201d are automatically picked\nup by each worker and these will be used when the simulation is run, unless overridden.\n\nExample usage\n 1#!/usr/bin/env python\n 2\n 3\"\"\"\n 4This example runs different applications, one that uses only CPUs and one\n 5that uses GPUs. Both use a variable number of processors. The GPU application\n 6uses one GPU per processor. As the generator creates simulations, it randomly\n 7assigns between one and max_proc processors to each simulation, and also randomly\n 8assigns which application is to be run.\n 9\n 10The forces.c application should be compiled for the CPU to `forces_cpu.x`, and\n 11for the GPU (setting the GPU preprocessor condition) to `forces_gpu.x`.\n 12\n 13For compile lines, see examples in ../forces_app/build_forces.sh.\n 14\n 15It is recommended to run this test such that:\n 16 ((nworkers - 1) - gpus_on_node) >= gen_specs[\"user\"][max_procs]\n 17\n 18E.g., if running on one node with four GPUs, then use:\n 19 python run_libE_forces.py --nworkers 9\n 20\n 21E.g., if running on one node with eight GPUs, then use:\n 22 python run_libE_forces.py --nworkers 17\n 23\"\"\"\n 24\n 25import os\n 26import sys\n 27\n 28import numpy as np\n 29from forces_simf import run_forces # Sim func from current dir\n 30\n 31from libensemble import Ensemble\n 32from libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\n 33from libensemble.executors import MPIExecutor\n 34from libensemble.gen_funcs.persistent_sampling_var_resources import uniform_sample_diff_simulations as gen_f\n 35from libensemble.specs import AllocSpecs, ExitCriteria, GenSpecs, LibeSpecs, SimSpecs\n 36\n 37if __name__ == \"__main__\":\n 38 # Initialize MPI Executor instance\n 39 exctr = MPIExecutor()\n 40\n 41 # Register simulation executable with executor\n 42 cpu_app = os.path.join(os.getcwd(), \"../forces_app/forces_cpu.x\")\n 43 gpu_app = os.path.join(os.getcwd(), \"../forces_app/forces_gpu.x\")\n 44\n 45 if not os.path.isfile(cpu_app):\n 46 sys.exit(f\"{cpu_app} not found - please build first in ../forces_app dir\")\n 47 if not os.path.isfile(gpu_app):\n 48 sys.exit(f\"{gpu_app} not found - please build first in ../forces_app dir\")\n 49\n 50 exctr.register_app(full_path=cpu_app, app_name=\"cpu_app\")\n 51 exctr.register_app(full_path=gpu_app, app_name=\"gpu_app\")\n 52\n 53 # Parse number of workers, comms type, etc.", "mimetype": "text/plain", "start_char_idx": 3772, "end_char_idx": 6266, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "392676bf-134a-4404-b01c-ed7dfe3d36c6": {"__data__": {"id_": "392676bf-134a-4404-b01c-ed7dfe3d36c6", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_gpu_multi_app.html", "file_name": "forces_simf_gpu_multi_app.html", "file_type": "text/html", "file_size": 42926, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5dcdc40e-667c-4b65-b20f-971650733e45", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_gpu_multi_app.html", "file_name": "forces_simf_gpu_multi_app.html", "file_type": "text/html", "file_size": 42926, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "1d1a89f6605370c7b46391ed268a88b743859f7b760d1e2bdd2ec6927a5d458c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4149ce86-92b5-483f-abc8-786721a02f2f", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_gpu_multi_app.html", "file_name": "forces_simf_gpu_multi_app.html", "file_type": "text/html", "file_size": 42926, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "555165b89285b4c2c48f888e20a18f210c3908a0c4367322a4c91bcbbb72705b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "from arguments\n 54 ensemble = Ensemble(parse_args=True, executor=exctr)\n 55 nsim_workers = ensemble.nworkers - 1 # One worker is for persistent generator\n 56\n 57 # Persistent gen does not need resources\n 58 ensemble.libE_specs = LibeSpecs(\n 59 num_resource_sets=nsim_workers,\n 60 sim_dirs_make=True,\n 61 stats_fmt={\"show_resource_sets\": True}, # see resource sets in libE_stats.txt\n 62 # resource_info = {\"gpus_on_node\": 4}, # for mocking GPUs\n 63 )\n 64\n 65 ensemble.sim_specs = SimSpecs(\n 66 sim_f=run_forces,\n 67 inputs=[\"x\", \"app_type\"],\n 68 outputs=[(\"energy\", float)],\n 69 )\n 70\n 71 ensemble.gen_specs = GenSpecs(\n 72 gen_f=gen_f,\n 73 inputs=[], # No input when starting persistent generator\n 74 persis_in=[\"sim_id\"], # Return sim_ids of evaluated points to generator\n 75 outputs=[\n 76 (\"x\", float, (1,)),\n 77 (\"num_procs\", int), # num_procs auto given to sim when using MPIExecutor\n 78 (\"num_gpus\", int), # num_gpus auto given to sim when using MPIExecutor\n 79 (\"app_type\", \"S10\"), # select app type (cpu_app or gpu_app)\n 80 ],\n 81 user={\n 82 \"initial_batch_size\": nsim_workers,\n 83 \"lb\": np.array([5000]), # min particles\n 84 \"ub\": np.array([10000]), # max particles\n 85 \"max_procs\": (nsim_workers) // 2, # Any sim created can req. 1 worker up to max\n 86 },\n 87 )\n 88\n 89 # Starts one persistent generator. Simulated values are returned in batch.\n 90 ensemble.alloc_specs = AllocSpecs(\n 91 alloc_f=alloc_f,\n 92 user={\n 93 \"async_return\": False, # False causes batch returns\n 94 },\n 95 )\n 96\n 97 # Instruct libEnsemble to exit after this many simulations.\n 98 ensemble.exit_criteria = ExitCriteria(sim_max=nsim_workers * 2)\n 99\n100 # Seed random streams for each worker, particularly for gen_f.\n101 ensemble.add_random_streams()\n102\n103 # Run ensemble\n104 ensemble.run()\n105\n106 if ensemble.is_manager:\n107 # Note, this will change if changing sim_max, nworkers, lb, ub, etc.\n108 chksum = np.sum(ensemble.H[\"energy\"])\n109 print(f\"Final energy checksum: {chksum}\")\n110\n111 exp_chksums = {16: -21935405.696289998, 32: -26563930.6356}\n112 exp_chksum = exp_chksums.get(ensemble.exit_criteria.sim_max)\n113\n114 if exp_chksum is not None:\n115 assert np.isclose(chksum, exp_chksum), f\"energy check sum is {chksum}\"\n116 print(\"Checksum passed\")\n117 else:\n118 print(\"Run complete. An expected checksum has not been provided for the given sim_max\")\n\nMore information is available in the Forces GPU tutorial\nand the video demonstration on Frontier.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 6267, "end_char_idx": 8836, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "10641147-2345-418a-be03-ff66dab0be89": {"__data__": {"id_": "10641147-2345-418a-be03-ff66dab0be89", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_gpu_vary_resources.html", "file_name": "forces_simf_gpu_vary_resources.html", "file_type": "text/html", "file_size": 37610, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "496312c5-c600-42ef-aed5-9bee50828da7", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_gpu_vary_resources.html", "file_name": "forces_simf_gpu_vary_resources.html", "file_type": "text/html", "file_size": 37610, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "56e05f4025b48e48a24e76ccd9c6ace38a9597540a787a072e56f9e331af23a3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f8043767-44bb-4417-bc39-63aac7d2455d", "node_type": "1", "metadata": {}, "hash": "86900aa99053559fa00b5e617ec429fd926c20c2dd19edf397793fce95f51e01", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Template for GPU executables with dynamic resources \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nSimple simulation functions\nFunctions that run user applications\nVariable resources\nTemplate for CPU executables\nTemplate for CPU executables with input file\nTemplate for GPU executables\nTemplate for GPU executables with dynamic resources\nrun_forces()\n\nTemplate with dynamic resources (CPU app and GPU app)\nWarpX Example\n\nSpecial simulation functions\n\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nSimulation Functions\nTemplate for GPU executables with dynamic resources\n\n View page source\n\nTemplate for GPU executables with dynamic resources\uf0c1\n\nforces_gpu_var_resources.forces_simf.run_forces(H, persis_info, sim_specs, libE_info)\uf0c1\nLaunches the forces MPI app and auto-assigns ranks and GPU resources\n(based on generator output).\n\nforces_simf.py\n 1import numpy as np\n 2\n 3# Optional status codes to display in libE_stats.txt for each gen or sim\n 4from libensemble.message_numbers import TASK_FAILED, WORKER_DONE\n 5\n 6# Optional - to print GPU settings\n 7from libensemble.tools.test_support import check_gpu_setting\n 8\n 9\n10def run_forces(H, persis_info, sim_specs, libE_info):\n11 \"\"\"Launches the forces MPI app and auto-assigns ranks and GPU resources\n12 (based on generator output).\n13 \"\"\"\n14\n15 calc_status = 0\n16\n17 # Parse out num particles, from generator function\n18 particles = str(int(H[\"x\"][0][0]))\n19\n20 # app arguments: num particles, timesteps, also using num particles as seed\n21 args = particles + \" \" + str(10) + \" \" + particles\n22\n23 # Retrieve our MPI Executor\n24 exctr = libE_info[\"executor\"]\n25\n26 # Submit our forces app for execution.\n27 task = exctr.submit(app_name=\"forces\", app_args=args)\n28\n29 # Block until the task finishes\n30 task.wait()\n31\n32 # Optional - prints GPU assignment (method and numbers)\n33 check_gpu_setting(task, assert_setting=False, print_setting=True)\n34\n35 # Try loading final energy reading, set the sim's status\n36 statfile = \"forces.stat\"\n37 try:\n38 data = np.loadtxt(statfile)\n39 final_energy = data[-1]\n40 calc_status = WORKER_DONE\n41 except Exception:\n42 final_energy = np.nan\n43 calc_status = TASK_FAILED\n44\n45 # Define our output array, populate with energy reading\n46 output = np.zeros(1, dtype=sim_specs[\"out\"])\n47 output[\"energy\"] = final_energy\n48\n49 # Return final information to worker, for reporting to manager\n50 return output, persis_info, calc_status\n\nExample usage\nNote the use of the generator function uniform_sample_with_var_gpus that sets num_gpus as a gen_specs output field corresponding to each generated simulation input.\nThe special generator output field \u201cnum_gpus\u201d is automatically picked up by each worker\nand will be used when the simulation is run, unless overridden.\n 1#!/usr/bin/env python\n 2\n 3\"\"\"\n 4This example is similar to the forces_gpu test.\n 5\n 6The forces.c application should be built by setting the GPU preprocessor condition\n 7(usually -DGPU) in addition to openMP GPU flags for the given system. See examples\n 8in ../forces_app/build_forces.sh. We recommend running forces.x standalone first\n 9and confirming it is running on the GPU (this is given clearly in the output).\n 10\n 11A number of GPUs is requested based on the number of particles (randomly chosen\n 12from the range for each simulation). For simplicity, the number of GPUs requested\n 13is based on a linear split of the range (lb to ub), rather than absolute particle\n 14count.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3988, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f8043767-44bb-4417-bc39-63aac7d2455d": {"__data__": {"id_": "f8043767-44bb-4417-bc39-63aac7d2455d", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_gpu_vary_resources.html", "file_name": "forces_simf_gpu_vary_resources.html", "file_type": "text/html", "file_size": 37610, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "496312c5-c600-42ef-aed5-9bee50828da7", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_gpu_vary_resources.html", "file_name": "forces_simf_gpu_vary_resources.html", "file_type": "text/html", "file_size": 37610, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "56e05f4025b48e48a24e76ccd9c6ace38a9597540a787a072e56f9e331af23a3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "10641147-2345-418a-be03-ff66dab0be89", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_gpu_vary_resources.html", "file_name": "forces_simf_gpu_vary_resources.html", "file_type": "text/html", "file_size": 37610, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "6bce4b59c20209f3a56b408ec144cee6bbd554102640ddaceabd431af5c7b814", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "be692c4e-1ce0-46eb-834a-bca8c2701ddc", "node_type": "1", "metadata": {}, "hash": "80fde169fe67f73402e16a52a23d142f48f3cc10d5aabc993c36715a2f1ae45a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "1#!/usr/bin/env python\n 2\n 3\"\"\"\n 4This example is similar to the forces_gpu test.\n 5\n 6The forces.c application should be built by setting the GPU preprocessor condition\n 7(usually -DGPU) in addition to openMP GPU flags for the given system. See examples\n 8in ../forces_app/build_forces.sh. We recommend running forces.x standalone first\n 9and confirming it is running on the GPU (this is given clearly in the output).\n 10\n 11A number of GPUs is requested based on the number of particles (randomly chosen\n 12from the range for each simulation). For simplicity, the number of GPUs requested\n 13is based on a linear split of the range (lb to ub), rather than absolute particle\n 14count.\n 15\n 16To mock on a non-GPU system, uncomment the resource_info line in libE_specs. You\n 17will compile forces without the -DGPU option. It is recommended that the ub and/or lb for\n 18particle counts are reduced for CPU performance.\n 19\"\"\"\n 20\n 21import os\n 22import sys\n 23\n 24import numpy as np\n 25from forces_simf import run_forces # Sim func from current dir\n 26\n 27from libensemble import Ensemble\n 28from libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\n 29from libensemble.executors import MPIExecutor\n 30from libensemble.gen_funcs.persistent_sampling_var_resources import uniform_sample_with_var_gpus as gen_f\n 31from libensemble.specs import AllocSpecs, ExitCriteria, GenSpecs, LibeSpecs, SimSpecs\n 32\n 33if __name__ == \"__main__\":\n 34 # Initialize MPI Executor\n 35 exctr = MPIExecutor()\n 36 sim_app = os.path.join(os.getcwd(), \"../forces_app/forces.x\")\n 37\n 38 if not os.path.isfile(sim_app):\n 39 sys.exit(\"forces.x not found - please build first in ../forces_app dir\")\n 40\n 41 exctr.register_app(full_path=sim_app, app_name=\"forces\")\n 42\n 43 # Parse number of workers, comms type, etc. from arguments\n 44 ensemble = Ensemble(parse_args=True, executor=exctr)\n 45 nsim_workers = ensemble.nworkers - 1 # One worker is for persistent generator\n 46\n 47 # Persistent gen does not need resources\n 48 ensemble.libE_specs = LibeSpecs(\n 49 num_resource_sets=nsim_workers,\n 50 sim_dirs_make=True,\n 51 stats_fmt={\"show_resource_sets\": True}, # see resource sets in libE_stats.txt\n 52 # resource_info = {\"gpus_on_node\": 4}, # for mocking GPUs\n 53 )\n 54\n 55 ensemble.sim_specs = SimSpecs(\n 56 sim_f=run_forces,\n 57 inputs=[\"x\"],\n 58 outputs=[(\"energy\", float)],\n 59 )\n 60\n 61 ensemble.gen_specs = GenSpecs(\n 62 gen_f=gen_f,\n 63 inputs=[], # No input when start persistent generator\n 64 persis_in=[\"sim_id\"], # Return sim_ids of evaluated points to generator\n 65 outputs=[\n 66 (\"x\", float, (1,)),\n 67 (\"num_gpus\", int), # num_gpus auto given to sim when use MPIExecutor.\n 68 ],\n 69 user={\n 70 \"initial_batch_size\": nsim_workers,\n 71 \"lb\": np.array([50000]), # min particles\n 72 \"ub\": np.array([100000]), # max particles\n 73 \"max_gpus\": nsim_workers,\n 74 },\n 75 )\n 76\n 77 # Starts one persistent generator. Simulated values are returned in batch.\n 78 ensemble.alloc_specs = AllocSpecs(\n 79 alloc_f=alloc_f,\n 80 user={\n 81 \"async_return\": False, # False causes batch returns\n 82 },\n 83 )\n 84\n 85 # Instruct libEnsemble to exit after this many simulations.", "mimetype": "text/plain", "start_char_idx": 3303, "end_char_idx": 6474, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "be692c4e-1ce0-46eb-834a-bca8c2701ddc": {"__data__": {"id_": "be692c4e-1ce0-46eb-834a-bca8c2701ddc", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_gpu_vary_resources.html", "file_name": "forces_simf_gpu_vary_resources.html", "file_type": "text/html", "file_size": 37610, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "496312c5-c600-42ef-aed5-9bee50828da7", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_gpu_vary_resources.html", "file_name": "forces_simf_gpu_vary_resources.html", "file_type": "text/html", "file_size": 37610, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "56e05f4025b48e48a24e76ccd9c6ace38a9597540a787a072e56f9e331af23a3", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f8043767-44bb-4417-bc39-63aac7d2455d", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_gpu_vary_resources.html", "file_name": "forces_simf_gpu_vary_resources.html", "file_type": "text/html", "file_size": 37610, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "bbf33316b2b2b41caae58d196b5323f86e75923728bdaa774817fd7c082be608", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "68 ],\n 69 user={\n 70 \"initial_batch_size\": nsim_workers,\n 71 \"lb\": np.array([50000]), # min particles\n 72 \"ub\": np.array([100000]), # max particles\n 73 \"max_gpus\": nsim_workers,\n 74 },\n 75 )\n 76\n 77 # Starts one persistent generator. Simulated values are returned in batch.\n 78 ensemble.alloc_specs = AllocSpecs(\n 79 alloc_f=alloc_f,\n 80 user={\n 81 \"async_return\": False, # False causes batch returns\n 82 },\n 83 )\n 84\n 85 # Instruct libEnsemble to exit after this many simulations.\n 86 ensemble.exit_criteria = ExitCriteria(sim_max=8)\n 87\n 88 # Seed random streams for each worker, particularly for gen_f\n 89 ensemble.add_random_streams()\n 90\n 91 # Run ensemble\n 92 ensemble.run()\n 93\n 94 if ensemble.is_manager:\n 95 # Note, this will change if changing sim_max, nworkers, lb, ub, etc.\n 96 if ensemble.exit_criteria.sim_max == 8:\n 97 chksum = np.sum(ensemble.H[\"energy\"])\n 98 assert np.isclose(chksum, 96288744.35136001), f\"energy check sum is {chksum}\"\n 99 print(\"Checksum passed\")\n100 else:\n101 print(\"Run complete; a checksum has not been provided for the given sim_max\")\n\nAlso see the Forces GPU tutorial and the\nvideo demonstration on Frontier.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 5993, "end_char_idx": 7269, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d0cd881a-d366-434f-807e-5e90f774ea04": {"__data__": {"id_": "d0cd881a-d366-434f-807e-5e90f774ea04", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_input_file.html", "file_name": "forces_simf_input_file.html", "file_type": "text/html", "file_size": 37998, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3de7fe87-a52d-478b-a9fc-5a7aedeaa802", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_input_file.html", "file_name": "forces_simf_input_file.html", "file_type": "text/html", "file_size": 37998, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "99622e233f4ea3379afeb620842407f0546f0d76231239514b4ce5c75c167c90", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "50b6d940-fde8-44be-99c6-4991d4ddf00a", "node_type": "1", "metadata": {}, "hash": "b38ab1dfceb7e5878d4dd4540fa0704a1a6f179a96012d15858314cf03f1a2b1", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Template for CPU executables with input file \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nSimple simulation functions\nFunctions that run user applications\nVariable resources\nTemplate for CPU executables\nTemplate for CPU executables with input file\nrun_forces()\n\nTemplate for GPU executables\nTemplate for GPU executables with dynamic resources\nTemplate with dynamic resources (CPU app and GPU app)\nWarpX Example\n\nSpecial simulation functions\n\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nSimulation Functions\nTemplate for CPU executables with input file\n\n View page source\n\nTemplate for CPU executables with input file\uf0c1\nMany applications read an input file instead of being given parameters directly\non the run line.\nIn this variant of the forces example, a templated input file is parameterized\nfor each evaluation.\nThis requires jinja2 to be installed:\npip install jinja2\n\nIn the example, the file forces_input contains the following (remember\nwe are using particles as seed also for simplicity):\nnum_particles = {{particles}}\nnum_steps = 10\nrand_seed = {{particles}}\n\nlibEnsemble will copy this input file to each simulation directory. There, the\nsimulation function will updates the input file with the particles value for\nthis simulation.\n\nforces_simple_with_input_file.forces_simf.run_forces(H, persis_info, sim_specs, libE_info)\uf0c1\nRuns the forces MPI application reading input from file\n\nforces_simf.py\n 1import jinja2\n 2import numpy as np\n 3\n 4# Optional status codes to display in libE_stats.txt for each gen or sim\n 5from libensemble.message_numbers import TASK_FAILED, WORKER_DONE\n 6\n 7\n 8def set_input_file_params(H, sim_specs, ints=False):\n 9 \"\"\"\n10 This is a general function to parameterize an input file with any inputs\n11 from sim_specs[\"in\"]\n12\n13 Often sim_specs_in[\"x\"] may be multi-dimensional, where each dimension\n14 corresponds to a different input name in sim_specs[\"user\"][\"input_names\"]).\n15 Effectively an unpacking of \"x\"\n16 \"\"\"\n17 input_file = sim_specs[\"user\"][\"input_filename\"]\n18 input_values = {}\n19 for i, name in enumerate(sim_specs[\"user\"][\"input_names\"]):\n20 value = int(H[\"x\"][0][i]) if ints else H[\"x\"][0][i]\n21 input_values[name] = value\n22 with open(input_file, \"r\") as f:\n23 template = jinja2.Template(f.read())\n24 with open(input_file, \"w\") as f:\n25 f.write(template.render(input_values))\n26\n27\n28def run_forces(H, persis_info, sim_specs, libE_info):\n29 \"\"\"Runs the forces MPI application reading input from file\"\"\"\n30\n31 calc_status = 0\n32\n33 set_input_file_params(H, sim_specs, ints=True)\n34\n35 # Retrieve our MPI Executor\n36 exctr = libE_info[\"executor\"]\n37\n38 # Submit our forces app for execution.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3203, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "50b6d940-fde8-44be-99c6-4991d4ddf00a": {"__data__": {"id_": "50b6d940-fde8-44be-99c6-4991d4ddf00a", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_input_file.html", "file_name": "forces_simf_input_file.html", "file_type": "text/html", "file_size": 37998, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3de7fe87-a52d-478b-a9fc-5a7aedeaa802", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_input_file.html", "file_name": "forces_simf_input_file.html", "file_type": "text/html", "file_size": 37998, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "99622e233f4ea3379afeb620842407f0546f0d76231239514b4ce5c75c167c90", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d0cd881a-d366-434f-807e-5e90f774ea04", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/forces_simf_input_file.html", "file_name": "forces_simf_input_file.html", "file_type": "text/html", "file_size": 37998, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "92325b00e65b55f9e152cf9972fa5506c5d5e3a23b9318a4dedddb57b4bd7214", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "39 task = exctr.submit(app_name=\"forces\") # app_args removed\n40\n41 # Block until the task finishes\n42 task.wait(timeout=60)\n43\n44 # Stat file to check for bad runs\n45 statfile = \"forces.stat\"\n46\n47 # Try loading final energy reading, set the sim's status\n48 try:\n49 data = np.loadtxt(statfile)\n50 final_energy = data[-1]\n51 calc_status = WORKER_DONE\n52 except Exception:\n53 final_energy = np.nan\n54 calc_status = TASK_FAILED\n55\n56 # Define our output array, populate with energy reading\n57 outspecs = sim_specs[\"out\"]\n58 output = np.zeros(1, dtype=outspecs)\n59 output[\"energy\"][0] = final_energy\n60\n61 # Return final information to worker, for reporting to manager\n62 return output, persis_info, calc_status\n\nExample usage\n 1#!/usr/bin/env python\n 2import os\n 3import sys\n 4\n 5import numpy as np\n 6from forces_simf import run_forces # Sim func from current dir\n 7\n 8from libensemble import Ensemble\n 9from libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\n10from libensemble.executors import MPIExecutor\n11from libensemble.gen_funcs.persistent_sampling import persistent_uniform as gen_f\n12from libensemble.specs import AllocSpecs, ExitCriteria, GenSpecs, LibeSpecs, SimSpecs\n13\n14if __name__ == \"__main__\":\n15 # Initialize MPI Executor\n16 exctr = MPIExecutor()\n17\n18 # Register simulation executable with executor\n19 sim_app = os.path.join(os.getcwd(), \"../forces_app/forces.x\")\n20\n21 if not os.path.isfile(sim_app):\n22 sys.exit(\"forces.x not found - please build first in ../forces_app dir\")\n23\n24 exctr.register_app(full_path=sim_app, app_name=\"forces\")\n25\n26 # Parse number of workers, comms type, etc. from arguments\n27 ensemble = Ensemble(parse_args=True, executor=exctr)\n28 nsim_workers = ensemble.nworkers - 1 # One worker is for persistent generator\n29\n30 input_file = \"forces_input\"\n31\n32 # Persistent gen does not need resources\n33 ensemble.libE_specs = LibeSpecs(\n34 num_resource_sets=nsim_workers,\n35 sim_dirs_make=True,\n36 sim_dir_copy_files=[input_file],\n37 )\n38\n39 ensemble.sim_specs = SimSpecs(\n40 sim_f=run_forces,\n41 inputs=[\"x\"],\n42 outputs=[(\"energy\", float)],\n43 user={\"input_filename\": input_file, \"input_names\": [\"particles\"]},\n44 )\n45\n46 ensemble.gen_specs = GenSpecs(\n47 gen_f=gen_f,\n48 inputs=[], # No input when start persistent generator\n49 persis_in=[\"sim_id\"], # Return sim_ids of evaluated points to generator\n50 outputs=[(\"x\", float, (1,))],\n51 user={\n52 \"initial_batch_size\": nsim_workers,\n53 \"lb\": np.array([1000]), # min particles\n54 \"ub\": np.array([3000]), # max particles\n55 },\n56 )\n57\n58 # Starts one persistent generator. Simulated values are returned in batch.\n59 ensemble.alloc_specs = AllocSpecs(\n60 alloc_f=alloc_f,\n61 user={\n62 \"async_return\": False, # False causes batch returns\n63 },\n64 )\n65\n66 # Instruct libEnsemble to exit after this many simulations\n67 ensemble.exit_criteria = ExitCriteria(sim_max=8)\n68\n69 # Seed random streams for each worker, particularly for gen_f\n70 ensemble.add_random_streams()\n71\n72 # Run ensemble\n73 ensemble.run()\n74\n75 if ensemble.is_manager:\n76 # Note, this will change if changing sim_max, nworkers, lb, ub, etc.\n77 print(f'Final energy checksum: {np.sum(ensemble.H[\"energy\"])}')\n78\n79 # To see the input/output for each evaluation\n80 # print(ensemble.H[[\"sim_id\", \"x\", \"energy\"]])\n\nAlso see the Forces tutorial.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 3204, "end_char_idx": 6660, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "b1db8445-be8c-482a-8968-2f08de082e0d": {"__data__": {"id_": "b1db8445-be8c-482a-8968-2f08de082e0d", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/inverse_bayes.html", "file_name": "inverse_bayes.html", "file_type": "text/html", "file_size": 15284, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a601e842-775f-4005-894a-2388164b0f64", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/inverse_bayes.html", "file_name": "inverse_bayes.html", "file_type": "text/html", "file_size": 15284, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "0548e4d5ff922eec120d3d183851c21b026eafbdceed32e8dc39371d955b6e0c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "inverse_bayes \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nSimple simulation functions\nBorehole function\nBorehole function with kills\nChwirut1 vector-valued function\nInverse Bayesian likelihood\nlikelihood_calculator()\n\nNorm\nRosenbrock test optimization function\nSix Hump Camel\nTest noisy function\nTest periodic function\n\nFunctions that run user applications\nSpecial simulation functions\n\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nSimulation Functions\ninverse_bayes\n\n View page source\n\ninverse_bayes\uf0c1\n\ninverse_bayes.likelihood_calculator(H, persis_info, sim_specs, _)\uf0c1\nEvaluates likelihood\n\ninverse_bayes.py\n 1# Sim_func\n 2__all__ = [\"likelihood_calculator\"]\n 3\n 4import numpy as np\n 5\n 6from libensemble.sim_funcs.six_hump_camel import six_hump_camel_func\n 7\n 8\n 9def likelihood_calculator(H, persis_info, sim_specs, _):\n10 \"\"\"\n11 Evaluates likelihood\n12 \"\"\"\n13 H_o = np.zeros(len(H[\"x\"]), dtype=sim_specs[\"out\"])\n14 for i, x in enumerate(H[\"x\"]):\n15 H_o[\"like\"][i] = six_hump_camel_func(x)\n16\n17 return H_o, persis_info, \"custom_status\"\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1726, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "137a2ae1-57b8-48d7-b204-f27cf812b3f2": {"__data__": {"id_": "137a2ae1-57b8-48d7-b204-f27cf812b3f2", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/mock_sim.html", "file_name": "mock_sim.html", "file_type": "text/html", "file_size": 31599, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f17b1fbf-f81c-4550-bb4c-f75a5efd33c8", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/mock_sim.html", "file_name": "mock_sim.html", "file_type": "text/html", "file_size": 31599, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "fc3be9ed5ed86cc3fdd9dd76de769fa75e2970dd43223b45386ad3b90f356700", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a5559283-5081-4ce1-b974-028abc7279e4", "node_type": "1", "metadata": {}, "hash": "57b778da2c3e742596e71a0efd27e7e0173f86c0353340dac68cf378fbbad8cd", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Mock simulation evaluations (re-run using history file) \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nSimple simulation functions\nFunctions that run user applications\nSpecial simulation functions\nMock simulation evaluations (re-run using history file)\nmock_sim()\n\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nSimulation Functions\nMock simulation evaluations (re-run using history file)\n\n View page source\n\nMock simulation evaluations (re-run using history file)\uf0c1\n\nmock_sim.mock_sim(H, persis_info, sim_specs, libE_info)\uf0c1\nPlaces sim_specs[\"out\"] from a numpy file into the outputs. Allows a\nuser to reproduce an existing run while, for example, capturing additional\ninformation from a gen. Requires a user to have set\nsim_specs[\"user\"][\"history_file\"] to point to a history file from a\nprevious run.\n\nmock_sim.py\n 1import numpy as np\n 2\n 3\n 4def mock_sim(H, persis_info, sim_specs, libE_info):\n 5 \"\"\"\n 6 Places ``sim_specs[\"out\"]`` from a numpy file into the outputs. Allows a\n 7 user to reproduce an existing run while, for example, capturing additional\n 8 information from a gen. Requires a user to have set\n 9 ``sim_specs[\"user\"][\"history_file\"]`` to point to a history file from a\n10 previous run.\n11 \"\"\"\n12\n13 hfile = sim_specs[\"user\"][\"history_file\"]\n14 nparray = np.load(hfile)\n15 row = libE_info[\"H_rows\"][:][0]\n16 libE_output = np.zeros(1, dtype=sim_specs[\"out\"])\n17\n18 for field in libE_output.dtype.names:\n19 libE_output[field] = nparray[row][field]\n20\n21 return libE_output, persis_info\n\nExample usage\nThis test runs two repetitions. The first ensemble dumps a history file, the second replays\nthe first run using the mock sim with the history file.\n 1\"\"\"\n 2Runs libEnsemble with a non-persistent generator performing uniform random\n 3sampling.\n 4\n 5Execute via one of the following commands (e.g. 3 workers):\n 6 mpiexec -np 4 python test_uniform_sampling.py\n 7 python test_uniform_sampling.py --nworkers 3\n 8 python test_uniform_sampling.py --nworkers 3 --comms tcp\n 9\n10The number of concurrent evaluations of the objective function will be 4-1=3.\n11\"\"\"\n12\n13# Do not change these lines - they are parsed by run-tests.sh\n14# TESTSUITE_COMMS: mpi local tcp\n15# TESTSUITE_NPROCS: 2 4\n16\n17import datetime\n18import os\n19\n20import numpy as np\n21\n22from libensemble.gen_funcs.sampling import uniform_random_sample\n23\n24# Import libEnsemble items for this test\n25from libensemble.libE import libE\n26from libensemble.sim_funcs.mock_sim import mock_sim\n27from libensemble.sim_funcs.six_hump_camel import six_hump_camel\n28from libensemble.tests.regression_tests.common import read_generated_file\n29from libensemble.tests.regression_tests.support import six_hump_camel_minima as minima\n30from libensemble.tools import add_unique_random_streams, parse_args\n31\n32# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3431, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a5559283-5081-4ce1-b974-028abc7279e4": {"__data__": {"id_": "a5559283-5081-4ce1-b974-028abc7279e4", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/mock_sim.html", "file_name": "mock_sim.html", "file_type": "text/html", "file_size": 31599, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f17b1fbf-f81c-4550-bb4c-f75a5efd33c8", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/mock_sim.html", "file_name": "mock_sim.html", "file_type": "text/html", "file_size": 31599, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "fc3be9ed5ed86cc3fdd9dd76de769fa75e2970dd43223b45386ad3b90f356700", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "137a2ae1-57b8-48d7-b204-f27cf812b3f2", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/mock_sim.html", "file_name": "mock_sim.html", "file_type": "text/html", "file_size": 31599, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "4f805c6bcc998ee560f483373e615a47e7b03dd2dcc483b5a815a00cad58143a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "33if __name__ == \"__main__\":\n34 nworkers, is_manager, libE_specs, _ = parse_args()\n35 libE_specs[\"save_every_k_sims\"] = 400\n36 libE_specs[\"save_every_k_gens\"] = 300\n37 libE_specs[\"save_H_with_date\"] = True\n38 libE_specs[\"H_file_prefix\"] = \"TESTING\"\n39\n40 sim_specs = {\n41 \"sim_f\": six_hump_camel, # Function whose output is being minimized\n42 \"in\": [\"x\"], # Keys to be given to sim_f\n43 \"out\": [(\"f\", float)], # Name of the outputs from sim_f\n44 }\n45 # end_sim_specs_rst_tag\n46\n47 gen_specs = {\n48 \"gen_f\": uniform_random_sample, # Function generating sim_f input\n49 \"out\": [(\"x\", float, (2,))], # Tell libE gen_f output, type, size\n50 \"user\": {\n51 \"gen_batch_size\": 500, # Used by this specific gen_f\n52 \"lb\": np.array([-3, -2]), # Used by this specific gen_f\n53 \"ub\": np.array([3, 2]), # Used by this specific gen_f\n54 },\n55 }\n56 # end_gen_specs_rst_tag\n57\n58 persis_info = add_unique_random_streams({}, nworkers + 1)\n59\n60 exit_criteria = {\"gen_max\": 501, \"wallclock_max\": 300}\n61\n62 for run in range(2):\n63 if run == 1:\n64 # Test running a mock sim using previous history file\n65 sim_specs[\"sim_f\"] = mock_sim\n66 hfile = read_generated_file(\"TESTING_*_after_gen_1000.npy\")\n67 sim_specs[\"user\"] = {\"history_file\": hfile}\n68\n69 # Perform the run\n70 H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs)\n71\n72 if is_manager:\n73 assert flag == 0\n74\n75 tol = 0.1\n76 for m in minima:\n77 assert np.min(np.sum((H[\"x\"] - m) ** 2, 1)) < tol\n78\n79 npy_files = [i for i in os.listdir(os.path.dirname(__file__)) if i.endswith(\".npy\")]\n80 date = str(datetime.datetime.today()).split(\" \")[0]\n81 assert any([i.startswith(\"TESTING_\") for i in npy_files])\n82 assert any([date in i for i in npy_files])\n83\n84 print(\"\\nlibEnsemble found the 6 minima within a tolerance \" + str(tol))\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 3432, "end_char_idx": 5372, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "849391de-8a2d-4bcc-a37d-6209c3ce7b4d": {"__data__": {"id_": "849391de-8a2d-4bcc-a37d-6209c3ce7b4d", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/noisy_vector_mapping.html", "file_name": "noisy_vector_mapping.html", "file_type": "text/html", "file_size": 25148, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f89ef0f6-e131-494d-a549-316d80880169", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/noisy_vector_mapping.html", "file_name": "noisy_vector_mapping.html", "file_type": "text/html", "file_size": 25148, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "ff8737720d1addbd25f02e8a5611acbae5220606ffc6a9696f5244f58cf4a31e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "noisy_vector_mapping \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nSimple simulation functions\nBorehole function\nBorehole function with kills\nChwirut1 vector-valued function\nInverse Bayesian likelihood\nNorm\nRosenbrock test optimization function\nSix Hump Camel\nTest noisy function\nfunc_wrapper()\nnoisy_function()\n\nTest periodic function\n\nFunctions that run user applications\nSpecial simulation functions\n\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nSimulation Functions\nnoisy_vector_mapping\n\n View page source\n\nnoisy_vector_mapping\uf0c1\nThis module contains a test noisy function\n\nnoisy_vector_mapping.func_wrapper(H, persis_info, sim_specs, libE_info)\uf0c1\nWraps an objective function\n\nSee also\ntest_persistent_fd_param_finder.py <https://github.com/Libensemble/libensemble/blob/develop/libensemble/tests/regression_tests/test_persistent_fd_param_finder.py>`_\n\nnoisy_vector_mapping.noisy_function(x)\uf0c1\n\nnoisy_vector_mapping.py\n 1\"\"\"\n 2This module contains a test noisy function\n 3\"\"\"\n 4\n 5import numpy as np\n 6from numpy import cos, sin\n 7from numpy.linalg import norm\n 8\n 9\n10def func_wrapper(H, persis_info, sim_specs, libE_info):\n11 \"\"\"\n12 Wraps an objective function\n13\n14 .. seealso::\n15 `test_persistent_fd_param_finder.py` <https://github.com/Libensemble/libensemble/blob/develop/libensemble/tests/regression_tests/test_persistent_fd_param_finder.py>`_ # noqa\n16 \"\"\"\n17\n18 batch = len(H[\"x\"])\n19 H0 = np.zeros(batch, dtype=sim_specs[\"out\"])\n20\n21 for i, x in enumerate(H[\"x\"]):\n22 H0[\"f_val\"][i] = noisy_function(x)[H[\"f_ind\"][i]]\n23\n24 return H0, persis_info\n25\n26\n27def noisy_function(x):\n28 \"\"\" \"\"\"\n29 x1 = x[0]\n30 x2 = x[1]\n31 term1 = (4 - 2.1 * x1**2 + (x1**4) / 3) * x1**2\n32 term2 = x1 * x2\n33 term3 = (-4 + 4 * x2**2) * x2**2\n34\n35 phi1 = 0.9 * sin(100 * norm(x, 1)) * cos(100 * norm(x, np.inf)) + 0.1 * cos(norm(x, 2))\n36 phi1 = phi1 * (4 * phi1**2 - 3)\n37\n38 phi2 = 0.8 * sin(100 * norm(x, 1)) * cos(100 * norm(x, np.inf)) + 0.2 * cos(norm(x, 2))\n39 phi2 = phi2 * (4 * phi2**2 - 3)\n40\n41 phi3 = 0.7 * sin(100 * norm(x, 1)) * cos(100 * norm(x, np.inf)) + 0.3 * cos(norm(x, 2))\n42 phi3 = phi3 * (4 * phi3**2 - 3)\n43\n44 F = np.zeros(3)\n45 F[0] = (1 + 1e-1 * phi1) * term1\n46 F[1] = (1 + 1e-2 * phi2) * term2\n47 F[2] = (1 + 1e-3 * phi3) * term3\n48\n49 return F\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2949, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "04763b8d-2d37-4c95-89d3-bcb6c789c1e7": {"__data__": {"id_": "04763b8d-2d37-4c95-89d3-bcb6c789c1e7", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/periodic_func.html", "file_name": "periodic_func.html", "file_type": "text/html", "file_size": 17095, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cf30a470-80bb-4a2a-9bca-a65d5a146b4c", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/periodic_func.html", "file_name": "periodic_func.html", "file_type": "text/html", "file_size": 17095, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "17347e0bddd52fedcb99f22b2e4d3a8549379a13f8e557eaa17d17e5c5070fde", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "periodic_func \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nSimple simulation functions\nBorehole function\nBorehole function with kills\nChwirut1 vector-valued function\nInverse Bayesian likelihood\nNorm\nRosenbrock test optimization function\nSix Hump Camel\nTest noisy function\nTest periodic function\nfunc_wrapper()\nperiodic_func()\n\nFunctions that run user applications\nSpecial simulation functions\n\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nSimulation Functions\nperiodic_func\n\n View page source\n\nperiodic_func\uf0c1\nThis module contains a periodic test function\n\nperiodic_func.func_wrapper(H, persis_info, sim_specs, libE_info)\uf0c1\nWraps an objective function\n\nperiodic_func.periodic_func(x)\uf0c1\nThis function is periodic\n\nperiodic_func.py\n 1\"\"\"\n 2This module contains a periodic test function\n 3\"\"\"\n 4\n 5import numpy as np\n 6from numpy import cos, sin\n 7\n 8\n 9def func_wrapper(H, persis_info, sim_specs, libE_info):\n10 \"\"\"\n11 Wraps an objective function\n12 \"\"\"\n13\n14 batch = len(H[\"x\"])\n15 H0 = np.zeros(batch, dtype=sim_specs[\"out\"])\n16\n17 for i, x in enumerate(H[\"x\"]):\n18 H0[\"f\"][i] = periodic_func(x)\n19\n20 return H0, persis_info\n21\n22\n23def periodic_func(x):\n24 \"\"\"\n25 This function is periodic\n26 \"\"\"\n27 return sin(x[0]) * cos(x[1])\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1912, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "5eb9e399-2e9e-429c-a165-fa1cf2604846": {"__data__": {"id_": "5eb9e399-2e9e-429c-a165-fa1cf2604846", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/rosenbrock.html", "file_name": "rosenbrock.html", "file_type": "text/html", "file_size": 34282, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4c2d1863-361c-4f9e-851b-54a7aae46733", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/rosenbrock.html", "file_name": "rosenbrock.html", "file_type": "text/html", "file_size": 34282, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "6e40507894e0edb41db80f73137219434b9b13bdbc1205094fb354815d1500d1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d8ed84ee-dc06-4010-8a94-4b4dbf8c6680", "node_type": "1", "metadata": {}, "hash": "1a492bdea1a4521d485afad4a04846537666d40a42945fcc6f3d1e106ee911cb", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "rosenbrock \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nSimple simulation functions\nBorehole function\nBorehole function with kills\nChwirut1 vector-valued function\nInverse Bayesian likelihood\nNorm\nRosenbrock test optimization function\nrosenbrock_eval()\n\nSix Hump Camel\nTest noisy function\nTest periodic function\n\nFunctions that run user applications\nSpecial simulation functions\n\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nSimulation Functions\nrosenbrock\n\n View page source\n\nrosenbrock\uf0c1\nSim function for Rosenbrock function. We include a @const input to the\ngradient, and not the function evaluation, to scale down the gradient\nso the Lipschitz and smoothness term is reduced.\n\nrosenbrock.rosenbrock_eval(H, persis_info, sim_specs, _)\uf0c1\nEvaluates the Rosenbrock function and its gradient\n\nParameters:\n\nH (dict) \u2013 Dictionary containing input points\npersis_info (dict) \u2013 Persistent state information\nsim_specs (dict) \u2013 Simulation specifications\n\nReturns:\n\nnumpy.ndarray - Evaluated function values\ndict - Updated persis_info\n\nReturn type:\ntuple\n\nrosenbrock.py\n 1\"\"\"\n 2Sim function for Rosenbrock function. We include a @const input to the\n 3gradient, and not the function evaluation, to scale down the gradient\n 4so the Lipschitz and smoothness term is reduced.\n 5\"\"\"\n 6\n 7import numpy as np\n 8\n 9__all__ = [\"rosenbrock_eval\"]\n 10\n 11\n 12def EvaluateFunction(x, component=None):\n 13 \"\"\"\n 14 Evaluates the chained Rosenbrock function\n 15\n 16 Parameters\n 17 ----------\n 18 x : :class:`numpy.ndarray`\n 19 Input vector\n 20 component : int, optional\n 21 Index of the function component\n 22\n 23 Returns\n 24 -------\n 25 float\n 26 Evaluated function value\n 27 \"\"\"\n 28\n 29 assert len(x) % 2 == 0, \"Length of input vector must be even\"\n 30\n 31 n = len(x) // 2\n 32\n 33 if component is None:\n 34 f1 = 100 * np.power(np.power(x[::2], 2) - x[1::2], 2)\n 35 f2 = np.power(x[::2] - np.ones(n), 2)\n 36 f = np.sum(f1) + np.sum(f2)\n 37\n 38 else:\n 39 i = component\n 40 x1 = x[2 * i]\n 41 x2 = x[2 * i + 1]\n 42 f = 100 * (x1**2 - x2) ** 2 + (x1 - 1) ** 2\n 43\n 44 return f.squeeze()\n 45\n 46\n 47def EvaluateJacobian(x, component, const):\n 48 \"\"\"\n 49 Evaluates the chained Rosenbrock Jacobian\n 50\n 51 Parameters\n 52 ----------\n 53 x : :class:`numpy.ndarray`\n 54 Input vector\n 55 component : int\n 56 Index of the function component\n 57 const : float\n 58 Term to scale gradient by\n 59\n 60 Returns\n 61 -------\n 62 :class:`numpy.ndarray`\n 63 Jacobian of the function\n 64 \"\"\"\n 65\n 66 assert len(x) % 2 == 0, print(\"must be even lengthed input vector\")\n 67\n 68 n = len(x) // 2\n 69 df = np.zeros(len(x), dtype=float)\n 70\n 71 if np.isnan(component):\n 72 df[::2] = 400 * np.multiply(x[::2], np.power(x[::2],", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3229, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d8ed84ee-dc06-4010-8a94-4b4dbf8c6680": {"__data__": {"id_": "d8ed84ee-dc06-4010-8a94-4b4dbf8c6680", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/rosenbrock.html", "file_name": "rosenbrock.html", "file_type": "text/html", "file_size": 34282, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4c2d1863-361c-4f9e-851b-54a7aae46733", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/rosenbrock.html", "file_name": "rosenbrock.html", "file_type": "text/html", "file_size": 34282, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "6e40507894e0edb41db80f73137219434b9b13bdbc1205094fb354815d1500d1", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5eb9e399-2e9e-429c-a165-fa1cf2604846", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/rosenbrock.html", "file_name": "rosenbrock.html", "file_type": "text/html", "file_size": 34282, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "1ac2014800852d8425e2e7b370befee12a815dd03cf0d78e117ef9639a3fdcc6", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "component, const):\n 48 \"\"\"\n 49 Evaluates the chained Rosenbrock Jacobian\n 50\n 51 Parameters\n 52 ----------\n 53 x : :class:`numpy.ndarray`\n 54 Input vector\n 55 component : int\n 56 Index of the function component\n 57 const : float\n 58 Term to scale gradient by\n 59\n 60 Returns\n 61 -------\n 62 :class:`numpy.ndarray`\n 63 Jacobian of the function\n 64 \"\"\"\n 65\n 66 assert len(x) % 2 == 0, print(\"must be even lengthed input vector\")\n 67\n 68 n = len(x) // 2\n 69 df = np.zeros(len(x), dtype=float)\n 70\n 71 if np.isnan(component):\n 72 df[::2] = 400 * np.multiply(x[::2], np.power(x[::2], 2) - x[1::2]) + 2 * (x[::2] - np.ones(n))\n 73 df[1::2] = -200 * (np.power(x[::2], 2) - x[1::2])\n 74\n 75 else:\n 76 i = component\n 77 x1 = x[2 * i]\n 78 x2 = x[2 * i + 1]\n 79\n 80 df[2 * i] = 400 * x1 * (x1**2 - x2) + 2 * (x1 - 1)\n 81 df[2 * i + 1] = -200 * (x1**2 - x2)\n 82\n 83 return 1.0 / const * df\n 84\n 85\n 86def rosenbrock_eval(H, persis_info, sim_specs, _):\n 87 \"\"\"\n 88 Evaluates the Rosenbrock function and its gradient\n 89\n 90 Parameters\n 91 ----------\n 92 H : dict\n 93 Dictionary containing input points\n 94 persis_info : dict\n 95 Persistent state information\n 96 sim_specs : dict\n 97 Simulation specifications\n 98\n 99 Returns\n100 -------\n101 tuple\n102 - :class:`numpy.ndarray` - Evaluated function values\n103 - dict - Updated `persis_info`\n104 \"\"\"\n105\n106 if \"params\" in persis_info:\n107 const = persis_info[\"params\"].get(\"const\", 1000)\n108 else:\n109 const = 1000\n110\n111 batch = len(H[\"x\"])\n112 H_o = np.zeros(batch, dtype=sim_specs[\"out\"])\n113\n114 for i, x in enumerate(H[\"x\"]):\n115 if \"obj_component\" in H.dtype.fields:\n116 obj_component = H[\"obj_component\"][i]\n117 H_o[\"f_i\"][i] = EvaluateFunction(x, obj_component)\n118\n119 if persis_info.get(\"get_grad\", False):\n120 H_o[\"gradf_i\"][i] = EvaluateJacobian(x, obj_component, const)\n121\n122 else:\n123 H_o[\"f\"][i] = EvaluateFunction(x)\n124\n125 if persis_info.get(\"get_grad\", False):\n126 H_o[\"grad\"][i] = EvaluateJacobian(x, np.nan, const)\n127\n128 return H_o, persis_info\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 2651, "end_char_idx": 4783, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "0f1e2863-9fa0-43fc-960c-550139e1d589": {"__data__": {"id_": "0f1e2863-9fa0-43fc-960c-550139e1d589", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/simple_sim.html", "file_name": "simple_sim.html", "file_type": "text/html", "file_size": 16641, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3dc97245-9631-4dc9-aed8-aa005eeb830e", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/simple_sim.html", "file_name": "simple_sim.html", "file_type": "text/html", "file_size": 16641, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "185218555c676f220a208c0cb9ae57ed629e8fea344f7f40ab21cf7fdd7f56b8", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "simple_sim \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nSimple simulation functions\nBorehole function\nBorehole function with kills\nChwirut1 vector-valued function\nInverse Bayesian likelihood\nNorm\nnorm_eval()\n\nRosenbrock test optimization function\nSix Hump Camel\nTest noisy function\nTest periodic function\n\nFunctions that run user applications\nSpecial simulation functions\n\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nSimulation Functions\nsimple_sim\n\n View page source\n\nsimple_sim\uf0c1\nThis module contains an example function that evaluates one point of any dimension >=1\n\nsimple_sim.norm_eval(H, persis_info, sim_specs, _)\uf0c1\nInput Fields: ['x']\nOutput Datatypes: [('f', <class 'float'>)]\nEvaluates the vector norm for a single point x.\n\nSee also\ntest_2d_sampling.py\n\nsimple_sim.py\n 1\"\"\"\n 2This module contains an example function that evaluates one point of any dimension >=1\n 3\"\"\"\n 4\n 5__all__ = [\"norm_eval\"]\n 6\n 7import numpy as np\n 8\n 9from libensemble.specs import input_fields, output_data\n10\n11\n12@input_fields([\"x\"])\n13@output_data([(\"f\", float)])\n14def norm_eval(H, persis_info, sim_specs, _):\n15 \"\"\"\n16 Evaluates the vector norm for a single point ``x``.\n17\n18 .. seealso::\n19 `test_2d_sampling.py <https://github.com/Libensemble/libensemble/blob/develop/libensemble/tests/regression_tests/test_2d_sampling.py>`_ # noqa\n20 \"\"\"\n21 x = H[\"x\"]\n22 H_o = np.zeros(1, dtype=sim_specs[\"out\"])\n23 H_o[\"f\"] = np.linalg.norm(x)\n24 return H_o, persis_info\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2137, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "1c937164-4647-4606-8eaa-3af8e73ace38": {"__data__": {"id_": "1c937164-4647-4606-8eaa-3af8e73ace38", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/six_hump_camel.html", "file_name": "six_hump_camel.html", "file_type": "text/html", "file_size": 40560, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "595a8385-4215-47c3-a97c-9fd17f9ea4a6", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/six_hump_camel.html", "file_name": "six_hump_camel.html", "file_type": "text/html", "file_size": 40560, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "2cab2d053f087b25fb8bc89c42e7f0501d7134e705a20df82b9cd45b618007d5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f6691c51-e0c6-446e-812d-44f86398dd49", "node_type": "1", "metadata": {}, "hash": "59ef960e8341c49b1d7c69ea44dba107816c3e4ab2fc2bbdf40562418e930692", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "six_hump_camel \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nSimple simulation functions\nBorehole function\nBorehole function with kills\nChwirut1 vector-valued function\nInverse Bayesian likelihood\nNorm\nRosenbrock test optimization function\nSix Hump Camel\nsix_hump_camel()\nsix_hump_camel_simple()\npersistent_six_hump_camel()\n\nTest noisy function\nTest periodic function\n\nFunctions that run user applications\nSpecial simulation functions\n\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nSimulation Functions\nsix_hump_camel\n\n View page source\n\nsix_hump_camel\uf0c1\nThis module contains various versions that evaluate the six-hump camel function.\n\nSix-hump camel function is documented here:https://www.sfu.ca/~ssurjano/camel6.html\n\nsix_hump_camel.six_hump_camel(H, persis_info, sim_specs, libE_info)\uf0c1\nInput Fields: ['x']\nOutput Datatypes: [('f', <class 'float'>)]\nEvaluates the six hump camel function for a collection of points given in H[\"x\"].\nAdditionally evaluates the gradient if \"grad\" is a field in\nsim_specs[\"out\"] and pauses for sim_specs[\"user\"][\"pause_time\"]] if\ndefined.\n\nSee also\ntest_uniform_sampling.py\n\nsix_hump_camel.six_hump_camel_simple(x, _, sim_specs)\uf0c1\nInput Fields: ['x']\nOutput Datatypes: [('f', <class 'float'>)]\nEvaluates the six hump camel function for a single point x.\n\nSee also\ntest_fast_alloc.py\n\nsix_hump_camel.persistent_six_hump_camel(H, persis_info, sim_specs, libE_info)\uf0c1\nSimilar to six_hump_camel, but runs in persistent mode.\n\nsix_hump_camel.py\n 1\"\"\"\n 2This module contains various versions that evaluate the six-hump camel function.\n 3\n 4Six-hump camel function is documented here:\n 5 https://www.sfu.ca/~ssurjano/camel6.html\n 6\n 7\"\"\"\n 8\n 9__all__ = [\n 10 \"six_hump_camel\",\n 11 \"six_hump_camel_simple\",\n 12 \"persistent_six_hump_camel\",\n 13]\n 14\n 15import sys\n 16import time\n 17\n 18import numpy as np\n 19\n 20from libensemble.message_numbers import EVAL_SIM_TAG, FINISHED_PERSISTENT_SIM_TAG, PERSIS_STOP, STOP_TAG\n 21from libensemble.specs import input_fields, output_data\n 22from libensemble.tools.persistent_support import PersistentSupport\n 23\n 24\n 25@input_fields([\"x\"])\n 26@output_data([(\"f\", float)])\n 27def six_hump_camel(H, persis_info, sim_specs, libE_info):\n 28 \"\"\"\n 29 Evaluates the six hump camel function for a collection of points given in ``H[\"x\"]``.\n 30 Additionally evaluates the gradient if ``\"grad\"`` is a field in\n 31 ``sim_specs[\"out\"]`` and pauses for ``sim_specs[\"user\"][\"pause_time\"]]`` if\n 32 defined.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3007, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f6691c51-e0c6-446e-812d-44f86398dd49": {"__data__": {"id_": "f6691c51-e0c6-446e-812d-44f86398dd49", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/six_hump_camel.html", "file_name": "six_hump_camel.html", "file_type": "text/html", "file_size": 40560, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "595a8385-4215-47c3-a97c-9fd17f9ea4a6", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/six_hump_camel.html", "file_name": "six_hump_camel.html", "file_type": "text/html", "file_size": 40560, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "2cab2d053f087b25fb8bc89c42e7f0501d7134e705a20df82b9cd45b618007d5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1c937164-4647-4606-8eaa-3af8e73ace38", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/six_hump_camel.html", "file_name": "six_hump_camel.html", "file_type": "text/html", "file_size": 40560, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "415d242bd3ebb009ee6e1e36e8e01f3294126c29c00bd30ad894356cb7b272e4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "aa17b387-561a-44fe-9021-3eac7ac1e751", "node_type": "1", "metadata": {}, "hash": "aa98db693f198068288eea63952a0d980025401ec00c6ffd1639d7c68a8fa3d2", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "30 Additionally evaluates the gradient if ``\"grad\"`` is a field in\n 31 ``sim_specs[\"out\"]`` and pauses for ``sim_specs[\"user\"][\"pause_time\"]]`` if\n 32 defined.\n 33\n 34 .. seealso::\n 35 `test_uniform_sampling.py <https://github.com/Libensemble/libensemble/blob/develop/libensemble/tests/functionality_tests/test_uniform_sampling.py>`_ # noqa\n 36 \"\"\"\n 37\n 38 batch = len(H[\"x\"])\n 39 H_o = np.zeros(batch, dtype=sim_specs[\"out\"])\n 40\n 41 for i, x in enumerate(H[\"x\"]):\n 42 H_o[\"f\"][i] = six_hump_camel_func(x)\n 43\n 44 if \"grad\" in H_o.dtype.names:\n 45 H_o[\"grad\"][i] = six_hump_camel_grad(x)\n 46\n 47 if \"user\" in sim_specs and \"pause_time\" in sim_specs[\"user\"]:\n 48 time.sleep(sim_specs[\"user\"][\"pause_time\"])\n 49\n 50 return H_o, persis_info\n 51\n 52\n 53@input_fields([\"x\"])\n 54@output_data([(\"f\", float)])\n 55def six_hump_camel_simple(x, _, sim_specs):\n 56 \"\"\"\n 57 Evaluates the six hump camel function for a single point ``x``.\n 58\n 59 .. seealso::\n 60 `test_fast_alloc.py <https://github.com/Libensemble/libensemble/blob/develop/libensemble/tests/functionality_tests/test_fast_alloc.py>`_ # noqa\n 61 \"\"\"\n 62\n 63 H_o = np.zeros(1, dtype=sim_specs[\"out\"])\n 64\n 65 H_o[\"f\"] = six_hump_camel_func(x[0][0][:2]) # Ignore more than 2 entries of x\n 66\n 67 if sim_specs[\"user\"].get(\"pause_time\"):\n 68 time.sleep(sim_specs[\"user\"][\"pause_time\"])\n 69\n 70 if sim_specs[\"user\"].get(\"rand\"):\n 71 H_o[\"f\"] += np.random.normal(0, 1)\n 72\n 73 return H_o\n 74\n 75\n 76def persistent_six_hump_camel(H, persis_info, sim_specs, libE_info):\n 77 \"\"\"\n 78 Similar to ``six_hump_camel``, but runs in persistent mode.\n 79 \"\"\"\n 80\n 81 ps = PersistentSupport(libE_info, EVAL_SIM_TAG)\n 82\n 83 # Either start with a work item to process - or just start and wait for data\n 84 if H.size > 0:\n 85 tag = None\n 86 Work = None\n 87 calc_in = H\n 88 else:\n 89 tag, Work, calc_in = ps.recv()\n 90\n 91 while tag not in [STOP_TAG, PERSIS_STOP]:\n 92 # calc_in: This should either be a function (unpack_work ?) or included/unpacked in ps.recv/ps.send_recv.", "mimetype": "text/plain", "start_char_idx": 2848, "end_char_idx": 4854, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "aa17b387-561a-44fe-9021-3eac7ac1e751": {"__data__": {"id_": "aa17b387-561a-44fe-9021-3eac7ac1e751", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/six_hump_camel.html", "file_name": "six_hump_camel.html", "file_type": "text/html", "file_size": 40560, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "595a8385-4215-47c3-a97c-9fd17f9ea4a6", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/six_hump_camel.html", "file_name": "six_hump_camel.html", "file_type": "text/html", "file_size": 40560, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "2cab2d053f087b25fb8bc89c42e7f0501d7134e705a20df82b9cd45b618007d5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f6691c51-e0c6-446e-812d-44f86398dd49", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/six_hump_camel.html", "file_name": "six_hump_camel.html", "file_type": "text/html", "file_size": 40560, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "572a98d2abd456fc1c57c57c8a13db74c7c822ff50224b42375e66576afcf507", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "79 \"\"\"\n 80\n 81 ps = PersistentSupport(libE_info, EVAL_SIM_TAG)\n 82\n 83 # Either start with a work item to process - or just start and wait for data\n 84 if H.size > 0:\n 85 tag = None\n 86 Work = None\n 87 calc_in = H\n 88 else:\n 89 tag, Work, calc_in = ps.recv()\n 90\n 91 while tag not in [STOP_TAG, PERSIS_STOP]:\n 92 # calc_in: This should either be a function (unpack_work ?) or included/unpacked in ps.recv/ps.send_recv.\n 93 if Work is not None:\n 94 persis_info = Work.get(\"persis_info\", persis_info)\n 95 libE_info = Work.get(\"libE_info\", libE_info)\n 96\n 97 # Call standard six_hump_camel sim\n 98 H_o, persis_info = six_hump_camel(calc_in, persis_info, sim_specs, libE_info)\n 99\n100 tag, Work, calc_in = ps.send_recv(H_o)\n101\n102 final_return = None\n103\n104 # Overwrite final point - for testing only\n105 if sim_specs[\"user\"].get(\"replace_final_fields\", 0):\n106 calc_in = np.ones(1, dtype=[(\"x\", float, (2,))])\n107 H_o, persis_info = six_hump_camel(calc_in, persis_info, sim_specs, libE_info)\n108 final_return = H_o\n109\n110 return final_return, persis_info, FINISHED_PERSISTENT_SIM_TAG\n111\n112\n113def six_hump_camel_func(x):\n114 \"\"\"\n115 Definition of the six-hump camel\n116 \"\"\"\n117 x1 = x[0]\n118 x2 = x[1]\n119 term1 = (4 - 2.1 * x1**2 + (x1**4) / 3) * x1**2\n120 term2 = x1 * x2\n121 term3 = (-4 + 4 * x2**2) * x2**2\n122\n123 return term1 + term2 + term3\n124\n125\n126def six_hump_camel_grad(x):\n127 \"\"\"\n128 Definition of the six-hump camel gradient\n129 \"\"\"\n130\n131 x1 = x[0]\n132 x2 = x[1]\n133 grad = np.zeros(2)\n134\n135 grad[0] = 2.0 * (x1**5 - 4.2 * x1**3 + 4.0 * x1 + 0.5 * x2)\n136 grad[1] = x1 + 16 * x2**3 - 8 * x2\n137\n138 return grad\n139\n140\n141if __name__ == \"__main__\":\n142 x = (float(sys.argv[1]), float(sys.argv[2]))\n143 result = six_hump_camel_func(x)\n144 print(result)\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 4436, "end_char_idx": 6336, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ee659d7c-60c9-4270-90c4-cf1d76fffbf6": {"__data__": {"id_": "ee659d7c-60c9-4270-90c4-cf1d76fffbf6", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/surmise_test_function.html", "file_name": "surmise_test_function.html", "file_type": "text/html", "file_size": 35197, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fecd60e3-8891-4582-85ba-313f1ccf2bbd", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/surmise_test_function.html", "file_name": "surmise_test_function.html", "file_type": "text/html", "file_size": 35197, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "2daa0022f8809877d9edd65a1ca37351d77d0a4194c39d4657c7b6ae0be99031", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a122208c-2396-4d9d-94a0-7c5cc76e729c", "node_type": "1", "metadata": {}, "hash": "b3f83a56e2dd8e3a89512bbe259fa6abe4b2840867c2391204e58b55a791bc40", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "surmise_test_function \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nsurmise_test_function\n\n View page source\n\nsurmise_test_function\uf0c1\nCreated on Tue Feb 9 10:27:23 2021\n@author: mosesyhc\n\nsurmise_test_function.borehole(H, persis_info, sim_specs, libE_info)\uf0c1\nWraps the borehole function\n\nsurmise_test_function.borehole_failmodel(x, theta)\uf0c1\nGiven x and theta, return matrix of [row x] times [row theta] of values.\n\nsurmise_test_function.borehole_model(x, theta)\uf0c1\nGiven x and theta, return matrix of [row x] times [row theta] of values.\n\nsurmise_test_function.borehole_true(x)\uf0c1\nGiven x, return matrix of [row x] times 1 of values.\n\nsurmise_test_function.borehole_vec(x, theta)\uf0c1\nGiven x and theta, return vector of values.\n\nsurmise_test_function.tstd2theta(tstd, hard=True)\uf0c1\nGiven standardized theta in [0, 1]^d, return non-standardized theta.\n\nsurmise_test_function.xstd2x(xstd)\uf0c1\nGiven standardized x in [0, 1]^2 x {0, 1}, return non-standardized x.\n\nsurmise_test_function.py\n 1\"\"\"\n 2Created on Tue Feb 9 10:27:23 2021\n 3\n 4@author: mosesyhc\n 5\"\"\"\n 6\n 7import numpy as np\n 8\n 9\n 10def borehole(H, persis_info, sim_specs, libE_info):\n 11 \"\"\"\n 12 Wraps the borehole function\n 13 \"\"\"\n 14\n 15 H_o = np.zeros(H[\"x\"].shape[0], dtype=sim_specs[\"out\"])\n 16\n 17 # If observation do not use failure model\n 18 sim_id = libE_info[\"H_rows\"][0]\n 19 if sim_id > sim_specs[\"user\"][\"num_obs\"]:\n 20 H_o[\"f\"] = borehole_failmodel(H[\"x\"], H[\"thetas\"])\n 21 else:\n 22 H_o[\"f\"] = borehole_model(H[\"x\"], H[\"thetas\"])\n 23 return H_o, persis_info\n 24\n 25\n 26def borehole_failmodel(x, theta):\n 27 \"\"\"Given x and theta, return matrix of [row x] times [row theta] of values.\"\"\"\n 28 f = borehole_model(x, theta)\n 29 wheretoobig = np.where((f / borehole_true(x)) > 1.25)\n 30 f[wheretoobig[0], wheretoobig[1]] = np.inf\n 31 return f\n 32\n 33\n 34def borehole_model(x, theta):\n 35 \"\"\"Given x and theta, return matrix of [row x] times [row theta] of values.\"\"\"\n 36 theta = tstd2theta(theta)\n 37 x = xstd2x(x)\n 38 p = x.shape[0]\n 39 n = theta.shape[0]\n 40\n 41 theta_stacked = np.repeat(theta, repeats=p, axis=0)\n 42 x_stacked = np.tile(x.astype(float), (n, 1))\n 43\n 44 f = borehole_vec(x_stacked, theta_stacked).reshape((n, p))\n 45 return f.T\n 46\n 47\n 48def borehole_true(x):\n 49 \"\"\"Given x, return matrix of [row x] times 1 of values.\"\"\"", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2899, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a122208c-2396-4d9d-94a0-7c5cc76e729c": {"__data__": {"id_": "a122208c-2396-4d9d-94a0-7c5cc76e729c", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/surmise_test_function.html", "file_name": "surmise_test_function.html", "file_type": "text/html", "file_size": 35197, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fecd60e3-8891-4582-85ba-313f1ccf2bbd", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/surmise_test_function.html", "file_name": "surmise_test_function.html", "file_type": "text/html", "file_size": 35197, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "2daa0022f8809877d9edd65a1ca37351d77d0a4194c39d4657c7b6ae0be99031", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ee659d7c-60c9-4270-90c4-cf1d76fffbf6", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/surmise_test_function.html", "file_name": "surmise_test_function.html", "file_type": "text/html", "file_size": 35197, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "85bca07631943802ebf0dec6ce687ecd7a9d0ecb9d058208162afb7f39216730", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "36 theta = tstd2theta(theta)\n 37 x = xstd2x(x)\n 38 p = x.shape[0]\n 39 n = theta.shape[0]\n 40\n 41 theta_stacked = np.repeat(theta, repeats=p, axis=0)\n 42 x_stacked = np.tile(x.astype(float), (n, 1))\n 43\n 44 f = borehole_vec(x_stacked, theta_stacked).reshape((n, p))\n 45 return f.T\n 46\n 47\n 48def borehole_true(x):\n 49 \"\"\"Given x, return matrix of [row x] times 1 of values.\"\"\"\n 50 # assume true theta is [0.5]^d\n 51 theta0 = np.atleast_2d(np.array([0.5] * 4))\n 52 f0 = borehole_model(x, theta0)\n 53\n 54 return f0\n 55\n 56\n 57def borehole_vec(x, theta):\n 58 \"\"\"Given x and theta, return vector of values.\"\"\"\n 59 (Hu, Ld_Kw, Treff, powparam) = np.split(theta, theta.shape[1], axis=1)\n 60 (rw, Hl) = np.split(x[:, :-1], 2, axis=1)\n 61 numer = 2 * np.pi * (Hu - Hl)\n 62 denom1 = 2 * Ld_Kw / rw**2\n 63 denom2 = Treff\n 64\n 65 f = ((numer / ((denom1 + denom2))) * np.exp(powparam * rw)).reshape(-1)\n 66\n 67 return f\n 68\n 69\n 70def tstd2theta(tstd, hard=True):\n 71 \"\"\"Given standardized theta in [0, 1]^d, return non-standardized theta.\"\"\"\n 72 if tstd.ndim < 1.5:\n 73 tstd = tstd[:, None].T\n 74 (Treffs, Hus, LdKw, powparams) = np.split(tstd, tstd.shape[1], axis=1)\n 75\n 76 Treff = (0.5 - 0.05) * Treffs + 0.05\n 77 Hu = Hus * (1110 - 990) + 990\n 78 if hard:\n 79 Ld_Kw = LdKw * (1680 / 1500 - 1120 / 15000) + 1120 / 15000\n 80 else:\n 81 Ld_Kw = LdKw * (1680 / 9855 - 1120 / 12045) + 1120 / 12045\n 82\n 83 powparam = powparams * (0.5 - (-0.5)) + (-0.5)\n 84\n 85 theta = np.hstack((Hu, Ld_Kw, Treff, powparam))\n 86 return theta\n 87\n 88\n 89def xstd2x(xstd):\n 90 \"\"\"Given standardized x in [0, 1]^2 x {0, 1}, return non-standardized x.\"\"\"\n 91 if xstd.ndim < 1.5:\n 92 xstd = xstd[:, None].T\n 93 (rws, Hls, labels) = np.split(xstd, xstd.shape[1], axis=1)\n 94\n 95 rw = rws * (np.log(0.5) - np.log(0.05)) + np.log(0.05)\n 96 rw = np.exp(rw)\n 97 Hl = Hls * (820 - 700) + 700\n 98\n 99 x = np.hstack((rw, Hl, labels))\n100 return x\n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 2524, "end_char_idx": 4537, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "35cae732-4792-4703-a0c4-ed9fd80989e3": {"__data__": {"id_": "35cae732-4792-4703-a0c4-ed9fd80989e3", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/var_resources.html", "file_name": "var_resources.html", "file_type": "text/html", "file_size": 71906, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4f963b0d-a804-41b8-8da4-04b643e49d21", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/var_resources.html", "file_name": "var_resources.html", "file_type": "text/html", "file_size": 71906, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "6150704b87b22e2d20b5153f0943ad4550d4f1b1aa09ebca2218f2e93e947549", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "37f9d637-e329-4df9-ba9d-89bc728531f6", "node_type": "1", "metadata": {}, "hash": "5bf15eb6d2cd4b1411d7b243e109ad4b78478c55f7571b4a98628f9918b2fb49", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "var_resources \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nSimple simulation functions\nFunctions that run user applications\nVariable resources\ngpu_variable_resources()\ngpu_variable_resources_from_gen()\ngpu_variable_resources_subenv()\nmulti_points_with_variable_resources()\nCUDA_variable_resources()\n\nTemplate for CPU executables\nTemplate for CPU executables with input file\nTemplate for GPU executables\nTemplate for GPU executables with dynamic resources\nTemplate with dynamic resources (CPU app and GPU app)\nWarpX Example\n\nSpecial simulation functions\n\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nSimulation Functions\nvar_resources\n\n View page source\n\nvar_resources\uf0c1\nSimulation functions that use the MPIExecutor with dynamic resource assignment.\nsix_hump_camel and helloworld python scripts are used as example\napplications, but these could be any MPI application.\nEach simulation function uses the resources assigned to this worker to set CPU\ncount and, in some functions, specify GPU usage.\nGPUs are not used for the six_hump_camel function, but these tests check the\nassignment is correct. For an example that runs an actual GPU application, see\nthe forces_gpu tutorial under libensemble/tests/scaling_tests/forces/forces_gpu.\nSee CUDA_variable_resources for an example where the sim function\ninterrogates available resources and sets explicitly.\n\nvar_resources.gpu_variable_resources(H, persis_info, sim_specs, libE_info)\uf0c1\nLaunches an app and automatically assigns GPU resources.\nThe six_hump_camel app does not run on the GPU, but this test demonstrates\nhow to automatically assign the GPUs given to this worker via the MPIExecutor.\nThe method used to assign GPUs will be determined by the MPI runner or\nuser-provided configuration (e.g., by setting the platform or\nplatform_specs options or the LIBE_PLATFORM environment variable).\n\nvar_resources.gpu_variable_resources_from_gen(H, persis_info, sim_specs, libE_info)\uf0c1\nInput Fields: ['x']\nOutput Datatypes: [('f', <class 'float'>)]\nLaunches an app and assigns CPU and GPU resources as defined by the gen.\nOtherwise similar to gpu_variable_resources.\n\nvar_resources.gpu_variable_resources_subenv(H, persis_info, sim_specs, libE_info)\uf0c1\nLaunches a chain of apps via bash scripts in different sub-processes.\nDifferent MPI runners are specified for each submit. To run without dry_run\nthese MPI runners need to be present. Dry_run is used by default.\nOtherwise, this test is similar to gpu_variable_resources.\n\nvar_resources.multi_points_with_variable_resources(H, _, sim_specs, libE_info)\uf0c1\nEvaluates either helloworld or six hump camel for a collection of points\ngiven in H[\"x\"] via the MPI executor, supporting variable sized\nsimulations/resources, as determined by the generator. The term rset\nrefers to a resource set (the minimal set of resources that can be assigned\nto each worker). It can be anything from a partition of a node to multiple\nnodes.\nNote that this is also an example that is capable of handling multiple\npoints (sim ids) in each call.\n\nSee also\ntest_uniform_sampling_with_variable_resources.py\n\nvar_resources.CUDA_variable_resources(H, _, sim_specs, libE_info)\uf0c1\nLaunches an app setting GPU resources\nThe standard test apps do not run on GPU, but demonstrates accessing resource\ninformation to set CUDA_VISIBLE_DEVICES, and typical run configuration.\nFor an equivalent function that auto-assigns GPUs using platform detection, see\nGPU_variable_resources.\n\nvar_resources.py\n 1\"\"\"\n 2Simulation functions that use the MPIExecutor with dynamic resource assignment.\n 3``six_hump_camel`` and ``helloworld`` python scripts are used as example\n 4applications, but these could be any MPI application.\n 5\n 6Each simulation function uses the resources assigned to this worker to set CPU\n 7count and, in some functions, specify GPU usage.\n 8\n 9GPUs are not used for the six_hump_camel function, but these tests check the\n 10assignment is correct.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4467, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "37f9d637-e329-4df9-ba9d-89bc728531f6": {"__data__": {"id_": "37f9d637-e329-4df9-ba9d-89bc728531f6", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/var_resources.html", "file_name": "var_resources.html", "file_type": "text/html", "file_size": 71906, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4f963b0d-a804-41b8-8da4-04b643e49d21", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/var_resources.html", "file_name": "var_resources.html", "file_type": "text/html", "file_size": 71906, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "6150704b87b22e2d20b5153f0943ad4550d4f1b1aa09ebca2218f2e93e947549", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "35cae732-4792-4703-a0c4-ed9fd80989e3", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/var_resources.html", "file_name": "var_resources.html", "file_type": "text/html", "file_size": 71906, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "bf9a7635443279ed827e0c102796148a144b5f8b7c9c754db7339c4f3625d6ed", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "152a3c51-4ad9-41a9-b8e8-48a25d211827", "node_type": "1", "metadata": {}, "hash": "82a24fdd322ca42fd219204e6923cfb28cbff3fdece33f5867384bdf04ec9664", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "For an equivalent function that auto-assigns GPUs using platform detection, see\nGPU_variable_resources.\n\nvar_resources.py\n 1\"\"\"\n 2Simulation functions that use the MPIExecutor with dynamic resource assignment.\n 3``six_hump_camel`` and ``helloworld`` python scripts are used as example\n 4applications, but these could be any MPI application.\n 5\n 6Each simulation function uses the resources assigned to this worker to set CPU\n 7count and, in some functions, specify GPU usage.\n 8\n 9GPUs are not used for the six_hump_camel function, but these tests check the\n 10assignment is correct. For an example that runs an actual GPU application, see\n 11the forces_gpu tutorial under libensemble/tests/scaling_tests/forces/forces_gpu.\n 12\n 13See CUDA_variable_resources for an example where the sim function\n 14interrogates available resources and sets explicitly.\n 15\n 16\"\"\"\n 17\n 18__all__ = [\n 19 \"gpu_variable_resources\",\n 20 \"gpu_variable_resources_from_gen\",\n 21 \"gpu_variable_resources_subenv\",\n 22 \"multi_points_with_variable_resources\",\n 23 \"CUDA_variable_resources\",\n 24]\n 25\n 26import os\n 27\n 28import numpy as np\n 29\n 30from libensemble.message_numbers import TASK_FAILED, UNSET_TAG, WORKER_DONE\n 31from libensemble.resources.resources import Resources\n 32from libensemble.sim_funcs.six_hump_camel import six_hump_camel_func\n 33from libensemble.specs import input_fields, output_data\n 34from libensemble.tools.test_support import check_gpu_setting, check_mpi_runner\n 35\n 36\n 37def gpu_variable_resources(H, persis_info, sim_specs, libE_info):\n 38 \"\"\"Launches an app and automatically assigns GPU resources.\n 39\n 40 The six_hump_camel app does not run on the GPU, but this test demonstrates\n 41 how to automatically assign the GPUs given to this worker via the MPIExecutor.\n 42\n 43 The method used to assign GPUs will be determined by the MPI runner or\n 44 user-provided configuration (e.g., by setting the ``platform`` or\n 45 ``platform_specs`` options or the LIBE_PLATFORM environment variable).\n 46\n 47 \"\"\"\n 48 x = H[\"x\"][0]\n 49 H_o = np.zeros(1, dtype=sim_specs[\"out\"])\n 50 dry_run = sim_specs[\"user\"].get(\"dry_run\", False) # logs run lines instead of running\n 51 inpt = \" \".join(map(str, x)) # Application input\n 52\n 53 exctr = libE_info[\"executor\"]\n 54\n 55 # Launch application via system MPI runner, using assigned resources.\n 56 task = exctr.submit(\n 57 app_name=\"six_hump_camel\",\n 58 app_args=inpt,\n 59 auto_assign_gpus=True,\n 60 match_procs_to_gpus=True,\n 61 stdout=\"out.txt\",\n 62 stderr=\"err.txt\",\n 63 dry_run=dry_run,\n 64 )\n 65\n 66 if not dry_run:\n 67 task.wait() # Wait for run to complete\n 68\n 69 # Access app output\n 70 with open(\"out.txt\") as f:\n 71 H_o[\"f\"] = float(f.readline().strip()) # Read just first line\n 72\n 73 # Asserts GPU set correctly (for known MPI runners)\n 74 check_gpu_setting(task, print_setting=True)\n 75\n 76 calc_status = WORKER_DONE if task.state == \"FINISHED\" else \"FAILED\"\n 77 return H_o, persis_info, calc_status\n 78\n 79\n 80@input_fields([\"x\"])\n 81@output_data([(\"f\", float)])\n 82def gpu_variable_resources_from_gen(H, persis_info, sim_specs, libE_info):\n 83 \"\"\"\n 84 Launches an app and assigns CPU and GPU resources as defined by the gen.\n 85\n 86 Otherwise similar to gpu_variable_resources.", "mimetype": "text/plain", "start_char_idx": 3884, "end_char_idx": 7115, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "152a3c51-4ad9-41a9-b8e8-48a25d211827": {"__data__": {"id_": "152a3c51-4ad9-41a9-b8e8-48a25d211827", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/var_resources.html", "file_name": "var_resources.html", "file_type": "text/html", "file_size": 71906, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4f963b0d-a804-41b8-8da4-04b643e49d21", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/var_resources.html", "file_name": "var_resources.html", "file_type": "text/html", "file_size": 71906, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "6150704b87b22e2d20b5153f0943ad4550d4f1b1aa09ebca2218f2e93e947549", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "37f9d637-e329-4df9-ba9d-89bc728531f6", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/var_resources.html", "file_name": "var_resources.html", "file_type": "text/html", "file_size": 71906, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "16630705f2d49bba504e14912c344c264f90958142e6b1f17484fe9d6f3e1cab", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "46a9eaa3-1d99-43f2-a655-a8dc9d1ff6ff", "node_type": "1", "metadata": {}, "hash": "dc8a35b8602ce0fb2a418ede1a9eecab4c91a651d3ffd7465d452a6d0a7459f7", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "85\n 86 Otherwise similar to gpu_variable_resources.\n 87 \"\"\"\n 88 x = H[\"x\"][0]\n 89 H_o = np.zeros(1, dtype=sim_specs[\"out\"])\n 90 dry_run = sim_specs[\"user\"].get(\"dry_run\", False) # logs run lines instead of running\n 91 inpt = \" \".join(map(str, x)) # Application input\n 92\n 93 exctr = libE_info[\"executor\"] # Get Executor\n 94\n 95 # Launch application via system MPI runner, using assigned resources.\n 96 task = exctr.submit(\n 97 app_name=\"six_hump_camel\",\n 98 app_args=inpt,\n 99 stdout=\"out.txt\",\n100 stderr=\"err.txt\",\n101 dry_run=dry_run,\n102 )\n103\n104 if not dry_run:\n105 task.wait() # Wait for run to complete\n106\n107 # Access app output\n108 with open(\"out.txt\") as f:\n109 H_o[\"f\"] = float(f.readline().strip()) # Read just first line\n110\n111 # Asserts GPU set correctly (for known MPI runners)\n112 check_gpu_setting(task, print_setting=True)\n113\n114 calc_status = WORKER_DONE if task.state == \"FINISHED\" else \"FAILED\"\n115 return H_o, persis_info, calc_status\n116\n117\n118def _launch_with_env_and_mpi(exctr, inpt, dry_run, env_script_path, mpi_runner):\n119 \"\"\"Used to launch each application in a chain\"\"\"\n120\n121 task = exctr.submit(\n122 app_name=\"six_hump_camel\",\n123 app_args=inpt,\n124 auto_assign_gpus=True,\n125 match_procs_to_gpus=True,\n126 dry_run=dry_run,\n127 env_script=env_script_path,\n128 mpi_runner_type=mpi_runner,\n129 )\n130\n131 if isinstance(mpi_runner, dict):\n132 mpi_runner = mpi_runner[\"runner_name\"]\n133\n134 check_mpi_runner(task, mpi_runner, print_setting=True)\n135 check_gpu_setting(task, print_setting=True)\n136\n137\n138def gpu_variable_resources_subenv(H, persis_info, sim_specs, libE_info):\n139 \"\"\"Launches a chain of apps via bash scripts in different sub-processes.\n140\n141 Different MPI runners are specified for each submit. To run without dry_run\n142 these MPI runners need to be present. Dry_run is used by default.\n143\n144 Otherwise, this test is similar to ``gpu_variable_resources``.\n145\n146 \"\"\"\n147 x = H[\"x\"][0]\n148 H_o = np.zeros(1, dtype=sim_specs[\"out\"])\n149 dry_run = sim_specs[\"user\"].get(\"dry_run\", False) # logs run lines instead of running\n150 env_script_path = sim_specs[\"user\"][\"env_script\"] # Script to run in subprocess\n151 inpt = \" \".join(map(str, x)) # Application input\n152\n153 exctr = libE_info[\"executor\"] # Get Executor\n154\n155 # Launch application via given MPI runner, using assigned resources.\n156 _launch_with_env_and_mpi(exctr, inpt, dry_run, env_script_path, \"openmpi\")\n157 _launch_with_env_and_mpi(exctr, inpt, dry_run, env_script_path, \"srun\")\n158\n159 mpi_runner_type = {\"mpi_runner\": \"openmpi\", \"runner_name\": \"special_mpi\"}\n160 _launch_with_env_and_mpi(exctr, inpt, dry_run, env_script_path, mpi_runner_type)\n161\n162 # Now run in current environment.", "mimetype": "text/plain", "start_char_idx": 7064, "end_char_idx": 9774, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "46a9eaa3-1d99-43f2-a655-a8dc9d1ff6ff": {"__data__": {"id_": "46a9eaa3-1d99-43f2-a655-a8dc9d1ff6ff", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/var_resources.html", "file_name": "var_resources.html", "file_type": "text/html", "file_size": 71906, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4f963b0d-a804-41b8-8da4-04b643e49d21", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/var_resources.html", "file_name": "var_resources.html", "file_type": "text/html", "file_size": 71906, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "6150704b87b22e2d20b5153f0943ad4550d4f1b1aa09ebca2218f2e93e947549", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "152a3c51-4ad9-41a9-b8e8-48a25d211827", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/var_resources.html", "file_name": "var_resources.html", "file_type": "text/html", "file_size": 71906, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "e04ed01fe11ee027d4f9070c4cbff688256317662ed15bb869f326b3cd63f725", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7ebfc079-0975-4ea9-84d2-3e88b6e57d46", "node_type": "1", "metadata": {}, "hash": "1107e51945fea8dea2f37898ac589f1e9810ecaf562c41c1754697a5de000e8b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "156 _launch_with_env_and_mpi(exctr, inpt, dry_run, env_script_path, \"openmpi\")\n157 _launch_with_env_and_mpi(exctr, inpt, dry_run, env_script_path, \"srun\")\n158\n159 mpi_runner_type = {\"mpi_runner\": \"openmpi\", \"runner_name\": \"special_mpi\"}\n160 _launch_with_env_and_mpi(exctr, inpt, dry_run, env_script_path, mpi_runner_type)\n161\n162 # Now run in current environment.\n163 task = exctr.submit(\n164 app_name=\"six_hump_camel\",\n165 app_args=inpt,\n166 auto_assign_gpus=True,\n167 match_procs_to_gpus=True,\n168 dry_run=dry_run,\n169 )\n170 check_mpi_runner(task, \"mpich\", print_setting=True)\n171 check_gpu_setting(task, print_setting=True)\n172\n173 if not dry_run:\n174 task.wait() # Wait for run to complete\n175\n176 # Access app output\n177 with open(\"out.txt\") as f:\n178 H_o[\"f\"] = float(f.readline().strip()) # Read just first line\n179\n180 # Asserts GPU set correctly (for known MPI runners)\n181 check_gpu_setting(task, print_setting=True)\n182\n183 calc_status = WORKER_DONE if task.state == \"FINISHED\" else \"FAILED\"\n184 return H_o, persis_info, calc_status\n185\n186\n187def multi_points_with_variable_resources(H, _, sim_specs, libE_info):\n188 \"\"\"\n189 Evaluates either helloworld or six hump camel for a collection of points\n190 given in ``H[\"x\"]`` via the MPI executor, supporting variable sized\n191 simulations/resources, as determined by the generator. The term `rset`\n192 refers to a resource set (the minimal set of resources that can be assigned\n193 to each worker). It can be anything from a partition of a node to multiple\n194 nodes.\n195\n196 Note that this is also an example that is capable of handling multiple\n197 points (sim ids) in each call.\n198\n199 .. seealso::\n200 `test_uniform_sampling_with_variable_resources.py <https://github.com/Libensemble/libensemble/blob/develop/libensemble/tests/functionality_tests/test_uniform_sampling_with_variable_resources.py>`_ # noqa\n201 \"\"\"\n202\n203 batch = len(H[\"x\"])\n204 H_o = np.zeros(batch, dtype=sim_specs[\"out\"])\n205 app = sim_specs[\"user\"].get(\"app\", \"helloworld\")\n206 dry_run = sim_specs[\"user\"].get(\"dry_run\", False) # dry_run only prints run lines in ensemble.log\n207 set_cores_by_rsets = True # If True use rset count to set num procs, else use all available to this worker.\n208 core_multiplier = 1 # Only used with set_cores_by_rsets as a multiplier.", "mimetype": "text/plain", "start_char_idx": 9411, "end_char_idx": 11710, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "7ebfc079-0975-4ea9-84d2-3e88b6e57d46": {"__data__": {"id_": "7ebfc079-0975-4ea9-84d2-3e88b6e57d46", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/var_resources.html", "file_name": "var_resources.html", "file_type": "text/html", "file_size": 71906, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4f963b0d-a804-41b8-8da4-04b643e49d21", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/var_resources.html", "file_name": "var_resources.html", "file_type": "text/html", "file_size": 71906, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "6150704b87b22e2d20b5153f0943ad4550d4f1b1aa09ebca2218f2e93e947549", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "46a9eaa3-1d99-43f2-a655-a8dc9d1ff6ff", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/var_resources.html", "file_name": "var_resources.html", "file_type": "text/html", "file_size": 71906, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "fdc4136c07bc5f37c8933ab5c7b67c33f9bfbe6e90694da1f74fc41b375e5642", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "715aaf34-5c26-4349-9ca3-4139daaec03c", "node_type": "1", "metadata": {}, "hash": "0a1628cd515c2900e2f9b555791bd0735414c8661f40cf774533aa1c67e1ce6e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "195\n196 Note that this is also an example that is capable of handling multiple\n197 points (sim ids) in each call.\n198\n199 .. seealso::\n200 `test_uniform_sampling_with_variable_resources.py <https://github.com/Libensemble/libensemble/blob/develop/libensemble/tests/functionality_tests/test_uniform_sampling_with_variable_resources.py>`_ # noqa\n201 \"\"\"\n202\n203 batch = len(H[\"x\"])\n204 H_o = np.zeros(batch, dtype=sim_specs[\"out\"])\n205 app = sim_specs[\"user\"].get(\"app\", \"helloworld\")\n206 dry_run = sim_specs[\"user\"].get(\"dry_run\", False) # dry_run only prints run lines in ensemble.log\n207 set_cores_by_rsets = True # If True use rset count to set num procs, else use all available to this worker.\n208 core_multiplier = 1 # Only used with set_cores_by_rsets as a multiplier.\n209\n210 exctr = libE_info[\"executor\"] # Get Executor\n211 task_states = []\n212 for i, x in enumerate(H[\"x\"]):\n213 nprocs = None # Will be as if argument is not present\n214 if set_cores_by_rsets:\n215 resources = Resources.resources.worker_resources\n216 nprocs = resources.num_rsets * core_multiplier\n217\n218 inpt = None # Will be as if argument is not present\n219 if app == \"six_hump_camel\":\n220 inpt = \" \".join(map(str, H[\"x\"][i]))\n221\n222 task = exctr.submit(\n223 app_name=app,\n224 app_args=inpt,\n225 num_procs=nprocs,\n226 stdout=\"out.txt\",\n227 stderr=\"err.txt\",\n228 dry_run=dry_run,\n229 )\n230\n231 if not dry_run:\n232 task.wait() # Wait for run to complete\n233\n234 # while(not task.finished):\n235 # time.sleep(0.1)\n236 # task.poll()\n237\n238 task_states.append(task.state)\n239\n240 if app == \"six_hump_camel\":\n241 # H_o[\"f\"][i] = float(task.read_stdout()) # Reads whole file\n242 with open(\"out.txt\") as f:\n243 H_o[\"f\"][i] = float(f.readline().strip()) # Read just first line\n244 else:\n245 # To return something in test\n246 H_o[\"f\"][i] = six_hump_camel_func(x)\n247\n248 calc_status = UNSET_TAG # Returns to worker\n249 if all(t == \"FINISHED\" for t in task_states):\n250 calc_status = WORKER_DONE\n251 elif any(t == \"FAILED\" for t in task_states):\n252 calc_status = TASK_FAILED\n253\n254 return H_o, calc_status\n255\n256\n257def CUDA_variable_resources(H, _, sim_specs, libE_info):\n258 \"\"\"Launches an app setting GPU resources\n259\n260 The standard test apps do not run on GPU, but demonstrates accessing resource\n261 information to set ``CUDA_VISIBLE_DEVICES``, and typical run configuration.\n262\n263 For an equivalent function that auto-assigns GPUs using platform detection, see\n264 GPU_variable_resources.", "mimetype": "text/plain", "start_char_idx": 10938, "end_char_idx": 13407, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "715aaf34-5c26-4349-9ca3-4139daaec03c": {"__data__": {"id_": "715aaf34-5c26-4349-9ca3-4139daaec03c", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/var_resources.html", "file_name": "var_resources.html", "file_type": "text/html", "file_size": 71906, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4f963b0d-a804-41b8-8da4-04b643e49d21", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/var_resources.html", "file_name": "var_resources.html", "file_type": "text/html", "file_size": 71906, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "6150704b87b22e2d20b5153f0943ad4550d4f1b1aa09ebca2218f2e93e947549", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7ebfc079-0975-4ea9-84d2-3e88b6e57d46", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs/var_resources.html", "file_name": "var_resources.html", "file_type": "text/html", "file_size": 71906, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "60a8a1b168ab67acbe2540894ed099c7e942e7ccdaa5845c32496942b35f07b8", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "262\n263 For an equivalent function that auto-assigns GPUs using platform detection, see\n264 GPU_variable_resources.\n265 \"\"\"\n266 x = H[\"x\"][0]\n267 H_o = np.zeros(1, dtype=sim_specs[\"out\"])\n268 dry_run = sim_specs[\"user\"].get(\"dry_run\", False) # dry_run only prints run lines in ensemble.log\n269\n270 # Interrogate resources available to this worker\n271 resources = Resources.resources.worker_resources\n272 slots = resources.slots\n273\n274 assert resources.matching_slots, f\"Error: Cannot set CUDA_VISIBLE_DEVICES when unmatching slots on nodes {slots}\"\n275\n276 num_nodes = resources.local_node_count\n277\n278 # Set to slots\n279 resources.set_env_to_slots(\"CUDA_VISIBLE_DEVICES\")\n280 cores_per_node = resources.slot_count\n281\n282 # Set to detected GPUs\n283 # gpus_per_slot = resources.gpus_per_rset_per_node\n284 # resources.set_env_to_slots(\"CUDA_VISIBLE_DEVICES\", multiplier=gpus_per_slot)\n285 # cores_per_node = resources.slot_count * gpus_per_slot # One CPU per GPU\n286\n287 print(\n288 f\"Worker {libE_info['workerID']}: CUDA_VISIBLE_DEVICES={os.environ['CUDA_VISIBLE_DEVICES']}\"\n289 f\"\\tnodes {num_nodes} ppn {cores_per_node} slots {slots}\"\n290 )\n291\n292 # Create application input file\n293 inpt = \" \".join(map(str, x))\n294 exctr = libE_info[\"executor\"] # Get Executor\n295\n296 # Launch application via system MPI runner, using assigned resources.\n297 task = exctr.submit(\n298 app_name=\"six_hump_camel\",\n299 app_args=inpt,\n300 num_nodes=num_nodes,\n301 procs_per_node=cores_per_node,\n302 stdout=\"out.txt\",\n303 stderr=\"err.txt\",\n304 dry_run=dry_run,\n305 # extra_args='--gpus-per-task=1'\n306 )\n307\n308 if not dry_run:\n309 task.wait() # Wait for run to complete\n310\n311 # Access app output\n312 with open(\"out.txt\") as f:\n313 H_o[\"f\"] = float(f.readline().strip()) # Read just first line\n314\n315 calc_status = WORKER_DONE if task.state == \"FINISHED\" else \"FAILED\"\n316 return H_o, calc_status\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 13292, "end_char_idx": 15301, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "9093c401-5267-486c-a024-5c0c75ec1bf6": {"__data__": {"id_": "9093c401-5267-486c-a024-5c0c75ec1bf6", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs.html", "file_name": "sim_funcs.html", "file_type": "text/html", "file_size": 16227, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "57155532-a6e6-43b3-a942-88027d26a07f", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/sim_funcs.html", "file_name": "sim_funcs.html", "file_type": "text/html", "file_size": 16227, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "003cea04f81511a68e2fbdc5bf8c2f7238727f0165816d1c1d9ea111ee1f0880", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Simulation Functions \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nSimple simulation functions\nBorehole function\nBorehole function with kills\nChwirut1 vector-valued function\nInverse Bayesian likelihood\nNorm\nRosenbrock test optimization function\nSix Hump Camel\nTest noisy function\nTest periodic function\n\nFunctions that run user applications\nVariable resources\nTemplate for CPU executables\nTemplate for CPU executables with input file\nTemplate for GPU executables\nTemplate for GPU executables with dynamic resources\nTemplate with dynamic resources (CPU app and GPU app)\nWarpX Example\n\nSpecial simulation functions\nMock simulation evaluations (re-run using history file)\n\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nSimulation Functions\n\n View page source\n\nSimulation Functions\uf0c1\nBelow are example simulation functions available in libEnsemble.\nMost of these demonstrate an inexpensive algorithm and do not\nlaunch tasks (user applications). To see an example of a simulation\nfunction launching tasks, see the\nElectrostatic Forces tutorial.\n\nImportant\nSee the API for simulation functions here.\n\nSimple simulation functions\uf0c1\nIdeal for simple debugging of generator processes or system testing.\n\nBorehole function\nBorehole function with kills\nChwirut1 vector-valued function\nInverse Bayesian likelihood\nNorm\nRosenbrock test optimization function\nSix Hump Camel\nTest noisy function\nTest periodic function\n\nFunctions that run user applications\uf0c1\nThese use the executor to launch applications and in some cases\nhandle dynamic CPU/GPU allocation.\nThe Variable resources module contains basic examples, while the Template\nexamples use a simple MPI/OpenMP (with GPU offload option) application (forces)\nto demonstrate libEnsemble\u2019s capabilities on various HPC systems. The\nbuild_forces.sh file gives compile lines for building the simple forces\napplication on various platforms (use -DGPU to build for GPU).\n\nVariable resources\nTemplate for CPU executables\nTemplate for CPU executables with input file\nTemplate for GPU executables\nTemplate for GPU executables with dynamic resources\nTemplate with dynamic resources (CPU app and GPU app)\nWarpX Example\n\nSpecial simulation functions\uf0c1\n\nMock simulation evaluations (re-run using history file)\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2912, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "4ec18610-0837-4aaa-9d9e-0cfda775b2b5": {"__data__": {"id_": "4ec18610-0837-4aaa-9d9e-0cfda775b2b5", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/submission_scripts.html", "file_name": "submission_scripts.html", "file_type": "text/html", "file_size": 38020, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2718b056-d529-4747-b7e5-99231d1568b0", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/submission_scripts.html", "file_name": "submission_scripts.html", "file_type": "text/html", "file_size": 38020, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "009e69cdd0efcc84c03a44122ed03f1bd165b439c73670499625e474235354bf", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "966b4c54-b23e-4339-ab05-f68340e1be87", "node_type": "1", "metadata": {}, "hash": "acf314bf59583413d5b7a3a9bcab7c9e1043cbeac85a7d56331bd92a4ec08c3d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Example Scheduler Submission Scripts \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\nGeneral examples\nSlurm - Basic\nPBS - Basic\nLSF - Basic\n\nSystem Examples\nAurora\nFrontier (Large WarpX Ensemble)\nPerlmutter\nPolaris\nBebop\nBridges - MPI / Central Mode\nSLURM - MPI / Distributed Mode (co-locate workers & MPI applications)\nSummit (Decommissioned) - On Launch Nodes with Multiprocessing\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nExample Scheduler Submission Scripts\n\n View page source\n\nExample Scheduler Submission Scripts\uf0c1\nBelow are example submission scripts used to configure and launch libEnsemble\non a variety of high-powered systems. See Running on HPC Systems\nfor more information about the respective systems and configuration.\n\nNote\nIt is highly recommended that the directive lines (e.g., #SBATCH) in batch\nsubmission scripts do NOT specify processor, task, or GPU configuration\ninformation\u2014these lines should only specify the number of nodes required.\nFor example, do not specify #SBATCH --gpus-per-node=4 in order to use four\nGPUs on the node, when each worker may use less than this, as this may assign\nall of the GPUs to a single MPI invocation. Instead, the configuration should\nbe supplied either\nin the simulation function\nor, if using dynamic resources,\nin the generator.\n\nGeneral examples\uf0c1\n\nSlurm - Basic\uf0c1\n\n/examples/libE_submission_scripts/submit_slurm_simple.sh\uf0c1\n#!/bin/bash\n#SBATCH -J libE_simple\n#SBATCH -A <myproject>\n#SBATCH -p <partition_name>\n#SBATCH -C <constraint_name>\n#SBATCH --time 10\n#SBATCH --nodes 2\n\n# Usually either -p or -C above is used.\n\n# On some SLURM configurations, these ensure runs can share nodes\nexport SLURM_EXACT=1\nexport SLURM_MEM_PER_NODE=0\n\npython libe_calling_script.py -n 8\n\nPBS - Basic\uf0c1\n\n/examples/libE_submission_scripts/submit_pbs_simple.sh\uf0c1\n#!/bin/bash -l\n#PBS -l select=2\n#PBS -l walltime=00:15:00\n#PBS -q <queue_name>\n#PBS -A <myproject>\n\n# We selected 2 nodes - now running with 8 workers.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2506, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "966b4c54-b23e-4339-ab05-f68340e1be87": {"__data__": {"id_": "966b4c54-b23e-4339-ab05-f68340e1be87", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/submission_scripts.html", "file_name": "submission_scripts.html", "file_type": "text/html", "file_size": 38020, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2718b056-d529-4747-b7e5-99231d1568b0", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/submission_scripts.html", "file_name": "submission_scripts.html", "file_type": "text/html", "file_size": 38020, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "009e69cdd0efcc84c03a44122ed03f1bd165b439c73670499625e474235354bf", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4ec18610-0837-4aaa-9d9e-0cfda775b2b5", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/submission_scripts.html", "file_name": "submission_scripts.html", "file_type": "text/html", "file_size": 38020, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "88178a08cf08998966dbb7da47770b589e6b25243fb222be7212eb5403855ad0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f423cbd7-60de-4dee-9a53-67957a717878", "node_type": "1", "metadata": {}, "hash": "057343a5ec9d7369e89c36c2757e1f81be3ed5413415172e8adaa0131b9b695a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# On some SLURM configurations, these ensure runs can share nodes\nexport SLURM_EXACT=1\nexport SLURM_MEM_PER_NODE=0\n\npython libe_calling_script.py -n 8\n\nPBS - Basic\uf0c1\n\n/examples/libE_submission_scripts/submit_pbs_simple.sh\uf0c1\n#!/bin/bash -l\n#PBS -l select=2\n#PBS -l walltime=00:15:00\n#PBS -q <queue_name>\n#PBS -A <myproject>\n\n# We selected 2 nodes - now running with 8 workers.\nexport MPICH_GPU_SUPPORT_ENABLED=1\ncd $PBS_O_WORKDIR\npython libE_calling_script.py -n 8\n\nLSF - Basic\uf0c1\n\n/examples/libE_submission_scripts/submit_lsf_simple.sh\uf0c1\n#!/bin/bash -l\n#BSUB -P <project code>\n#BSUB -J libe_mproc\n#BSUB -W 15\n#BSUB -nnodes 2\n\npython run_libe_forces.py -n 8\n\nSystem Examples\uf0c1\n\nAurora\uf0c1\n\n/examples/libE_submission_scripts/submit_pbs_aurora.sh\uf0c1\n#!/bin/bash -l\n#PBS -l select=2\n#PBS -l walltime=00:30:00\n#PBS -q <myqueue>\n#PBS -A <myproject>\n\nmodule load frameworks\n\nexport MPICH_GPU_SUPPORT_ENABLED=1\ncd $PBS_O_WORKDIR\n\n# 2 nodes - 12 sim workers (6 GPUs per node)\npython libE_calling_script.py -n 13\n\n# if using libE_specs[\"use_tiles_as_gpus\"] = True\n# 2 nodes 24 sim workers (12 GPU tiles per node) libE_specs[\"use_tiles_as_gpus\"] = True\n# python libE_calling_script.py -n 25\n\nFrontier (Large WarpX Ensemble)\uf0c1\n\n/examples/libE_submission_scripts/submit_frontier_large.sh\uf0c1\n#!/bin/bash\n#SBATCH -J libE_warpX_full_sim_32x40\n#SBATCH -A <myproject>\n#SBATCH -p batch\n#SBATCH --time 6:00:00\n#SBATCH --nodes 240\n\nmodule load cray-python\n\n# Run one gen and 40 sim workers (6 nodes = 48 GPUs each)\npython run_gpcam_warpx.py -n 41\n\nPerlmutter\uf0c1\n\n/examples/libE_submission_scripts/submit_perlmutter.sh\uf0c1\n#!/bin/bash\n#SBATCH -J libE_small_test\n#SBATCH -A <myproject>\n#SBATCH -C gpu\n#SBATCH --time 10\n#SBATCH --nodes 1\n\n# This script is using GPU partition\nexport MPICH_GPU_SUPPORT_ENABLED=1\n\n# One worker for generator and 4 for sims (one GPU each)\npython libe_calling_script.py -n 5\n\n# Or if libE_specs option gen_on_manager=True\n# python libe_calling_script.py -n 4\n\nPolaris\uf0c1\n\n/examples/libE_submission_scripts/submit_pbs_polaris.sh\uf0c1\n#!/bin/bash -l\n#PBS -l select=1:system=polaris\n#PBS -l walltime=00:15:00\n#PBS -l filesystems=home:grand\n#PBS -q debug\n#PBS -A <myproject>\n\nexport MPICH_GPU_SUPPORT_ENABLED=1\ncd $PBS_O_WORKDIR\npython libE_calling_script.py -n 4\n\nBebop\uf0c1\n\n/examples/libE_submission_scripts/bebop_submit_pbs_central.sh\uf0c1\n#!/bin/bash -l\n#PBS -l select=4\n#PBS -l walltime=00:15:00\n#PBS -q bdwall\n#PBS -A [project]\n#PBS -N libE_example\n\ncd $PBS_O_WORKDIR\n# Choose MPI backend. Note that the built mpi4py in your environment should match.", "mimetype": "text/plain", "start_char_idx": 2133, "end_char_idx": 4658, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f423cbd7-60de-4dee-9a53-67957a717878": {"__data__": {"id_": "f423cbd7-60de-4dee-9a53-67957a717878", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/submission_scripts.html", "file_name": "submission_scripts.html", "file_type": "text/html", "file_size": 38020, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2718b056-d529-4747-b7e5-99231d1568b0", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/submission_scripts.html", "file_name": "submission_scripts.html", "file_type": "text/html", "file_size": 38020, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "009e69cdd0efcc84c03a44122ed03f1bd165b439c73670499625e474235354bf", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "966b4c54-b23e-4339-ab05-f68340e1be87", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/submission_scripts.html", "file_name": "submission_scripts.html", "file_type": "text/html", "file_size": 38020, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "23171823c9dc7c1357b2a17410cfaa467353e49511214565d47d67b8b89d4090", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "afbe5809-1355-4e1c-a61c-ea60390a2c23", "node_type": "1", "metadata": {}, "hash": "0d3511c8e7a440b21e92d3d1fde5249350586441d5a7086718ed4fff1094c338", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Note that the built mpi4py in your environment should match.\nmodule load oneapi/mpi\n# module load openmpi\n\npython run_libe_example.py -n 16\n\nBridges - MPI / Central Mode\uf0c1\n\n/examples/libE_submission_scripts/bridges_submit_slurm_central.sh\uf0c1\n#!/bin/bash\n#SBATCH -J libE_test_central\n#SBATCH -N 5\n#SBATCH -p RM\n#SBATCH -A <my_project>\n#SBATCH -o tlib.%j.%N.out\n#SBATCH -e tlib.%j.%N.error\n#SBATCH -t 00:30:00\n\n# Launch script for running in central mode with mpi4py.\n# libEnsemble will run on a dedicated node (or nodes).\n# The remaining nodes in the allocation will be dedicated to worker launched apps.\n# Initialize Executor with auto-resources=True and central_mode=True.\n\n# User to edit these variables\nexport EXE=libE_calling_script.py\nexport NUM_WORKERS=4\n\nmpirun -np $(($NUM_WORKERS+1)) -ppn $(($NUM_WORKERS+1)) python $EXE\n\n# To use local mode instead of mpi4py (with parse_args())\n# python $EXE -n $NUM_WORKERS\n\nSLURM - MPI / Distributed Mode (co-locate workers & MPI applications)\uf0c1\n\n/examples/libE_submission_scripts/submit_distrib_mpi4py.sh\uf0c1\n#!/bin/bash\n#SBATCH -J libE_test\n#SBATCH -N 4\n#SBATCH -p [queue]\n#SBATCH -A <my_project>\n#SBATCH -o tlib.%j.%N.out\n#SBATCH -e tlib.%j.%N.error\n#SBATCH -t 01:00:00\n\n# Launch script that runs in distributed mode with mpi4py.\n# Workers are evenly spread over nodes and manager added to the first node.\n# Requires even distribution - either multiple workers per node or nodes per worker\n# Option for manager to have a dedicated node.\n# Use of MPI Executor will ensure workers co-locate tasks with workers\n# If node_list file is kept, this informs libe of resources. Else, libe auto-detects.\n\n# User to edit these variables\nexport EXE=libE_calling_script.py\nexport NUM_WORKERS=4\nexport MANAGER_NODE=false # true = Manager has a dedicated node (assign one extra)\nexport USE_NODE_LIST=true # If false, allow libE to determine node_list from environment.\n\n# Sometimes may be necessary\n# As libE shares nodes with user applications allow fallback if contexts overrun.", "mimetype": "text/plain", "start_char_idx": 4598, "end_char_idx": 6605, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "afbe5809-1355-4e1c-a61c-ea60390a2c23": {"__data__": {"id_": "afbe5809-1355-4e1c-a61c-ea60390a2c23", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/submission_scripts.html", "file_name": "submission_scripts.html", "file_type": "text/html", "file_size": 38020, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2718b056-d529-4747-b7e5-99231d1568b0", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/submission_scripts.html", "file_name": "submission_scripts.html", "file_type": "text/html", "file_size": 38020, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "009e69cdd0efcc84c03a44122ed03f1bd165b439c73670499625e474235354bf", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f423cbd7-60de-4dee-9a53-67957a717878", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/submission_scripts.html", "file_name": "submission_scripts.html", "file_type": "text/html", "file_size": 38020, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "b7ad30dbc00155afae8e749cd71595313dac4ecfb7d687038b044e6d22c56ae5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "05088bc7-0763-4c63-a245-0ee5394df08b", "node_type": "1", "metadata": {}, "hash": "99af5a01f569d6bcf39a68e8122a514c198c13e23e1532d8d7cfb5a7b51f8736", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# Workers are evenly spread over nodes and manager added to the first node.\n# Requires even distribution - either multiple workers per node or nodes per worker\n# Option for manager to have a dedicated node.\n# Use of MPI Executor will ensure workers co-locate tasks with workers\n# If node_list file is kept, this informs libe of resources. Else, libe auto-detects.\n\n# User to edit these variables\nexport EXE=libE_calling_script.py\nexport NUM_WORKERS=4\nexport MANAGER_NODE=false # true = Manager has a dedicated node (assign one extra)\nexport USE_NODE_LIST=true # If false, allow libE to determine node_list from environment.\n\n# Sometimes may be necessary\n# As libE shares nodes with user applications allow fallback if contexts overrun.\n# unset I_MPI_FABRICS\n# export I_MPI_FABRICS_LIST=tmi,tcp\n# export I_MPI_FALLBACK=1\n\n# If using in calling script (After N mins manager kills workers and exits cleanly)\nexport LIBE_WALLCLOCK=55\n\n#-----------------------------------------------------------------------------\n# Work out distribution\nif [[ $MANAGER_NODE = \"true\" ]]; then\n WORKER_NODES=$(($SLURM_NNODES-1))\nelse\n WORKER_NODES=$SLURM_NNODES\nfi\n\nif [[ $NUM_WORKERS -ge $WORKER_NODES ]]; then\n SUB_NODE_WORKERS=true\n WORKERS_PER_NODE=$(($NUM_WORKERS/$WORKER_NODES))\nelse\n SUB_NODE_WORKERS=false\n NODES_PER_WORKER=$(($WORKER_NODES/$NUM_WORKERS))\nfi;\n#-----------------------------------------------------------------------------\n\n# A little useful information\necho -e \"Manager process running on: $HOSTNAME\"\necho -e \"Directory is: $PWD\"\n\n# Generate a node list with 1 node per line:\nsrun hostname | sort -u > node_list\n\n# Add manager node to machinefile\nhead -n 1 node_list > machinefile.$SLURM_JOBID\n\n# Add worker nodes to machinefile\nif [[ $SUB_NODE_WORKERS = \"true\" ]]; then\n awk -v repeat=$WORKERS_PER_NODE '{for(i=0; i<repeat; i++)print}' node_list \\\n >>machinefile.$SLURM_JOBID\nelse\n awk -v patt=\"$NODES_PER_WORKER\" 'NR % patt == 1' node_list \\\n >> machinefile.$SLURM_JOBID\nfi;\n\nif [[ $USE_NODE_LIST = \"false\" ]]; then\n rm node_list\n wait\nfi;\n\n# Put in a timestamp\necho Starting execution at: `date`\n\n# To use srun\nexport SLURM_HOSTFILE=machinefile.$SLURM_JOBID\n\n# The \"arbitrary\" flag should ensure SLURM_HOSTFILE is picked up\n# cmd=\"srun --ntasks $(($NUM_WORKERS+1)) -m arbitrary python $EXE\"\ncmd=\"srun --ntasks $(($NUM_WORKERS+1)) -m arbitrary python $EXE $LIBE_WALLCLOCK\"\n\necho The command is: $cmd\necho End PBS script information.\necho All further output is from the process being run and not the script.\\n\\n $cmd\n\n$cmd\n\n# Print the date again -- when finished\necho Finished at: `date`\n\nSummit (Decommissioned) - On Launch Nodes with Multiprocessing\uf0c1\n\n/examples/libE_submission_scripts/summit_submit_mproc.sh\uf0c1\n#!/bin/bash -x\n#BSUB -P <project code>\n#BSUB -J libe_mproc\n#BSUB -W 30\n#BSUB -nnodes 4\n#BSUB -alloc_flags \"smt1\"\n\n# Script to run libEnsemble using multiprocessing on launch nodes.\n# Assumes Conda environment is set up.\n\n# To be run with central job management\n# - Manager and workers run on launch node.\n# - Workers submit tasks to the compute nodes in the allocation.\n\n# Name of calling script-\nexport EXE=libE_calling_script.py\n\n# Communication Method\nexport COMMS=\"--comms local\"\n\n# Number of workers.\nexport NWORKERS=\"--nworkers 4\"\n\n# Wallclock for libE. (allow clean shutdown)\nexport LIBE_WALLCLOCK=25 # Optional if pass to script\n\n# Name of Conda environment\nexport CONDA_ENV_NAME=<conda_env_name>\n\n# Need these if not already loaded\n# module load python\n# module load gcc/4.8.5\n\n# Activate conda environment\nexport PYTHONNOUSERSITE=1\n.", "mimetype": "text/plain", "start_char_idx": 5870, "end_char_idx": 9430, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "05088bc7-0763-4c63-a245-0ee5394df08b": {"__data__": {"id_": "05088bc7-0763-4c63-a245-0ee5394df08b", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/submission_scripts.html", "file_name": "submission_scripts.html", "file_type": "text/html", "file_size": 38020, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2718b056-d529-4747-b7e5-99231d1568b0", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/submission_scripts.html", "file_name": "submission_scripts.html", "file_type": "text/html", "file_size": 38020, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "009e69cdd0efcc84c03a44122ed03f1bd165b439c73670499625e474235354bf", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "afbe5809-1355-4e1c-a61c-ea60390a2c23", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/submission_scripts.html", "file_name": "submission_scripts.html", "file_type": "text/html", "file_size": 38020, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "a8f8f12f9b1dac2f581b935e900c1ab19c7f6172ef156c4b519cdf346613ee8a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# Assumes Conda environment is set up.\n\n# To be run with central job management\n# - Manager and workers run on launch node.\n# - Workers submit tasks to the compute nodes in the allocation.\n\n# Name of calling script-\nexport EXE=libE_calling_script.py\n\n# Communication Method\nexport COMMS=\"--comms local\"\n\n# Number of workers.\nexport NWORKERS=\"--nworkers 4\"\n\n# Wallclock for libE. (allow clean shutdown)\nexport LIBE_WALLCLOCK=25 # Optional if pass to script\n\n# Name of Conda environment\nexport CONDA_ENV_NAME=<conda_env_name>\n\n# Need these if not already loaded\n# module load python\n# module load gcc/4.8.5\n\n# Activate conda environment\nexport PYTHONNOUSERSITE=1\n. activate $CONDA_ENV_NAME\n\n# hash -d python # Check pick up python in conda env\nhash -r # Check no commands hashed (pip/python...)\n\n# Launch libE\n# python $EXE $NUM_WORKERS > out.txt 2>&1 # No args. All defined in calling script\n# python $EXE $COMMS $NWORKERS > out.txt 2>&1 # If calling script is using parse_args()\npython $EXE $LIBE_WALLCLOCK $COMMS $NWORKERS > out.txt 2>&1 # If calling script takes wall-clock as positional arg.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 8768, "end_char_idx": 9989, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "1194b8af-491d-4dd6-82db-e03aa4419da0": {"__data__": {"id_": "1194b8af-491d-4dd6-82db-e03aa4419da0", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/surmise.html", "file_name": "surmise.html", "file_type": "text/html", "file_size": 11716, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "409732d7-0632-41dc-98e1-8e65dc9439c9", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/surmise.html", "file_name": "surmise.html", "file_type": "text/html", "file_size": 11716, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "c891f1ff7c6f538dff7570b5cc89f2721b1db0da0e6fbafe7f58600cf6d0adea", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "persistent_surmise \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSampling\nOptimization\nModeling and Approximation\ngpCAM\npersistent_tasmanian\npersistent_fd_param_finder\npersistent_surmise\nsurmise_calib()\n\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nGenerator Functions\npersistent_surmise\n\n View page source\n\npersistent_surmise\uf0c1\nRequired: Surmise.\nExample usage: basic, kill canceled sims\nModular Bayesian calibration/inference framework.\nThe Borehole Calibration tutorial uses this generator as an\nexample of the capability to cancel pending simulations.\nThis module contains a simple calibration example using the Surmise package.\n\npersistent_surmise_calib.surmise_calib(H, persis_info, gen_specs, libE_info)\uf0c1\nGenerator to select and obviate parameters for calibration.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1455, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "bfaab4c0-ed2f-48e6-8e11-27f1ecbd96f9": {"__data__": {"id_": "bfaab4c0-ed2f-48e6-8e11-27f1ecbd96f9", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/tasmanian.html", "file_name": "tasmanian.html", "file_type": "text/html", "file_size": 89531, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "962baaa4-df10-4228-a65a-dd50e9768fbd", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/tasmanian.html", "file_name": "tasmanian.html", "file_type": "text/html", "file_size": 89531, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "10bb7f4cc51e35baef621e3edfda53cf4153b56af4fa8d0e767e9b8ac6fd115f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fdfd4afa-09f4-4f69-9e5b-43ced200bbe4", "node_type": "1", "metadata": {}, "hash": "6706fc0048e623f6ca083374a708cd2224169937230a403faab018581cb01d68", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "persistent_tasmanian \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSampling\nOptimization\nModeling and Approximation\ngpCAM\npersistent_tasmanian\nsparse_grid_batched()\nsparse_grid_async()\n\npersistent_fd_param_finder\npersistent_surmise\n\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nGenerator Functions\npersistent_tasmanian\n\n View page source\n\npersistent_tasmanian\uf0c1\nRequired: Tasmanian, pypackaging, scikit-build\nExample usage: batched, async\nNote that Tasmanian can be pip installed, but currently must\nuse either venv or \u2013user install.\nE.g: pip install scikit-build packaging Tasmanian --user\nA persistent generator using the uncertainty quantification capabilities in\nTasmanian.\n\npersistent_tasmanian.sparse_grid_batched(H, persis_info, gen_specs, libE_info)\uf0c1\nImplements batched construction for a Tasmanian sparse grid,\nusing the loop described in Tasmanian Example 09:\nsparse grid example\n\npersistent_tasmanian.sparse_grid_async(H, persis_info, gen_specs, libE_info)\uf0c1\nImplements asynchronous construction for a Tasmanian sparse grid,\nusing the logic in the dynamic Tasmanian model construction function:\nsparse grid dynamic example\n\npersistent_tasmanian.py\n 1\"\"\"\n 2A persistent generator using the uncertainty quantification capabilities in\n 3`Tasmanian <https://github.com/ORNL/Tasmanian>`_.\n 4\"\"\"\n 5\n 6import numpy as np\n 7\n 8from libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as allocf\n 9from libensemble.message_numbers import EVAL_GEN_TAG, FINISHED_PERSISTENT_GEN_TAG, PERSIS_STOP, STOP_TAG\n 10from libensemble.tools import parse_args\n 11from libensemble.tools.persistent_support import PersistentSupport\n 12\n 13__all__ = [\n 14 \"sparse_grid_batched\",\n 15 \"sparse_grid_async\",\n 16]\n 17\n 18\n 19def lex_le(x, y, tol=1e-12):\n 20 \"\"\"\n 21 Returns True if x <= y lexicographically up to some tolerance.\n 22 \"\"\"\n 23 cmp = np.fabs(x - y) > tol\n 24 ind = np.argmax(cmp)\n 25 if not cmp[ind]:\n 26 return True\n 27 return x[ind] <= y[ind]\n 28\n 29\n 30def get_2D_insert_indices(x, y, x_ord=np.empty(0, dtype=\"int\"), y_ord=np.empty(0, dtype=\"int\"), tol=1e-12):\n 31 \"\"\"\n 32 Finds the row indices in a 2D numpy array `x` for which the sorted values of `y` can be inserted\n 33 into. If `x_ord` (resp. `y_ord`) is empty, then `x` (resp. `y`) must be lexicographically\n 34 sorted. Otherwise, `x[x_ord]` (resp. `y[y_ord]`) must be lexicographically sorted. Complexity is\n 35 O(x.shape[0] + y.shape[0]).", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2970, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "fdfd4afa-09f4-4f69-9e5b-43ced200bbe4": {"__data__": {"id_": "fdfd4afa-09f4-4f69-9e5b-43ced200bbe4", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/tasmanian.html", "file_name": "tasmanian.html", "file_type": "text/html", "file_size": 89531, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "962baaa4-df10-4228-a65a-dd50e9768fbd", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/tasmanian.html", "file_name": "tasmanian.html", "file_type": "text/html", "file_size": 89531, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "10bb7f4cc51e35baef621e3edfda53cf4153b56af4fa8d0e767e9b8ac6fd115f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bfaab4c0-ed2f-48e6-8e11-27f1ecbd96f9", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/tasmanian.html", "file_name": "tasmanian.html", "file_type": "text/html", "file_size": 89531, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "6b3db592c625e651dbed96b2b052e15e9ab685844f715030bdc0618bdc7b4c0c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f81006e0-9484-4c3c-88f7-9546db330edb", "node_type": "1", "metadata": {}, "hash": "74a87923e8550541ef7dbfa4b26caa19509cb9efaa47b5d996a42047a825fa31", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "If `x_ord` (resp. `y_ord`) is empty, then `x` (resp. `y`) must be lexicographically\n 34 sorted. Otherwise, `x[x_ord]` (resp. `y[y_ord]`) must be lexicographically sorted. Complexity is\n 35 O(x.shape[0] + y.shape[0]).\n 36 \"\"\"\n 37 assert len(x.shape) == 2\n 38 assert len(y.shape) == 2\n 39 if x.size == 0:\n 40 return np.zeros(y.shape[0], dtype=\"int\")\n 41 else:\n 42 if x_ord.size == 0:\n 43 x_ord = np.arange(x.shape[0], dtype=\"int\")\n 44 if y_ord.size == 0:\n 45 y_ord = np.arange(y.shape[0], dtype=\"int\")\n 46 x_ptr = 0\n 47 y_ptr = 0\n 48 out_ord = np.empty(0, dtype=\"int\")\n 49 while y_ptr < y.shape[0]:\n 50 # The case where y[k] <= max of x[k:end, :]\n 51 xk = x[x_ord[x_ptr], :]\n 52 yk = y[y_ord[y_ptr], :]\n 53 if lex_le(yk, xk, tol=tol):\n 54 out_ord = np.append(out_ord, x_ord[x_ptr])\n 55 y_ptr += 1\n 56 else:\n 57 x_ptr += 1\n 58 # The edge case where y[k] is the largest of all elements of x.\n 59 if x_ptr >= x_ord.shape[0]:\n 60 for i in range(y_ptr, y_ord.shape[0], 1):\n 61 out_ord = np.append(out_ord, x_ord.shape[0])\n 62 y_ptr += 1\n 63 break\n 64 return out_ord\n 65\n 66\n 67def get_2D_duplicate_indices(x, y, x_ord=np.empty(0, dtype=\"int\"), y_ord=np.empty(0, dtype=\"int\"), tol=1e-12):\n 68 \"\"\"\n 69 Finds the row indices of a 2D numpy array `x` which overlap with `y`. If `x_ord` (resp. `y_ord`)\n 70 is empty, then `x` (resp. `y`) must be lexicographically sorted. Otherwise, `x[x_ord]` (resp.\n 71 `y[y_ord]`) must be lexicographically sorted.Complexity is O(x.shape[0] + y.shape[0]).\n 72 \"\"\"\n 73 assert len(x.shape) == 2\n 74 assert len(y.shape) == 2\n 75 if x.size == 0:\n 76 return np.empty(0, dtype=\"int\")\n 77 else:\n 78 if x_ord.size == 0:\n 79 x_ord = np.arange(x.shape[0], dtype=\"int\")\n 80 if y_ord.size == 0:\n 81 y_ord = np.arange(y.shape[0], dtype=\"int\")\n 82 x_ptr = 0\n 83 y_ptr = 0\n 84 out_ord = np.empty(0, dtype=\"int\")\n 85 while y_ptr < y.shape[0] and x_ptr < x.shape[0]:\n 86 # The case where y[k] <= max of x[k:end, :]\n 87 xk = x[x_ord[x_ptr], :]\n 88 yk = y[y_ord[y_ptr], :]\n 89 if all(np.fabs(yk - xk) <= tol):\n 90 out_ord = np.append(out_ord, x_ord[x_ptr])\n 91 x_ptr += 1\n 92 elif lex_le(xk, yk, tol=tol):\n 93 x_ptr += 1\n 94 else:\n 95 y_ptr += 1\n 96 return out_ord\n 97\n 98\n 99def get_state(queued_pts, queued_ids, id_offset, new_points=np.array([]), completed_points=np.array([]), tol=1e-12):\n100 \"\"\"\n101 Creates the data to be sent and updates the state arrays and scalars if new information\n102 (new_points or completed_points) arrives. Ensures that the output state arrays remain sorted if\n103 the input state arrays are already sorted.\n104 \"\"\"\n105 if new_points.size > 0:\n106 new_points_ord = np.lexsort(np.rot90(new_points))\n107 new_points_ids = id_offset + np.", "mimetype": "text/plain", "start_char_idx": 2754, "end_char_idx": 5424, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f81006e0-9484-4c3c-88f7-9546db330edb": {"__data__": {"id_": "f81006e0-9484-4c3c-88f7-9546db330edb", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/tasmanian.html", "file_name": "tasmanian.html", "file_type": "text/html", "file_size": 89531, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "962baaa4-df10-4228-a65a-dd50e9768fbd", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/tasmanian.html", "file_name": "tasmanian.html", "file_type": "text/html", "file_size": 89531, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "10bb7f4cc51e35baef621e3edfda53cf4153b56af4fa8d0e767e9b8ac6fd115f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fdfd4afa-09f4-4f69-9e5b-43ced200bbe4", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/tasmanian.html", "file_name": "tasmanian.html", "file_type": "text/html", "file_size": 89531, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "fbd079b80bfada90eea5b07c99df8aa606d6c960f20b11a449e2af242f12bd1a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2bfd619f-da29-4a51-8b1d-f8e36dec7b71", "node_type": "1", "metadata": {}, "hash": "4895b4fbd6a0d590e2f93b3506b13e08c57b787af41ad4e2fcb75680af681eb9", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Ensures that the output state arrays remain sorted if\n103 the input state arrays are already sorted.\n104 \"\"\"\n105 if new_points.size > 0:\n106 new_points_ord = np.lexsort(np.rot90(new_points))\n107 new_points_ids = id_offset + np.arange(new_points.shape[0])\n108 id_offset += new_points.shape[0]\n109 insert_idx = get_2D_insert_indices(queued_pts, new_points, y_ord=new_points_ord, tol=tol)\n110 queued_pts = np.insert(queued_pts, insert_idx, new_points[new_points_ord], axis=0)\n111 queued_ids = np.insert(queued_ids, insert_idx, new_points_ids[new_points_ord], axis=0)\n112\n113 if completed_points.size > 0:\n114 completed_ord = np.lexsort(np.rot90(completed_points))\n115 delete_ind = get_2D_duplicate_indices(queued_pts, completed_points, y_ord=completed_ord, tol=tol)\n116 queued_pts = np.delete(queued_pts, delete_ind, axis=0)\n117 queued_ids = np.delete(queued_ids, delete_ind, axis=0)\n118\n119 return queued_pts, queued_ids, id_offset\n120\n121\n122def get_H0(gen_specs, refined_pts, refined_ord, queued_pts, queued_ids, tol=1e-12):\n123 \"\"\"\n124 For runs following the first one, get the history array H0 based on the ordering in `refined_pts`\n125 \"\"\"\n126\n127 def approx_eq(x, y):\n128 return np.argmax(np.fabs(x - y)) <= tol\n129\n130 num_ids = queued_ids.shape[0]\n131 H0 = np.zeros(num_ids, dtype=gen_specs[\"out\"])\n132 refined_priority = np.flip(np.arange(refined_pts.shape[0], dtype=\"int\"))\n133 rptr = 0\n134 for qptr in range(num_ids):\n135 while not approx_eq(refined_pts[refined_ord[rptr]], queued_pts[qptr]):\n136 rptr += 1\n137 assert rptr <= refined_pts.shape[0]\n138 H0[\"x\"][qptr] = queued_pts[qptr]\n139 H0[\"sim_id\"][qptr] = queued_ids[qptr]\n140 H0[\"priority\"][qptr] = refined_priority[refined_ord[rptr]]\n141 return H0\n142\n143\n144# ========================\n145# Main generator functions\n146# ========================\n147\n148\n149def sparse_grid_batched(H, persis_info, gen_specs, libE_info):\n150 \"\"\"\n151 Implements batched construction for a Tasmanian sparse grid,\n152 using the loop described in Tasmanian Example 09:\n153 `sparse grid example <https://github.com/ORNL/TASMANIAN/blob/master/InterfacePython/example_sparse_grids_09.py>`_\n154\n155 \"\"\"\n156 U = gen_specs[\"user\"]\n157 ps = PersistentSupport(libE_info, EVAL_GEN_TAG)\n158 grid = U[\"tasmanian_init\"]() # initialize the grid\n159 allowed_refinements = [\n160 \"setAnisotropicRefinement\",\n161 \"getAnisotropicRefinement\",\n162 \"setSurplusRefinement\",\n163 \"getSurplusRefinement\",\n164 \"none\",\n165 ]\n166 assert (\n167 \"refinement\" in U and U[\"refinement\"] in allowed_refinements\n168 ), f\"Must provide a gen_specs['user']['refinement'] in: {allowed_refinements}\"\n169\n170 while grid.getNumNeeded() > 0:\n171 aPoints = grid.getNeededPoints()\n172\n173 H0 = np.zeros(len(aPoints), dtype=gen_specs[\"out\"])\n174 H0[\"x\"] = aPoints\n175\n176 # Receive values from manager\n177 tag, Work, calc_in = ps.send_recv(H0)\n178 if tag in [STOP_TAG, PERSIS_STOP]:\n179 break\n180 aModelValues = calc_in[\"f\"]\n181\n182 # Update surrogate on grid\n183 t = aModelValues.reshape((aModelValues.shape[0], grid.getNumOutputs()))\n184 t = t.flatten()\n185 t = np.atleast_2d(t).T\n186 grid.loadNeededPoints(t)\n187\n188 if \"tasmanian_checkpoint_file\" in U:\n189 grid.write(U[\"tasmanian_checkpoint_file\"])\n190\n191 # set refinement,", "mimetype": "text/plain", "start_char_idx": 5197, "end_char_idx": 8421, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "2bfd619f-da29-4a51-8b1d-f8e36dec7b71": {"__data__": {"id_": "2bfd619f-da29-4a51-8b1d-f8e36dec7b71", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/tasmanian.html", "file_name": "tasmanian.html", "file_type": "text/html", "file_size": 89531, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "962baaa4-df10-4228-a65a-dd50e9768fbd", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/tasmanian.html", "file_name": "tasmanian.html", "file_type": "text/html", "file_size": 89531, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "10bb7f4cc51e35baef621e3edfda53cf4153b56af4fa8d0e767e9b8ac6fd115f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f81006e0-9484-4c3c-88f7-9546db330edb", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/tasmanian.html", "file_name": "tasmanian.html", "file_type": "text/html", "file_size": 89531, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "8c15857d67cc8f29e8e45bca990a66fa3a66a7219a6a72bf535c8c0868c332e7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0a5178b6-41f5-4e2c-9a74-6a92405a2f1c", "node_type": "1", "metadata": {}, "hash": "50e961fb92fc7ec2a4155afb318128b9e36acad451f8ea13fdb619bbfac94dc9", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "getNumNeeded() > 0:\n171 aPoints = grid.getNeededPoints()\n172\n173 H0 = np.zeros(len(aPoints), dtype=gen_specs[\"out\"])\n174 H0[\"x\"] = aPoints\n175\n176 # Receive values from manager\n177 tag, Work, calc_in = ps.send_recv(H0)\n178 if tag in [STOP_TAG, PERSIS_STOP]:\n179 break\n180 aModelValues = calc_in[\"f\"]\n181\n182 # Update surrogate on grid\n183 t = aModelValues.reshape((aModelValues.shape[0], grid.getNumOutputs()))\n184 t = t.flatten()\n185 t = np.atleast_2d(t).T\n186 grid.loadNeededPoints(t)\n187\n188 if \"tasmanian_checkpoint_file\" in U:\n189 grid.write(U[\"tasmanian_checkpoint_file\"])\n190\n191 # set refinement, using user[\"refinement\"] to pick the refinement strategy\n192 if U[\"refinement\"] in [\"setAnisotropicRefinement\", \"getAnisotropicRefinement\"]:\n193 assert \"sType\" in U\n194 assert \"iMinGrowth\" in U\n195 assert \"iOutput\" in U\n196 grid.setAnisotropicRefinement(U[\"sType\"], U[\"iMinGrowth\"], U[\"iOutput\"])\n197 elif U[\"refinement\"] in [\"setSurplusRefinement\", \"getSurplusRefinement\"]:\n198 assert \"fTolerance\" in U\n199 assert \"iOutput\" in U\n200 assert \"sCriteria\" in U\n201 grid.setSurplusRefinement(U[\"fTolerance\"], U[\"iOutput\"], U[\"sCriteria\"])\n202\n203 return None, persis_info, FINISHED_PERSISTENT_GEN_TAG\n204\n205\n206def sparse_grid_async(H, persis_info, gen_specs, libE_info):\n207 \"\"\"\n208 Implements asynchronous construction for a Tasmanian sparse grid,\n209 using the logic in the dynamic Tasmanian model construction function:\n210 `sparse grid dynamic example <https://github.com/ORNL/TASMANIAN/blob/master/Addons/tsgConstructSurrogate.hpp>`_\n211\n212 \"\"\"\n213 U = gen_specs[\"user\"]\n214 ps = PersistentSupport(libE_info, EVAL_GEN_TAG)\n215 grid = U[\"tasmanian_init\"]() # initialize the grid\n216 allowed_refinements = [\"getCandidateConstructionPoints\", \"getCandidateConstructionPointsSurplus\"]\n217 assert (\n218 \"refinement\" in U and U[\"refinement\"] in allowed_refinements\n219 ), f\"Must provide a gen_specs['user']['refinement'] in: {allowed_refinements}\"\n220 tol = U[\"_match_tolerance\"] if \"_match_tolerance\" in U else 1.0e-12\n221\n222 # Choose the refinement function based on U[\"refinement\"].\n223 if U[\"refinement\"] == \"getCandidateConstructionPoints\":\n224 assert \"sType\" in U\n225 assert \"liAnisotropicWeightsOrOutput\" in U\n226 if U[\"refinement\"] == \"getCandidateConstructionPointsSurplus\":\n227 assert \"fTolerance\" in U\n228 assert \"sRefinementType\" in U\n229\n230 def get_refined_points(g, U):\n231 if U[\"refinement\"] == \"getCandidateConstructionPoints\":\n232 return g.getCandidateConstructionPoints(U[\"sType\"], U[\"liAnisotropicWeightsOrOutput\"])\n233 else:\n234 assert U[\"refinement\"] == \"getCandidateConstructionPointsSurplus\"\n235 return g.getCandidateConstructionPointsSurplus(U[\"fTolerance\"], U[\"sRefinementType\"])\n236 # else:\n237 # raise ValueError(\"Unknown refinement string\")\n238\n239 # Asynchronous helper and state variables.\n240 num_dims = grid.getNumDimensions()\n241 num_completed = 0\n242 offset = 0\n243 queued_pts = np.empty((0, num_dims), dtype=\"float\")\n244 queued_ids = np.empty(0, dtype=\"int\")\n245\n246 # First run.", "mimetype": "text/plain", "start_char_idx": 7817, "end_char_idx": 10835, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "0a5178b6-41f5-4e2c-9a74-6a92405a2f1c": {"__data__": {"id_": "0a5178b6-41f5-4e2c-9a74-6a92405a2f1c", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/tasmanian.html", "file_name": "tasmanian.html", "file_type": "text/html", "file_size": 89531, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "962baaa4-df10-4228-a65a-dd50e9768fbd", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/tasmanian.html", "file_name": "tasmanian.html", "file_type": "text/html", "file_size": 89531, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "10bb7f4cc51e35baef621e3edfda53cf4153b56af4fa8d0e767e9b8ac6fd115f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2bfd619f-da29-4a51-8b1d-f8e36dec7b71", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/tasmanian.html", "file_name": "tasmanian.html", "file_type": "text/html", "file_size": 89531, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "28fe6001b901697dd690fc7555d7be47037daddeca006bbec74ca19b7dd793f6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ebddaea5-6d11-406f-9708-674df1eda2a6", "node_type": "1", "metadata": {}, "hash": "9004220db3f0c542e4c8b715fab5090d53d47ad4b69251dbc56b4386535a86a6", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "240 num_dims = grid.getNumDimensions()\n241 num_completed = 0\n242 offset = 0\n243 queued_pts = np.empty((0, num_dims), dtype=\"float\")\n244 queued_ids = np.empty(0, dtype=\"int\")\n245\n246 # First run.\n247 grid.beginConstruction()\n248 init_pts = get_refined_points(grid, U)\n249 queued_pts, queued_ids, offset = get_state(queued_pts, queued_ids, offset, new_points=init_pts, tol=tol)\n250 H0 = np.zeros(init_pts.shape[0], dtype=gen_specs[\"out\"])\n251 H0[\"x\"] = init_pts\n252 H0[\"sim_id\"] = np.arange(init_pts.shape[0], dtype=\"int\")\n253 H0[\"priority\"] = np.flip(H0[\"sim_id\"])\n254 tag, Work, calc_in = ps.send_recv(H0)\n255\n256 # Subsequent runs.\n257 while tag not in [STOP_TAG, PERSIS_STOP]:\n258 # Parse the points returned by the allocator.\n259 num_completed += calc_in[\"x\"].shape[0]\n260 queued_pts, queued_ids, offset = get_state(\n261 queued_pts, queued_ids, offset, completed_points=calc_in[\"x\"], tol=tol\n262 )\n263\n264 # Compute the next batch of points (if they exist).\n265 new_pts = np.empty((0, num_dims), dtype=\"float\")\n266 refined_pts = np.empty((0, num_dims), dtype=\"float\")\n267 refined_ord = np.empty(0, dtype=\"int\")\n268 if grid.getNumLoaded() < 1000 or num_completed > 0.2 * grid.getNumLoaded():\n269 # A copy is needed because the data in the calc_in arrays are not contiguous.\n270 grid.loadConstructedPoint(np.copy(calc_in[\"x\"]), np.copy(calc_in[\"f\"]))\n271 if \"tasmanian_checkpoint_file\" in U:\n272 grid.write(U[\"tasmanian_checkpoint_file\"])\n273 refined_pts = get_refined_points(grid, U)\n274 # If the refined points are empty, then there is a stopping condition internal to the\n275 # Tasmanian sparse grid that is being triggered by the loaded points.\n276 if refined_pts.size == 0:\n277 break\n278 refined_ord = np.lexsort(np.rot90(refined_pts))\n279 delete_ind = get_2D_duplicate_indices(refined_pts, queued_pts, x_ord=refined_ord, tol=tol)\n280 new_pts = np.delete(refined_pts, delete_ind, axis=0)\n281\n282 if new_pts.shape[0] > 0:\n283 # Update the state variables with the refined points and update the queue in the allocator.\n284 num_completed = 0\n285 queued_pts, queued_ids, offset = get_state(queued_pts, queued_ids, offset, new_points=new_pts, tol=tol)\n286 H0 = get_H0(gen_specs, refined_pts, refined_ord, queued_pts, queued_ids, tol=tol)\n287 tag, Work, calc_in = ps.send_recv(H0)\n288 else:\n289 tag, Work, calc_in = ps.recv()\n290\n291 return None, persis_info, FINISHED_PERSISTENT_GEN_TAG\n292\n293\n294def get_sparse_grid_specs(user_specs, sim_f, num_dims, num_outputs=1, mode=\"batched\"):\n295 \"\"\"\n296 Helper function that generates the simulator, generator, and allocator specs as well as the\n297 persis_info dictionary to ensure that they are compatible with the custom generators in this\n298 script. The outputs should be used in the main libE() call.\n299\n300 INPUTS:\n301 user_specs (dict) : a dictionary of user specs that is needed in the generator specs;\n302 expects the key \"tasmanian_init\" whose value is a 0-argument lambda\n303 that initializes an appropriate Tasmanian sparse grid object.\n304\n305 sim_f (func) : a lambda function that takes in generator outputs (simulator inputs)\n306 and returns simulator outputs.\n307\n308 num_dims (int) : number of model inputs.\n309\n310 num_outputs (int) : number of model outputs.\n311\n312 mode (string) : can either be \"batched\" or \"async\".\n313\n314 OUTPUTS:\n315 sim_specs (dict) : a dictionary of simulation specs and also one of the inputs of libE().\n316\n317 gen_specs (dict) : a dictionary of generator specs and also one of the inputs of libE().\n318\n319 alloc_specs (dict) : a dictionary of allocation specs and also one of the inputs of libE().", "mimetype": "text/plain", "start_char_idx": 10641, "end_char_idx": 14232, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ebddaea5-6d11-406f-9708-674df1eda2a6": {"__data__": {"id_": "ebddaea5-6d11-406f-9708-674df1eda2a6", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/tasmanian.html", "file_name": "tasmanian.html", "file_type": "text/html", "file_size": 89531, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "962baaa4-df10-4228-a65a-dd50e9768fbd", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/tasmanian.html", "file_name": "tasmanian.html", "file_type": "text/html", "file_size": 89531, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "10bb7f4cc51e35baef621e3edfda53cf4153b56af4fa8d0e767e9b8ac6fd115f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0a5178b6-41f5-4e2c-9a74-6a92405a2f1c", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/tasmanian.html", "file_name": "tasmanian.html", "file_type": "text/html", "file_size": 89531, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "75052ee756ce77bdeaf9421ff4bca8a6ef89a21bd650d92d374f87ece184cf51", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "304\n305 sim_f (func) : a lambda function that takes in generator outputs (simulator inputs)\n306 and returns simulator outputs.\n307\n308 num_dims (int) : number of model inputs.\n309\n310 num_outputs (int) : number of model outputs.\n311\n312 mode (string) : can either be \"batched\" or \"async\".\n313\n314 OUTPUTS:\n315 sim_specs (dict) : a dictionary of simulation specs and also one of the inputs of libE().\n316\n317 gen_specs (dict) : a dictionary of generator specs and also one of the inputs of libE().\n318\n319 alloc_specs (dict) : a dictionary of allocation specs and also one of the inputs of libE().\n320\n321 persis_info (dict) : a dictionary containing common information that is passed to all\n322 workers and also one of the inputs of libE().\n323\n324 \"\"\"\n325\n326 assert \"tasmanian_init\" in user_specs\n327 assert mode in [\"batched\", \"async\"]\n328\n329 sim_specs = {\n330 \"sim_f\": sim_f,\n331 \"in\": [\"x\"],\n332 }\n333 gen_out = [\n334 (\"x\", float, (num_dims,)),\n335 (\"sim_id\", int),\n336 (\"priority\", int),\n337 ]\n338 gen_specs = {\n339 \"persis_in\": [t[0] for t in gen_out] + [\"f\"],\n340 \"out\": gen_out,\n341 \"user\": user_specs,\n342 }\n343 alloc_specs = {\n344 \"alloc_f\": allocf,\n345 \"user\": {},\n346 }\n347\n348 if mode == \"batched\":\n349 gen_specs[\"gen_f\"] = sparse_grid_batched\n350 sim_specs[\"out\"] = [(\"f\", float, (num_outputs,))]\n351 if mode == \"async\":\n352 gen_specs[\"gen_f\"] = sparse_grid_async\n353 sim_specs[\"out\"] = [(\"x\", float, (num_dims,)), (\"f\", float, (num_outputs,))]\n354 alloc_specs[\"user\"][\"active_recv_gen\"] = True\n355 alloc_specs[\"user\"][\"async_return\"] = True\n356\n357 nworkers, _, _, _ = parse_args()\n358 persis_info = {}\n359 for i in range(nworkers + 1):\n360 persis_info[i] = {\"worker_num\": i}\n361\n362 return sim_specs, gen_specs, alloc_specs, persis_info\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 13636, "end_char_idx": 15517, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "6b4c19b2-12b2-4e23-815c-d6220b48f432": {"__data__": {"id_": "6b4c19b2-12b2-4e23-815c-d6220b48f432", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/uniform_or_localopt.html", "file_name": "uniform_or_localopt.html", "file_type": "text/html", "file_size": 12779, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8b848a50-4f1d-4947-bd7e-04e70e2447de", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/examples/uniform_or_localopt.html", "file_name": "uniform_or_localopt.html", "file_type": "text/html", "file_size": 12779, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "a69774c98d1f293b2290dc7b158fc436b7d2df0dcf7f916516404d85fc8f8b0f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "uniform_or_localopt \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSampling\nOptimization\nAPOSMM\nuniform_or_localopt\nuniform_or_localopt()\n\nax_multitask\nVTMOP\nytopt\nconsensus\nDEAP-NSGA-II\n\nModeling and Approximation\n\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nGenerator Functions\nuniform_or_localopt\n\n View page source\n\nuniform_or_localopt\uf0c1\nRequired: nlopt\nThis module is a persistent generation function that performs a uniform\nrandom sample when libE_info[\"persistent\"] isn\u2019t True, or performs a\nsingle persistent nlopt local optimization run.\n\nuniform_or_localopt.uniform_or_localopt(H, persis_info, gen_specs, libE_info)\uf0c1\nThis generation function returns gen_specs[\"user\"][\"gen_batch_size\"] uniformly\nsampled points when called in nonpersistent mode (i.e., when\nlibE_info[\"persistent\"] isn\u2019t True). Otherwise, the generation\nfunction starts a persistent nlopt local optimization run.\n\nSee also\ntest_uniform_sampling_then_persistent_localopt_runs.py\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1637, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "06e53a47-b9bd-475a-abf4-960e18a2869b": {"__data__": {"id_": "06e53a47-b9bd-475a-abf4-960e18a2869b", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/executor/ex_index.html", "file_name": "ex_index.html", "file_type": "text/html", "file_size": 10922, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2e9d433d-1b65-44c8-8816-44341bb5aa3e", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/executor/ex_index.html", "file_name": "ex_index.html", "file_type": "text/html", "file_size": 10922, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "bb06d55460240b5799b9e0dcbd7a5ba1c208819d57045fb8c2c8e01697672134", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Executors \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nOutput Management\nHistory Array\nResource Manager\nWriting User Functions\nExecutors\nExecutor Overview\nBase Executor - Local apps\nMPI Executor - MPI apps\n\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nExecutors\n\n View page source\n\nExecutors\uf0c1\nlibEnsemble\u2019s Executors can be used within user functions to provide a simple,\nportable interface for running and managing user applications.\n\nlibEnsemble Executors:\n\nExecutor Overview\nBase Executor - Local apps\nMPI Executor - MPI apps\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1314, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d45523db-2e2a-4449-b658-733d4a3dca51": {"__data__": {"id_": "d45523db-2e2a-4449-b658-733d4a3dca51", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/executor/executor.html", "file_name": "executor.html", "file_type": "text/html", "file_size": 43313, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ca5cf40e-22ea-44f3-a8d3-2ffb525bff69", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/executor/executor.html", "file_name": "executor.html", "file_type": "text/html", "file_size": 43313, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "b71e8650796d6576ca8ccbed345f77eadf3848ae0a81e6283deacaceca10ce0a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "15d816a8-f82b-4460-bd03-f166caf22100", "node_type": "1", "metadata": {}, "hash": "bd218420356256ab15874a971e7905a9d41f2dfb9ef48cd44d101295d1b134a3", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Base Executor - Local apps \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nOutput Management\nHistory Array\nResource Manager\nWriting User Functions\nExecutors\nExecutor Overview\nBase Executor - Local apps\nExecutor\nTask\n\nMPI Executor - MPI apps\n\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nExecutors\nBase Executor - Local apps\n\n View page source\n\nBase Executor - Local apps\uf0c1\nThis module contains the classes Executor and Task. An executor\ncan create and manage multiple tasks. Task attributes are queried to\ndetermine status.\nSee the Executor APIs for optional arguments.\n\nBase Executor\nOnly for running local serial-launched applications.\nTo run MPI applications and use detected resources, use the MPIExecutor\n\nclass libensemble.executors.executor.Executor\uf0c1\nThe executor can create, poll and kill runnable tasks\nClass Attributes:\n\nVariables:\nExecutor \u2013 executor: The executor object is stored here and can be retrieved in user functions.\n\n__init__()\uf0c1\nInstantiate a new Executor instance.\n\nReturns:\nA new Executor object is created.\nThis is typically created in the user calling script.\n\nReturn type:\nExecutor\n\nregister_app(full_path, app_name=None, calc_type=None, desc=None, precedent='')\uf0c1\nRegisters a user application to libEnsemble.\nThe full_path of the application must be supplied. Either\napp_name or calc_type can be used to identify the\napplication in user scripts (in the submit function).\napp_name is recommended.\n\nParameters:\n\nfull_path (str) \u2013 The full path of the user application to be registered\napp_name (str, Optional) \u2013 Name to identify this application.\ncalc_type (str, Optional) \u2013 Calculation type: Set this application as the default \u2018sim\u2019\nor \u2018gen\u2019 function.\ndesc (str, Optional) \u2013 Description of this application\nprecedent (str, Optional) \u2013 Any str that should directly precede the application full path.\n\nReturn type:\nNone\n\nmanager_poll()\uf0c1\nPolls for a manager signal\nThe executor manager_signal attribute will be updated.\n\nReturn type:\nint\n\nmanager_kill_received()\uf0c1\nReturn True if received kill signal from the manager\n\nReturn type:\nbool\n\npolling_loop(task, timeout=None, delay=0.1, poll_manager=False)\uf0c1\nOptional, blocking, generic task status polling loop. Operates until the task\nfinishes, times out, or is optionally killed via a manager signal. On completion, returns a\npresumptive calc_status integer. Useful\nfor running an application via the Executor until it stops without monitoring\nits intermediate output.\n\nParameters:\n\ntask (object) \u2013 a Task object returned by the executor on submission\ntimeout (int, Optional) \u2013 Maximum number of seconds for the polling loop to run. Tasks that run\nlonger than this limit are killed. Default: No timeout\ndelay (int, Optional) \u2013 Sleep duration between polling loop iterations. Default: 0.1 seconds\npoll_manager (bool, Optional) \u2013 Whether to also poll the manager for \u2018finish\u2019 or \u2018kill\u2019 signals.\nIf detected, the task is killed. Default: False.\n\nReturns:\ncalc_status \u2013 presumptive integer attribute describing the final status of a launched task\n\nReturn type:\nint\n\nsubmit(calc_type=None, app_name=None, app_args=None, stdout=None, stderr=None, dry_run=False, wait_on_start=False, env_script=None)\uf0c1\nCreate a new task and run as a local serial subprocess.\nThe created task object is returned.\n\nParameters:\n\ncalc_type (str, Optional) \u2013 The calculation type: \u2018sim\u2019 or \u2018gen\u2019\nOnly used if app_name is not supplied. Uses default sim or gen application.\napp_name (str, Optional) \u2013 The application name. Must be supplied if calc_type is not.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4154, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "15d816a8-f82b-4460-bd03-f166caf22100": {"__data__": {"id_": "15d816a8-f82b-4460-bd03-f166caf22100", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/executor/executor.html", "file_name": "executor.html", "file_type": "text/html", "file_size": 43313, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ca5cf40e-22ea-44f3-a8d3-2ffb525bff69", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/executor/executor.html", "file_name": "executor.html", "file_type": "text/html", "file_size": 43313, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "b71e8650796d6576ca8ccbed345f77eadf3848ae0a81e6283deacaceca10ce0a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d45523db-2e2a-4449-b658-733d4a3dca51", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/executor/executor.html", "file_name": "executor.html", "file_type": "text/html", "file_size": 43313, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "0d1003bf86181e3a63a2c56ac1e09b8abd626d52293e53dd1efc8ea280b65db1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "867e788f-0039-4ae0-9549-98c03e9b32d4", "node_type": "1", "metadata": {}, "hash": "29315135a9b7f35fadee0cb22dc835651ba1c1d04b4d6dff4042508afee5c5c2", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Default: 0.1 seconds\npoll_manager (bool, Optional) \u2013 Whether to also poll the manager for \u2018finish\u2019 or \u2018kill\u2019 signals.\nIf detected, the task is killed. Default: False.\n\nReturns:\ncalc_status \u2013 presumptive integer attribute describing the final status of a launched task\n\nReturn type:\nint\n\nsubmit(calc_type=None, app_name=None, app_args=None, stdout=None, stderr=None, dry_run=False, wait_on_start=False, env_script=None)\uf0c1\nCreate a new task and run as a local serial subprocess.\nThe created task object is returned.\n\nParameters:\n\ncalc_type (str, Optional) \u2013 The calculation type: \u2018sim\u2019 or \u2018gen\u2019\nOnly used if app_name is not supplied. Uses default sim or gen application.\napp_name (str, Optional) \u2013 The application name. Must be supplied if calc_type is not.\napp_args (str, Optional) \u2013 A str of the application arguments to be added to task\nsubmit command line\nstdout (str, Optional) \u2013 A standard output filename\nstderr (str, Optional) \u2013 A standard error filename\ndry_run (bool, Optional) \u2013 Whether this is a dry_run - no task will be launched; instead\nrunline is printed to logger (at INFO level)\nwait_on_start (bool, Optional) \u2013 Whether to wait for task to be polled as RUNNING (or other\nactive/end state) before continuing. If an integer N is supplied,\nwait at most N seconds.\nenv_script (str, Optional) \u2013 The full path of a shell script to set up the environment for the\nlaunched task. This will be run in the subprocess, and not affect\nthe worker environment. The script should start with a shebang.\n\nReturns:\ntask \u2013 The launched task object\n\nReturn type:\nTask\n\nTask\nTasks are created and returned by the Executor\u2019s submit(). Tasks\ncan be polled, killed, and waited on with the respective poll, kill, and wait functions.\nTask information can be queried through instance attributes and query functions.\n\nclass libensemble.executors.executor.Task(app=None, app_args=None, workdir=None, stdout=None, stderr=None, workerid=None, dry_run=False)\uf0c1\nManages the creation, configuration and status of a launchable task\n\nworkdir_exists()\uf0c1\nReturns true if the task\u2019s workdir exists\n\nReturn type:\nbool | None\n\nfile_exists_in_workdir(filename)\uf0c1\nReturns true if the named file exists in the task\u2019s workdir\n\nParameters:\nfilename (str)\n\nReturn type:\nbool\n\nread_file_in_workdir(filename)\uf0c1\nOpens and reads the named file in the task\u2019s workdir\n\nParameters:\nfilename (str)\n\nReturn type:\nstr\n\nstdout_exists()\uf0c1\nReturns true if the task\u2019s stdout file exists in the workdir\n\nReturn type:\nbool\n\nread_stdout()\uf0c1\nOpens and reads the task\u2019s stdout file in the task\u2019s workdir\n\nReturn type:\nstr\n\nstderr_exists()\uf0c1\nReturns true if the task\u2019s stderr file exists in the workdir\n\nReturn type:\nbool\n\nread_stderr()\uf0c1\nOpens and reads the task\u2019s stderr file in the task\u2019s workdir\n\nReturn type:\nstr\n\npoll()\uf0c1\nPolls and updates the status attributes of the task\n\nReturn type:\nNone\n\nwait(timeout=None)\uf0c1\nWaits on completion of the task or raises TimeoutExpired exception\nStatus attributes of task are updated on completion.\n\nParameters:\ntimeout (int or float, Optional) \u2013 Time in seconds after which a TimeoutExpired exception is raised.\nIf not set, then simply waits until completion.\nNote that the task is not automatically killed on timeout.\n\nReturn type:\nNone\n\nresult(timeout=None)\uf0c1\nWrapper for task.wait() that also returns the task\u2019s status on completion.\n\nParameters:\ntimeout (int or float, Optional) \u2013 Time in seconds after which a TimeoutExpired exception is raised.\nIf not set, then simply waits until completion.\nNote that the task is not automatically killed on timeout.\n\nReturn type:\nstr\n\nexception(timeout=None)\uf0c1\nWrapper for task.wait() that instead returns the task\u2019s error code on completion.\n\nParameters:\ntimeout (int or float, Optional) \u2013 Time in seconds after which a TimeoutExpired exception is raised.\nIf not set, then simply waits until completion.\nNote that the task is not automatically killed on timeout.\n\nrunning()\uf0c1\nReturn True if task is currently running.\n\nReturn type:\nbool\n\ndone()\uf0c1\nReturn True if task is finished.", "mimetype": "text/plain", "start_char_idx": 3400, "end_char_idx": 7398, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "867e788f-0039-4ae0-9549-98c03e9b32d4": {"__data__": {"id_": "867e788f-0039-4ae0-9549-98c03e9b32d4", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/executor/executor.html", "file_name": "executor.html", "file_type": "text/html", "file_size": 43313, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ca5cf40e-22ea-44f3-a8d3-2ffb525bff69", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/executor/executor.html", "file_name": "executor.html", "file_type": "text/html", "file_size": 43313, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "b71e8650796d6576ca8ccbed345f77eadf3848ae0a81e6283deacaceca10ce0a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "15d816a8-f82b-4460-bd03-f166caf22100", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/executor/executor.html", "file_name": "executor.html", "file_type": "text/html", "file_size": 43313, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "781fe88ca6974acb6d5984852793c65f53c420f6a9a52b8939c2af58ea7a104e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "If not set, then simply waits until completion.\nNote that the task is not automatically killed on timeout.\n\nReturn type:\nNone\n\nresult(timeout=None)\uf0c1\nWrapper for task.wait() that also returns the task\u2019s status on completion.\n\nParameters:\ntimeout (int or float, Optional) \u2013 Time in seconds after which a TimeoutExpired exception is raised.\nIf not set, then simply waits until completion.\nNote that the task is not automatically killed on timeout.\n\nReturn type:\nstr\n\nexception(timeout=None)\uf0c1\nWrapper for task.wait() that instead returns the task\u2019s error code on completion.\n\nParameters:\ntimeout (int or float, Optional) \u2013 Time in seconds after which a TimeoutExpired exception is raised.\nIf not set, then simply waits until completion.\nNote that the task is not automatically killed on timeout.\n\nrunning()\uf0c1\nReturn True if task is currently running.\n\nReturn type:\nbool\n\ndone()\uf0c1\nReturn True if task is finished.\n\nReturn type:\nbool\n\nkill(wait_time=60)\uf0c1\nKills or cancels the supplied task\n\nParameters:\nwait_time (int, Optional) \u2013 Time in seconds to wait for termination between sending\nSIGTERM and a SIGKILL signals.\n\nReturn type:\nNone\n\nSends SIGTERM, waits for a period of <wait_time> for graceful\ntermination, then sends a hard kill with SIGKILL. If <wait_time>\nis 0, we go immediately to SIGKILL; if <wait_time> is none, we\nnever do a SIGKILL.\n\ncancel()\uf0c1\nWrapper for task.kill() without waiting\n\nReturn type:\nNone\n\ncancelled()\uf0c1\nReturn `True if task successfully cancelled.\n\nReturn type:\nbool\n\nTask Attributes\n\nNote\nThese should not be set directly. Tasks are launched by the Executor,\nand task information can be queried through the task attributes\nbelow and the query functions.\n\ntask.state:\n(string) The task status. One of\n(\u201cUNKNOWN\u201d|\u201dCREATED\u201d|\u201dWAITING\u201d|\u201dRUNNING\u201d|\u201dFINISHED\u201d|\u201dUSER_KILLED\u201d|\u201dFAILED\u201d|\u201dFAILED_TO_START\u201d)\n\ntask.process:\n(process obj) The process object used by the underlying process\nmanager (e.g., return value of subprocess.Popen).\n\ntask.errcode:\n(int) The error code (or return code) used by the underlying process manager.\n\ntask.finished:\n(boolean) True means task has finished running - not whether it was successful.\n\ntask.success:\n(boolean) Did task complete successfully (e.g., the return code is zero)?\n\ntask.runtime:\n(int) Time in seconds that task has been running.\n\ntask.submit_time:\n(int) Time since epoch that task was submitted.\n\ntask.total_time:\n(int) Total time from task submission to completion (only available when task is finished).\n\nRun configuration attributes - some will be autogenerated:\n\ntask.workdir:\n(string) Work directory for the task\n\ntask.name:\n(string) Name of task - autogenerated\n\ntask.app:\n(app obj) Use application/executable, registered using exctr.register_app\n\ntask.app_args:\n(string) Application arguments as a string\n\ntask.stdout:\n(string) Name of file where the standard output of the task is written (in task.workdir)\n\ntask.stderr:\n(string) Name of file where the standard error of the task is written (in task.workdir)\n\ntask.dry_run:\n(boolean) True if task corresponds to dry run (no actual submission)\n\ntask.runline:\n(string) Complete, parameterized command to be subprocessed to launch app\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 6492, "end_char_idx": 9767, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "20ae6d5a-e5d9-434e-829b-29090543b5f1": {"__data__": {"id_": "20ae6d5a-e5d9-434e-829b-29090543b5f1", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/executor/mpi_executor.html", "file_name": "mpi_executor.html", "file_type": "text/html", "file_size": 33537, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "725d28dd-c7dd-418b-bafa-04732d5fd0e6", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/executor/mpi_executor.html", "file_name": "mpi_executor.html", "file_type": "text/html", "file_size": 33537, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "9199e9b05cedc25973e0c9874eb10286f3595dc45a11a55d9c0519c18b0f3b55", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0f2dd648-82f9-47cd-8154-4610f39a66bc", "node_type": "1", "metadata": {}, "hash": "2d0e732f550e3c4c313e024fae941fc257d3e0e25d9ef7e29120691b70bfa88a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "MPI Executor - MPI apps \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nOutput Management\nHistory Array\nResource Manager\nWriting User Functions\nExecutors\nExecutor Overview\nBase Executor - Local apps\nMPI Executor - MPI apps\nMPIExecutor\nClass-specific Attributes\n\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nExecutors\nMPI Executor - MPI apps\n\n View page source\n\nMPI Executor - MPI apps\uf0c1\nThis module launches and controls the running of MPI applications.\nIn order to create an MPI executor, the calling script should contain:\nexctr = MPIExecutor()\n\nThe MPIExecutor will use system resource information supplied by the libEnsemble\nresource manager when submitting tasks.\nSee this example for usage.\n\nclass libensemble.executors.mpi_executor.MPIExecutor(custom_info={})\uf0c1\nBases: Executor\nThe MPI executor can create, poll and kill runnable MPI tasks\n\nParameters:\ncustom_info (dict, Optional) \u2013 Provide custom overrides to selected variables that are usually\nauto-detected. See below.\n\ncustom_info usage\nThe MPIExecutor automatically detects MPI runners and launch\nmechanisms. However it is possible to override the detected\ninformation using the custom_info argument. This takes\na dictionary of values.\nThe allowable fields are:\n'mpi_runner' [string]:\n Select runner: 'mpich', 'openmpi', 'aprun', 'srun', 'jsrun', 'custom'\n All except 'custom' relate to runner classes in libEnsemble.\n Custom allows user to define their own run-lines but without parsing\n arguments or making use of auto-resources.\n'runner_name' [string]:\n The literal string that appears at the front of the run command.\n This is typically 'mpirun', 'srun', etc., and can be a full path.\n Defaults exist for all runners except 'custom'.\n'subgroup_launch' [bool]:\n Whether MPI runs should be initiated in a new process group. This needs\n to be correct for kills to work correctly. Use the standalone test at\n libensemble/tests/standalone_tests/kill_test to determine correct value\n for a system.\n\nFor example:\ncustomizer = {'mpi_runner': 'mpich',\n 'runner_name': 'wrapper -x mpich'}\n\nfrom libensemble.executors.mpi_executor import MPIExecutor\nexctr = MPIExecutor(custom_info=customizer)\n\nsubmit(calc_type=None, app_name=None, num_procs=None, num_nodes=None, procs_per_node=None, num_gpus=None, machinefile=None, app_args=None, stdout=None, stderr=None, stage_inout=None, hyperthreads=False, dry_run=False, wait_on_start=False, extra_args=None, auto_assign_gpus=False, match_procs_to_gpus=False, env_script=None, mpi_runner_type=None)\uf0c1\nCreates a new task, and either executes or schedules execution.\nThe created task object is returned.\nThe user must supply either the app_name or calc_type arguments (app_name\nis recommended). All other arguments are optional.\n\nParameters:\n\ncalc_type (str, Optional) \u2013 The calculation type: \u2018sim\u2019 or \u2018gen\u2019\nOnly used if app_name is not supplied. Uses default sim or gen application.\napp_name (str, Optional) \u2013 The application name. Must be supplied if calc_type is not.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3620, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "0f2dd648-82f9-47cd-8154-4610f39a66bc": {"__data__": {"id_": "0f2dd648-82f9-47cd-8154-4610f39a66bc", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/executor/mpi_executor.html", "file_name": "mpi_executor.html", "file_type": "text/html", "file_size": 33537, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "725d28dd-c7dd-418b-bafa-04732d5fd0e6", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/executor/mpi_executor.html", "file_name": "mpi_executor.html", "file_type": "text/html", "file_size": 33537, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "9199e9b05cedc25973e0c9874eb10286f3595dc45a11a55d9c0519c18b0f3b55", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "20ae6d5a-e5d9-434e-829b-29090543b5f1", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/executor/mpi_executor.html", "file_name": "mpi_executor.html", "file_type": "text/html", "file_size": 33537, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "917c7a3a177b7d2ad52f212e56c0229e55d1f6e2053c085c4d65cde1c44bd85c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "86bdedd0-a7ba-47b7-956e-44e9e00e0845", "node_type": "1", "metadata": {}, "hash": "9492d8f7262c57fcdc9cd32764463671fcfb713d2a24c19a44b3dbe5b2018e71", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "The created task object is returned.\nThe user must supply either the app_name or calc_type arguments (app_name\nis recommended). All other arguments are optional.\n\nParameters:\n\ncalc_type (str, Optional) \u2013 The calculation type: \u2018sim\u2019 or \u2018gen\u2019\nOnly used if app_name is not supplied. Uses default sim or gen application.\napp_name (str, Optional) \u2013 The application name. Must be supplied if calc_type is not.\nnum_procs (int, Optional) \u2013 The total number of processes (MPI ranks)\nnum_nodes (int, Optional) \u2013 The number of nodes\nprocs_per_node (int, Optional) \u2013 The processes per node\nnum_gpus (int, Optional) \u2013 The total number of GPUs\nmachinefile (str, Optional) \u2013 Name of a machinefile\napp_args (str, Optional) \u2013 A string of the application arguments to be added to task\nsubmit command line\nstdout (str, Optional) \u2013 A standard output filename\nstderr (str, Optional) \u2013 A standard error filename\nstage_inout (str, Optional) \u2013 A directory to copy files from; default will take from\ncurrent directory\nhyperthreads (bool, Optional) \u2013 Whether to submit MPI tasks to hyperthreads\ndry_run (bool, Optional) \u2013 Whether this is a dry_run - no task will be launched; instead\nrunline is printed to logger (at INFO level)\nwait_on_start (bool, Optional) \u2013 Whether to wait for task to be polled as RUNNING (or other\nactive/end state) before continuing.\nextra_args (str, Optional) \u2013 Additional command line arguments to supply to MPI runner. If\narguments are recognized as MPI resource configuration\n(num_procs, num_nodes, procs_per_node) they will be used in\nresources determination unless also supplied in the direct\noptions.\nauto_assign_gpus (bool, Optional) \u2013 Auto-assign GPUs available to this worker using either the method\nsupplied in configuration or determined by detected environment.\nDefault: False\nmatch_procs_to_gpus (bool, Optional) \u2013 For use with auto_assign_gpus. Auto-assigns MPI processors to match\nthe assigned GPUs. Default: False unless auto_assign_gpus is True and\nno other CPU configuration is supplied.\nenv_script (str, Optional) \u2013 The full path of a shell script to set up the environment for the\nlaunched task. This will be run in the subprocess, and not affect\nthe worker environment. The script should start with a shebang.\nmpi_runner_type ((str|dict), Optional) \u2013 An MPI runner to be used for this submit only. Supply either a string\nfor the MPI runner type or a dictionary for detailed configuration\n(see custom_info on MPIExecutor constructor). This will not change\nthe default MPI runner for the executor.\nExample string inputs are \u201cmpich\u201d, \u201copenmpi\u201d, \u201csrun\u201d, \u201cjsrun\u201d, \u201caprun\u201d.\n\nReturns:\ntask \u2013 The launched task object\n\nReturn type:\nTask\n\nNote that if some combination of num_procs, num_nodes, and\nprocs_per_node is provided, these will be honored if\npossible. If resource detection is on and these are omitted,\nthen the available resources will be divided among workers.\n\nmanager_kill_received()\uf0c1\nReturn True if received kill signal from the manager\n\nReturn type:\nbool\n\nmanager_poll()\uf0c1\nPolls for a manager signal\nThe executor manager_signal attribute will be updated.\n\nReturn type:\nint\n\npolling_loop(task, timeout=None, delay=0.1, poll_manager=False)\uf0c1\nOptional, blocking, generic task status polling loop. Operates until the task\nfinishes, times out, or is optionally killed via a manager signal. On completion, returns a\npresumptive calc_status integer. Useful\nfor running an application via the Executor until it stops without monitoring\nits intermediate output.\n\nParameters:\n\ntask (object) \u2013 a Task object returned by the executor on submission\ntimeout (int, Optional) \u2013 Maximum number of seconds for the polling loop to run. Tasks that run\nlonger than this limit are killed. Default: No timeout\ndelay (int, Optional) \u2013 Sleep duration between polling loop iterations. Default: 0.1 seconds\npoll_manager (bool, Optional) \u2013 Whether to also poll the manager for \u2018finish\u2019 or \u2018kill\u2019 signals.\nIf detected, the task is killed. Default: False.", "mimetype": "text/plain", "start_char_idx": 3217, "end_char_idx": 7166, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "86bdedd0-a7ba-47b7-956e-44e9e00e0845": {"__data__": {"id_": "86bdedd0-a7ba-47b7-956e-44e9e00e0845", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/executor/mpi_executor.html", "file_name": "mpi_executor.html", "file_type": "text/html", "file_size": 33537, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "725d28dd-c7dd-418b-bafa-04732d5fd0e6", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/executor/mpi_executor.html", "file_name": "mpi_executor.html", "file_type": "text/html", "file_size": 33537, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "9199e9b05cedc25973e0c9874eb10286f3595dc45a11a55d9c0519c18b0f3b55", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0f2dd648-82f9-47cd-8154-4610f39a66bc", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/executor/mpi_executor.html", "file_name": "mpi_executor.html", "file_type": "text/html", "file_size": 33537, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "5855af4199752eef5ae1cfcbe10522cbf49ade23982bbf717557d02747bc3927", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Operates until the task\nfinishes, times out, or is optionally killed via a manager signal. On completion, returns a\npresumptive calc_status integer. Useful\nfor running an application via the Executor until it stops without monitoring\nits intermediate output.\n\nParameters:\n\ntask (object) \u2013 a Task object returned by the executor on submission\ntimeout (int, Optional) \u2013 Maximum number of seconds for the polling loop to run. Tasks that run\nlonger than this limit are killed. Default: No timeout\ndelay (int, Optional) \u2013 Sleep duration between polling loop iterations. Default: 0.1 seconds\npoll_manager (bool, Optional) \u2013 Whether to also poll the manager for \u2018finish\u2019 or \u2018kill\u2019 signals.\nIf detected, the task is killed. Default: False.\n\nReturns:\ncalc_status \u2013 presumptive integer attribute describing the final status of a launched task\n\nReturn type:\nint\n\nregister_app(full_path, app_name=None, calc_type=None, desc=None, precedent='')\uf0c1\nRegisters a user application to libEnsemble.\nThe full_path of the application must be supplied. Either\napp_name or calc_type can be used to identify the\napplication in user scripts (in the submit function).\napp_name is recommended.\n\nParameters:\n\nfull_path (str) \u2013 The full path of the user application to be registered\napp_name (str, Optional) \u2013 Name to identify this application.\ncalc_type (str, Optional) \u2013 Calculation type: Set this application as the default \u2018sim\u2019\nor \u2018gen\u2019 function.\ndesc (str, Optional) \u2013 Description of this application\nprecedent (str, Optional) \u2013 Any str that should directly precede the application full path.\n\nReturn type:\nNone\n\nClass-specific Attributes\uf0c1\nClass-specific attributes can be set directly to alter the behavior of the MPI\nExecutor. However, they should be used with caution, because they may not\nbe implemented in other executors.\n\nmax_submit_attempts:\n(int) Maximum number of launch attempts for a given\ntask. Default: 5.\n\nfail_time:\n(int or float) Only if wait_on_start is set. Maximum run time to failure in\nseconds that results in relaunch. Default: 2.\n\nretry_delay_incr:\n(int or float) Delay increment between launch attempts in seconds.\nDefault: 5. (i.e., First retry after 5 seconds, then 10 seconds, then 15, etc\u2026)\n\nExample. To increase resilience against submission failures:\ntaskctrl = MPIExecutor()\ntaskctrl.max_launch_attempts = 8\ntaskctrl.fail_time = 5\ntaskctrl.retry_delay_incr = 10\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 6435, "end_char_idx": 8930, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a1deb5dd-79e4-42f8-8a93-8104130862f6": {"__data__": {"id_": "a1deb5dd-79e4-42f8-8a93-8104130862f6", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/executor/overview.html", "file_name": "overview.html", "file_type": "text/html", "file_size": 28029, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "40f388c4-6306-4da0-9245-1ae99f4ede53", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/executor/overview.html", "file_name": "overview.html", "file_type": "text/html", "file_size": 28029, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "21a251bcbf4047fd12e36180cf24ba93165247ad81bc4b73f645bd683e20d3d5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7d2ddc84-11e5-4ce3-9e7c-df49cd17fcf4", "node_type": "1", "metadata": {}, "hash": "9d675db460bc60471c36c4c8e6bcefb17e8886aceb3c9afd38a57eb039593831", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Executor Overview \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nOutput Management\nHistory Array\nResource Manager\nWriting User Functions\nExecutors\nExecutor Overview\nBasic usage\nAdvanced Features\n\nBase Executor - Local apps\nMPI Executor - MPI apps\n\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nExecutors\nExecutor Overview\n\n View page source\n\nExecutor Overview\uf0c1\nMost computationally expensive libEnsemble workflows involve launching applications\nfrom a sim_f or gen_f running on a worker to the\ncompute nodes of a supercomputer, cluster, or other compute resource.\nThe Executor provides a portable interface for running applications on any system.\n\nDetailed description\nAn Executor interface is provided by libEnsemble to remove the burden\nof system interaction from the user and improve workflow portability. Users\nfirst register their applications to Executor instances, which then return\ncorresponding Task objects upon submission within user functions.\nTask attributes and retrieval functions can be queried to determine\nthe status of running application instances. Functions are also provided\nto access and interrogate files in the task\u2019s working directory.\nlibEnsemble\u2019s Executors and Tasks contain many familiar features and methods\nto Python\u2019s native concurrent futures interface. Executors feature the\nsubmit() function for launching apps (detailed below), but currently do\nnot support map() or shutdown(). Tasks are much like futures.\nThey feature the cancel(), cancelled(), running(), done(),\nresult(), and exception() functions from the standard.\nThe main Executor class can subprocess serial applications in place,\nwhile the MPIExecutor is used for running MPI applications.\nTypically, users choose and parameterize their Executor objects in their\ncalling scripts, where each executable generator or simulation application is\nregistered to it. Once in the user-side worker code (sim/gen func), the Executor\ncan be retrieved without any need to specify the type.\nOnce the Executor is retrieved, tasks can be submitted by specifying the\napp_name from registration in the calling script alongside other optional\nparameters described in the API.\n\nBasic usage\uf0c1\nIn calling script\nTo set up an MPI executor, register an MPI application, and add\nto the ensemble object.\nfrom libensemble import Ensemble\nfrom libensemble.executors import MPIExecutor\n\nexctr = MPIExecutor()\nexctr.register_app(full_path=\"/path/to/my/exe\", app_name=\"sim1\")\nensemble = Ensemble(executor=exctr)\n\nIf using the libE() call, the Executor in the calling script does not\nhave to be passed to the libE() function. It is transferred via the\nExecutor.executor class variable.\nIn user simulation function:\ndef sim_func(H, persis_info, sim_specs, libE_info):\n\n input_param = str(int(H[\"x\"][0][0]))\n exctr = libE_info[\"executor\"]\n\n task = exctr.submit(\n app_name=\"sim1\",\n num_procs=8,\n app_args=input_param,\n stdout=\"out.txt\",\n stderr=\"err.txt\",\n )\n\n # Wait for task to complete\n task.wait()\n\nExample use-cases:\n\nElectrostatic Forces example: Launches the forces.x MPI application.\nForces example with GPUs: Auto-assigns GPUs via executor.\n\nSee the Executor or MPIExecutor interface\nfor the complete API.\nSee Running on HPC Systems for illustrations\nof how common options such as libE_specs[\"dedicated_mode\"] affect the\nrun configuration on clusters and supercomputers.\n\nAdvanced Features\uf0c1\nExample of polling output and killing application:\nIn simulation function (sim_f).", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4099, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "7d2ddc84-11e5-4ce3-9e7c-df49cd17fcf4": {"__data__": {"id_": "7d2ddc84-11e5-4ce3-9e7c-df49cd17fcf4", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/executor/overview.html", "file_name": "overview.html", "file_type": "text/html", "file_size": 28029, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "40f388c4-6306-4da0-9245-1ae99f4ede53", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/executor/overview.html", "file_name": "overview.html", "file_type": "text/html", "file_size": 28029, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "21a251bcbf4047fd12e36180cf24ba93165247ad81bc4b73f645bd683e20d3d5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a1deb5dd-79e4-42f8-8a93-8104130862f6", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/executor/overview.html", "file_name": "overview.html", "file_type": "text/html", "file_size": 28029, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "b957f3bd2af1e63e7c63fe44780e54f0b121ad86f6927f3b8211b16575126409", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "It is transferred via the\nExecutor.executor class variable.\nIn user simulation function:\ndef sim_func(H, persis_info, sim_specs, libE_info):\n\n input_param = str(int(H[\"x\"][0][0]))\n exctr = libE_info[\"executor\"]\n\n task = exctr.submit(\n app_name=\"sim1\",\n num_procs=8,\n app_args=input_param,\n stdout=\"out.txt\",\n stderr=\"err.txt\",\n )\n\n # Wait for task to complete\n task.wait()\n\nExample use-cases:\n\nElectrostatic Forces example: Launches the forces.x MPI application.\nForces example with GPUs: Auto-assigns GPUs via executor.\n\nSee the Executor or MPIExecutor interface\nfor the complete API.\nSee Running on HPC Systems for illustrations\nof how common options such as libE_specs[\"dedicated_mode\"] affect the\nrun configuration on clusters and supercomputers.\n\nAdvanced Features\uf0c1\nExample of polling output and killing application:\nIn simulation function (sim_f).\nimport time\n\ndef sim_func(H, persis_info, sim_specs, libE_info):\n input_param = str(int(H[\"x\"][0][0]))\n exctr = libE_info[\"executor\"]\n\n task = exctr.submit(\n app_name=\"sim1\",\n num_procs=8,\n app_args=input_param,\n stdout=\"out.txt\",\n stderr=\"err.txt\",\n )\n\n timeout_sec = 600\n poll_delay_sec = 1\n\n while not task.finished:\n # Has manager sent a finish signal\n if exctr.manager_kill_received():\n task.kill()\n my_cleanup()\n\n # Check output file for error and kill task\n elif task.stdout_exists():\n if \"Error\" in task.read_stdout():\n task.kill()\n\n elif task.runtime > timeout_sec:\n task.kill() # Timeout\n\n else:\n time.sleep(poll_delay_sec)\n task.poll()\n\n print(task.state) # state may be finished/failed/killed\n\nUsers who wish to poll only for manager kill signals and timeouts don\u2019t necessarily\nneed to construct a polling loop like above, but can instead use the Executor\nbuilt-in polling_loop() method. An alternative to the above simulation function\nmay resemble:\ndef sim_func(H, persis_info, sim_specs, libE_info):\n input_param = str(int(H[\"x\"][0][0]))\n exctr = libE_info[\"executor\"]\n\n task = exctr.submit(\n app_name=\"sim1\",\n num_procs=8,\n app_args=input_param,\n stdout=\"out.txt\",\n stderr=\"err.txt\",\n )\n\n timeout_sec = 600\n poll_delay_sec = 1\n\n exctr.polling_loop(task, timeout=timeout_sec, delay=poll_delay_sec)\n\n print(task.state) # state may be finished/failed/killed\n\nThe MPIExecutor autodetects system criteria such as the appropriate MPI launcher\nand mechanisms to poll and kill tasks. It also has access to the resource manager,\nwhich partitions resources among workers, ensuring that runs utilize different\nresources (e.g., nodes). Furthermore, the MPIExecutor offers resilience via the\nfeature of re-launching tasks that fail to start because of system factors.\nVarious back-end mechanisms may be used by the Executor to best interact\nwith each system, including proxy launchers or task management systems.\nCurrently, these Executors launch at the application level within\nan existing resource pool. However, submissions to a batch scheduler may be\nsupported in future Executors.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 3246, "end_char_idx": 6314, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "9bda812c-552b-4723-b892-0759b90a7a75": {"__data__": {"id_": "9bda812c-552b-4723-b892-0759b90a7a75", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/allocator.html", "file_name": "allocator.html", "file_type": "text/html", "file_size": 60584, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9faccdf2-047d-43cd-94ee-3e8170b5525f", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/allocator.html", "file_name": "allocator.html", "file_type": "text/html", "file_size": 60584, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "f74d7482d6936f68152b3a2a715d706877fb03bec1990aea255e614d467a1b60", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e1d79949-c453-4d60-b898-e8f66c9101e3", "node_type": "1", "metadata": {}, "hash": "c1f30e08b3edab345b45814c2ac3032fa59dd56dbe7f5666ba1f73abd57bb790", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Allocation Functions \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nOutput Management\nHistory Array\nResource Manager\nWriting User Functions\nGenerator Functions\nSimulator Functions\nAllocation Functions\nAllocSupport\n\nUser Function API\ncalc_status\nWork Dictionary\nWorker Array\n\nExecutors\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nWriting User Functions\nAllocation Functions\n\n View page source\n\nAllocation Functions\uf0c1\nAlthough the included allocation functions are sufficient for\nmost users, those who want to fine-tune how data or resources are allocated to their generator or simulator can write their own.\nThe alloc_f is unique since it is called by libEnsemble\u2019s manager instead of a worker.\nFor allocation functions, as with the other user functions, the level of complexity can\nvary widely. We encourage experimenting with:\n\nPrioritization of simulations\nSending results immediately or in batch\nAssigning varying resources to evaluations\n\nExample\n\nlibensemble.alloc_funcs.fast_alloc.give_sim_work_first\uf0c1\nfrom libensemble.tools.alloc_support import AllocSupport, InsufficientFreeResources\n\ndef give_sim_work_first(W, H, sim_specs, gen_specs, alloc_specs, persis_info, libE_info):\n \"\"\"\n This allocation function gives (in order) entries in ``H`` to idle workers\n to evaluate in the simulation function. The fields in ``sim_specs[\"in\"]``\n are given. If all entries in `H` have been given a be evaluated, a worker\n is told to call the generator function, provided this wouldn't result in\n more than ``alloc_specs[\"user\"][\"num_active_gen\"]`` active generators.\n\n This fast_alloc variation of give_sim_work_first is useful for cases that\n simply iterate through H, issuing evaluations in order and, in particular,\n is likely to be faster if there will be many short simulation evaluations,\n given that this function contains fewer column length operations.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2511, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "e1d79949-c453-4d60-b898-e8f66c9101e3": {"__data__": {"id_": "e1d79949-c453-4d60-b898-e8f66c9101e3", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/allocator.html", "file_name": "allocator.html", "file_type": "text/html", "file_size": 60584, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9faccdf2-047d-43cd-94ee-3e8170b5525f", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/allocator.html", "file_name": "allocator.html", "file_type": "text/html", "file_size": 60584, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "f74d7482d6936f68152b3a2a715d706877fb03bec1990aea255e614d467a1b60", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9bda812c-552b-4723-b892-0759b90a7a75", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/allocator.html", "file_name": "allocator.html", "file_type": "text/html", "file_size": 60584, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "d819ed368b0f3f7d15e99753be25d5fa7929f7e6d9bef4176ad4ea6ffabbac8a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6dc9be5a-5415-48ea-b0b8-fe64f812b310", "node_type": "1", "metadata": {}, "hash": "c99dab609070efc1208ef73ebdf954af322afa73e5c6a31a4e8826128bb8f92a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "The fields in ``sim_specs[\"in\"]``\n are given. If all entries in `H` have been given a be evaluated, a worker\n is told to call the generator function, provided this wouldn't result in\n more than ``alloc_specs[\"user\"][\"num_active_gen\"]`` active generators.\n\n This fast_alloc variation of give_sim_work_first is useful for cases that\n simply iterate through H, issuing evaluations in order and, in particular,\n is likely to be faster if there will be many short simulation evaluations,\n given that this function contains fewer column length operations.\n\n tags: alloc, simple, fast\n\n .. seealso::\n `test_fast_alloc.py <https://github.com/Libensemble/libensemble/blob/develop/libensemble/tests/functionality_tests/test_fast_alloc.py>`_ # noqa\n \"\"\"\n\n if libE_info[\"sim_max_given\"] or not libE_info[\"any_idle_workers\"]:\n return {}, persis_info\n\n user = alloc_specs.get(\"user\", {})\n manage_resources = libE_info[\"use_resource_sets\"]\n\n support = AllocSupport(W, manage_resources, persis_info, libE_info)\n\n gen_count = support.count_gens()\n Work = {}\n gen_in = gen_specs.get(\"in\", [])\n\n # Give sim work if possible\n for wid in support.avail_worker_ids(gen_workers=False):\n persis_info = support.skip_canceled_points(H, persis_info)\n if persis_info[\"next_to_give\"] < len(H):\n try:\n Work[wid] = support.sim_work(wid, H, sim_specs[\"in\"], [persis_info[\"next_to_give\"]], [])\n except InsufficientFreeResources:\n break\n persis_info[\"next_to_give\"] += 1\n\n # Give gen work if possible\n if persis_info[\"next_to_give\"] >= len(H):\n for wid in support.avail_worker_ids(gen_workers=True):\n if wid not in Work and gen_count < user.get(\"num_active_gens\", gen_count + 1):\n return_rows = range(len(H)) if gen_in else []\n try:\n Work[wid] = support.gen_work(wid, gen_in, return_rows, persis_info.get(wid))\n except InsufficientFreeResources:\n break\n gen_count += 1\n persis_info[\"total_gen_calls\"] += 1\n\n return Work, persis_info\n\nMost alloc_f function definitions written by users resemble:\ndef my_allocator(W, H, sim_specs, gen_specs, alloc_specs, persis_info, libE_info):\n\nwhere:\n\nW is an array containing worker state info\nH is the trimmed History array, containing rows from the generator\nlibE_info is a set of statistics to determine the progress of work or exit conditions\n\nMost users first check that it is appropriate to allocate work:\nif libE_info[\"sim_max_given\"] or not libE_info[\"any_idle_workers\"]:\n return {}, persis_info\n\nIf the allocation is to continue, a support class is instantiated and a\nWork dictionary is initialized:\nmanage_resources = \"resource_sets\" in H.dtype.names or libE_info[\"use_resource_sets\"]\nsupport = AllocSupport(W, manage_resources, persis_info, libE_info)\nWork = {}\n\nThis Work dictionary is populated with integer keys wid for each worker and\ndictionary values to give to those workers:\n\nExample Work\n{\n 1: {\n \"H_fields\": [\"x\"],\n \"persis_info\": {\"rand_stream\": RandomState(...) at ..., \"worker_num\": 1},\n \"tag\": 1,\n \"libE_info\": {\"H_rows\": array([368])}\n },\n\n 2: {\n \"H_fields\": [\"x\"],\n \"persis_info\": {\"rand_stream\": RandomState(...) at ..., \"worker_num\": 2},\n \"tag\": 1,\n \"libE_info\": {\"H_rows\": array([369])}\n },\n\n 3: {\n \"H_fields\": [\"x\"],\n \"persis_info\": {\"rand_stream\": RandomState(...) at ..., \"worker_num\": 3},\n \"tag\": 1,\n \"libE_info\": {\"H_rows\": array([370])}\n },\n ...\n\n}\n\nThis Work dictionary instructs each worker to call the sim_f (tag: 1)\nwith data from \"x\" and a given \"H_row\" from the\nHistory array. A worker-specific persis_info is also given.", "mimetype": "text/plain", "start_char_idx": 1962, "end_char_idx": 5426, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "6dc9be5a-5415-48ea-b0b8-fe64f812b310": {"__data__": {"id_": "6dc9be5a-5415-48ea-b0b8-fe64f812b310", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/allocator.html", "file_name": "allocator.html", "file_type": "text/html", "file_size": 60584, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9faccdf2-047d-43cd-94ee-3e8170b5525f", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/allocator.html", "file_name": "allocator.html", "file_type": "text/html", "file_size": 60584, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "f74d7482d6936f68152b3a2a715d706877fb03bec1990aea255e614d467a1b60", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e1d79949-c453-4d60-b898-e8f66c9101e3", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/allocator.html", "file_name": "allocator.html", "file_type": "text/html", "file_size": 60584, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "7d8e5df0825e381d00f0a1eed3b5f73b3c6fe3d9726d1822203d935c4ffe5f44", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b134b220-ae7b-4e1b-ba53-c883f050369a", "node_type": "1", "metadata": {}, "hash": "60c285f4c0b7da4d4bf4af2acaa86554848e3c5cbd5208240658274178938cd5", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "A worker-specific persis_info is also given.\nConstructing these arrays and determining which workers are available\nfor receiving data is simplified by the AllocSupport class\navailable within the libensemble.tools.alloc_support module:\n\nAllocSupport\n\nclass libensemble.tools.alloc_support.AllocSupport(W, manage_resources=False, persis_info={}, libE_info={}, user_resources=None, user_scheduler=None)\uf0c1\nA helper class to assist with writing allocation functions.\nThis class contains methods for common operations like populating work\nunits, determining which workers are available, evaluating what values\nneed to be distributed to workers, and others.\nNote that since the alloc_f is called periodically by the Manager, this\nclass instance (if used) will be recreated/destroyed on each loop.\n\n__init__(W, manage_resources=False, persis_info={}, libE_info={}, user_resources=None, user_scheduler=None)\uf0c1\nInstantiate a new AllocSupport instance\nW is passed in for convenience on init; it is referenced by the various methods,\nbut never modified.\nBy default, an AllocSupport instance uses any initiated libEnsemble resource\nmodule and the built-in libEnsemble scheduler.\n\nParameters:\n\nW \u2013 A Worker array\nmanage_resources \u2013 (Optional) Boolean for if to assign resource sets when creating work units.\npersis_info \u2013 (Optional) A dictionary of persistent information..\nscheduler_opts \u2013 (Optional) A dictionary of options to pass to the resource scheduler.\nuser_resources \u2013 (Optional) A user supplied resources object.\nuser_scheduler \u2013 (Optional) A user supplied user_scheduler object.\n\nassign_resources(rsets_req, use_gpus=None, user_params=[])\uf0c1\nSchedule resource sets to a work record if possible.\nFor default scheduler, if more than one group (node) is required,\nwill try to find even split, otherwise allocates whole nodes.\nRaises InsufficientFreeResources if the required resources are not\ncurrently available, or InsufficientResourcesError if the required\nresources do not exist.\n\nParameters:\n\nrsets_req \u2013 Int. Number of resource sets to request.\nuse_gpus \u2013 Bool. Whether to use GPU resource sets.\nuser_params \u2013 List of Integers. User parameters num_procs, num_gpus.\n\nReturns:\nList of Integers. Resource set indices assigned.\n\navail_worker_ids(persistent=None, active_recv=False, zero_resource_workers=None, gen_workers=None)\uf0c1\nReturns available workers as a list of IDs, filtered by the given options.\n\nParameters:\n\npersistent \u2013 (Optional) Int. Only return workers with given persis_state (1=sim, 2=gen).\nactive_recv \u2013 (Optional) Boolean. Only return workers with given active_recv state.\nzero_resource_workers \u2013 (Optional) Boolean. Only return workers that require no resources.\ngen_workers \u2013 (Optional) Boolean. If True, return gen-only workers. If False, return all other workers.\n\nReturns:\nList of worker IDs.\n\nIf there are no zero resource workers defined, then the zero_resource_workers argument will\nbe ignored.\n\ncount_gens()\uf0c1\nReturns the number of active generators.\n\ntest_any_gen()\uf0c1\nReturns True if a generator worker is active.\n\ncount_persis_gens()\uf0c1\nReturn the number of active persistent generators.\n\nsim_work(wid, H, H_fields, H_rows, persis_info, **libE_info)\uf0c1\nAdd sim work record to given Work dictionary.\n\nIncludes evaluation of required resources if the worker is not in a\npersistent state.\n\nParameters:\n\nwid \u2013 Int. Worker ID.\nH \u2013 History array. For parsing out requested resource sets.\nH_fields \u2013 Which fields from H to send.\nH_rows \u2013 Which rows of H to send.\npersis_info \u2013 Worker specific persis_info dictionary.\n\nReturns:\na Work entry.\n\nAdditional passed parameters are inserted into libE_info in the resulting work record.\nIf rset_team is passed as an additional parameter, it will be honored, assuming that\nany resource checking has already been done.\n\ngen_work(wid, H_fields, H_rows, persis_info, **libE_info)\uf0c1\nAdd gen work record to given Work dictionary.\n\nIncludes evaluation of required resources if the worker is not in a\npersistent state.\n\nParameters:\n\nWork \u2013 Work dictionary.\nwid \u2013 Worker ID.\nH_fields \u2013 Which fields from H to send.\nH_rows \u2013 Which rows of H to send.\npersis_info \u2013 Worker specific persis_info dictionary.\n\nReturns:\nA Work entry.\n\nAdditional passed parameters are inserted into libE_info in the resulting work record.\nIf rset_team is passed as an additional parameter, it will be honored, and assume that\nany resource checking has already been done.", "mimetype": "text/plain", "start_char_idx": 5382, "end_char_idx": 9768, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "b134b220-ae7b-4e1b-ba53-c883f050369a": {"__data__": {"id_": "b134b220-ae7b-4e1b-ba53-c883f050369a", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/allocator.html", "file_name": "allocator.html", "file_type": "text/html", "file_size": 60584, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9faccdf2-047d-43cd-94ee-3e8170b5525f", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/allocator.html", "file_name": "allocator.html", "file_type": "text/html", "file_size": 60584, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "f74d7482d6936f68152b3a2a715d706877fb03bec1990aea255e614d467a1b60", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6dc9be5a-5415-48ea-b0b8-fe64f812b310", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/allocator.html", "file_name": "allocator.html", "file_type": "text/html", "file_size": 60584, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "3f303d664a99bf661bd680dd318da8a8316d2126e7f31475968a9a83771a6495", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c6e3f609-e36e-47db-a3b0-53025bfcda74", "node_type": "1", "metadata": {}, "hash": "64b1347ed8008da9e6fc5d3c741b57fdc02fd385cdf66de710978cd3729e1c69", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "persis_info \u2013 Worker specific persis_info dictionary.\n\nReturns:\na Work entry.\n\nAdditional passed parameters are inserted into libE_info in the resulting work record.\nIf rset_team is passed as an additional parameter, it will be honored, assuming that\nany resource checking has already been done.\n\ngen_work(wid, H_fields, H_rows, persis_info, **libE_info)\uf0c1\nAdd gen work record to given Work dictionary.\n\nIncludes evaluation of required resources if the worker is not in a\npersistent state.\n\nParameters:\n\nWork \u2013 Work dictionary.\nwid \u2013 Worker ID.\nH_fields \u2013 Which fields from H to send.\nH_rows \u2013 Which rows of H to send.\npersis_info \u2013 Worker specific persis_info dictionary.\n\nReturns:\nA Work entry.\n\nAdditional passed parameters are inserted into libE_info in the resulting work record.\nIf rset_team is passed as an additional parameter, it will be honored, and assume that\nany resource checking has already been done. For example, passing rset_team=[], would\nensure that no resources are assigned.\n\nall_sim_started(H, pt_filter=None, low_bound=None)\uf0c1\nReturns True if all expected points have started their sim.\nExcludes cancelled points.\n\nParameters:\n\npt_filter \u2013 (Optional) Boolean array filtering expected returned points in H.\nlow_bound \u2013 (Optional) Lower bound for testing all returned.\n\nReturns:\nTrue if all expected points have started their sim.\n\nall_sim_ended(H, pt_filter=None, low_bound=None)\uf0c1\nReturns True if all expected points have had their sim_end.\nExcludes cancelled points that were not already sim_started.\n\nParameters:\n\npt_filter \u2013 (Optional) Boolean array filtering expected returned points in H.\nlow_bound \u2013 (Optional) Lower bound for testing all returned.\n\nReturns:\nTrue if all expected points have had their sim_end.\n\nall_gen_informed(H, pt_filter=None, low_bound=None)\uf0c1\nReturns True if gen has been informed of all expected points.\nExcludes cancelled points that were not already given out.\n\nParameters:\n\npt_filter \u2013 (Optional) Boolean array filtering expected sim_end points in H.\nlow_bound \u2013 (Optional) Lower bound for testing all returned.\n\nReturns:\nTrue if gen have been informed of all expected points.\n\npoints_by_priority(H, points_avail, batch=False)\uf0c1\nReturns indices of points to give by priority.\n\nParameters:\n\npoints_avail \u2013 Indices of points that are available to give.\nbatch \u2013 (Optional) Boolean. Should batches of points with the same priority be given simultaneously.\n\nReturns:\nAn array of point indices to give.\n\nskip_canceled_points(H, persis_info)\uf0c1\nIncrements the \u201cnext_to_give\u201d field in persis_info to skip any cancelled points\n\nThe Work dictionary is returned to the manager alongside persis_info. If 1\nis returned as the third value, this instructs the ensemble to stop.\n\nNote\nAn error occurs when the alloc_f returns nothing while\nall workers are idle\n\nInformation from the manager describing the progress of the current libEnsemble\nroutine can be found in libE_info:\nlibE_info = {\"exit_criteria\": dict, # Criteria for ending routine\n \"elapsed_time\": float, # Time elapsed since start of routine\n \"manager_kill_canceled_sims\": bool, # True if manager is to send kills to cancelled simulations\n \"sim_started_count\": int, # Total number of points given for simulation function evaluation\n \"sim_ended_count\": int, # Total number of points returned from simulation function evaluations\n \"gen_informed_count\": int, # Total number of evaluated points given back to a generator function\n \"sim_max_given\": bool, # True if `sim_max` simulations have been given out to workers\n \"use_resource_sets\": bool} # True if num_resource_sets has been explicitly set.\n\nMost often, the allocation function will just return once sim_max_given is True,\nbut the user could choose to do something different,\nsuch as cancel points or keep returning completed points to the generator.\nGenerators that construct models based\non all evaluated points, for example, may need simulation work units at the end\nof an ensemble to be returned to the generator anyway.\nAlternatively, users can use elapsed_time to track runtime inside their\nallocation function and detect impending timeouts, then pack up cleanup work requests,\nor mark points for cancellation.\nThe remaining values above are useful for efficient filtering of H values\n(e.g., sim_ended_count saves filtering by an entire column of H.)\nDescriptions of included allocation functions can be found here.\nThe default allocation function is\ngive_sim_work_first.", "mimetype": "text/plain", "start_char_idx": 8853, "end_char_idx": 13280, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "c6e3f609-e36e-47db-a3b0-53025bfcda74": {"__data__": {"id_": "c6e3f609-e36e-47db-a3b0-53025bfcda74", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/allocator.html", "file_name": "allocator.html", "file_type": "text/html", "file_size": 60584, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9faccdf2-047d-43cd-94ee-3e8170b5525f", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/allocator.html", "file_name": "allocator.html", "file_type": "text/html", "file_size": 60584, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "f74d7482d6936f68152b3a2a715d706877fb03bec1990aea255e614d467a1b60", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b134b220-ae7b-4e1b-ba53-c883f050369a", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/allocator.html", "file_name": "allocator.html", "file_type": "text/html", "file_size": 60584, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "9324e64bf6e163693632079afde3bbc4505f88a738c00a3a06e53a428c68c679", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Most often, the allocation function will just return once sim_max_given is True,\nbut the user could choose to do something different,\nsuch as cancel points or keep returning completed points to the generator.\nGenerators that construct models based\non all evaluated points, for example, may need simulation work units at the end\nof an ensemble to be returned to the generator anyway.\nAlternatively, users can use elapsed_time to track runtime inside their\nallocation function and detect impending timeouts, then pack up cleanup work requests,\nor mark points for cancellation.\nThe remaining values above are useful for efficient filtering of H values\n(e.g., sim_ended_count saves filtering by an entire column of H.)\nDescriptions of included allocation functions can be found here.\nThe default allocation function is\ngive_sim_work_first. During its worker ID loop, it checks if there\u2019s unallocated\nwork and assigns simulations for that work. Otherwise, it initializes\ngenerators for up to \"num_active_gens\" instances. Other settings like\nbatch_mode are also supported. See\nhere for more information about give_sim_work_first.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 12445, "end_char_idx": 13695, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "075b224a-faeb-4850-90b9-38a9a0bc0c03": {"__data__": {"id_": "075b224a-faeb-4850-90b9-38a9a0bc0c03", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/calc_status.html", "file_name": "calc_status.html", "file_type": "text/html", "file_size": 27747, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "6cc15b8a-2434-44ae-b2f8-11256476f0dd", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/calc_status.html", "file_name": "calc_status.html", "file_type": "text/html", "file_size": 27747, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "75f2aec407da96f9df791295afb5989789e329cec464788478f3bd7991de8b19", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ae3935c7-258a-4247-a9bd-f91f95fc4c5d", "node_type": "1", "metadata": {}, "hash": "e45de2829abd76dd5f6f1e7aa79960a4f763d87f350fa1843f20edc9f6731f8f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "calc_status \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nOutput Management\nHistory Array\nResource Manager\nWriting User Functions\nGenerator Functions\nSimulator Functions\nAllocation Functions\nUser Function API\ncalc_status\nWork Dictionary\nWorker Array\n\nExecutors\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nWriting User Functions\ncalc_status\n\n View page source\n\ncalc_status\uf0c1\nWorker 1: Calc 0: gen Time: 0.00 Start: 2019-11-19 18:53:43 End: 2019-11-19 18:53:43 Status: Not set\nWorker 1: Calc 1: sim Time: 4.41 Start: 2019-11-19 18:53:43 End: 2019-11-19 18:53:48 Status: Worker killed\nWorker 2: Calc 0: sim Time: 5.42 Start: 2019-11-19 18:53:43 End: 2019-11-19 18:53:49 Status: Completed\nWorker 1: Calc 2: sim Time: 2.41 Start: 2019-11-19 18:53:48 End: 2019-11-19 18:53:50 Status: Worker killed\nWorker 2: Calc 1: sim Time: 2.41 Start: 2019-11-19 18:53:49 End: 2019-11-19 18:53:51 Status: Worker killed\nWorker 1: Calc 3: sim Time: 4.41 Start: 2019-11-19 18:53:50 End: 2019-11-19 18:53:55 Status: Completed\nWorker 2: Calc 2: sim Time: 4.41 Start: 2019-11-19 18:53:51 End: 2019-11-19 18:53:56 Status: Completed\n\ncalc_status is similar to an exit code, and is either an integer attribute with a corresponding description, or a\nuser-specified string. They are the third optional return value from a user function, and are printed to libE_stats.txt.\nBuilt-in codes are available in the libensemble.message_numbers module, but\nusers are also free to return any custom string.\n\ncalc_status with Executor\n 1from libensemble.message_numbers import WORKER_DONE, WORKER_KILL, TASK_FAILED\n 2\n 3task = exctr.submit(calc_type=\"sim\", num_procs=cores, wait_on_start=True)\n 4calc_status = UNSET_TAG\n 5poll_interval = 1 # secs\n 6while not task.finished:\n 7 if task.runtime > time_limit:\n 8 task.kill() # Timeout\n 9 else:\n10 time.sleep(poll_interval)\n11 task.poll()\n12\n13if task.finished:\n14 if task.state == \"FINISHED\":\n15 print(\"Task {} completed\".format(task.name))\n16 calc_status = WORKER_DONE\n17 elif task.state == \"FAILED\":\n18 print(\"Warning: Task {} failed: Error code {}\".format(task.name, task.errcode))\n19 calc_status = TASK_FAILED\n20 elif task.state == \"USER_KILLED\":\n21 print(\"Warning: Task {} has been killed\".format(task.name))\n22 calc_status = WORKER_KILL\n23 else:\n24 print(\"Warning: Task {} in unknown state {}.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2962, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ae3935c7-258a-4247-a9bd-f91f95fc4c5d": {"__data__": {"id_": "ae3935c7-258a-4247-a9bd-f91f95fc4c5d", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/calc_status.html", "file_name": "calc_status.html", "file_type": "text/html", "file_size": 27747, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "6cc15b8a-2434-44ae-b2f8-11256476f0dd", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/calc_status.html", "file_name": "calc_status.html", "file_type": "text/html", "file_size": 27747, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "75f2aec407da96f9df791295afb5989789e329cec464788478f3bd7991de8b19", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "075b224a-faeb-4850-90b9-38a9a0bc0c03", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/calc_status.html", "file_name": "calc_status.html", "file_type": "text/html", "file_size": 27747, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "a09dc7ef16ee91938213ef15714694afee86c3cfe3bc8d2284977cddf82d9e92", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Error code {}\".format(task.name, task.state, task.errcode))\n25\n26outspecs = sim_specs[\"out\"]\n27output = np.zeros(1, dtype=outspecs)\n28output[\"energy\"][0] = final_energy\n29\n30return output, persis_info, calc_status\n\nCustom calc_status\n 1from libensemble.message_numbers import WORKER_DONE, TASK_FAILED\n 2\n 3task = exctr.submit(calc_type=\"sim\", num_procs=cores, wait_on_start=True)\n 4\n 5task.wait(timeout=60)\n 6\n 7file_output = read_task_output(task)\n 8if task.errcode == 0:\n 9 if \"fail\" in file_output:\n10 calc_status = \"Task failed successfully?\"\n11 else:\n12 calc_status = WORKER_DONE\n13else:\n14 calc_status = TASK_FAILED\n15\n16outspecs = sim_specs[\"out\"]\n17output = np.zeros(1, dtype=outspecs)\n18output[\"energy\"][0] = final_energy\n19\n20return output, persis_info, calc_status\n\nAvailable values\nFINISHED_PERSISTENT_SIM_TAG = 11 # tells manager sim_f done persistent mode\nFINISHED_PERSISTENT_GEN_TAG = 12 # tells manager gen_f done persistent mode\nMAN_SIGNAL_FINISH = 20 # Kill tasks and shutdown worker\nMAN_SIGNAL_KILL = 21 # Kill running task - but don't stop worker\nWORKER_KILL = 30 # Worker kills not covered by a more specific case\nWORKER_KILL_ON_ERR = 31 # Worker killed due to an error in results\nWORKER_KILL_ON_TIMEOUT = 32 # Worker killed on timeout\nTASK_FAILED = 33 # Calc had tasks that failed\nTASK_FAILED_TO_START = 34 # Calc had tasks that failed to start\nWORKER_DONE = 35 # Calculation was successful\n\nCorresponding messages\ncalc_status_strings = {\n UNSET_TAG: \"Not set\",\n FINISHED_PERSISTENT_SIM_TAG: \"Persis sim finished\",\n FINISHED_PERSISTENT_GEN_TAG: \"Persis gen finished\",\n MAN_SIGNAL_FINISH: \"Manager killed on finish\",\n MAN_SIGNAL_KILL: \"Manager killed task\",\n WORKER_KILL_ON_ERR: \"Worker killed task on Error\",\n WORKER_KILL_ON_TIMEOUT: \"Worker killed task on Timeout\",\n WORKER_KILL: \"Worker killed\",\n TASK_FAILED: \"Task Failed during run\",\n TASK_FAILED_TO_START: \"Task Failed to start\",\n WORKER_DONE: \"Completed\",\n CALC_EXCEPTION: \"Exception occurred\",\n None: \"Unknown Status\",\n}\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 2963, "end_char_idx": 5089, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "9edca1a7-dd65-4f0b-be37-29df5cc7b46b": {"__data__": {"id_": "9edca1a7-dd65-4f0b-be37-29df5cc7b46b", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/function_guide_index.html", "file_name": "function_guide_index.html", "file_type": "text/html", "file_size": 14134, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9aefe921-ff0a-4a54-a3e4-8fded0fc5e0a", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/function_guide_index.html", "file_name": "function_guide_index.html", "file_type": "text/html", "file_size": 14134, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "4e65088c4ba11368d9ccbb0ed64c87718e3affb03834079f7a15b3fa11bbb988", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Writing User Functions \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nOutput Management\nHistory Array\nResource Manager\nWriting User Functions\nGenerator Functions\nSimulator Functions\nAllocation Functions\nUser Function API\ncalc_status\nWork Dictionary\nWorker Array\n\nExecutors\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nWriting User Functions\n\n View page source\n\nWriting User Functions\uf0c1\nUser functions typically require only some familiarity with NumPy, but if they conform to\nthe user function APIs, they can incorporate methods from machine-learning,\nmathematics, resource management, or other libraries/applications.\nThese guides describe common development patterns and optional components:\n\nWriting User Functions\n\nGenerator Functions\nWriting a Generator\nPersistent Generators\nActive receive mode\nCancelling Simulations\nModification of existing points\nGenerator initiated shutdown\nExamples\n\nSimulator Functions\nWriting a Simulator\nExecutor\nPersistent Simulators\n\nAllocation Functions\nAllocSupport\n\nUser Function API\nsim_f API\ngen_f API\nalloc_f API\n\nUseful Data Structures\n\ncalc_status\nWork Dictionary\nWorker Array\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1900, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "16f27b48-517a-43b1-9ecc-d0d245b9c4e4": {"__data__": {"id_": "16f27b48-517a-43b1-9ecc-d0d245b9c4e4", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/generator.html", "file_name": "generator.html", "file_type": "text/html", "file_size": 40933, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1a9fadcf-88a8-4b08-af74-4b7ee784977e", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/generator.html", "file_name": "generator.html", "file_type": "text/html", "file_size": 40933, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "26795c178bdad274bd3a15623f089dc248331d35f22e8db495df70d5f1c8c65f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5da7433a-e00a-4d5e-9d6a-362e6dc7763b", "node_type": "1", "metadata": {}, "hash": "3edd767ee0d71aa5cf2ea3155f864f6930e1de5ad18240af6988342e612f6064", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Generator Functions \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nOutput Management\nHistory Array\nResource Manager\nWriting User Functions\nGenerator Functions\nWriting a Generator\nPersistent Generators\nActive receive mode\nCancelling Simulations\nModification of existing points\nGenerator initiated shutdown\nExamples\n\nSimulator Functions\nAllocation Functions\nUser Function API\ncalc_status\nWork Dictionary\nWorker Array\n\nExecutors\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nWriting User Functions\nGenerator Functions\n\n View page source\n\nGenerator Functions\uf0c1\nGenerator and Simulator functions have relatively similar interfaces.\n\nWriting a Generator\uf0c1\n\nNon-decorated\ndef my_generator(Input, persis_info, gen_specs, libE_info):\n batch_size = gen_specs[\"user\"][\"batch_size\"]\n\n Output = np.zeros(batch_size, gen_specs[\"out\"])\n # ...\n Output[\"x\"], persis_info = generate_next_simulation_inputs(Input[\"f\"], persis_info)\n\n return Output, persis_info\n\nDecorated\nfrom libensemble.specs import input_fields, output_data\n\n@input_fields([\"f\"])\n@output_data([(\"x\", float)])\ndef my_generator(Input, persis_info, gen_specs, libE_info):\n batch_size = gen_specs[\"user\"][\"batch_size\"]\n\n Output = np.zeros(batch_size, gen_specs[\"out\"])\n # ...\n Output[\"x\"], persis_info = generate_next_simulation_inputs(Input[\"f\"], persis_info)\n\n return Output, persis_info\n\nMost gen_f function definitions written by users resemble:\ndef my_generator(Input, persis_info, gen_specs, libE_info):\n\nwhere:\n\nInput is a selection of the History array, a NumPy structured array.\npersis_info is a dictionary containing state information.\ngen_specs is a dictionary of generator parameters.\nlibE_info is a dictionary containing miscellaneous entries.\n\nValid generator functions can accept a subset of the above parameters. So a very simple generator can start:\ndef my_generator(Input):\n\nIf gen_specs was initially defined:\n\nNon-decorated function\ngen_specs = GenSpecs(\n gen_f=my_generator,\n inputs=[\"f\"],\n outputs=[\"x\", float, (1,)],\n user={\"batch_size\": 128},\n)\n\nDecorated function\ngen_specs = GenSpecs(\n gen_f=my_generator,\n user={\"batch_size\": 128},\n)\n\nThen user parameters and a local array of outputs may be obtained/initialized like:\nbatch_size = gen_specs[\"user\"][\"batch_size\"]\nOutput = np.zeros(batch_size, dtype=gen_specs[\"out\"])\n\nThis array should be populated by whatever values are generated within\nthe function:\nOutput[\"x\"], persis_info = generate_next_simulation_inputs(Input[\"f\"], persis_info)\n\nThen return the array and persis_info to libEnsemble:\nreturn Output, persis_info\n\nBetween the Output definition and the return, any computation can be performed.\nUsers can try an executor to submit applications to parallel\nresources, or plug in components from other libraries to serve their needs.\n\nNote\nState gen_f information like checkpointing should be\nappended to persis_info.\n\nPersistent Generators\uf0c1\nWhile non-persistent generators return after completing their calculation, persistent\ngenerators do the following in a loop:\n\nReceive simulation results and metadata; exit if metadata instructs.\nPerform analysis.\nSend subsequent simulation parameters.\n\nPersistent generators don\u2019t need to be re-initialized on each call, but are typically\nmore complicated. The persistent APOSMM\noptimization generator function included with libEnsemble maintains\nlocal optimization subprocesses based on results from complete simulations.\nUse GenSpecs.persis_in to specify fields to send back to the generator throughout the run.\nGenSpecs.inputs only describes the input fields when the function is first called.\nFunctions for a persistent generator to communicate directly with the manager\nare available in the libensemble.tools.persistent_support class.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4363, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "5da7433a-e00a-4d5e-9d6a-362e6dc7763b": {"__data__": {"id_": "5da7433a-e00a-4d5e-9d6a-362e6dc7763b", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/generator.html", "file_name": "generator.html", "file_type": "text/html", "file_size": 40933, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1a9fadcf-88a8-4b08-af74-4b7ee784977e", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/generator.html", "file_name": "generator.html", "file_type": "text/html", "file_size": 40933, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "26795c178bdad274bd3a15623f089dc248331d35f22e8db495df70d5f1c8c65f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "16f27b48-517a-43b1-9ecc-d0d245b9c4e4", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/generator.html", "file_name": "generator.html", "file_type": "text/html", "file_size": 40933, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "e157a5b71e6917b9598ed8f7b944a94facd9ec766604a0dd1a8d2bf8786610bc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6ae6003a-9a14-40d6-b516-f695cf62d2ef", "node_type": "1", "metadata": {}, "hash": "79f12da16f8e7bd0f2a51cef82c8ac4a83fd53fe8f85893d2a328e4698268fa5", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Note\nState gen_f information like checkpointing should be\nappended to persis_info.\n\nPersistent Generators\uf0c1\nWhile non-persistent generators return after completing their calculation, persistent\ngenerators do the following in a loop:\n\nReceive simulation results and metadata; exit if metadata instructs.\nPerform analysis.\nSend subsequent simulation parameters.\n\nPersistent generators don\u2019t need to be re-initialized on each call, but are typically\nmore complicated. The persistent APOSMM\noptimization generator function included with libEnsemble maintains\nlocal optimization subprocesses based on results from complete simulations.\nUse GenSpecs.persis_in to specify fields to send back to the generator throughout the run.\nGenSpecs.inputs only describes the input fields when the function is first called.\nFunctions for a persistent generator to communicate directly with the manager\nare available in the libensemble.tools.persistent_support class.\nSending/receiving data is supported by the PersistentSupport class:\nfrom libensemble.tools import PersistentSupport\nfrom libensemble.message_numbers import STOP_TAG, PERSIS_STOP, EVAL_GEN_TAG, FINISHED_PERSISTENT_GEN_TAG\n\nmy_support = PersistentSupport(libE_info, EVAL_GEN_TAG)\n\nImplementing functions from the above class is relatively simple:\n\nsend\n\nlibensemble.tools.persistent_support.PersistentSupport.send(self, output, calc_status=0, keep_state=False)\uf0c1\nSend message from worker to manager.\n\nParameters:\n\noutput (ndarray[tuple[int, ...], dtype[_ScalarType_co]]) \u2013 Output array to be sent to manager.\ncalc_status (int) \u2013 (Optional) Provides a task status.\nkeep_state \u2013 (Optional) If True the manager will not modify its\nrecord of the workers state (usually the manager changes the\nworker\u2019s state to inactive, indicating the worker is ready to receive\nmore work, unless using active receive mode).\n\nReturn type:\nNone\n\nThis function call typically resembles:\nmy_support.send(local_H_out[selected_IDs])\n\nNote that this function has no return.\n\nrecv\n\nlibensemble.tools.persistent_support.PersistentSupport.recv(self, blocking=True)\uf0c1\nReceive message to worker from manager.\n\nParameters:\nblocking (bool) \u2013 (Optional) If True (default), will block until a message is received.\n\nReturns:\nmessage tag, Work dictionary, calc_in array\n\nReturn type:\n(<class \u2018int\u2019>, <class \u2018dict\u2019>, numpy.ndarray[tuple[int, \u2026], numpy.dtype[+_ScalarType_co]])\n\nThis function call typically resembles:\ntag, Work, calc_in = my_support.recv()\n\nif tag in [STOP_TAG, PERSIS_STOP]:\n cleanup()\n break\n\nThe logic following the function call is typically used to break the persistent\ngenerator\u2019s main loop and return.\n\nsend_recv\n\nlibensemble.tools.persistent_support.PersistentSupport.send_recv(self, output, calc_status=0)\uf0c1\nSend message from worker to manager and receive response.\n\nParameters:\n\noutput (ndarray[tuple[int, ...], dtype[_ScalarType_co]]) \u2013 Output array to be sent to manager.\ncalc_status (int) \u2013 (Optional) Provides a task status.\n\nReturns:\nmessage tag, Work dictionary, calc_in array\n\nReturn type:\n(<class \u2018int\u2019>, <class \u2018dict\u2019>, numpy.ndarray[tuple[int, \u2026], numpy.dtype[+_ScalarType_co]])\n\nThis function performs both of the previous functions in a single statement. Its\nusage typically resembles:\ntag, Work, calc_in = my_support.send_recv(local_H_out[selected_IDs])\nif tag in [STOP_TAG, PERSIS_STOP]:\n cleanup()\n break\n\nOnce the persistent generator\u2019s loop has been broken because of\nthe tag from the manager, it should return with an additional tag:\nreturn local_H_out, persis_info, FINISHED_PERSISTENT_GEN_TAG\n\nSee calc_status for more information about\nthe message tags.\n\nActive receive mode\uf0c1\nBy default, a persistent worker is expected to\nreceive and send data in a ping pong fashion. Alternatively,\na worker can be initiated in active receive mode by the allocation\nfunction (see start_only_persistent).\nThe persistent worker can then send and receive from the manager at any time.\nEnsure there are no communication deadlocks in this mode. In manager-worker message exchanges, only the worker-side\nreceive is blocking by default (a non-blocking option is available).\n\nCancelling Simulations\uf0c1\nPreviously submitted simulations can be cancelled by sending a message to the manager:\n\nlibensemble.tools.persistent_support.PersistentSupport.request_cancel_sim_ids(self, sim_ids)\uf0c1\nRequest cancellation of sim_ids.\n\nParameters:\nsim_ids (list[int]) \u2013 A list of sim_ids to cancel.\n\nA message is sent to the manager to mark requested sim_ids as cancel_requested.", "mimetype": "text/plain", "start_char_idx": 3417, "end_char_idx": 7905, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "6ae6003a-9a14-40d6-b516-f695cf62d2ef": {"__data__": {"id_": "6ae6003a-9a14-40d6-b516-f695cf62d2ef", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/generator.html", "file_name": "generator.html", "file_type": "text/html", "file_size": 40933, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1a9fadcf-88a8-4b08-af74-4b7ee784977e", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/generator.html", "file_name": "generator.html", "file_type": "text/html", "file_size": 40933, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "26795c178bdad274bd3a15623f089dc248331d35f22e8db495df70d5f1c8c65f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5da7433a-e00a-4d5e-9d6a-362e6dc7763b", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/generator.html", "file_name": "generator.html", "file_type": "text/html", "file_size": 40933, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "f12740f7bf4a62f5b95140edb3207351448883f0f7d0c353e15aa2283924b1ae", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Active receive mode\uf0c1\nBy default, a persistent worker is expected to\nreceive and send data in a ping pong fashion. Alternatively,\na worker can be initiated in active receive mode by the allocation\nfunction (see start_only_persistent).\nThe persistent worker can then send and receive from the manager at any time.\nEnsure there are no communication deadlocks in this mode. In manager-worker message exchanges, only the worker-side\nreceive is blocking by default (a non-blocking option is available).\n\nCancelling Simulations\uf0c1\nPreviously submitted simulations can be cancelled by sending a message to the manager:\n\nlibensemble.tools.persistent_support.PersistentSupport.request_cancel_sim_ids(self, sim_ids)\uf0c1\nRequest cancellation of sim_ids.\n\nParameters:\nsim_ids (list[int]) \u2013 A list of sim_ids to cancel.\n\nA message is sent to the manager to mark requested sim_ids as cancel_requested.\n\nIf a generated point is cancelled by the generator before sending to another worker for simulation, then it won\u2019t be sent.\nIf that point has already been evaluated by a simulation, the cancel_requested field will remain True.\nIf that point is currently being evaluated, a kill signal will be sent to the corresponding worker; it must be manually processed in the simulation function.\n\nThe Borehole Calibration tutorial gives an example\nof the capability to cancel pending simulations.\n\nModification of existing points\uf0c1\nTo change existing fields of the History array, create a NumPy structured array where the dtype contains\nthe sim_id and the fields to be modified. Send this array with keep_state=True to the manager.\nThis will overwrite the manager\u2019s History array.\nFor example, the cancellation function request_cancel_sim_ids could be replicated by\nthe following (where sim_ids_to_cancel is a list of integers):\n# Send only these fields to existing H rows and libEnsemble will slot in the change.\nH_o = np.zeros(len(sim_ids_to_cancel), dtype=[(\"sim_id\", int), (\"cancel_requested\", bool)])\nH_o[\"sim_id\"] = sim_ids_to_cancel\nH_o[\"cancel_requested\"] = True\nps.send(H_o, keep_state=True)\n\nGenerator initiated shutdown\uf0c1\nIf using a supporting allocation function, the generator can prompt the ensemble to shutdown\nby simply exiting the function (e.g., on a test for a converged value). For example, the\nallocation function start_only_persistent closes down\nthe ensemble as soon as a persistent generator returns. The usual return values should be given.\n\nExamples\uf0c1\nExamples of non-persistent and persistent generator functions\ncan be found here.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 7024, "end_char_idx": 9677, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "9ce15126-b66c-4f12-b4ce-9dcc00f9a919": {"__data__": {"id_": "9ce15126-b66c-4f12-b4ce-9dcc00f9a919", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/history_array.html", "file_name": "history_array.html", "file_type": "text/html", "file_size": 21267, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3c584d05-8c35-45c4-a59e-3a5af8aeb69a", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/history_array.html", "file_name": "history_array.html", "file_type": "text/html", "file_size": 21267, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "840fc9d7eb9667fa797e9d8181fb6dc2e04e3d825963b202eafedb574679afad", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fe7965af-4dea-4b8e-87e8-8bc9751c3e24", "node_type": "1", "metadata": {}, "hash": "1dbbda652d0ffee786c94d1d9e70a518e7226e37a10001a5df81dbe68bfba648", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "History Array \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nOutput Management\nHistory Array\nOverview\nReserved Fields\nExample Workflow updating History\n\nResource Manager\nWriting User Functions\nExecutors\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nHistory Array\n\n View page source\n\nHistory Array\uf0c1\nH: numpy structured array\n A record of runtime attributes and output data for all ensemble members.\n\nOverview\uf0c1\nlibEnsemble uses a NumPy structured array to store information about each point\n(ensemble member) generated and processed in the ensemble.\nThe manager maintains a global copy. Each row contains:\n\nData generated by the gen_f\nResultant output from the sim_f\nReserved fields containing metadata\n\nWhen the history array is initialized, it creates fields for each\ngen_specs[\"out\"] and sim_specs[\"out\"] entry. These entries may resemble:\ngen_specs[\"out\"] = [(\"x\", float, 2), (\"theta\", int)]\nsim_specs[\"out\"] = [(\"f\", float)]\n\nTherefore, the gen_f and sim_f must return output as NumPy\nstructured arrays for slotting into these fields.\nEnsure input/output field names for a function match each other or a reserved field:\ngen_specs[\"out\"] = [(\"x\", float, 2), (\"theta\", int)] # produces \"x\" and \"theta\"\nsim_specs[\"in\"] = [\"x\", \"theta\", \"sim_id\"] # accepts \"x\", \"theta\" and \"sim_id\", a reserved field\n\nReserved Fields\uf0c1\nUser fields and reserved fields are combined together in the final History\narray returned by libEnsemble.\nThese reserved fields can be modified to adjust how/when a point is evaluated:\n\nsim_id [int]: Each unit of work must have a sim_id. This can be set by the\ngenerator or by the manager by default. Users should ensure these IDs are sequential\nand unique when running multiple generators.\n\ncancel_requested [bool]: Can be set True in a generator to request attempted\ncancellation of the corresponding simulation.\n\nThe following fields are automatically populated by libEnsemble:\ngen_worker [int]: Worker that generated this entry\ngen_started_time [float]: Time gen_worker was initiated that produced this entry\ngen_ended_time [float]: Time gen_worker requested this entry\nsim_worker [int]: Worker that did (or is doing) the sim evaluation for this entry\nsim_started [bool]: True if entry was given to sim_worker for sim evaluation\nsim_started_time [float]: Time entry was given to sim_worker for a sim evaluation\nsim_ended [bool]: True if entry\u2019s sim evaluation completed\nsim_ended_time [float]: Time entry\u2019s sim evaluation completed\ngen_informed [bool]: True if gen_worker was informed about the sim evaluation of this entry\ngen_informed_time [float]: Time gen_worker was informed about the sim evaluation of this entry\nkill_sent [bool]: True if a kill signal was sent to worker for this entry\nOther than \"sim_id\" and cancel_requested, these fields cannot be\noverwritten by user functions unless libE_specs[\"safe_mode\"] is set to False.\n\nWarning\nAdjusting values in protected fields may crash libEnsemble.\n\nExample Workflow updating History\uf0c1\nStep 1: The history array is initialized on the manager\nThe history array is initialized using the libEnsemble reserved field and the\nuser-provided gen_specs[\"out\"] and sim_specs[\"out\"] entries.\nIn the figure below, only the\nreserved fields: sim_id, sim_started, and sim_ended are shown for brevity.\n\ngen_f and sim_f functions accept a local history\narray as the first argument that contains only the rows and fields specified.\nFor new function calls these will be specified by either gen_specs[\"in\"] or\nsim_specs[\"in\"]. For generators this may be empty.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4173, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "fe7965af-4dea-4b8e-87e8-8bc9751c3e24": {"__data__": {"id_": "fe7965af-4dea-4b8e-87e8-8bc9751c3e24", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/history_array.html", "file_name": "history_array.html", "file_type": "text/html", "file_size": 21267, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3c584d05-8c35-45c4-a59e-3a5af8aeb69a", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/history_array.html", "file_name": "history_array.html", "file_type": "text/html", "file_size": 21267, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "840fc9d7eb9667fa797e9d8181fb6dc2e04e3d825963b202eafedb574679afad", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9ce15126-b66c-4f12-b4ce-9dcc00f9a919", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/history_array.html", "file_name": "history_array.html", "file_type": "text/html", "file_size": 21267, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "72a709b6e8da1110dc7eb5192b17b604e6a3f8425b7a6f4aa17e636a371e90a4", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Warning\nAdjusting values in protected fields may crash libEnsemble.\n\nExample Workflow updating History\uf0c1\nStep 1: The history array is initialized on the manager\nThe history array is initialized using the libEnsemble reserved field and the\nuser-provided gen_specs[\"out\"] and sim_specs[\"out\"] entries.\nIn the figure below, only the\nreserved fields: sim_id, sim_started, and sim_ended are shown for brevity.\n\ngen_f and sim_f functions accept a local history\narray as the first argument that contains only the rows and fields specified.\nFor new function calls these will be specified by either gen_specs[\"in\"] or\nsim_specs[\"in\"]. For generators this may be empty.\n\nStep 2: Persistent generator gen_f is called\n\nStep 3: Points are given out for sim_f to evaluate\n\nStep 4: Results returned to persistent generator gen_f\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 3515, "end_char_idx": 4454, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "b4e69408-d4cd-4786-8bb6-3cd38d7110f6": {"__data__": {"id_": "b4e69408-d4cd-4786-8bb6-3cd38d7110f6", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/sim_gen_alloc_api.html", "file_name": "sim_gen_alloc_api.html", "file_type": "text/html", "file_size": 23414, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "69c174f7-e4eb-4645-a264-dc7e67c0c0c2", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/sim_gen_alloc_api.html", "file_name": "sim_gen_alloc_api.html", "file_type": "text/html", "file_size": 23414, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "d3bd049a9945ba33518843f06b5fd0d751ba97ff7abde706e3817b99dd801550", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "User Function API \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nOutput Management\nHistory Array\nResource Manager\nWriting User Functions\nGenerator Functions\nSimulator Functions\nAllocation Functions\nUser Function API\nsim_f API\ngen_f API\nalloc_f API\n\ncalc_status\nWork Dictionary\nWorker Array\n\nExecutors\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nWriting User Functions\nUser Function API\n\n View page source\n\nUser Function API\uf0c1\nlibEnsemble requires functions for generation, simulation, and allocation.\nWhile libEnsemble provides a default allocation function, the simulator and generator functions\nmust be specified. The required API and example arguments are given here.\nExample sim and gen functions are provided in the\nlibEnsemble package.\nSee here for more in-depth guides to writing user functions\nAs of v0.10.0, valid simulator and generator functions\ncan accept and return a smaller subset of the listed parameters and return values. For instance,\na def my_simulation(one_Input) -> one_Output function is now accepted,\nas is def my_generator(Input, persis_info) -> Output, persis_info.\n\nsim_f API\uf0c1\nThe simulator function will be called by libEnsemble\u2019s workers with up to the following arguments and returns:\nOut, persis_info, calc_status = sim_f(H[sim_specs[\"in\"]][sim_ids_from_allocf], persis_info, sim_specs, libE_info)\n\nParameters:\uf0c1\n\nH: numpy structured array\n(example)\npersis_info: dict\n(example)\nsim_specs: dict\n(example)\nlibE_info: dict\n(example)\n\nReturns:\uf0c1\n\nH: numpy structured array\nwith keys/value-sizes matching those in sim_specs[\u201cout\u201d]\n(example)\npersis_info: dict\n(example)\ncalc_status: int, optional\nProvides a task status to the manager and the libE_stats.txt file\n(example)\n\ngen_f API\uf0c1\nThe generator function will be called by libEnsemble\u2019s workers with up to the following arguments and returns:\nOut, persis_info, calc_status = gen_f(H[gen_specs[\"in\"]][sim_ids_from_allocf], persis_info, gen_specs, libE_info)\n\nParameters:\uf0c1\n\nH: numpy structured array\n(example)\npersis_info: dict\n(example)\ngen_specs: dict\n(example)\nlibE_info: dict\n(example)\n\nReturns:\uf0c1\n\nH: numpy structured array\nwith keys/value-sizes matching those in gen_specs[\u201cout\u201d]\n(example)\npersis_info: dict\n(example)\ncalc_status: int, optional\nProvides a task status to the manager and the libE_stats.txt file\n(example)\n\nalloc_f API\uf0c1\nThe allocation function will be called by libEnsemble\u2019s manager with the following API:\nWork, persis_info, stop_flag = alloc_f(W, H, sim_specs, gen_specs, alloc_specs, persis_info, libE_info)\n\nParameters:\uf0c1\n\nW: numpy structured array\n(example)\nH: numpy structured array\n(example)\nsim_specs: dict\n(example)\ngen_specs: dict\n(example)\nalloc_specs: dict\n(example)\npersis_info: dict\n(example)\nlibE_info: dict\nVarious statistics useful to the allocation function for determining how much\nwork has been evaluated, or if the routine should prepare to complete. See\nthe allocation function guide for more\ninformation.\n\nReturns:\uf0c1\n\nWork: dict\nDictionary with integer keys i for work to be sent to worker i.\n(example)\npersis_info: dict\n(example)\nstop_flag: int, optional\nSet to 1 to request libEnsemble manager to stop giving additional work after\nreceiving existing work\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3956, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "c5dbe178-0bb3-4053-84cb-3f03a5cae431": {"__data__": {"id_": "c5dbe178-0bb3-4053-84cb-3f03a5cae431", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/simulator.html", "file_name": "simulator.html", "file_type": "text/html", "file_size": 23914, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7b3b5968-135a-4da1-9d64-63ef173f1bee", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/simulator.html", "file_name": "simulator.html", "file_type": "text/html", "file_size": 23914, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "5e3bfbf676475b647de4cd2cddc148992d35463b41b0659cc94b38d13f999053", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Simulator Functions \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nOutput Management\nHistory Array\nResource Manager\nWriting User Functions\nGenerator Functions\nSimulator Functions\nWriting a Simulator\nExecutor\nPersistent Simulators\n\nAllocation Functions\nUser Function API\ncalc_status\nWork Dictionary\nWorker Array\n\nExecutors\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nWriting User Functions\nSimulator Functions\n\n View page source\n\nSimulator Functions\uf0c1\nSimulator and Generator functions have relatively similar interfaces.\n\nWriting a Simulator\uf0c1\n\nNon-decorated\ndef my_simulation(Input, persis_info, sim_specs, libE_info):\n batch_size = sim_specs[\"user\"][\"batch_size\"]\n\n Output = np.zeros(batch_size, sim_specs[\"out\"])\n # ...\n Output[\"f\"], persis_info = do_a_simulation(Input[\"x\"], persis_info)\n\n return Output, persis_info\n\nDecorated\nfrom libensemble.specs import input_fields, output_data\n\n@input_fields([\"x\"])\n@output_data([(\"f\", float)])\ndef my_simulation(Input, persis_info, sim_specs, libE_info):\n batch_size = sim_specs[\"user\"][\"batch_size\"]\n\n Output = np.zeros(batch_size, sim_specs[\"out\"])\n # ...\n Output[\"f\"], persis_info = do_a_simulation(Input[\"x\"], persis_info)\n\n return Output, persis_info\n\nMost sim_f function definitions written by users resemble:\ndef my_simulation(Input, persis_info, sim_specs, libE_info):\n\nwhere:\n\nInput is a selection of the History array, a NumPy structured array.\npersis_info is a dictionary containing state information.\nsim_specs is a dictionary of simulation parameters.\nlibE_info is a dictionary containing libEnsemble-specific entries.\n\nValid simulator functions can accept a subset of the above parameters. So a very simple simulator function can start:\ndef my_simulation(Input):\n\nIf sim_specs was initially defined:\n\nNon-decorated function\nsim_specs = SimSpecs(\n sim_f=my_simulation,\n inputs=[\"x\"],\n outputs=[\"f\", float, (1,)],\n user={\"batch_size\": 128},\n)\n\nDecorated function\nsim_specs = SimSpecs(\n sim_f=my_simulation,\n user={\"batch_size\": 128},\n)\n\nThen user parameters and a local array of outputs may be obtained/initialized like:\nbatch_size = sim_specs[\"user\"][\"batch_size\"]\nOutput = np.zeros(batch_size, dtype=sim_specs[\"out\"])\n\nThis array should be populated with output values from the simulation:\nOutput[\"f\"], persis_info = do_a_simulation(Input[\"x\"], persis_info)\n\nThen return the array and persis_info to libEnsemble:\nreturn Output, persis_info\n\nBetween the Output definition and the return, any computation can be performed.\nUsers can try an executor to submit applications to parallel\nresources, or plug in components from other libraries to serve their needs.\n\nExecutor\uf0c1\nlibEnsemble\u2019s Executors are commonly used within simulator functions to launch\nand monitor applications. An excellent overview is already available\nhere.\nSee the Ensemble with an MPI Application tutorial\nfor an additional example to try out.\n\nPersistent Simulators\uf0c1\nSimulator functions can also be written\nin a persistent fashion. See the here for a general API overview\nof writing persistent generators, since the interface is largely identical. The only\ndifferences are to pass EVAL_SIM_TAG when instantiating a PersistentSupport\nclass instance and to return FINISHED_PERSISTENT_SIM_TAG when the simulator\nfunction returns.\n\nNote\nAn example routine using a persistent simulator can be found in test_persistent_sim_uniform_sampling.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4144, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "6b5a512f-6d73-462f-9d25-48d2707d58b8": {"__data__": {"id_": "6b5a512f-6d73-462f-9d25-48d2707d58b8", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/work_dict.html", "file_name": "work_dict.html", "file_type": "text/html", "file_size": 16719, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "45aa02ca-e382-47db-a645-691fd2e7dd64", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/work_dict.html", "file_name": "work_dict.html", "file_type": "text/html", "file_size": 16719, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "0294747279ac050ea5e6c2017778e39da248be7ba4f41cf42555b86e332096ae", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Work Dictionary \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nOutput Management\nHistory Array\nResource Manager\nWriting User Functions\nGenerator Functions\nSimulator Functions\nAllocation Functions\nUser Function API\ncalc_status\nWork Dictionary\nWorker Array\n\nExecutors\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nWriting User Functions\nWork Dictionary\n\n View page source\n\nWork Dictionary\uf0c1\nThe work dictionary contains metadata that is used by the manager to send a packet\nof work to a worker. The dictionary uses integer keys i and values that determine\nthe data given to worker i. Populated in the allocation function. Work[i] has the following form:\nWork[i]: [dict]:\n\n Required keys:\n \"H_fields\" [list]: The field names of the history H to be sent to worker i\n \"persis_info\" [dict]: Any persistent info to be sent to worker i\n \"tag\" [int]: \"EVAL_SIM_TAG\"/\"EVAL_GEN_TAG\" if worker i is to call sim/gen_func\n \"libE_info\" [dict]: Info sent to/from worker to help manager update the H array\n\n libE_info contains the following:\n \"H_rows\" [list of ints]: History rows to send to worker i\n \"rset_team\" [list of ints]: The resource sets to be assigned (if dynamic scheduling is used)\n \"persistent\" [bool]: True if worker i will enter persistent mode (Default: False)\n\nThe work dictionary is typically set using the gen_work or sim_work\nhelper functions in the allocation function.\nH_fields, for example, is usually packed from either sim_specs[\"in\"], gen_specs[\"in\"]\nor the equivalent \u201cpersis_in\u201d variants.\n\nSee also\nFor allocation functions giving work dictionaries using persistent workers,\nsee start_only_persistent.py or start_persistent_local_opt_gens.py.\nFor a use case where the allocation and generator functions combine to do\nsimulation evaluations with different resources, see\ntest_uniform_sampling_with_variable_resources.py.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2613, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "85f5b39f-ff1d-4965-87ae-8a8608327621": {"__data__": {"id_": "85f5b39f-ff1d-4965-87ae-8a8608327621", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/worker_array.html", "file_name": "worker_array.html", "file_type": "text/html", "file_size": 14975, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "08ef3069-8708-409f-ac7b-20ebb84dfd90", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/function_guides/worker_array.html", "file_name": "worker_array.html", "file_type": "text/html", "file_size": 14975, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "9bd5a6435a8308d05df4d1a10b203fc7ce2da7d39b2834b1c4754c27e7f1dd65", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Worker Array \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nOutput Management\nHistory Array\nResource Manager\nWriting User Functions\nGenerator Functions\nSimulator Functions\nAllocation Functions\nUser Function API\ncalc_status\nWork Dictionary\nWorker Array\n\nExecutors\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nWriting User Functions\nWorker Array\n\n View page source\n\nWorker Array\uf0c1\nThe worker array W contains information about each worker\u2019s state. Used within allocation\nfunctions to determine which workers are eligible to receive work.\nW: numpy structured array\n \"worker_id\" [int]:\n The worker ID\n \"active\" [int]:\n Is the worker active or not\n \"persis_state\" [int]:\n Is the worker in a persis_state\n \"active_recv\" [int]:\n Is the worker in an active receive state\n \"blocked\" [int]:\n Is the worker's resources blocked by another calculation\n\nWe use the following convention:\n\nWorker state\nactive\npersis_state\nblocked\n\nidle worker\n0\n0\n0\n\nactive, nonpersistent sim\n1\n0\n0\n\nactive, nonpersistent gen\n2\n0\n0\n\nactive, persistent sim\n1\n1\n0\n\nactive, persistent gen\n2\n2\n0\n\nwaiting, persistent sim\n0\n1\n0\n\nwaiting, persistent gen\n0\n2\n0\n\nworker blocked by some other calculation\n1\n0\n1\n\nNote\n\nlibEnsemble\u2019s manager receives only from workers with a nonzero \"active\" state\nlibEnsemble\u2019s manager calls the alloc_f only if some worker has an \"active\" state of zero, or is in an active receive state.\n\nSee also\nFor an example allocation function that queries the worker array, see\npersistent_aposmm_alloc.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2268, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "cbebbd4c-510f-4d29-b239-80db8974e697": {"__data__": {"id_": "cbebbd4c-510f-4d29-b239-80db8974e697", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/genindex.html", "file_name": "genindex.html", "file_type": "text/html", "file_size": 83956, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cbb2b940-e2a1-47b4-b70c-deb8c04dca1e", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/genindex.html", "file_name": "genindex.html", "file_type": "text/html", "file_size": 83956, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "c980b7f76b9e0aa4109718dcb11a388e6fc9ae8e9f9bf05efa3d80571bd5228b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6535ed8b-ab4b-44b5-bb66-3f96c692c123", "node_type": "1", "metadata": {}, "hash": "0eefcbdbbe5a74e48f2cd807eb144c234ebb26d6fa1b914e2002ff8c1b7da6fb", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Index \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nIndex\n\nIndex\n\n_\n | A\n | B\n | C\n | D\n | E\n | F\n | G\n | H\n | I\n | K\n | L\n | M\n | N\n | O\n | P\n | R\n | S\n | T\n | U\n | V\n | W\n | X\n | Z\n\n_\n\n__init__() (env_resources.EnvResources method)\n\n(libensemble.executors.executor.Executor method)\n\n(libensemble.history.History method)\n\n(libensemble.tools.alloc_support.AllocSupport method)\n\n(manager.Manager method)\n\n(resources.resources.GlobalResources method)\n\n(resources.resources.Resources method)\n\n(resources.scheduler.ResourceScheduler method)\n\n(resources.worker_resources.ResourceManager method)\n\n(resources.worker_resources.WorkerResources method)\n\n(rset_resources.RSetResources method)\n\n(worker.Worker method)\n\nA\n\nabbrev_nodenames() (env_resources.EnvResources static method)\n\nabort_on_exception (libensemble.specs.LibeSpecs attribute)\n\nadd_comm_info() (resources.resources.GlobalResources method)\n\n(resources.resources.Resources method)\n\nadd_random_streams() (libensemble.ensemble.Ensemble method)\n\nadd_unique_random_streams() (in module tools)\n\nall_gen_informed() (alloc_support.AllocSupport method)\n\n(libensemble.tools.alloc_support.AllocSupport method)\n\nall_sim_ended() (alloc_support.AllocSupport method)\n\n(libensemble.tools.alloc_support.AllocSupport method)\n\nall_sim_started() (alloc_support.AllocSupport method)\n\n(libensemble.tools.alloc_support.AllocSupport method)\n\nalloc_f (libensemble.specs.AllocSpecs attribute)\n\n alloc_support\n\nmodule\n\nAllocException\n\nAllocSupport (class in alloc_support)\n\n(class in libensemble.tools.alloc_support)\n\naposmm() (in module persistent_aposmm)\n\n aposmm_localopt_support\n\nmodule\n\nassign_resources() (alloc_support.AllocSupport method)\n\n(libensemble.tools.alloc_support.AllocSupport method)\n\n(resources.scheduler.ResourceScheduler method)\n\nassign_rsets() (resources.worker_resources.ResourceManager method)\n\naurora (libensemble.resources.platforms.Known_platforms attribute)\n\nauthkey (libensemble.specs.LibeSpecs attribute)\n\navail_worker_ids() (alloc_support.AllocSupport method)\n\n(libensemble.tools.alloc_support.AllocSupport method)\n\nB\n\nbatched_history_matching() (in module persistent_sampling)\n\nbest_split() (rset_resources.RSetResources static method)\n\n borehole\n\nmodule\n\nborehole() (in module borehole)\n\n(in module borehole_kills)\n\n(in module surmise_test_function)\n\nborehole_failmodel() (in module surmise_test_function)\n\nborehole_func() (in module borehole)\n\n borehole_kills\n\nmodule\n\nborehole_model() (in module surmise_test_function)\n\nborehole_true() (in module surmise_test_function)\n\nborehole_vec() (in module surmise_test_function)\n\nC\n\ncalc_dir_id_width (libensemble.specs.LibeSpecs attribute)\n\ncancel() (libensemble.executors.executor.Task method)\n\ncancelled() (libensemble.executors.executor.Task method)\n\ncheck_npy_file_exists() (in module tools)\n\n chwirut1\n\nmodule\n\nchwirut_eval() (in module chwirut1)\n\nclose() (aposmm_localopt_support.LocalOptInterfacer method)\n\ncobalt_abbrev_nodenames() (env_resources.EnvResources static method)\n\ncomms (libensemble.specs.LibeSpecs attribute)\n\ncores_per_node (libensemble.resources.platforms.Platform attribute)\n\ncount_gens() (alloc_support.AllocSupport method)\n\n(libensemble.tools.alloc_support.AllocSupport method)\n\ncount_persis_gens() (alloc_support.AllocSupport method)\n\n(libensemble.tools.alloc_support.AllocSupport method)\n\ncreate_machinefile() (in module mpi_resources)\n\nCUDA_variable_resources() (in module var_resources)\n\nD\n\ndedicated_mode (libensemble.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4056, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "6535ed8b-ab4b-44b5-bb66-3f96c692c123": {"__data__": {"id_": "6535ed8b-ab4b-44b5-bb66-3f96c692c123", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/genindex.html", "file_name": "genindex.html", "file_type": "text/html", "file_size": 83956, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cbb2b940-e2a1-47b4-b70c-deb8c04dca1e", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/genindex.html", "file_name": "genindex.html", "file_type": "text/html", "file_size": 83956, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "c980b7f76b9e0aa4109718dcb11a388e6fc9ae8e9f9bf05efa3d80571bd5228b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cbebbd4c-510f-4d29-b239-80db8974e697", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/genindex.html", "file_name": "genindex.html", "file_type": "text/html", "file_size": 83956, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "070cb0216501b77d1a5630dec20c9354c6a4e0dbcadb9ef203a60b913f82af88", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "eab25dee-6156-4ed1-a1a9-3a6dea84dadc", "node_type": "1", "metadata": {}, "hash": "22aa27a8c772ab462e69bf5f88649adcdf2bd1293133c695d56549cc17a602b7", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "executors.executor.Task method)\n\ncancelled() (libensemble.executors.executor.Task method)\n\ncheck_npy_file_exists() (in module tools)\n\n chwirut1\n\nmodule\n\nchwirut_eval() (in module chwirut1)\n\nclose() (aposmm_localopt_support.LocalOptInterfacer method)\n\ncobalt_abbrev_nodenames() (env_resources.EnvResources static method)\n\ncomms (libensemble.specs.LibeSpecs attribute)\n\ncores_per_node (libensemble.resources.platforms.Platform attribute)\n\ncount_gens() (alloc_support.AllocSupport method)\n\n(libensemble.tools.alloc_support.AllocSupport method)\n\ncount_persis_gens() (alloc_support.AllocSupport method)\n\n(libensemble.tools.alloc_support.AllocSupport method)\n\ncreate_machinefile() (in module mpi_resources)\n\nCUDA_variable_resources() (in module var_resources)\n\nD\n\ndedicated_mode (libensemble.specs.LibeSpecs attribute)\n\ndestroy() (aposmm_localopt_support.LocalOptInterfacer method)\n\ndisable_log_files (libensemble.specs.LibeSpecs attribute)\n\ndisable_resource_manager (libensemble.specs.LibeSpecs attribute)\n\ndoihave_gpus() (resources.worker_resources.WorkerResources method)\n\ndone() (libensemble.executors.executor.Task method)\n\ndry_run (libensemble.specs.LibeSpecs attribute)\n\nE\n\nenforce_worker_core_bounds (libensemble.specs.LibeSpecs attribute)\n\nEnsemble (class in libensemble.ensemble)\n\nensemble_copy_back (libensemble.specs.LibeSpecs attribute)\n\nensemble_dir_path (libensemble.specs.LibeSpecs attribute)\n\nensure_one_active_gen() (in module only_one_gen_alloc)\n\n env_resources\n\nmodule\n\nEnvResources (class in env_resources)\n\neprint() (in module tools)\n\neven_assignment() (rset_resources.RSetResources static method)\n\nexception() (libensemble.executors.executor.Task method)\n\n executor\n\nmodule\n\nExecutor (class in libensemble.executors.executor)\n\nexpand_list() (rset_resources.RSetResources static method)\n\nF\n\n fast_alloc\n\nmodule\n\n fast_alloc_and_pausing\n\nmodule\n\nfd_param_finder() (in module persistent_fd_param_finder)\n\nfile_exists_in_workdir() (libensemble.executors.executor.Task method)\n\nfinal_gen_send (libensemble.specs.LibeSpecs attribute)\n\nfinite_diff_alloc() (in module start_fd_persistent)\n\n forces_gpu.forces_simf\n\nmodule\n\n forces_gpu_var_resources.forces_simf\n\nmodule\n\n forces_multi_app.forces_simf\n\nmodule\n\n forces_simple.forces_simf\n\nmodule\n\n forces_simple_with_input_file.forces_simf\n\nmodule\n\nForkablePdb (class in tools)\n\nfree_rsets() (resources.worker_resources.ResourceManager method)\n\nfrom_json() (libensemble.ensemble.Ensemble method)\n\nfrom_toml() (libensemble.ensemble.Ensemble method)\n\nfrom_yaml() (libensemble.ensemble.Ensemble method)\n\nfrontier (libensemble.resources.platforms.Known_platforms attribute)\n\nfunc_wrapper() (in module noisy_vector_mapping)\n\n(in module periodic_func)\n\nG\n\ngen_borehole_input() (in module borehole)\n\ngen_dir_copy_files (libensemble.specs.LibeSpecs attribute)\n\ngen_dir_symlink_files (libensemble.specs.LibeSpecs attribute)\n\ngen_dirs_make (libensemble.specs.LibeSpecs attribute)\n\ngen_f (libensemble.specs.GenSpecs attribute)\n\ngen_input_dir (libensemble.specs.LibeSpecs attribute)\n\ngen_max (libensemble.specs.ExitCriteria attribute)\n\ngen_num_gpus (libensemble.specs.LibeSpecs attribute)\n\ngen_num_procs (libensemble.specs.LibeSpecs attribute)\n\ngen_on_manager (libensemble.specs.LibeSpecs attribute)\n\ngen_work() (alloc_support.AllocSupport method)\n\n(libensemble.tools.alloc_support.AllocSupport method)\n\ngen_workers (libensemble.specs.LibeSpecs attribute)\n\ngeneric_rocm (libensemble.resources.platforms.Known_platforms attribute)\n\nget_cobalt_nodelist() (env_resources.EnvResources static method)\n\nget_cpu_cores() (in module node_resources)\n\nget_global_nodelist() (resources.resources.GlobalResources static method)\n\nget_group_list() (rset_resources.RSetResources static method)\n\nget_hostlist() (in module mpi_resources)\n\nget_index_list() (resources.worker_resources.ResourceManager static method)\n\nget_level() (in module logger)\n\nget_local_nodelist() (resources.", "mimetype": "text/plain", "start_char_idx": 3270, "end_char_idx": 7177, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "eab25dee-6156-4ed1-a1a9-3a6dea84dadc": {"__data__": {"id_": "eab25dee-6156-4ed1-a1a9-3a6dea84dadc", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/genindex.html", "file_name": "genindex.html", "file_type": "text/html", "file_size": 83956, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cbb2b940-e2a1-47b4-b70c-deb8c04dca1e", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/genindex.html", "file_name": "genindex.html", "file_type": "text/html", "file_size": 83956, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "c980b7f76b9e0aa4109718dcb11a388e6fc9ae8e9f9bf05efa3d80571bd5228b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6535ed8b-ab4b-44b5-bb66-3f96c692c123", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/genindex.html", "file_name": "genindex.html", "file_type": "text/html", "file_size": 83956, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "60cc46646d76fca0ce5da63af95d41c71351a0d646da77fe31b4c35caaae0138", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8d2a217f-eabe-49a1-8e3b-6430ee836314", "node_type": "1", "metadata": {}, "hash": "2d451e2eade199b3d5f8ac39fc7fac334fccab595e6eecddd932b661c7020d9b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "ExitCriteria attribute)\n\ngen_num_gpus (libensemble.specs.LibeSpecs attribute)\n\ngen_num_procs (libensemble.specs.LibeSpecs attribute)\n\ngen_on_manager (libensemble.specs.LibeSpecs attribute)\n\ngen_work() (alloc_support.AllocSupport method)\n\n(libensemble.tools.alloc_support.AllocSupport method)\n\ngen_workers (libensemble.specs.LibeSpecs attribute)\n\ngeneric_rocm (libensemble.resources.platforms.Known_platforms attribute)\n\nget_cobalt_nodelist() (env_resources.EnvResources static method)\n\nget_cpu_cores() (in module node_resources)\n\nget_global_nodelist() (resources.resources.GlobalResources static method)\n\nget_group_list() (rset_resources.RSetResources static method)\n\nget_hostlist() (in module mpi_resources)\n\nget_index_list() (resources.worker_resources.ResourceManager static method)\n\nget_level() (in module logger)\n\nget_local_nodelist() (resources.worker_resources.WorkerResources static method)\n\nget_lsf_nodelist() (env_resources.EnvResources static method)\n\nget_lsf_nodelist_frm_shortform() (env_resources.EnvResources static method)\n\nget_MPI_runner() (in module mpi_resources)\n\nget_MPI_variant() (in module mpi_resources)\n\nget_nodelist() (env_resources.EnvResources method)\n\nget_partitioned_nodelist() (rset_resources.RSetResources static method)\n\nget_pbs_nodelist() (env_resources.EnvResources static method)\n\nget_resources() (in module mpi_resources)\n\nget_rsets_on_a_node() (rset_resources.RSetResources static method)\n\nget_slots_as_string() (resources.worker_resources.WorkerResources method)\n\nget_slurm_nodelist() (env_resources.EnvResources static method)\n\nget_split_list() (rset_resources.RSetResources static method)\n\nget_stderr_level() (in module logger)\n\nget_sub_node_resources() (in module node_resources)\n\nget_workers2assign2() (rset_resources.RSetResources static method)\n\ngive_pregenerated_sim_work() (in module give_pregenerated_work)\n\n give_pregenerated_work\n\nmodule\n\n give_sim_work_first\n\nmodule\n\ngive_sim_work_first() (in module fast_alloc)\n\n(in module fast_alloc_and_pausing)\n\n(in module give_sim_work_first)\n\nGlobalResources (class in resources.resources)\n\nglobus_compute_endpoint (libensemble.specs.GenSpecs attribute)\n\n(libensemble.specs.SimSpecs attribute)\n\ngpu_env_fallback (libensemble.resources.platforms.Platform attribute)\n\ngpu_setting_name (libensemble.resources.platforms.Platform attribute)\n\ngpu_setting_type (libensemble.resources.platforms.Platform attribute)\n\ngpu_variable_resources() (in module var_resources)\n\ngpu_variable_resources_from_gen() (in module var_resources)\n\ngpu_variable_resources_subenv() (in module var_resources)\n\ngpus_per_group (libensemble.specs.LibeSpecs attribute)\n\ngpus_per_node (libensemble.resources.platforms.Platform attribute)\n\ngrow_H() (libensemble.history.History method)\n\nH\n\nH_file_prefix (libensemble.specs.LibeSpecs attribute)\n\nHistory (class in libensemble.history)\n\nI\n\ninit_resources() (resources.resources.Resources class method)\n\ninputs (libensemble.specs.GenSpecs attribute)\n\n(libensemble.specs.SimSpecs attribute)\n\n inverse_bayes\n\nmodule\n\n inverse_bayes_allocf\n\nmodule\n\nip (libensemble.specs.LibeSpecs attribute)\n\nis_nodelist_shortnames() (resources.resources.GlobalResources static method)\n\niterate() (aposmm_localopt_support.LocalOptInterfacer method)\n\nK\n\nkill() (libensemble.executors.executor.Task method)\n\nkill_canceled_sims (libensemble.specs.LibeSpecs attribute)\n\nL\n\nlatin_hypercube_sample() (in module sampling)\n\nlibE() (in module libensemble.libE)\n\n libensemble.history\n\nmodule\n\n libensemble.libE\n\nmodule\n\nlikelihood_calculator() (in module inverse_bayes)\n\nlive_data (libensemble.specs.LibeSpecs attribute)\n\nLocalOptInterfacer (class in aposmm_localopt_support)\n\n logger\n\nmodule\n\nlogical_cores_per_node (libensemble.resources.platforms.Platform attribute)\n\nlumi (libensemble.resources.platforms.Known_platforms attribute)\n\nlumi_g (libensemble.resources.platforms.Known_platforms attribute)\n\nM\n\n manager\n\nmodule\n\nManager (class in manager)\n\nmanager_kill_received() (libensemble.executors.executor.Executor method)\n\n(libensemble.executors.mpi_executor.", "mimetype": "text/plain", "start_char_idx": 6326, "end_char_idx": 10363, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "8d2a217f-eabe-49a1-8e3b-6430ee836314": {"__data__": {"id_": "8d2a217f-eabe-49a1-8e3b-6430ee836314", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/genindex.html", "file_name": "genindex.html", "file_type": "text/html", "file_size": 83956, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cbb2b940-e2a1-47b4-b70c-deb8c04dca1e", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/genindex.html", "file_name": "genindex.html", "file_type": "text/html", "file_size": 83956, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "c980b7f76b9e0aa4109718dcb11a388e6fc9ae8e9f9bf05efa3d80571bd5228b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "eab25dee-6156-4ed1-a1a9-3a6dea84dadc", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/genindex.html", "file_name": "genindex.html", "file_type": "text/html", "file_size": 83956, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "9c3ccaa422143bdbfbec31bd90e3b4660b689038db216f1416b2b2e69abbfda2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fd795802-c29a-4920-bbd0-ed8f90143a8d", "node_type": "1", "metadata": {}, "hash": "c44df2c1f4567e4a1c2ee4da86ab9a6ec5fcef03bcc0042309debd1b7970d448", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "executors.executor.Task method)\n\nkill_canceled_sims (libensemble.specs.LibeSpecs attribute)\n\nL\n\nlatin_hypercube_sample() (in module sampling)\n\nlibE() (in module libensemble.libE)\n\n libensemble.history\n\nmodule\n\n libensemble.libE\n\nmodule\n\nlikelihood_calculator() (in module inverse_bayes)\n\nlive_data (libensemble.specs.LibeSpecs attribute)\n\nLocalOptInterfacer (class in aposmm_localopt_support)\n\n logger\n\nmodule\n\nlogical_cores_per_node (libensemble.resources.platforms.Platform attribute)\n\nlumi (libensemble.resources.platforms.Known_platforms attribute)\n\nlumi_g (libensemble.resources.platforms.Known_platforms attribute)\n\nM\n\n manager\n\nmodule\n\nManager (class in manager)\n\nmanager_kill_received() (libensemble.executors.executor.Executor method)\n\n(libensemble.executors.mpi_executor.MPIExecutor method)\n\nmanager_main() (in module manager)\n\nmanager_poll() (libensemble.executors.executor.Executor method)\n\n(libensemble.executors.mpi_executor.MPIExecutor method)\n\n mock_sim\n\nmodule\n\nmock_sim() (in module mock_sim)\n\n module\n\nalloc_support\n\naposmm_localopt_support\n\nborehole\n\nborehole_kills\n\nchwirut1\n\nenv_resources\n\nexecutor\n\nfast_alloc\n\nfast_alloc_and_pausing\n\nforces_gpu.forces_simf\n\nforces_gpu_var_resources.forces_simf\n\nforces_multi_app.forces_simf\n\nforces_simple.forces_simf\n\nforces_simple_with_input_file.forces_simf\n\ngive_pregenerated_work\n\ngive_sim_work_first\n\ninverse_bayes\n\ninverse_bayes_allocf\n\nlibensemble.history\n\nlibensemble.libE\n\nlogger\n\nmanager\n\nmock_sim\n\nmpi_executor\n\nmpi_resources\n\nnode_resources\n\nnoisy_vector_mapping\n\nonly_one_gen_alloc\n\nperiodic_func\n\npersistent_aposmm\n\npersistent_aposmm_alloc\n\npersistent_fd_param_finder\n\npersistent_gpCAM\n\npersistent_sampling\n\npersistent_sampling_var_resources\n\npersistent_support\n\npersistent_surmise_calib\n\npersistent_tasmanian\n\nresources.resources\n\nresources.scheduler\n\nresources.worker_resources\n\nrosenbrock\n\nrset_resources\n\nsampling\n\nsimple_sim\n\nsix_hump_camel\n\nstart_fd_persistent\n\nstart_only_persistent\n\nstart_persistent_local_opt_gens\n\nsurmise_test_function\n\ntools\n\nuniform_or_localopt\n\nvar_resources\n\nworker\n\nmpi_comm (libensemble.specs.LibeSpecs attribute)\n\n mpi_executor\n\nmodule\n\n mpi_resources\n\nmodule\n\nmpi_runner (libensemble.resources.platforms.Platform attribute)\n\nMPIExecutor (class in libensemble.executors.mpi_executor)\n\nMPIResourcesException\n\nmulti_points_with_variable_resources() (in module var_resources)\n\nN\n\n node_resources\n\nmodule\n\nnoisy_function() (in module noisy_vector_mapping)\n\n noisy_vector_mapping\n\nmodule\n\nnorm_eval() (in module simple_sim)\n\nnum_resource_sets (libensemble.specs.LibeSpecs attribute)\n\nnworkers (libensemble.specs.LibeSpecs attribute)\n\nO\n\n only_one_gen_alloc\n\nmodule\n\nonly_persistent_gens() (in module start_only_persistent)\n\nonly_persistent_gens_for_inverse_bayes() (in module inverse_bayes_allocf)\n\noutputs (libensemble.specs.AllocSpecs attribute)\n\n(libensemble.specs.GenSpecs attribute)\n\n(libensemble.specs.SimSpecs attribute)\n\nP\n\nparse_args() (in module tools)\n\n periodic_func\n\nmodule\n\nperiodic_func() (in module periodic_func)\n\nperlmutter (libensemble.resources.platforms.Known_platforms attribute)\n\nperlmutter_c (libensemble.resources.platforms.Known_platforms attribute)\n\nperlmutter_g (libensemble.resources.platforms.Known_platforms attribute)\n\npersis_in (libensemble.specs.GenSpecs attribute)\n\n(libensemble.specs.", "mimetype": "text/plain", "start_char_idx": 9582, "end_char_idx": 12904, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "fd795802-c29a-4920-bbd0-ed8f90143a8d": {"__data__": {"id_": "fd795802-c29a-4920-bbd0-ed8f90143a8d", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/genindex.html", "file_name": "genindex.html", "file_type": "text/html", "file_size": 83956, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cbb2b940-e2a1-47b4-b70c-deb8c04dca1e", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/genindex.html", "file_name": "genindex.html", "file_type": "text/html", "file_size": 83956, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "c980b7f76b9e0aa4109718dcb11a388e6fc9ae8e9f9bf05efa3d80571bd5228b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8d2a217f-eabe-49a1-8e3b-6430ee836314", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/genindex.html", "file_name": "genindex.html", "file_type": "text/html", "file_size": 83956, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "eeece506d63ad9189ff7681b1ce0f2deffc8845ad6e71e35fc00d7ccc07e7adf", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "feb3e321-18bf-4515-9cf5-3635cddd0033", "node_type": "1", "metadata": {}, "hash": "c51900b658a617eee3abb0d59bacaf3595f65726d52bef802ad98b610e026ac4", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "specs.LibeSpecs attribute)\n\nnworkers (libensemble.specs.LibeSpecs attribute)\n\nO\n\n only_one_gen_alloc\n\nmodule\n\nonly_persistent_gens() (in module start_only_persistent)\n\nonly_persistent_gens_for_inverse_bayes() (in module inverse_bayes_allocf)\n\noutputs (libensemble.specs.AllocSpecs attribute)\n\n(libensemble.specs.GenSpecs attribute)\n\n(libensemble.specs.SimSpecs attribute)\n\nP\n\nparse_args() (in module tools)\n\n periodic_func\n\nmodule\n\nperiodic_func() (in module periodic_func)\n\nperlmutter (libensemble.resources.platforms.Known_platforms attribute)\n\nperlmutter_c (libensemble.resources.platforms.Known_platforms attribute)\n\nperlmutter_g (libensemble.resources.platforms.Known_platforms attribute)\n\npersis_in (libensemble.specs.GenSpecs attribute)\n\n(libensemble.specs.SimSpecs attribute)\n\n persistent_aposmm\n\nmodule\n\n persistent_aposmm_alloc\n\nmodule\n\npersistent_aposmm_alloc() (in module persistent_aposmm_alloc)\n\n persistent_fd_param_finder\n\nmodule\n\n persistent_gpCAM\n\nmodule\n\npersistent_gpCAM() (in module persistent_gpCAM)\n\npersistent_gpCAM_covar() (in module persistent_gpCAM)\n\npersistent_request_shutdown() (in module persistent_sampling)\n\n persistent_sampling\n\nmodule\n\n persistent_sampling_var_resources\n\nmodule\n\npersistent_six_hump_camel() (in module six_hump_camel)\n\n persistent_support\n\nmodule\n\n persistent_surmise_calib\n\nmodule\n\n persistent_tasmanian\n\nmodule\n\npersistent_uniform() (in module persistent_sampling)\n\npersistent_uniform_final_update() (in module persistent_sampling)\n\npersistent_uniform_with_cancellations() (in module persistent_sampling)\n\nPersistentSupport (class in persistent_support)\n\nplatform (libensemble.specs.LibeSpecs attribute)\n\nplatform_specs (libensemble.specs.LibeSpecs attribute)\n\npoints_by_priority() (alloc_support.AllocSupport method)\n\n(libensemble.tools.alloc_support.AllocSupport method)\n\npolaris (libensemble.resources.platforms.Known_platforms attribute)\n\npoll() (libensemble.executors.executor.Task method)\n\npolling_loop() (libensemble.executors.executor.Executor method)\n\n(libensemble.executors.mpi_executor.MPIExecutor method)\n\nport (libensemble.specs.LibeSpecs attribute)\n\nprofile (libensemble.specs.LibeSpecs attribute)\n\nR\n\nread_file_in_workdir() (libensemble.executors.executor.Task method)\n\nread_stderr() (libensemble.executors.executor.Task method)\n\nread_stdout() (libensemble.executors.executor.Task method)\n\nready() (libensemble.ensemble.Ensemble method)\n\nrecv() (in module libensemble.tools.persistent_support.PersistentSupport)\n\n(persistent_support.PersistentSupport method)\n\nregister_app() (libensemble.executors.executor.Executor method)\n\n(libensemble.executors.mpi_executor.MPIExecutor method)\n\nremove_nodes() (resources.resources.GlobalResources static method)\n\nrequest_cancel_sim_ids() (in module libensemble.tools.persistent_support.PersistentSupport)\n\n(persistent_support.PersistentSupport method)\n\nresource_info (libensemble.specs.LibeSpecs attribute)\n\nResourceManager (class in resources.worker_resources)\n\nResources (class in resources.resources)\n\n resources.resources\n\nmodule\n\n resources.scheduler\n\nmodule\n\n resources.worker_resources\n\nmodule\n\nResourceScheduler (class in resources.scheduler)\n\nresult() (libensemble.executors.executor.Task method)\n\nreuse_output_dir (libensemble.specs.LibeSpecs attribute)\n\n rosenbrock\n\nmodule\n\nrosenbrock_eval() (in module rosenbrock)\n\n rset_resources\n\nmodule\n\nRSetResources (class in rset_resources)\n\nrun() (libensemble.ensemble.Ensemble method)\n\n(manager.Manager method)\n\n(worker.Worker method)\n\nrun_forces() (in module forces_gpu.forces_simf)\n\n(in module forces_gpu_var_resources.forces_simf)\n\n(in module forces_multi_app.forces_simf)\n\n(in module forces_simple.forces_simf)\n\n(in module forces_simple_with_input_file.forces_simf)\n\nrunner_name (libensemble.resources.platforms.Platform attribute)\n\nrunning() (libensemble.executors.executor.Task method)\n\nS\n\nsafe_mode (libensemble.specs.LibeSpecs attribute)\n\n sampling\n\nmodule\n\nsave_every_k_gens (libensemble.specs.LibeSpecs attribute)\n\nsave_every_k_sims (libensemble.specs.LibeSpecs attribute)\n\nsave_H_and_persis_on_abort (libensemble.specs.", "mimetype": "text/plain", "start_char_idx": 12140, "end_char_idx": 16230, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "feb3e321-18bf-4515-9cf5-3635cddd0033": {"__data__": {"id_": "feb3e321-18bf-4515-9cf5-3635cddd0033", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/genindex.html", "file_name": "genindex.html", "file_type": "text/html", "file_size": 83956, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cbb2b940-e2a1-47b4-b70c-deb8c04dca1e", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/genindex.html", "file_name": "genindex.html", "file_type": "text/html", "file_size": 83956, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "c980b7f76b9e0aa4109718dcb11a388e6fc9ae8e9f9bf05efa3d80571bd5228b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fd795802-c29a-4920-bbd0-ed8f90143a8d", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/genindex.html", "file_name": "genindex.html", "file_type": "text/html", "file_size": 83956, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "76886b78dfb71550dc6b0ae6c4a222d435a05811ecaf4c880bb4d34f50d58277", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8c33c8b1-f65c-4f4b-8af6-205a2ace7eea", "node_type": "1", "metadata": {}, "hash": "791c14c1bb80a1dc155d6ad03e9ff07bea6e9738c050e188982c3aea01675195", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "ensemble.Ensemble method)\n\n(manager.Manager method)\n\n(worker.Worker method)\n\nrun_forces() (in module forces_gpu.forces_simf)\n\n(in module forces_gpu_var_resources.forces_simf)\n\n(in module forces_multi_app.forces_simf)\n\n(in module forces_simple.forces_simf)\n\n(in module forces_simple_with_input_file.forces_simf)\n\nrunner_name (libensemble.resources.platforms.Platform attribute)\n\nrunning() (libensemble.executors.executor.Task method)\n\nS\n\nsafe_mode (libensemble.specs.LibeSpecs attribute)\n\n sampling\n\nmodule\n\nsave_every_k_gens (libensemble.specs.LibeSpecs attribute)\n\nsave_every_k_sims (libensemble.specs.LibeSpecs attribute)\n\nsave_H_and_persis_on_abort (libensemble.specs.LibeSpecs attribute)\n\nsave_H_on_completion (libensemble.specs.LibeSpecs attribute)\n\nsave_H_with_date (libensemble.specs.LibeSpecs attribute)\n\nsave_libE_output() (in module tools)\n\nsave_output() (libensemble.ensemble.Ensemble method)\n\nscheduler_match_slots (libensemble.resources.platforms.Platform attribute)\n\nscheduler_opts (libensemble.specs.LibeSpecs attribute)\n\nsend() (in module libensemble.tools.persistent_support.PersistentSupport)\n\n(persistent_support.PersistentSupport method)\n\nsend_recv() (in module libensemble.tools.persistent_support.PersistentSupport)\n\n(persistent_support.PersistentSupport method)\n\nset_directory() (in module logger)\n\nset_env_to_gpus() (resources.worker_resources.WorkerResources method)\n\nset_env_to_slots() (resources.worker_resources.WorkerResources method)\n\nset_filename() (in module logger)\n\nset_gen_procs_gpus() (resources.worker_resources.WorkerResources method)\n\nset_level() (in module logger)\n\nset_resource_manager() (resources.resources.Resources method)\n\nset_rset_team() (resources.worker_resources.WorkerResources method)\n\nset_slot_count() (resources.worker_resources.WorkerResources method)\n\nset_stderr_level() (in module logger)\n\nset_worker_resources() (resources.resources.Resources method)\n\nshortnames() (env_resources.EnvResources method)\n\nsim_dir_copy_files (libensemble.specs.LibeSpecs attribute)\n\nsim_dir_symlink_files (libensemble.specs.LibeSpecs attribute)\n\nsim_dirs_make (libensemble.specs.LibeSpecs attribute)\n\nsim_f (libensemble.specs.SimSpecs attribute)\n\nsim_input_dir (libensemble.specs.LibeSpecs attribute)\n\nsim_max (libensemble.specs.ExitCriteria attribute)\n\nsim_work() (alloc_support.AllocSupport method)\n\n(libensemble.tools.alloc_support.AllocSupport method)\n\n simple_sim\n\nmodule\n\n six_hump_camel\n\nmodule\n\nsix_hump_camel() (in module six_hump_camel)\n\nsix_hump_camel_simple() (in module six_hump_camel)\n\nskip_canceled_points() (alloc_support.AllocSupport method)\n\n(libensemble.tools.alloc_support.AllocSupport method)\n\nsparse_grid_async() (in module persistent_tasmanian)\n\nsparse_grid_batched() (in module persistent_tasmanian)\n\n start_fd_persistent\n\nmodule\n\n start_only_persistent\n\nmodule\n\n start_persistent_local_opt_gens\n\nmodule\n\nstart_persistent_local_opt_gens() (in module start_persistent_local_opt_gens)\n\nstats_fmt (libensemble.specs.LibeSpecs attribute)\n\nstderr_exists() (libensemble.executors.executor.Task method)\n\nstdout_exists() (libensemble.executors.executor.Task method)\n\nstop_val (libensemble.specs.ExitCriteria attribute)\n\nsubmit() (libensemble.executors.executor.Executor method)\n\n(libensemble.executors.mpi_executor.MPIExecutor method)\n\nsubproc_borehole() (in module borehole_kills)\n\nsummit (libensemble.resources.platforms.Known_platforms attribute)\n\nsurmise_calib() (in module persistent_surmise_calib)\n\n surmise_test_function\n\nmodule\n\nT\n\nTask (class in libensemble.executors.executor)\n\ntask_partition() (in module mpi_resources)\n\nterm_test() (manager.Manager method)\n\nterm_test_gen_max() (manager.Manager method)\n\nterm_test_sim_max() (manager.Manager method)\n\nterm_test_stop_val() (manager.Manager method)\n\nterm_test_wallclock() (manager.Manager method)\n\ntest_any_gen() (alloc_support.AllocSupport method)\n\n(libensemble.tools.alloc_support.AllocSupport method)\n\nthreaded (libensemble.specs.GenSpecs attribute)\n\n(libensemble.specs.", "mimetype": "text/plain", "start_char_idx": 15559, "end_char_idx": 19544, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "8c33c8b1-f65c-4f4b-8af6-205a2ace7eea": {"__data__": {"id_": "8c33c8b1-f65c-4f4b-8af6-205a2ace7eea", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/genindex.html", "file_name": "genindex.html", "file_type": "text/html", "file_size": 83956, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cbb2b940-e2a1-47b4-b70c-deb8c04dca1e", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/genindex.html", "file_name": "genindex.html", "file_type": "text/html", "file_size": 83956, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "c980b7f76b9e0aa4109718dcb11a388e6fc9ae8e9f9bf05efa3d80571bd5228b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "feb3e321-18bf-4515-9cf5-3635cddd0033", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/genindex.html", "file_name": "genindex.html", "file_type": "text/html", "file_size": 83956, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "c6ff75d78a6ee54602c8985ef6f578d54d45812f39cdd4257e580ff8fdb5f7bb", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "ExitCriteria attribute)\n\nsubmit() (libensemble.executors.executor.Executor method)\n\n(libensemble.executors.mpi_executor.MPIExecutor method)\n\nsubproc_borehole() (in module borehole_kills)\n\nsummit (libensemble.resources.platforms.Known_platforms attribute)\n\nsurmise_calib() (in module persistent_surmise_calib)\n\n surmise_test_function\n\nmodule\n\nT\n\nTask (class in libensemble.executors.executor)\n\ntask_partition() (in module mpi_resources)\n\nterm_test() (manager.Manager method)\n\nterm_test_gen_max() (manager.Manager method)\n\nterm_test_sim_max() (manager.Manager method)\n\nterm_test_stop_val() (manager.Manager method)\n\nterm_test_wallclock() (manager.Manager method)\n\ntest_any_gen() (alloc_support.AllocSupport method)\n\n(libensemble.tools.alloc_support.AllocSupport method)\n\nthreaded (libensemble.specs.GenSpecs attribute)\n\n(libensemble.specs.SimSpecs attribute)\n\ntiles_per_gpu (libensemble.resources.platforms.Platform attribute)\n\n tools\n\nmodule\n\ntrim_H() (libensemble.history.History method)\n\ntstd2theta() (in module surmise_test_function)\n\nU\n\nuniform_nonblocking() (in module persistent_sampling)\n\n uniform_or_localopt\n\nmodule\n\nuniform_or_localopt() (in module uniform_or_localopt)\n\nuniform_random_sample() (in module sampling)\n\nuniform_random_sample_cancel() (in module sampling)\n\nuniform_random_sample_obj_components() (in module sampling)\n\nuniform_random_sample_with_var_priorities_and_resources() (in module sampling)\n\nuniform_random_sample_with_variable_resources() (in module sampling)\n\nuniform_sample() (in module persistent_sampling_var_resources)\n\nuniform_sample_diff_simulations() (in module persistent_sampling_var_resources)\n\nuniform_sample_with_procs_gpus() (in module persistent_sampling_var_resources)\n\nuniform_sample_with_sim_gen_resources() (in module persistent_sampling_var_resources)\n\nuniform_sample_with_var_gpus() (in module persistent_sampling_var_resources)\n\nuniform_sample_with_var_priorities() (in module persistent_sampling_var_resources)\n\nupdate_history_f() (libensemble.history.History method)\n\nupdate_history_to_gen() (libensemble.history.History method)\n\nupdate_history_x_in() (libensemble.history.History method)\n\nupdate_history_x_out() (libensemble.history.History method)\n\nupdate_scheduler_opts() (resources.resources.GlobalResources method)\n\nuse_persis_return_gen (libensemble.specs.LibeSpecs attribute)\n\nuse_persis_return_sim (libensemble.specs.LibeSpecs attribute)\n\nuse_tiles_as_gpus (libensemble.specs.LibeSpecs attribute)\n\nuse_worker_dirs (libensemble.specs.LibeSpecs attribute)\n\nuse_workflow_dir (libensemble.specs.LibeSpecs attribute)\n\nuser (libensemble.specs.AllocSpecs attribute)\n\n(libensemble.specs.GenSpecs attribute)\n\n(libensemble.specs.SimSpecs attribute)\n\nV\n\n var_resources\n\nmodule\n\nW\n\nwait() (libensemble.executors.executor.Task method)\n\nwallclock_max (libensemble.specs.ExitCriteria attribute)\n\nworkdir_exists() (libensemble.executors.executor.Task method)\n\n worker\n\nmodule\n\nWorker (class in worker)\n\nworker_cmd (libensemble.specs.LibeSpecs attribute)\n\nworker_main() (in module worker)\n\nworker_timeout (libensemble.specs.LibeSpecs attribute)\n\nworkerID (libensemble.specs.LibeSpecs attribute)\n\nWorkerResources (class in resources.worker_resources)\n\nworkers (libensemble.specs.LibeSpecs attribute)\n\nworkflow_dir_path (libensemble.specs.LibeSpecs attribute)\n\nX\n\nxstd2x() (in module surmise_test_function)\n\nZ\n\nzero_resource_workers (libensemble.specs.LibeSpecs attribute)\n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 18707, "end_char_idx": 22231, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "43dad33a-9752-4c8f-bba3-561a11ed52db": {"__data__": {"id_": "43dad33a-9752-4c8f-bba3-561a11ed52db", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/history_output_logging.html", "file_name": "history_output_logging.html", "file_type": "text/html", "file_size": 28729, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "af92ea33-101d-4c53-9ee7-e49d2fca3886", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/history_output_logging.html", "file_name": "history_output_logging.html", "file_type": "text/html", "file_size": 28729, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "65597cca1c6271e54309869e94080424cd44257aa09bf9e5c5c3e2a93c80dc38", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "97a4caad-df27-4600-bf6a-2a48a00166f1", "node_type": "1", "metadata": {}, "hash": "339ebc6509627439c8499bfdb901a114ae4f791468d9ffc09b236528fefecac4", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Output Management \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nOutput Management\nDefault Log Files\nLogger Configuration\nset_level()\nget_level()\nset_filename()\nset_directory()\nset_stderr_level()\nget_stderr_level()\n\nAnalysis Utilities\n\nHistory Array\nResource Manager\nWriting User Functions\nExecutors\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nOutput Management\n\n View page source\n\nOutput Management\uf0c1\n\nDefault Log Files\uf0c1\nThe history array H and\npersis_info dictionary are returned to the user\nby libEnsemble. If libEnsemble aborts on an exception, these structures are\ndumped automatically to these files:\n\nlibE_history_at_abort_<sim_count>.npy\nlibE_persis_info_at_abort_<sim_count>.pickle\n\nTwo other libEnsemble files produced by default:\n\nlibE_stats.txt: One-line summaries for each user calculation.\nensemble.log: Logging output. Multiple runs will append output if this file isn\u2019t removed. See below for config info.\n\nGlobal options:\nlibE_specs[\"disable_log_files\"] = True: Disable output files\nlibE_specs[\"use_workflow_dir\"] = True: Place output files in workflow-instance directories\nlibE_specs[\"save_H_and_persis_on_abort\"] = False: Disable dumping the History array and persis_info to files\nfrom libensemble.specs import LibeSpecs\n\nspecs = LibeSpecs(disable_log_files=True, save_H_and_persis_on_abort=False)\n\nLogger Configuration\uf0c1\nThe libEnsemble logger uses the following logging levels\n(VDEBUG, DEBUG, INFO, WARNING, MANAGER_WARNING, ERROR, CRITICAL)\nThe default level is INFO, which includes information about how tasks are submitted\nand when tasks are killed. To gain additional diagnostics, including communication\ntracking, set the logging level to DEBUG. In rare cases, the VDEBUG level may\nbe useful, which also tracks log messages.\nlibEnsemble writes to ensemble.log by default. A log file name can also be supplied.\nTo change the logging level to DEBUG:\nfrom libensemble import logger\nlogger.set_level(\"DEBUG\")\n\nLogger messages of MANAGER_WARNING level or higher are also displayed through stderr by default.\nThis boundary can be adjusted:\nfrom libensemble import logger\n\n# Only display messages with level >= ERROR\nlogger.set_stderr_level(\"ERROR\")\n\nstderr displaying can be effectively disabled by setting the stderr level to CRITICAL.\n\nLogger Module\n\nlogger.set_level(level)\uf0c1\nSets libEnsemble logging level\n\nParameters:\nlevel (int)\n\nReturn type:\nNone\n\nlogger.get_level()\uf0c1\nReturns libEnsemble logging level\n\nReturn type:\nint\n\nlogger.set_filename(filename)\uf0c1\nSets logger filename if loggers not yet created, else None\n\nParameters:\nfilename (str)\n\nReturn type:\nNone\n\nlogger.set_directory(dirname)\uf0c1\nSets target directory to contain logfiles if loggers not yet created\n\nParameters:\ndirname (str)\n\nReturn type:\nNone\n\nlogger.set_stderr_level(level)\uf0c1\nSets logger to mirror certain messages to stderr\n\nParameters:\nlevel (int)\n\nReturn type:\nNone\n\nlogger.get_stderr_level()\uf0c1\nReturns libEnsemble stderr logging level\n\nReturn type:\nint\n\nNote\nThe scripts directory, in the libEnsemble project root directory,\ncontains scripts to compare outputs and create plots based on the ensemble output.\n\nAnalysis Utilities\uf0c1\n\nAnalysis Utilities\nTiming analysis scripts\nNote that all plotting scripts produce a file rather than opening a plot\ninteractively.\nThe following scripts must be run in the directory with the libE_stats.txt\nfile. They extract and plot information from that file.\n\nplot_libe_calcs_util_v_time.py: Extracts worker utilization vs. time plot\n(with one-second sampling). Shows the number of workers running user sim or\ngen functions over time.\nplot_libe_tasks_util_v_time.py: Extracts launched task utilization v time\nplot (with one-second sampling).", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4321, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "97a4caad-df27-4600-bf6a-2a48a00166f1": {"__data__": {"id_": "97a4caad-df27-4600-bf6a-2a48a00166f1", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/history_output_logging.html", "file_name": "history_output_logging.html", "file_type": "text/html", "file_size": 28729, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "af92ea33-101d-4c53-9ee7-e49d2fca3886", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/history_output_logging.html", "file_name": "history_output_logging.html", "file_type": "text/html", "file_size": 28729, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "65597cca1c6271e54309869e94080424cd44257aa09bf9e5c5c3e2a93c80dc38", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "43dad33a-9752-4c8f-bba3-561a11ed52db", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/history_output_logging.html", "file_name": "history_output_logging.html", "file_type": "text/html", "file_size": 28729, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "2613af2ed59144c40175e2f8e183ab04504925a2aa59afa95eba2c047c86ac54", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Analysis Utilities\uf0c1\n\nAnalysis Utilities\nTiming analysis scripts\nNote that all plotting scripts produce a file rather than opening a plot\ninteractively.\nThe following scripts must be run in the directory with the libE_stats.txt\nfile. They extract and plot information from that file.\n\nplot_libe_calcs_util_v_time.py: Extracts worker utilization vs. time plot\n(with one-second sampling). Shows the number of workers running user sim or\ngen functions over time.\nplot_libe_tasks_util_v_time.py: Extracts launched task utilization v time\nplot (with one-second sampling). Shows the number of workers with active\ntasks, launched via the executor, over time.\nplot_libe_histogram.py: Creates histogram showing the number of\ncompleted/killed/failed user calculations binned by run time.\n\nResults analysis scripts\n\nprint_npy.py: Prints to screen from a given *.npy file containing a\nNumPy structured array. Use done to print only the lines containing\n\"sim_ended\" points. Example:\n./print_npy.py run_libe_forces_results_History_length=1000_evals=8.npy done\n\nprint_fields.py: Prints to screen from a given *.npy file containing\na NumPy structured array. This is a more versatile version of print_npy.py\nthat allows the user to select fields to print and boolean conditions determining\nwhich rows are printed (see ./print_fields.py -h for usage).\ncompare_npy.py: Compares either two provided *.npy files or one\nprovided *.npy file with an expected results file (by default located at\n../expected.npy). A tolerance is given on floating-point results, and NANs are\ncompared as equal. Variable fields (such as those containing a time) are\nignored. These fields may need to be modified depending on the user\u2019s history\narray.\nplot_pareto_2d.py: Loop through objective points in f and extract the Pareto\nfront. Arguments are an *.npy file and a budget.\nplot_pareto_3d.py: Loop through objective points in f and extract the Pareto\nfront. Arguments are an *.npy file and a budget.\nprint_pickle.py: Prints to screen from a given *.pickle file. Example:\n./print_pickle.py persis_info_length=1000_evals=1000_workers=2.pickle\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 3756, "end_char_idx": 5982, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "12b7bb86-c8ac-4e81-a38e-5aa3f4b5a111": {"__data__": {"id_": "12b7bb86-c8ac-4e81-a38e-5aa3f4b5a111", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/index.html", "file_name": "index.html", "file_type": "text/html", "file_size": 15055, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "52970540-8c82-4048-8a12-07d33a8416bf", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/index.html", "file_name": "index.html", "file_type": "text/html", "file_size": 15055, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "c9e2300434553129ae506864c97c35ea536393b8574ff91d66f8c03d40ee6c24", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "libEnsemble \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nlibEnsemble\n\n View page source\n\nlibEnsemble\uf0c1\nA complete toolkit for dynamic ensembles of calculations\n\nNew to libEnsemble? Start here.\nTry out libEnsemble with a tutorial.\nGo in depth by reading the full overview.\nSee the FAQ for common questions and answers, errors, and resolutions.\nCheck us out on GitHub.\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1707, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "023bc0a8-6a61-4f36-974d-371936b38a2c": {"__data__": {"id_": "023bc0a8-6a61-4f36-974d-371936b38a2c", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/introduction.html", "file_name": "introduction.html", "file_type": "text/html", "file_size": 27571, "creation_date": "2025-11-25", "last_modified_date": "2025-07-01"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7aa81704-b92f-4d01-875d-4132a2da7148", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/introduction.html", "file_name": "introduction.html", "file_type": "text/html", "file_size": 27571, "creation_date": "2025-11-25", "last_modified_date": "2025-07-01"}, "hash": "5194889851a4ccbd5d178674ac0446d01a9fbda4cf54e45e0635f4ab5fafd6ab", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "23cd5d40-952c-4731-b2d9-0084ca938a5c", "node_type": "1", "metadata": {}, "hash": "ef417c0a7d0eb90e4f0b20633c06bd2465c398ea2fe8b4eee351b64357eccb1e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "libEnsemble: A complete toolkit for dynamic ensembles of calculations \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nInstallation\nBasic Usage\nResources\n\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nlibEnsemble: A complete toolkit for dynamic ensembles of calculations\n\n View page source\n\nlibEnsemble: A complete toolkit for dynamic ensembles of calculations\uf0c1\nlibEnsemble empowers model-driven ensembles to solve design, decision,\nand inference problems on the world\u2019s leading supercomputers such as Frontier, Aurora, and Perlmutter.\n\nDynamic ensembles: Generate parallel tasks on-the-fly based on previous computations.\nExtreme portability and scaling: Run on or across laptops, clusters, and leadership-class machines.\nHeterogeneous computing: Dynamically and portably assign CPUs, GPUs, or multiple nodes.\nApplication monitoring: Ensemble members can run, monitor, and cancel apps.\nData-flow between tasks: Running ensemble members can send and receive data.\nLow start-up cost: No additional background services or processes required.\n\nQuickstart\nNew: Try out the to generate customized scripts for running\nensembles with your MPI applications.\n\nInstallation\uf0c1\nInstall libEnsemble and its dependencies from PyPI using pip:\npip install libensemble\n\nOther install methods are described in the docs.\n\nBasic Usage\uf0c1\nCreate an Ensemble, then customize it with general settings, simulation and generator parameters,\nand an exit condition. Run the following four-worker example via python this_file.py:\nimport numpy as np\n\nfrom libensemble import Ensemble\nfrom libensemble.gen_funcs.sampling import uniform_random_sample\nfrom libensemble.sim_funcs.six_hump_camel import six_hump_camel\nfrom libensemble.specs import ExitCriteria, GenSpecs, LibeSpecs, SimSpecs\n\nif __name__ == \"__main__\":\n\n libE_specs = LibeSpecs(nworkers=4)\n\n sim_specs = SimSpecs(\n sim_f=six_hump_camel,\n inputs=[\"x\"],\n outputs=[(\"f\", float)],\n )\n\n gen_specs = GenSpecs(\n gen_f=uniform_random_sample,\n outputs=[(\"x\", float, 2)],\n user={\n \"gen_batch_size\": 50,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n )\n\n exit_criteria = ExitCriteria(sim_max=100)\n\n sampling = Ensemble(\n libE_specs=libE_specs,\n sim_specs=sim_specs,\n gen_specs=gen_specs,\n exit_criteria=exit_criteria,\n )\n\n sampling.add_random_streams()\n sampling.run()\n\n if sampling.is_manager:\n sampling.save_output(__file__)\n print(\"Some output data:\\n\", sampling.H[[\"x\", \"f\"]][:10])\n\nTry some other examples live in Colab.\n\nDescription\nTry online\n\nSimple Ensemble that makes a Sine wave.\n\nEnsemble with an MPI application.\n\nOptimization example that finds multiple minima.\n\nSurrogate model generation with gpCAM.\n\nThere are many more examples in the regression tests and Community Examples repository.\n\nResources\uf0c1\nSupport:\n\nAsk questions or report issues on GitHub.\nEmail libEnsemble@lists.mcs.anl.gov to request libEnsemble Slack page.\nJoin the libEnsemble mailing list for updates about new releases.\n\nFurther Information:\n\nDocumentation is provided by ReadtheDocs.\nContributions to libEnsemble are welcome.\nBrowse production functions and workflows in the Community Examples repository.\n\nCite libEnsemble:\n@article{Hudson2022,\n title = {{libEnsemble}: A Library to Coordinate the Concurrent\n Evaluation of Dynamic Ensembles of Calculations},\n author = {Stephen Hudson and Jeffrey Larson and John-Luke Navarro and Stefan M. Wild},\n journal = {{IEEE} Transactions on Parallel and Distributed Systems},\n volume = {33},\n number = {4},\n pages = {977--988},\n year = {2022},\n doi = {10.1109/tpds.2021.3082815}\n}\n\nSee the tutorial for a step-by-step beginners guide.\nSee the user guide for more information.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4188, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "23cd5d40-952c-4731-b2d9-0084ca938a5c": {"__data__": {"id_": "23cd5d40-952c-4731-b2d9-0084ca938a5c", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/introduction.html", "file_name": "introduction.html", "file_type": "text/html", "file_size": 27571, "creation_date": "2025-11-25", "last_modified_date": "2025-07-01"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7aa81704-b92f-4d01-875d-4132a2da7148", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/introduction.html", "file_name": "introduction.html", "file_type": "text/html", "file_size": 27571, "creation_date": "2025-11-25", "last_modified_date": "2025-07-01"}, "hash": "5194889851a4ccbd5d178674ac0446d01a9fbda4cf54e45e0635f4ab5fafd6ab", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "023bc0a8-6a61-4f36-974d-371936b38a2c", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/introduction.html", "file_name": "introduction.html", "file_type": "text/html", "file_size": 27571, "creation_date": "2025-11-25", "last_modified_date": "2025-07-01"}, "hash": "74377702bba77a395047b2c3da5941299e98a284fdb8bd75085fca59a817bbd5", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Email libEnsemble@lists.mcs.anl.gov to request libEnsemble Slack page.\nJoin the libEnsemble mailing list for updates about new releases.\n\nFurther Information:\n\nDocumentation is provided by ReadtheDocs.\nContributions to libEnsemble are welcome.\nBrowse production functions and workflows in the Community Examples repository.\n\nCite libEnsemble:\n@article{Hudson2022,\n title = {{libEnsemble}: A Library to Coordinate the Concurrent\n Evaluation of Dynamic Ensembles of Calculations},\n author = {Stephen Hudson and Jeffrey Larson and John-Luke Navarro and Stefan M. Wild},\n journal = {{IEEE} Transactions on Parallel and Distributed Systems},\n volume = {33},\n number = {4},\n pages = {977--988},\n year = {2022},\n doi = {10.1109/tpds.2021.3082815}\n}\n\nSee the tutorial for a step-by-step beginners guide.\nSee the user guide for more information.\n\nExample Compatible Packages\nlibEnsemble and the Community Examples repository include example generator\nfunctions for the following libraries:\n\nAPOSMM Asynchronously parallel optimization solver for finding multiple minima. Supported local optimization routines include:\n\nDFO-LS Derivative-free solver for (bound constrained) nonlinear least-squares minimization\nNLopt Library for nonlinear optimization, providing a common interface for various methods\nscipy.optimize Open-source solvers for nonlinear problems, linear programming,\nconstrained and nonlinear least-squares, root finding, and curve fitting.\nPETSc/TAO Routines for the scalable (parallel) solution of scientific applications\n\nDEAP Distributed evolutionary algorithms\nDistributed optimization methods for minimizing sums of convex functions. Methods include:\n\nPrimal-dual sliding (https://arxiv.org/pdf/2101.00143).\nDistributed gradient descent with gradient tracking (https://arxiv.org/abs/1908.11444).\nProximal sliding (https://arxiv.org/abs/1406.0919).\n\nECNoise Estimating Computational Noise in Numerical Simulations\nSurmise Modular Bayesian calibration/inference framework\nTasmanian Toolkit for Adaptive Stochastic Modeling and Non-Intrusive ApproximatioN\nVTMOP Fortran package for large-scale multiobjective multidisciplinary design optimization\n\nlibEnsemble has also been used to coordinate many computationally expensive\nsimulations. Select examples include:\n\nOPAL Object Oriented Parallel Accelerator Library. (See this IPAC manuscript.)\nWarpX Advanced electromagnetic particle-in-cell code.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 3352, "end_char_idx": 5881, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "8a9390dc-0962-4c0e-873e-a736ec323419": {"__data__": {"id_": "8a9390dc-0962-4c0e-873e-a736ec323419", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/known_issues.html", "file_name": "known_issues.html", "file_type": "text/html", "file_size": 11558, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7ef6172a-6e7a-4f03-b01c-df2aeff666ce", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/known_issues.html", "file_name": "known_issues.html", "file_type": "text/html", "file_size": 11558, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "6278ba540e59c5f2a6e53ced59946f277ac53dfeebb984921a0726a0e48a9b30", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Known Issues \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nKnown Issues\n\n View page source\n\nKnown Issues\uf0c1\nThe following selection describes known bugs, errors, or other difficulties that\nmay occur when using libEnsemble.\n\nPlatforms using SLURM version 23.02 experience a pickle error when using\nmpi4py comms. Disabling matching probes via the environment variable\nexport MPI4PY_RC_RECV_MPROBE=0 or adding mpi4py.rc.recv_mprobe = False\nat the top of the calling script should resolve this error. If using the MPI\nexecutor and multiple workers per node, some users may experience failed\napplications with the message\nsrun: error: CPU binding outside of job step allocation, allocated in\nthe application\u2019s standard error. This is being investigated. If this happens\nwe recommend using local comms in place of mpi4py.\nWhen using the Executor: Open-MPI does not work with direct MPI task\nsubmissions in mpi4py comms mode, since Open-MPI does not support nested MPI\nexecutions. Use local mode instead.\nLocal comms mode (multiprocessing) may fail if MPI is initialized before\nforking processors. This is thought to be responsible for issues combining\nmultiprocessing with PETSc on some platforms.\nRemote detection of logical cores via LSB_HOSTS (e.g., Summit) returns the\nnumber of physical cores as SMT info not available.\nTCP mode does not support\n(1) more than one libEnsemble call in a given script or\n(2) the auto-resources option to the Executor.\nlibEnsemble may hang on systems with matching probes not enabled on the\nnative fabric, like on Intel\u2019s Truescale (TMI) fabric for instance. See the\nFAQ for more information.\nWe currently recommended running in Central mode on Bridges as distributed\nruns are experiencing hangs.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2453, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "26f668db-8470-446d-bb28-b11cafae939e": {"__data__": {"id_": "26f668db-8470-446d-bb28-b11cafae939e", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/libe_module.html", "file_name": "libe_module.html", "file_type": "text/html", "file_size": 73152, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "793a37b7-3c84-47d8-a51e-cd66a09d0150", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/libe_module.html", "file_name": "libe_module.html", "file_type": "text/html", "file_size": 73152, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "739d94f7001b74e2c866a40ffe24beb00d42d32ca05ce9c09e87449f3ac4a519", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "32c6f284-2718-4373-ad5d-0abd50743265", "node_type": "1", "metadata": {}, "hash": "ebb41a26e429ba97a6fb6a3cddfe0cc554c67bd860f6db18dd0af1deb855dd3d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Running an Ensemble \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nEnsemble\nEnsemble.ready()\nEnsemble.run()\nEnsemble.from_yaml()\nEnsemble.from_toml()\nEnsemble.from_json()\nEnsemble.add_random_streams()\nEnsemble.save_output()\n\nlibE()\n\nConfiguring libEnsemble\nOutput Management\nHistory Array\nResource Manager\nWriting User Functions\nExecutors\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nRunning an Ensemble\n\n View page source\n\nRunning an Ensemble\uf0c1\nlibEnsemble features two approaches to run an ensemble. We recommend the newer Ensemble class,\nbut will continue to support libE() for backward compatibility.\n\nEnsemble Class\n\nclass libensemble.ensemble.Ensemble\uf0c1\nThe primary object for a libEnsemble workflow.\nParses and validates settings, sets up logging, and maintains output.\n\nExample\n 1import numpy as np\n 2\n 3from libensemble import Ensemble\n 4from libensemble.gen_funcs.sampling import latin_hypercube_sample\n 5from libensemble.sim_funcs.simple_sim import norm_eval\n 6from libensemble.specs import ExitCriteria, GenSpecs, LibeSpecs, SimSpecs\n 7\n 8libE_specs = LibeSpecs(nworkers=4)\n 9sampling = Ensemble(libE_specs=libE_specs)\n10sampling.sim_specs = SimSpecs(\n11 sim_f=norm_eval,\n12 inputs=[\"x\"],\n13 outputs=[(\"f\", float)],\n14)\n15sampling.gen_specs = GenSpecs(\n16 gen_f=latin_hypercube_sample,\n17 outputs=[(\"x\", float, (1,))],\n18 user={\n19 \"gen_batch_size\": 50,\n20 \"lb\": np.array([-3]),\n21 \"ub\": np.array([3]),\n22 },\n23)\n24\n25sampling.add_random_streams()\n26sampling.exit_criteria = ExitCriteria(sim_max=100)\n27\n28if __name__ == \"__main__\":\n29 sampling.run()\n30 sampling.save_output(__file__)\n\nRun the above example via python this_file.py.\nInstead of using the libE_specs line, you can also use sampling = Ensemble(parse_args=True)\nand run via python this_file.py -n 4 (4 workers). The parse_args=True parameter\ninstructs the Ensemble class to read command-line arguments.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2508, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "32c6f284-2718-4373-ad5d-0abd50743265": {"__data__": {"id_": "32c6f284-2718-4373-ad5d-0abd50743265", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/libe_module.html", "file_name": "libe_module.html", "file_type": "text/html", "file_size": 73152, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "793a37b7-3c84-47d8-a51e-cd66a09d0150", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/libe_module.html", "file_name": "libe_module.html", "file_type": "text/html", "file_size": 73152, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "739d94f7001b74e2c866a40ffe24beb00d42d32ca05ce9c09e87449f3ac4a519", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "26f668db-8470-446d-bb28-b11cafae939e", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/libe_module.html", "file_name": "libe_module.html", "file_type": "text/html", "file_size": 73152, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "f999b4cd81032f1ce1e45d92f4e3d5a909fc32246a6ee102610dae869c249b32", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4a8fc2de-9da8-491a-b0ff-44cf94954797", "node_type": "1", "metadata": {}, "hash": "3957272d44271b00c62ea605aef90987ed7154a55582385b11cae198ae939ebf", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Instead of using the libE_specs line, you can also use sampling = Ensemble(parse_args=True)\nand run via python this_file.py -n 4 (4 workers). The parse_args=True parameter\ninstructs the Ensemble class to read command-line arguments.\nConfigure by:\n\nOption 1: Providing parameters on instantiation\n 1from libensemble import Ensemble\n 2from my_simulator import sim_find_energy\n 3\n 4sim_specs = {\n 5 \"sim_f\": sim_find_energy,\n 6 \"in\": [\"x\"],\n 7 \"out\": [(\"y\", float)],\n 8}\n 9\n10experiment = Ensemble(sim_specs=sim_specs)\n\nOption 2: Assigning parameters to an instance\n 1from libensemble import Ensemble, SimSpecs\n 2from my_simulator import sim_find_energy\n 3\n 4sim_specs = SimSpecs(\n 5 sim_f=sim_find_energy,\n 6 inputs=[\"x\"],\n 7 outputs=[(\"y\", float)],\n 8)\n 9\n10experiment = Ensemble()\n11experiment.sim_specs = sim_specs\n\nOption 3: Loading parameters from files\n1from libensemble import Ensemble\n2\n3experiment = Ensemble()\n4\n5my_experiment.from_yaml(\"my_parameters.yaml\")\n6# or...\n7my_experiment.from_toml(\"my_parameters.toml\")\n8# or...\n9my_experiment.from_json(\"my_parameters.json\")\n\nmy_parameters.yaml\n 1libE_specs:\n 2 save_every_k_gens: 20\n 3\n 4exit_criteria:\n 5 sim_max: 80\n 6\n 7gen_specs:\n 8 gen_f: generator.gen_random_sample\n 9 outputs:\n10 x:\n11 type: float\n12 size: 1\n13 user:\n14 gen_batch_size: 5\n15\n16sim_specs:\n17 sim_f: simulator.sim_find_sine\n18 inputs:\n19 - x\n20 outputs:\n21 y:\n22 type: float\n\nmy_parameters.toml\n 1[libE_specs]\n 2 save_every_k_gens = 300\n 3\n 4[exit_criteria]\n 5 sim_max = 80\n 6\n 7[gen_specs]\n 8 gen_f = \"generator.gen_random_sample\"\n 9 [gen_specs.outputs]\n10 [gen_specs.outputs.x]\n11 type = \"float\"\n12 size = 1\n13 [gen_specs.user]\n14 gen_batch_size = 5\n15\n16[sim_specs]\n17 sim_f = \"simulator.sim_find_sine\"\n18 inputs = [\"x\"]\n19 [sim_specs.outputs]\n20 [sim_specs.outputs.y]\n21 type = \"float\"\n\nmy_parameters.json\n 1{\n 2 \"libE_specs\": {\n 3 \"save_every_k_gens\": 300,\n 4 },\n 5 \"exit_criteria\": {\n 6 \"sim_max\": 80\n 7 },\n 8 \"gen_specs\": {\n 9 \"gen_f\": \"generator.gen_random_sample\",\n10 \"outputs\": {\n11 \"x\": {\n12 \"type\": \"float\",\n13 \"size\": 1\n14 }\n15 },\n16 \"user\": {\n17 \"gen_batch_size\": 5\n18 }\n19 },\n20 \"sim_specs\": {\n21 \"sim_f\": \"simulator.sim_find_sine\",\n22 \"inputs\": [\"x\"],\n23 \"outputs\": {\n24 \"f\": {\"type\": \"float\"}\n25 }\n26 }\n27}\n\nParameters:\n\nsim_specs (dict or SimSpecs) \u2013 Specifications for the simulation function\ngen_specs (dict or GenSpecs, Optional) \u2013 Specifications for the generator function\nexit_criteria (dict or ExitCriteria, Optional) \u2013 Tell libEnsemble when to stop a run\nlibE_specs (dict or LibeSpecs, Optional) \u2013 Specifications for libEnsemble\nalloc_specs (dict or AllocSpecs, Optional) \u2013 Specifications for the allocation function\npersis_info (dict, Optional) \u2013 Persistent information to be passed between user function instances\n(example)\nexecutor (Executor, Optional) \u2013 libEnsemble Executor instance for use within simulation or generator functions\nH0 (NumPy structured array, Optional) \u2013 A libEnsemble history to be prepended to this run\u2019s history\n(example)\nparse_args (bool, Optional) \u2013 Read nworkers, comms, and other arguments from the command-line. For MPI, calculate nworkers\nand set the is_manager Boolean attribute on MPI rank 0. See the parse_args\ndocs for more information.", "mimetype": "text/plain", "start_char_idx": 2276, "end_char_idx": 5499, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "4a8fc2de-9da8-491a-b0ff-44cf94954797": {"__data__": {"id_": "4a8fc2de-9da8-491a-b0ff-44cf94954797", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/libe_module.html", "file_name": "libe_module.html", "file_type": "text/html", "file_size": 73152, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "793a37b7-3c84-47d8-a51e-cd66a09d0150", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/libe_module.html", "file_name": "libe_module.html", "file_type": "text/html", "file_size": 73152, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "739d94f7001b74e2c866a40ffe24beb00d42d32ca05ce9c09e87449f3ac4a519", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "32c6f284-2718-4373-ad5d-0abd50743265", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/libe_module.html", "file_name": "libe_module.html", "file_type": "text/html", "file_size": 73152, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "43aa44f76499947dfdc0cd60cf15ec7555c81587eb9ff9687a9099bc0f51c430", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e6633e68-de8e-4cd8-abca-018180f98a5b", "node_type": "1", "metadata": {}, "hash": "0ac8106a2ece03cdefb2b6b9c0b5abc941bc4706adf7ab50eebe7106f2338833", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "For MPI, calculate nworkers\nand set the is_manager Boolean attribute on MPI rank 0. See the parse_args\ndocs for more information.\n\nready()\uf0c1\nQuickly verify that all necessary data has been provided\n\nReturn type:\nbool\n\nrun()\uf0c1\nInitializes libEnsemble.\n\nMPI/comms Notes\nManager\u2013worker intercommunications are parsed from the comms key of\nlibE_specs. An MPI runtime is assumed by default\nif --comms local wasn\u2019t specified on the command-line or in libE_specs.\nIf a MPI communicator was provided in libE_specs, then each .run() call\nwill initiate intercommunications on a duplicate of that communicator.\nOtherwise, a duplicate of COMM_WORLD will be used.\n\nReturns:\n\nH (NumPy structured array) \u2013 History array storing rows for each point.\n(example)\npersis_info (dict) \u2013 Final state of persistent information\n(example)\nexit_flag (int) \u2013 Flag containing final task status\n0 = No errors\n1 = Exception occurred\n2 = Manager timed out and ended simulation\n3 = Current process is not in libEnsemble MPI communicator\n\nReturn type:\n(numpy.ndarray[tuple[int, \u2026], numpy.dtype[+_ScalarType_co]], <class \u2018dict\u2019>, <class \u2018int\u2019>)\n\nfrom_yaml(file_path)\uf0c1\nParameterizes libEnsemble from yaml file\n\nParameters:\nfile_path (str)\n\nfrom_toml(file_path)\uf0c1\nParameterizes libEnsemble from toml file\n\nParameters:\nfile_path (str)\n\nfrom_json(file_path)\uf0c1\nParameterizes libEnsemble from json file\n\nParameters:\nfile_path (str)\n\nadd_random_streams(num_streams=0, seed='')\uf0c1\nAdds np.random generators for each worker ID to self.persis_info.\n\nParameters:\n\nnum_streams (int, Optional) \u2013 Number of matching worker ID and random stream entries to create. Defaults to\nself.nworkers.\nseed (str, Optional) \u2013 Seed for NumPy\u2019s RNG.\n\nsave_output(basename, append_attrs=True)\uf0c1\nWrites out History array and persis_info to files.\nIf using a workflow_dir, will place with specified filename in that directory.\n\nParameters:\n\nFormat (<basename>_results_History_length=<length>_evals=<Completed evals>_ranks=<nworkers>)\nbasename (str)\nappend_attrs=False (set)\nFormat\nbasename\nappend_attrs (bool)\n\nlibE()\nThe libE module is the outer libEnsemble routine.\nThis module sets up the manager and the team of workers, configured according\nto the contents of libE_specs. The manager/worker\ncommunications scheme used in libEnsemble is parsed from the comms key if\npresent, with valid values being mpi, local (for multiprocessing), or\ntcp.\nMPI is the default if nworkers is not given. However, if libE_specs[\"nworkers\"]\nis specified, then local comms will be used unless a parallel MPI environment\nis detected.\nFor mpi comms, if a communicator is specified, each call to this module\nwill initiate manager/worker communications on a duplicate of that\ncommunicator. Otherwise, a duplicate of COMM_WORLD will be used.\nIn the vast majority of cases, programming with libEnsemble involves the creation\nof a calling script, a Python file where libEnsemble is parameterized via\nthe various specification dictionaries (e.g. libE_specs,\nsim_specs, and gen_specs).\nThe outer libEnsemble routine libE() is imported and\ncalled with such dictionaries to initiate libEnsemble.", "mimetype": "text/plain", "start_char_idx": 5370, "end_char_idx": 8463, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "e6633e68-de8e-4cd8-abca-018180f98a5b": {"__data__": {"id_": "e6633e68-de8e-4cd8-abca-018180f98a5b", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/libe_module.html", "file_name": "libe_module.html", "file_type": "text/html", "file_size": 73152, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "793a37b7-3c84-47d8-a51e-cd66a09d0150", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/libe_module.html", "file_name": "libe_module.html", "file_type": "text/html", "file_size": 73152, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "739d94f7001b74e2c866a40ffe24beb00d42d32ca05ce9c09e87449f3ac4a519", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4a8fc2de-9da8-491a-b0ff-44cf94954797", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/libe_module.html", "file_name": "libe_module.html", "file_type": "text/html", "file_size": 73152, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "8c511ba69ba3b4e8e4ef8a1da2d79e2218d7e5543f5caf44b527a200cc4e0727", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "628d0f2f-665d-44e8-9c0b-2982b6fb2960", "node_type": "1", "metadata": {}, "hash": "1f85d0c8f9a44af9908cf419d496bf98b5085c8d31acf126422a4db7be0a1b8c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "The manager/worker\ncommunications scheme used in libEnsemble is parsed from the comms key if\npresent, with valid values being mpi, local (for multiprocessing), or\ntcp.\nMPI is the default if nworkers is not given. However, if libE_specs[\"nworkers\"]\nis specified, then local comms will be used unless a parallel MPI environment\nis detected.\nFor mpi comms, if a communicator is specified, each call to this module\nwill initiate manager/worker communications on a duplicate of that\ncommunicator. Otherwise, a duplicate of COMM_WORLD will be used.\nIn the vast majority of cases, programming with libEnsemble involves the creation\nof a calling script, a Python file where libEnsemble is parameterized via\nthe various specification dictionaries (e.g. libE_specs,\nsim_specs, and gen_specs).\nThe outer libEnsemble routine libE() is imported and\ncalled with such dictionaries to initiate libEnsemble. A simple calling script\n(from the first tutorial) may resemble:\n 1import numpy as np\n 2from libensemble.libE import libE\n 3from generator import gen_random_sample\n 4from simulator import sim_find_sine\n 5from libensemble.tools import add_unique_random_streams\n 6\n 7nworkers, is_manager, libE_specs, _ = parse_args()\n 8\n 9libE_specs[\"save_every_k_gens\"] = 20\n10\n11gen_specs = {\n12 \"gen_f\": gen_random_sample,\n13 \"out\": [(\"x\", float, (1,))],\n14 \"user\": {\"lower\": np.array([-3]), \"upper\": np.array([3]), \"gen_batch_size\": 5},\n15}\n16\n17sim_specs = {\"sim_f\": sim_find_sine, \"in\": [\"x\"], \"out\": [(\"y\", float)]}\n18\n19persis_info = add_unique_random_streams({}, nworkers + 1)\n20\n21exit_criteria = {\"sim_max\": 80}\n22\n23H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs)\n\nThis will initiate libEnsemble with a Manager and nworkers workers (parsed from\nthe command line), and runs on laptops or supercomputers. If an exception is\nencountered by the manager or workers, the history array is dumped to file, and\nMPI abort is called.\nOn macOS (since Python 3.8) and Windows, the default multiprocessing start method is \"spawn\"\nand you must place most calling script code (or just libE() / Ensemble().run() at a minimum) in\nan if __name__ == \"__main__:\" block.\nTherefore a calling script that is universal across\nall platforms and comms-types may resemble:\n 1import numpy as np\n 2from libensemble.libE import libE\n 3from generator import gen_random_sample\n 4from simulator import sim_find_sine\n 5from libensemble.tools import add_unique_random_streams\n 6\n 7if __name__ == \"__main__\":\n 8 nworkers, is_manager, libE_specs, _ = parse_args()\n 9\n10 libE_specs[\"save_every_k_gens\"] = 20\n11\n12 gen_specs = {\n13 \"gen_f\": gen_random_sample,\n14 \"out\": [(\"x\", float, (1,))],\n15 \"user\": {\n16 \"lower\": np.array([-3]),\n17 \"upper\": np.array([3]),\n18 \"gen_batch_size\": 5,\n19 },\n20 }\n21\n22 sim_specs = {\n23 \"sim_f\": sim_find_sine,\n24 \"in\": [\"x\"],\n25 \"out\": [(\"y\", float)],\n26 }\n27\n28 persis_info = add_unique_random_streams({}, nworkers + 1)\n29\n30 exit_criteria = {\"sim_max\": 80}\n31\n32 H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs)\n\nAlternatively, you may set the multiprocessing start method to \"fork\" via the following:\n1from multiprocessing import set_start_method\n2\n3set_start_method(\"fork\")\n\nBut note that this is incompatible with some libraries.\nSee below for the complete traditional API.", "mimetype": "text/plain", "start_char_idx": 7573, "end_char_idx": 10932, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "628d0f2f-665d-44e8-9c0b-2982b6fb2960": {"__data__": {"id_": "628d0f2f-665d-44e8-9c0b-2982b6fb2960", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/libe_module.html", "file_name": "libe_module.html", "file_type": "text/html", "file_size": 73152, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "793a37b7-3c84-47d8-a51e-cd66a09d0150", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/libe_module.html", "file_name": "libe_module.html", "file_type": "text/html", "file_size": 73152, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "739d94f7001b74e2c866a40ffe24beb00d42d32ca05ce9c09e87449f3ac4a519", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e6633e68-de8e-4cd8-abca-018180f98a5b", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/libe_module.html", "file_name": "libe_module.html", "file_type": "text/html", "file_size": 73152, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "ce96b5d3723c13a31de716d5115855d380f3b76c8f032cfeb3f07821ba9829d0", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "See below for the complete traditional API.\n\nlibensemble.libE.libE(sim_specs, gen_specs, exit_criteria, persis_info={}, alloc_specs=AllocSpecs(alloc_f=<function give_sim_work_first>, user={'num_active_gens': 1}, outputs=[]), libE_specs={}, H0=None)\uf0c1\n\nParameters:\n\nsim_specs (dict or SimSpecs) \u2013 Specifications for the simulation function\n(example)\ngen_specs (dict or GenSpecs, Optional) \u2013 Specifications for the generator function\n(example)\nexit_criteria (dict or ExitCriteria, Optional) \u2013 Tell libEnsemble when to stop a run\n(example)\npersis_info (dict, Optional) \u2013 Persistent information to be passed between user functions\n(example)\nalloc_specs (dict or AllocSpecs, Optional) \u2013 Specifications for the allocation function\n(example)\nlibE_specs (dict or LibeSpecs, Optional) \u2013 Specifications for libEnsemble\n(example)\nH0 \u2013 A libEnsemble history to be prepended to this run\u2019s history\n(example)\n\nReturns:\n\nH (NumPy structured array) \u2013 History array storing rows for each point.\n(example)\npersis_info (dict) \u2013 Final state of persistent information\n(example)\nexit_flag (int) \u2013 Flag containing final task status\n0 = No errors\n1 = Exception occurred\n2 = Manager timed out and ended simulation\n3 = Current process is not in libEnsemble MPI communicator\n\nReturn type:\n(<class \u2018numpy.ndarray\u2019>, <class \u2018dict\u2019>, <class \u2018int\u2019>)\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 10889, "end_char_idx": 12332, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "5f4ae3e2-1c7d-46c6-a3b3-be306d075c07": {"__data__": {"id_": "5f4ae3e2-1c7d-46c6-a3b3-be306d075c07", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/overview_usecases.html", "file_name": "overview_usecases.html", "file_type": "text/html", "file_size": 21768, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9ed122ca-445a-487c-b154-135cc4e4d35f", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/overview_usecases.html", "file_name": "overview_usecases.html", "file_type": "text/html", "file_size": 21768, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "c5b02901ed43017ecd5f01a2f87824e4dc376224c3dca2764fe214d7f654ca57", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "482ee1f6-d213-48b7-acbf-3918dcfa8b06", "node_type": "1", "metadata": {}, "hash": "dbd02e40dc79911c50e93ef64aaafbaaa538ee1096cb910f3617c72b60a7706a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Understanding libEnsemble \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nManager, Workers, and User Functions\nExample Use Cases\nGlossary\n\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nUnderstanding libEnsemble\n\n View page source\n\nUnderstanding libEnsemble\uf0c1\n\nManager, Workers, and User Functions\uf0c1\nlibEnsemble\u2019s manager allocates work to workers,\nwhich perform computations via user functions:\n\ngenerator: Generates inputs to the simulator (sim_f)\nsimulator: Performs an evaluation based on parameters from the generator (gen_f)\nallocator: Decides whether a simulator or generator should be\ncalled (and with what inputs/resources) as workers become available\n\nThe default allocator (alloc_f) instructs workers to run the simulator on the\nhighest priority work from the generator. If a worker is idle and there is\nno work, that worker is instructed to call the generator.\n\nAn executor interface is available so user functions\ncan execute and monitor external applications.\nlibEnsemble uses a NumPy structured array known as the history array\nto keep a record of all simulations. The global history array is stored on the\nmanager, while selected rows and fields of this array are passed to and from user functions.\n\nExample Use Cases\uf0c1\nBelow are some expected libEnsemble use cases that we support (or are working\nto support):\n\nClick Here for Use-Cases\n\nA user wants to optimize a simulation calculation. The simulation may\nalready be using parallel resources but not a large fraction of some\ncomputer. libEnsemble can coordinate the concurrent evaluation of the\nsimulation sim_f at various parameter values based on candidate parameter\nvalues from gen_f (possibly after each sim_f output).\nA user has a gen_f that produces meshes for a\nsim_f. Given the sim_f output, the gen_f can refine a mesh or\nproduce a new mesh. libEnsemble can ensure that the calculated meshes can be\nused by multiple simulations without requiring moving data.\nA user wants to evaluate a simulation sim_f with different sets of\nparameters, each drawn from a set of possible values. Some parameter values\nare known to cause the simulation to fail. libEnsemble can stop\nunresponsive evaluations and recover computational resources for future\nevaluations. The gen_f can possibly update the sampling after discovering\nregions where evaluations of sim_f fail.\nA user has a simulation sim_f that requires calculating multiple\nexpensive quantities, some of which depend on other quantities. The sim_f\ncan observe intermediate quantities to stop related calculations and\npreempt future calculations associated with poor parameter values.\nA user has a sim_f with multiple fidelities, with the higher-fidelity\nevaluations requiring more computational resources, and a\ngen_f/alloc_f that decides which parameters should be evaluated and\nat what fidelity level. libEnsemble can coordinate these evaluations without\nrequiring the user to know parallel programming.\nA user wishes to identify multiple local optima for a sim_f. Furthermore,\nsensitivity analysis is desired at each identified optimum. libEnsemble can\nuse the points from the APOSMM gen_f to identify optima; and after a\npoint is ruled to be an optimum, a different gen_f can produce a\ncollection of parameters necessary for sensitivity analysis of sim_f.\n\nCombinations of these use cases are supported as well. An example of\nsuch a combination is using libEnsemble to solve an optimization problem that\nrelies on simulations that fail frequently.\n\nGlossary\uf0c1\nHere we define some terms used throughout libEnsemble\u2019s code and documentation.\nAlthough many of these terms seem straightforward, defining such terms assists\nwith keeping confusion to a minimum when communicating about libEnsemble and\nits capabilities.\n\nClick Here for Glossary\n\nManager: Single libEnsemble process facilitating communication between\nother processes. Within libEnsemble, the Manager process configures and\npasses work to and from the workers.\nWorker: libEnsemble processes responsible for performing units of work,\nwhich may include submitting or executing tasks.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4615, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "482ee1f6-d213-48b7-acbf-3918dcfa8b06": {"__data__": {"id_": "482ee1f6-d213-48b7-acbf-3918dcfa8b06", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/overview_usecases.html", "file_name": "overview_usecases.html", "file_type": "text/html", "file_size": 21768, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9ed122ca-445a-487c-b154-135cc4e4d35f", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/overview_usecases.html", "file_name": "overview_usecases.html", "file_type": "text/html", "file_size": 21768, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "c5b02901ed43017ecd5f01a2f87824e4dc376224c3dca2764fe214d7f654ca57", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5f4ae3e2-1c7d-46c6-a3b3-be306d075c07", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/overview_usecases.html", "file_name": "overview_usecases.html", "file_type": "text/html", "file_size": 21768, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "d29d6c1b0a42922745ee0d5377ecf7bb3d41a1a931f297e06f830a19bc065ae9", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Combinations of these use cases are supported as well. An example of\nsuch a combination is using libEnsemble to solve an optimization problem that\nrelies on simulations that fail frequently.\n\nGlossary\uf0c1\nHere we define some terms used throughout libEnsemble\u2019s code and documentation.\nAlthough many of these terms seem straightforward, defining such terms assists\nwith keeping confusion to a minimum when communicating about libEnsemble and\nits capabilities.\n\nClick Here for Glossary\n\nManager: Single libEnsemble process facilitating communication between\nother processes. Within libEnsemble, the Manager process configures and\npasses work to and from the workers.\nWorker: libEnsemble processes responsible for performing units of work,\nwhich may include submitting or executing tasks. Worker processes run\ngeneration and simulation routines, submit additional tasks for execution,\nand return results to the manager.\nCalling Script: libEnsemble is typically imported, parameterized, and\ninitiated in a single Python file referred to as a calling script. sim_f\nand gen_f functions are also commonly configured and parameterized here.\nUser function: A generator, simulator, or allocation function. These\nare Python functions that govern the libEnsemble workflow. They\nmust conform to the libEnsemble API for each respective user function, but otherwise can\nbe created or modified by the user. libEnsemble comes with many examples of\neach type of user function.\nExecutor: The executor can be used within user functions to provide a\nsimple, portable interface for running and managing user tasks (applications).\nThere are multiple executors including the base Executor and MPIExecutor.\nSubmit: Enqueue or indicate that one or more jobs or tasks need to be\nlaunched. When using the libEnsemble Executor, a submitted task is executed\nimmediately or queued for execution.\nTasks: Sub-processes or independent units of work. Workers perform\ntasks as directed by the manager; tasks may include submitting external\nprograms for execution using the Executor.\nPersistent: Typically, a worker communicates with the manager\nbefore and after initiating a user gen_f or sim_f calculation. However, user\nfunctions may also be constructed to communicate directly with the manager,\nfor example, to efficiently maintain and update data structures instead of\ncommunicating them between manager and worker. These calculations\nand the workers assigned to them are referred to as persistent.\nResource Manager libEnsemble has a built-in resource manager that can detect\n(or be provided with) a set of resources (e.g., a node-list). Resources are\ndivided up among workers (using resource sets) and can be dynamically\nreassigned.\nResource Set: The smallest unit of resources that can be assigned (and\ndynamically reassigned) to workers. By default it is the provisioned resources\ndivided by the number of workers (excluding any workers given in the\nzero_resource_workers libE_specs option). However, it can also be set\ndirectly by the num_resource_sets libE_specs option.\nSlot: The resource sets enumerated on a node (starting with zero). If\na resource set has more than one node, then each node is considered to have slot\nzero.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 3833, "end_char_idx": 7157, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a81bd2da-b118-47d5-85ec-c8a81e1c3b54": {"__data__": {"id_": "a81bd2da-b118-47d5-85ec-c8a81e1c3b54", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/aurora.html", "file_name": "aurora.html", "file_type": "text/html", "file_size": 24682, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a39db65f-0d48-4d96-8eb7-5322272e1128", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/aurora.html", "file_name": "aurora.html", "file_type": "text/html", "file_size": 24682, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "5289bd0a931d1a967f884d9eb729b5cd7c042011ddae24d279f60838e3c0a8ad", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8cab5ed0-f2da-4a4c-a495-a0b6c3b7a87e", "node_type": "1", "metadata": {}, "hash": "3a8a945a46ddaa37f3f9abd1ca1ca72e3d87a6d6cdfe04bb5251c9799f354967", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Aurora \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\nCentralized Running\nDistributed Running\nConfiguring the Run\nMapping Tasks to Resources\nZero-resource workers\nAssigning GPUs\nVarying resources\nOverriding Auto-Detection\nSystems with Launch/MOM Nodes\nGlobus Compute - Remote User Functions\nInstructions for Specific Platforms\nAurora\nConfiguring Python and Installation\nExample\nLive viewing GPU usage\nUsing tiles as GPUs\nRunning generator on the manager\nDynamic resource assignment\nDemonstration\n\nBebop\nFrontier\nImprov\nPerlmutter\nPolaris\nSummit (Decommissioned)\nlibEnsemble with SLURM\nExample Scheduler Submission Scripts\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nRunning on HPC Systems\nAurora\n\n View page source\n\nAurora\uf0c1\nAurora is an Intel/HPE EX supercomputer located in the ALCF at Argonne\nNational Laboratory. Each compute node contains two Intel (Sapphire Rapids)\nXeon CPUs and six Intel Xe GPUs (Ponte Vecchio), each with two tiles.\nThe PBS scheduler is used to submit jobs from login nodes to run on compute\nnodes.\n\nConfiguring Python and Installation\uf0c1\nTo obtain Python and create a virtual environment:\nmodule load frameworks\npython -m venv /path/to-venv --system-site-packages\n. /path/to-venv/bin/activate\n\nwhere /path/to-venv can be anywhere you have write access. For future sessions,\njust load the frameworks module and run the activate line.\nTo obtain libEnsemble:\npip install libensemble\n\nSee here for more information on advanced\noptions for installing libEnsemble, including using Spack.\n\nExample\uf0c1\nTo run the forces_gpu tutorial on\nAurora.\nTo obtain the example you can git clone libEnsemble - although only\nthe forces sub-directory is strictly needed:\ngit clone https://github.com/Libensemble/libensemble\ncd libensemble/libensemble/tests/scaling_tests/forces/forces_app\n\nTo compile forces (a C with OpenMP target application):\nmpicc -DGPU -O3 -fiopenmp -fopenmp-targets=spir64 -o forces.x forces.c\n\nNow go to forces_gpu directory:\ncd ../forces_gpu\n\nTo make use of all available GPUs, open run_libe_forces.py and adjust\nthe exit_criteria to perform more simulations. The following will run two\nsimulations for each worker:\n# Instruct libEnsemble to exit after this many simulations\nensemble.exit_criteria = ExitCriteria(sim_max=nsim_workers*2)\n\nNow grab an interactive session on two nodes (or use the batch script at\n../submission_scripts/submit_pbs_aurora.sh):\nqsub -A <myproject> -l select=2 -l walltime=15:00 -lfilesystems=home:flare -q debug -I\n\nOnce in the interactive session, you may need to reload the frameworks module:\ncd $PBS_O_WORKDIR\n. /path/to-venv/bin/activate\n\nThen in the session run:\npython run_libe_forces.py -n 13\n\nThis provides twelve workers for running simulations (one for each GPU across\ntwo nodes). An extra worker is added to run the persistent generator. The\nGPU settings for each worker simulation are printed.\nLooking at libE_stats.txt will provide a summary of the runs.\nNow try running:\n./cleanup.sh\npython run_libe_forces.py -n 7\n\nAnd you will see it runs with two cores and two GPUs are used per\nworker. The forces example automatically uses the GPUs available to\neach worker.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3687, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "8cab5ed0-f2da-4a4c-a495-a0b6c3b7a87e": {"__data__": {"id_": "8cab5ed0-f2da-4a4c-a495-a0b6c3b7a87e", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/aurora.html", "file_name": "aurora.html", "file_type": "text/html", "file_size": 24682, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a39db65f-0d48-4d96-8eb7-5322272e1128", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/aurora.html", "file_name": "aurora.html", "file_type": "text/html", "file_size": 24682, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "5289bd0a931d1a967f884d9eb729b5cd7c042011ddae24d279f60838e3c0a8ad", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a81bd2da-b118-47d5-85ec-c8a81e1c3b54", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/aurora.html", "file_name": "aurora.html", "file_type": "text/html", "file_size": 24682, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "9ac1d88c04c5281c0dce33dcdfda34583b0542b210a352ca90f1193626fde991", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "/path/to-venv/bin/activate\n\nThen in the session run:\npython run_libe_forces.py -n 13\n\nThis provides twelve workers for running simulations (one for each GPU across\ntwo nodes). An extra worker is added to run the persistent generator. The\nGPU settings for each worker simulation are printed.\nLooking at libE_stats.txt will provide a summary of the runs.\nNow try running:\n./cleanup.sh\npython run_libe_forces.py -n 7\n\nAnd you will see it runs with two cores and two GPUs are used per\nworker. The forces example automatically uses the GPUs available to\neach worker.\n\nLive viewing GPU usage\uf0c1\nTo see GPU usage, SSH into a compute node you are on in another window and run:\nmodule load xpu-smi\nwatch -n 0.1 xpu-smi dump -d -1 -m 0 -n 1\n\nUsing tiles as GPUs\uf0c1\nTo treat each tile as its own GPU, add the use_tiles_as_gpus=True option\nto the libE_specs block in run_libe_forces.py:\nensemble.libE_specs = LibeSpecs(\n num_resource_sets=nsim_workers,\n sim_dirs_make=True,\n use_tiles_as_gpus=True,\n)\n\nNow you can run again but with twice the workers for running simulations (each\nwill use one GPU tile):\npython run_libe_forces.py -n 25\n\nRunning generator on the manager\uf0c1\nAn alternative is to run the generator on a thread on the manager. The\nnumber of workers can then be set to the number of simulation workers.\nChange the libE_specs in run_libe_forces.py as follows:\nnsim_workers = ensemble.nworkers\n\n# Persistent gen does not need resources\nensemble.libE_specs = LibeSpecs(\n gen_on_manager=True,\n\nthen we can run with 12 (instead of 13) workers:\npython run_libe_forces.py -n 12\n\nDynamic resource assignment\uf0c1\nIn the forces directory you will also find:\n\nforces_gpu_var_resources uses varying processor/GPU counts per simulation.\nforces_multi_app uses varying processor/GPU counts per simulation and also\nuses two different user executables, one which is CPU-only and one which\nuses GPUs. This allows highly efficient use of nodes for multi-application\nensembles.\n\nDemonstration\uf0c1\nNote that a video demonstration of the forces_gpu example on Frontier\nis also available. The workflow is identical when running on Aurora, with the\nexception of different compiler options and numbers of workers (because the\nnumbers of GPUs on a node differs).\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 3126, "end_char_idx": 5478, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "5d6c3873-a5c2-4703-a819-a78b3af41701": {"__data__": {"id_": "5d6c3873-a5c2-4703-a819-a78b3af41701", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/bebop.html", "file_name": "bebop.html", "file_type": "text/html", "file_size": 18511, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0cc251ea-a59f-4243-8304-90086aa9686c", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/bebop.html", "file_name": "bebop.html", "file_type": "text/html", "file_size": 18511, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "ed3e1b1a605c6f51fa78b29e11e3b6fa30f5853bdbb2c57ba6c9862ea907c783", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Bebop \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\nCentralized Running\nDistributed Running\nConfiguring the Run\nMapping Tasks to Resources\nZero-resource workers\nAssigning GPUs\nVarying resources\nOverriding Auto-Detection\nSystems with Launch/MOM Nodes\nGlobus Compute - Remote User Functions\nInstructions for Specific Platforms\nAurora\nBebop\nConfiguring Python\nInstalling libEnsemble and Dependencies\nJob Submission\nAdditional Information\n\nFrontier\nImprov\nPerlmutter\nPolaris\nSummit (Decommissioned)\nlibEnsemble with SLURM\nExample Scheduler Submission Scripts\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nRunning on HPC Systems\nBebop\n\n View page source\n\nBebop\uf0c1\nBebop is a Cray CS400 cluster with Intel Broadwell compute\nnodes available in the Laboratory Computing Resources\nCenter (LCRC) at Argonne National\nLaboratory.\n\nConfiguring Python\uf0c1\nBegin by loading the Python 3 Anaconda module:\nmodule load anaconda3\n\nCreate a conda virtual environment in which to install libEnsemble and all\ndependencies:\nconda config --add channels intel\nconda create --name my_env intelpython3_core python=3\nsource activate my_env\n\nInstalling libEnsemble and Dependencies\uf0c1\nYou should have an indication that the virtual environment is activated.\nStart by installing mpi4py in this environment, making sure to reference\nthe preinstalled Intel MPI compiler. Your prompt should be similar to the\nfollowing block:\nCC=mpiicc MPICC=mpiicc pip install mpi4py --no-binary mpi4py\n\nlibEnsemble can then be installed via pip or conda. To install via pip:\npip install libensemble\n\nTo install via conda:\nconda config --add channels conda-forge\nconda install -c conda-forge libensemble\n\nSee here for more information on advanced options\nfor installing libEnsemble.\n\nJob Submission\uf0c1\nBebop uses PBS for job submission and management.\n\nInteractive Runs\uf0c1\nYou can allocate four Broadwell nodes for thirty minutes through the following:\nqsub -I -A <project_id> -l select=4:mpiprocs=4 -l walltime=30:00\n\nOnce in the interactive session, you may need to reload your modules:\ncd $PBS_O_WORKDIR\nmodule load anaconda3 gcc openmpi aocl\nconda activate bebop_libe_env\n\nNow run your script with four workers (one for generator and three for simulations):\npython my_libe_script.py --nworkers 4\n\nmpirun should also work. This line launches libEnsemble with a manager and\nthree workers to one allocated compute node, with three nodes available for\nthe workers to launch calculations with the Executor or a launch command.\nThis is an example of running in centralized mode, and,\nif using the Executor, libEnsemble should\nbe initiated with libE_specs[\"dedicated_mode\"]=True\n\nNote\nWhen performing a distributed MPI libEnsemble run\nand not oversubscribing, specify one more MPI process than the number of\nallocated nodes. The manager and first worker run together on a node.\n\nNote\nYou will need to reactivate your conda virtual environment and reload your\nmodules! Configuring this routine to occur automatically is recommended.\n\nAdditional Information\uf0c1\nSee the LCRC Bebop docs here for more information about Bebop.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3740, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "e682f3e6-d548-48e8-ba40-6a48a9c8d4f3": {"__data__": {"id_": "e682f3e6-d548-48e8-ba40-6a48a9c8d4f3", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/example_scripts.html", "file_name": "example_scripts.html", "file_type": "text/html", "file_size": 39426, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8f9936ee-169e-4574-8656-d299981fa7da", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/example_scripts.html", "file_name": "example_scripts.html", "file_type": "text/html", "file_size": 39426, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "e2deb6d8f7b9d63ceede7db7a2bafa8675310c53b1abb5d9ffa48771317cad8b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bd3e84e4-a6ec-41f9-b033-16dc97a28c89", "node_type": "1", "metadata": {}, "hash": "acf314bf59583413d5b7a3a9bcab7c9e1043cbeac85a7d56331bd92a4ec08c3d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Example Scheduler Submission Scripts \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\nCentralized Running\nDistributed Running\nConfiguring the Run\nMapping Tasks to Resources\nZero-resource workers\nAssigning GPUs\nVarying resources\nOverriding Auto-Detection\nSystems with Launch/MOM Nodes\nGlobus Compute - Remote User Functions\nInstructions for Specific Platforms\nAurora\nBebop\nFrontier\nImprov\nPerlmutter\nPolaris\nSummit (Decommissioned)\nlibEnsemble with SLURM\nExample Scheduler Submission Scripts\nGeneral examples\nSystem Examples\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nRunning on HPC Systems\nExample Scheduler Submission Scripts\n\n View page source\n\nExample Scheduler Submission Scripts\uf0c1\nBelow are example submission scripts used to configure and launch libEnsemble\non a variety of high-powered systems. See Running on HPC Systems\nfor more information about the respective systems and configuration.\n\nNote\nIt is highly recommended that the directive lines (e.g., #SBATCH) in batch\nsubmission scripts do NOT specify processor, task, or GPU configuration\ninformation\u2014these lines should only specify the number of nodes required.\nFor example, do not specify #SBATCH --gpus-per-node=4 in order to use four\nGPUs on the node, when each worker may use less than this, as this may assign\nall of the GPUs to a single MPI invocation. Instead, the configuration should\nbe supplied either\nin the simulation function\nor, if using dynamic resources,\nin the generator.\n\nGeneral examples\uf0c1\n\nSlurm - Basic\uf0c1\n\n/examples/libE_submission_scripts/submit_slurm_simple.sh\uf0c1\n#!/bin/bash\n#SBATCH -J libE_simple\n#SBATCH -A <myproject>\n#SBATCH -p <partition_name>\n#SBATCH -C <constraint_name>\n#SBATCH --time 10\n#SBATCH --nodes 2\n\n# Usually either -p or -C above is used.\n\n# On some SLURM configurations, these ensure runs can share nodes\nexport SLURM_EXACT=1\nexport SLURM_MEM_PER_NODE=0\n\npython libe_calling_script.py -n 8\n\nPBS - Basic\uf0c1\n\n/examples/libE_submission_scripts/submit_pbs_simple.sh\uf0c1\n#!/bin/bash -l\n#PBS -l select=2\n#PBS -l walltime=00:15:00\n#PBS -q <queue_name>\n#PBS -A <myproject>\n\n# We selected 2 nodes - now running with 8 workers.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2669, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "bd3e84e4-a6ec-41f9-b033-16dc97a28c89": {"__data__": {"id_": "bd3e84e4-a6ec-41f9-b033-16dc97a28c89", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/example_scripts.html", "file_name": "example_scripts.html", "file_type": "text/html", "file_size": 39426, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8f9936ee-169e-4574-8656-d299981fa7da", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/example_scripts.html", "file_name": "example_scripts.html", "file_type": "text/html", "file_size": 39426, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "e2deb6d8f7b9d63ceede7db7a2bafa8675310c53b1abb5d9ffa48771317cad8b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e682f3e6-d548-48e8-ba40-6a48a9c8d4f3", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/example_scripts.html", "file_name": "example_scripts.html", "file_type": "text/html", "file_size": 39426, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "c9e9b39b87c94ab400de7d8f4a1824354c0b1cd5e40b8f1e2ce105d18fc1e353", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ae523167-b53c-49ab-8937-4894e4fec3dd", "node_type": "1", "metadata": {}, "hash": "057343a5ec9d7369e89c36c2757e1f81be3ed5413415172e8adaa0131b9b695a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# On some SLURM configurations, these ensure runs can share nodes\nexport SLURM_EXACT=1\nexport SLURM_MEM_PER_NODE=0\n\npython libe_calling_script.py -n 8\n\nPBS - Basic\uf0c1\n\n/examples/libE_submission_scripts/submit_pbs_simple.sh\uf0c1\n#!/bin/bash -l\n#PBS -l select=2\n#PBS -l walltime=00:15:00\n#PBS -q <queue_name>\n#PBS -A <myproject>\n\n# We selected 2 nodes - now running with 8 workers.\nexport MPICH_GPU_SUPPORT_ENABLED=1\ncd $PBS_O_WORKDIR\npython libE_calling_script.py -n 8\n\nLSF - Basic\uf0c1\n\n/examples/libE_submission_scripts/submit_lsf_simple.sh\uf0c1\n#!/bin/bash -l\n#BSUB -P <project code>\n#BSUB -J libe_mproc\n#BSUB -W 15\n#BSUB -nnodes 2\n\npython run_libe_forces.py -n 8\n\nSystem Examples\uf0c1\n\nAurora\uf0c1\n\n/examples/libE_submission_scripts/submit_pbs_aurora.sh\uf0c1\n#!/bin/bash -l\n#PBS -l select=2\n#PBS -l walltime=00:30:00\n#PBS -q <myqueue>\n#PBS -A <myproject>\n\nmodule load frameworks\n\nexport MPICH_GPU_SUPPORT_ENABLED=1\ncd $PBS_O_WORKDIR\n\n# 2 nodes - 12 sim workers (6 GPUs per node)\npython libE_calling_script.py -n 13\n\n# if using libE_specs[\"use_tiles_as_gpus\"] = True\n# 2 nodes 24 sim workers (12 GPU tiles per node) libE_specs[\"use_tiles_as_gpus\"] = True\n# python libE_calling_script.py -n 25\n\nFrontier (Large WarpX Ensemble)\uf0c1\n\n/examples/libE_submission_scripts/submit_frontier_large.sh\uf0c1\n#!/bin/bash\n#SBATCH -J libE_warpX_full_sim_32x40\n#SBATCH -A <myproject>\n#SBATCH -p batch\n#SBATCH --time 6:00:00\n#SBATCH --nodes 240\n\nmodule load cray-python\n\n# Run one gen and 40 sim workers (6 nodes = 48 GPUs each)\npython run_gpcam_warpx.py -n 41\n\nPerlmutter\uf0c1\n\n/examples/libE_submission_scripts/submit_perlmutter.sh\uf0c1\n#!/bin/bash\n#SBATCH -J libE_small_test\n#SBATCH -A <myproject>\n#SBATCH -C gpu\n#SBATCH --time 10\n#SBATCH --nodes 1\n\n# This script is using GPU partition\nexport MPICH_GPU_SUPPORT_ENABLED=1\n\n# One worker for generator and 4 for sims (one GPU each)\npython libe_calling_script.py -n 5\n\n# Or if libE_specs option gen_on_manager=True\n# python libe_calling_script.py -n 4\n\nPolaris\uf0c1\n\n/examples/libE_submission_scripts/submit_pbs_polaris.sh\uf0c1\n#!/bin/bash -l\n#PBS -l select=1:system=polaris\n#PBS -l walltime=00:15:00\n#PBS -l filesystems=home:grand\n#PBS -q debug\n#PBS -A <myproject>\n\nexport MPICH_GPU_SUPPORT_ENABLED=1\ncd $PBS_O_WORKDIR\npython libE_calling_script.py -n 4\n\nBebop\uf0c1\n\n/examples/libE_submission_scripts/bebop_submit_pbs_central.sh\uf0c1\n#!/bin/bash -l\n#PBS -l select=4\n#PBS -l walltime=00:15:00\n#PBS -q bdwall\n#PBS -A [project]\n#PBS -N libE_example\n\ncd $PBS_O_WORKDIR\n# Choose MPI backend. Note that the built mpi4py in your environment should match.", "mimetype": "text/plain", "start_char_idx": 2296, "end_char_idx": 4821, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ae523167-b53c-49ab-8937-4894e4fec3dd": {"__data__": {"id_": "ae523167-b53c-49ab-8937-4894e4fec3dd", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/example_scripts.html", "file_name": "example_scripts.html", "file_type": "text/html", "file_size": 39426, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8f9936ee-169e-4574-8656-d299981fa7da", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/example_scripts.html", "file_name": "example_scripts.html", "file_type": "text/html", "file_size": 39426, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "e2deb6d8f7b9d63ceede7db7a2bafa8675310c53b1abb5d9ffa48771317cad8b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bd3e84e4-a6ec-41f9-b033-16dc97a28c89", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/example_scripts.html", "file_name": "example_scripts.html", "file_type": "text/html", "file_size": 39426, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "cfd58e22cc8424a738dff6dfb0fcc47e275949c7fa1dcd3b42e7ff0ecfe5b457", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "517e8811-abe8-4a6d-82a0-8fd2adc7bad1", "node_type": "1", "metadata": {}, "hash": "0d3511c8e7a440b21e92d3d1fde5249350586441d5a7086718ed4fff1094c338", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Note that the built mpi4py in your environment should match.\nmodule load oneapi/mpi\n# module load openmpi\n\npython run_libe_example.py -n 16\n\nBridges - MPI / Central Mode\uf0c1\n\n/examples/libE_submission_scripts/bridges_submit_slurm_central.sh\uf0c1\n#!/bin/bash\n#SBATCH -J libE_test_central\n#SBATCH -N 5\n#SBATCH -p RM\n#SBATCH -A <my_project>\n#SBATCH -o tlib.%j.%N.out\n#SBATCH -e tlib.%j.%N.error\n#SBATCH -t 00:30:00\n\n# Launch script for running in central mode with mpi4py.\n# libEnsemble will run on a dedicated node (or nodes).\n# The remaining nodes in the allocation will be dedicated to worker launched apps.\n# Initialize Executor with auto-resources=True and central_mode=True.\n\n# User to edit these variables\nexport EXE=libE_calling_script.py\nexport NUM_WORKERS=4\n\nmpirun -np $(($NUM_WORKERS+1)) -ppn $(($NUM_WORKERS+1)) python $EXE\n\n# To use local mode instead of mpi4py (with parse_args())\n# python $EXE -n $NUM_WORKERS\n\nSLURM - MPI / Distributed Mode (co-locate workers & MPI applications)\uf0c1\n\n/examples/libE_submission_scripts/submit_distrib_mpi4py.sh\uf0c1\n#!/bin/bash\n#SBATCH -J libE_test\n#SBATCH -N 4\n#SBATCH -p [queue]\n#SBATCH -A <my_project>\n#SBATCH -o tlib.%j.%N.out\n#SBATCH -e tlib.%j.%N.error\n#SBATCH -t 01:00:00\n\n# Launch script that runs in distributed mode with mpi4py.\n# Workers are evenly spread over nodes and manager added to the first node.\n# Requires even distribution - either multiple workers per node or nodes per worker\n# Option for manager to have a dedicated node.\n# Use of MPI Executor will ensure workers co-locate tasks with workers\n# If node_list file is kept, this informs libe of resources. Else, libe auto-detects.\n\n# User to edit these variables\nexport EXE=libE_calling_script.py\nexport NUM_WORKERS=4\nexport MANAGER_NODE=false # true = Manager has a dedicated node (assign one extra)\nexport USE_NODE_LIST=true # If false, allow libE to determine node_list from environment.\n\n# Sometimes may be necessary\n# As libE shares nodes with user applications allow fallback if contexts overrun.", "mimetype": "text/plain", "start_char_idx": 4761, "end_char_idx": 6768, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "517e8811-abe8-4a6d-82a0-8fd2adc7bad1": {"__data__": {"id_": "517e8811-abe8-4a6d-82a0-8fd2adc7bad1", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/example_scripts.html", "file_name": "example_scripts.html", "file_type": "text/html", "file_size": 39426, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8f9936ee-169e-4574-8656-d299981fa7da", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/example_scripts.html", "file_name": "example_scripts.html", "file_type": "text/html", "file_size": 39426, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "e2deb6d8f7b9d63ceede7db7a2bafa8675310c53b1abb5d9ffa48771317cad8b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ae523167-b53c-49ab-8937-4894e4fec3dd", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/example_scripts.html", "file_name": "example_scripts.html", "file_type": "text/html", "file_size": 39426, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "4e2b962e8e9052fe6e517d19964a0677dd41d89e5792ee63ce3f45264d2edfe4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "210051c0-0aa8-4cb2-94ab-eadd9c662eda", "node_type": "1", "metadata": {}, "hash": "99af5a01f569d6bcf39a68e8122a514c198c13e23e1532d8d7cfb5a7b51f8736", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# Workers are evenly spread over nodes and manager added to the first node.\n# Requires even distribution - either multiple workers per node or nodes per worker\n# Option for manager to have a dedicated node.\n# Use of MPI Executor will ensure workers co-locate tasks with workers\n# If node_list file is kept, this informs libe of resources. Else, libe auto-detects.\n\n# User to edit these variables\nexport EXE=libE_calling_script.py\nexport NUM_WORKERS=4\nexport MANAGER_NODE=false # true = Manager has a dedicated node (assign one extra)\nexport USE_NODE_LIST=true # If false, allow libE to determine node_list from environment.\n\n# Sometimes may be necessary\n# As libE shares nodes with user applications allow fallback if contexts overrun.\n# unset I_MPI_FABRICS\n# export I_MPI_FABRICS_LIST=tmi,tcp\n# export I_MPI_FALLBACK=1\n\n# If using in calling script (After N mins manager kills workers and exits cleanly)\nexport LIBE_WALLCLOCK=55\n\n#-----------------------------------------------------------------------------\n# Work out distribution\nif [[ $MANAGER_NODE = \"true\" ]]; then\n WORKER_NODES=$(($SLURM_NNODES-1))\nelse\n WORKER_NODES=$SLURM_NNODES\nfi\n\nif [[ $NUM_WORKERS -ge $WORKER_NODES ]]; then\n SUB_NODE_WORKERS=true\n WORKERS_PER_NODE=$(($NUM_WORKERS/$WORKER_NODES))\nelse\n SUB_NODE_WORKERS=false\n NODES_PER_WORKER=$(($WORKER_NODES/$NUM_WORKERS))\nfi;\n#-----------------------------------------------------------------------------\n\n# A little useful information\necho -e \"Manager process running on: $HOSTNAME\"\necho -e \"Directory is: $PWD\"\n\n# Generate a node list with 1 node per line:\nsrun hostname | sort -u > node_list\n\n# Add manager node to machinefile\nhead -n 1 node_list > machinefile.$SLURM_JOBID\n\n# Add worker nodes to machinefile\nif [[ $SUB_NODE_WORKERS = \"true\" ]]; then\n awk -v repeat=$WORKERS_PER_NODE '{for(i=0; i<repeat; i++)print}' node_list \\\n >>machinefile.$SLURM_JOBID\nelse\n awk -v patt=\"$NODES_PER_WORKER\" 'NR % patt == 1' node_list \\\n >> machinefile.$SLURM_JOBID\nfi;\n\nif [[ $USE_NODE_LIST = \"false\" ]]; then\n rm node_list\n wait\nfi;\n\n# Put in a timestamp\necho Starting execution at: `date`\n\n# To use srun\nexport SLURM_HOSTFILE=machinefile.$SLURM_JOBID\n\n# The \"arbitrary\" flag should ensure SLURM_HOSTFILE is picked up\n# cmd=\"srun --ntasks $(($NUM_WORKERS+1)) -m arbitrary python $EXE\"\ncmd=\"srun --ntasks $(($NUM_WORKERS+1)) -m arbitrary python $EXE $LIBE_WALLCLOCK\"\n\necho The command is: $cmd\necho End PBS script information.\necho All further output is from the process being run and not the script.\\n\\n $cmd\n\n$cmd\n\n# Print the date again -- when finished\necho Finished at: `date`\n\nSummit (Decommissioned) - On Launch Nodes with Multiprocessing\uf0c1\n\n/examples/libE_submission_scripts/summit_submit_mproc.sh\uf0c1\n#!/bin/bash -x\n#BSUB -P <project code>\n#BSUB -J libe_mproc\n#BSUB -W 30\n#BSUB -nnodes 4\n#BSUB -alloc_flags \"smt1\"\n\n# Script to run libEnsemble using multiprocessing on launch nodes.\n# Assumes Conda environment is set up.\n\n# To be run with central job management\n# - Manager and workers run on launch node.\n# - Workers submit tasks to the compute nodes in the allocation.\n\n# Name of calling script-\nexport EXE=libE_calling_script.py\n\n# Communication Method\nexport COMMS=\"--comms local\"\n\n# Number of workers.\nexport NWORKERS=\"--nworkers 4\"\n\n# Wallclock for libE. (allow clean shutdown)\nexport LIBE_WALLCLOCK=25 # Optional if pass to script\n\n# Name of Conda environment\nexport CONDA_ENV_NAME=<conda_env_name>\n\n# Need these if not already loaded\n# module load python\n# module load gcc/4.8.5\n\n# Activate conda environment\nexport PYTHONNOUSERSITE=1\n.", "mimetype": "text/plain", "start_char_idx": 6033, "end_char_idx": 9593, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "210051c0-0aa8-4cb2-94ab-eadd9c662eda": {"__data__": {"id_": "210051c0-0aa8-4cb2-94ab-eadd9c662eda", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/example_scripts.html", "file_name": "example_scripts.html", "file_type": "text/html", "file_size": 39426, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8f9936ee-169e-4574-8656-d299981fa7da", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/example_scripts.html", "file_name": "example_scripts.html", "file_type": "text/html", "file_size": 39426, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "e2deb6d8f7b9d63ceede7db7a2bafa8675310c53b1abb5d9ffa48771317cad8b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "517e8811-abe8-4a6d-82a0-8fd2adc7bad1", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/example_scripts.html", "file_name": "example_scripts.html", "file_type": "text/html", "file_size": 39426, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "d391d44ee48f01cda92c653de34f99dffb322f88ff0f69ab943cccf1f127f31d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# Assumes Conda environment is set up.\n\n# To be run with central job management\n# - Manager and workers run on launch node.\n# - Workers submit tasks to the compute nodes in the allocation.\n\n# Name of calling script-\nexport EXE=libE_calling_script.py\n\n# Communication Method\nexport COMMS=\"--comms local\"\n\n# Number of workers.\nexport NWORKERS=\"--nworkers 4\"\n\n# Wallclock for libE. (allow clean shutdown)\nexport LIBE_WALLCLOCK=25 # Optional if pass to script\n\n# Name of Conda environment\nexport CONDA_ENV_NAME=<conda_env_name>\n\n# Need these if not already loaded\n# module load python\n# module load gcc/4.8.5\n\n# Activate conda environment\nexport PYTHONNOUSERSITE=1\n. activate $CONDA_ENV_NAME\n\n# hash -d python # Check pick up python in conda env\nhash -r # Check no commands hashed (pip/python...)\n\n# Launch libE\n# python $EXE $NUM_WORKERS > out.txt 2>&1 # No args. All defined in calling script\n# python $EXE $COMMS $NWORKERS > out.txt 2>&1 # If calling script is using parse_args()\npython $EXE $LIBE_WALLCLOCK $COMMS $NWORKERS > out.txt 2>&1 # If calling script takes wall-clock as positional arg.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 8931, "end_char_idx": 10152, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "29460cea-5d74-4157-ba50-6be64559b5f6": {"__data__": {"id_": "29460cea-5d74-4157-ba50-6be64559b5f6", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/frontier.html", "file_name": "frontier.html", "file_type": "text/html", "file_size": 17563, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c9e7554b-bd9c-4c68-a77f-ceb5516df83c", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/frontier.html", "file_name": "frontier.html", "file_type": "text/html", "file_size": 17563, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "1b138b2f60254147fffcbab120b66edc36bbfc7a5854aa076a9884ed596acf28", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Frontier \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\nCentralized Running\nDistributed Running\nConfiguring the Run\nMapping Tasks to Resources\nZero-resource workers\nAssigning GPUs\nVarying resources\nOverriding Auto-Detection\nSystems with Launch/MOM Nodes\nGlobus Compute - Remote User Functions\nInstructions for Specific Platforms\nAurora\nBebop\nFrontier\nInstalling libEnsemble\nExample\n\nImprov\nPerlmutter\nPolaris\nSummit (Decommissioned)\nlibEnsemble with SLURM\nExample Scheduler Submission Scripts\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nRunning on HPC Systems\nFrontier\n\n View page source\n\nFrontier\uf0c1\nFrontier is an HPE Cray EX exascale system located at Oak Ridge\nLeadership Computing Facility (OLCF).\nEach Frontier compute node contains one 64-core AMD EPYC and four AMD MI250X GPUs\n(eight logical GPUs).\nFrontier uses the SLURM scheduler to submit jobs from login nodes to run on the\ncompute nodes.\n\nInstalling libEnsemble\uf0c1\nBegin by loading the python module:\nmodule load cray-python\n\nYou may wish to create a virtual environment to install packages in (see python_on_frontier).\n\nExample of using virtual environment\nHaving created a dir /ccs/proj/<project_id>/libensemble:\npython -m venv /ccs/proj/<project_id>/libensemble/libe_env\nsource /ccs/proj/<project_id>/libensemble/libe_env/bin/activate\n\nlibEnsemble can be installed via pip:\npip install libensemble\n\nSee advanced installation for other installation options.\n\nExample\uf0c1\nNote that a video demonstration of this example is also available.\nTo run the forces_gpu tutorial on Frontier.\nTo obtain the example you can git clone libEnsemble - although only\nthe forces sub-directory is needed:\ngit clone https://github.com/Libensemble/libensemble\ncd libensemble/libensemble/tests/scaling_tests/forces/forces_app\n\nTo compile forces:\nmodule load rocm\nmodule load craype-accel-amd-gfx90a\ncc -DGPU -I${ROCM_PATH}/include -L${ROCM_PATH}/lib -lamdhip64 -fopenmp -O3 -o forces.x forces.c\n\nNow go to forces_gpu directory:\ncd ../forces_gpu\n\nNow grab an interactive session on one node:\nsalloc --nodes=1 -A <project_id> --time=00:10:00\n\nThen in the session run:\npython run_libe_forces.py --nworkers 9\n\nThis places the generator on the first worker and runs simulations on the\nothers (each simulation using one GPU).\nTo see GPU usage, ssh into the node you are on in another window and run:\nmodule load rocm\nwatch -n 0.1 rocm-smi\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3054, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "8882bc5a-e105-497d-b299-3b47124917cd": {"__data__": {"id_": "8882bc5a-e105-497d-b299-3b47124917cd", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/improv.html", "file_name": "improv.html", "file_type": "text/html", "file_size": 17503, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7e5f61a6-0dfb-42ea-9cfa-8628653ea453", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/improv.html", "file_name": "improv.html", "file_type": "text/html", "file_size": 17503, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "053f9a5186f5986ea9c6d62a43c106c91a6643389b25d3ad396bcdc4904d27b1", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Improv \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\nCentralized Running\nDistributed Running\nConfiguring the Run\nMapping Tasks to Resources\nZero-resource workers\nAssigning GPUs\nVarying resources\nOverriding Auto-Detection\nSystems with Launch/MOM Nodes\nGlobus Compute - Remote User Functions\nInstructions for Specific Platforms\nAurora\nBebop\nFrontier\nImprov\nInstalling libEnsemble and Dependencies\nJob Submission\nExample\n\nPerlmutter\nPolaris\nSummit (Decommissioned)\nlibEnsemble with SLURM\nExample Scheduler Submission Scripts\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nRunning on HPC Systems\nImprov\n\n View page source\n\nImprov\uf0c1\nImprov is an LCRC production cluster at Argonne National Laboratory with 825\ndual-socket compute nodes with AMD 7713 64-core processors.\n\nInstalling libEnsemble and Dependencies\uf0c1\nTo create a conda environment and install libEnsemble:\nmodule load anaconda3\nconda create --name improv_libe_env python=3\nconda activate improv_libe_env\npip install libensemble\n\nSee here for more information on advanced\noptions for installing libEnsemble, including using Spack.\n\nJob Submission\uf0c1\nImprov uses the PBS scheduler to submit jobs from login nodes to run on compute\nnodes.\n\nExample\uf0c1\nTo run the forces_simple tutorial on Improv.\nTo obtain the example you can git clone libEnsemble - although only\nthe forces sub-directory is needed:\ngit clone https://github.com/Libensemble/libensemble\ncd libensemble/libensemble/tests/scaling_tests/forces/forces_app\n\nTo compile forces:\nmodule load gcc openmpi aocl\nmpicc -O3 -o forces.x forces.c -lm\n\nNow go to forces_simple directory:\ncd ../forces_simple/\n\nNow grab an interactive session on one node:\nqsub -A <project_id> -l select=1:mpiprocs=64 -l walltime=20:00 -qdebug -I\n\nOnce in the interactive session, you may need to reload the modules:\ncd $PBS_O_WORKDIR\nmodule load anaconda3 gcc openmpi aocl\nconda activate improv_libe_env\n\nNow run forces with five workers (one for generator and four for simulations):\npython run_libe_forces.py --nworkers 5\n\nmpi4py comms\uf0c1\nYou can install mpi4py as usual having installed the Open-MPI module:\npip install mpi4py\n\nNote if using mpi4py comms with Open-MPI, you may need to set export OMPI_MCA_coll_hcoll_enable=0\nto prevent HCOLL warnings.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2916, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d97f5e70-97b4-43cb-959b-bd0d2830d149": {"__data__": {"id_": "d97f5e70-97b4-43cb-959b-bd0d2830d149", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/perlmutter.html", "file_name": "perlmutter.html", "file_type": "text/html", "file_size": 32657, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ecd01a99-7021-4bc3-89ff-81d8f1292fdc", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/perlmutter.html", "file_name": "perlmutter.html", "file_type": "text/html", "file_size": 32657, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "4bd219c96ade147fd3c4068bcf210742c1f20dfac8d047098d19e323549a8146", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "60e7a63c-1616-4f2b-922b-d8343a4e41fd", "node_type": "1", "metadata": {}, "hash": "52a96ad007158c8b260e3a91b73a05685f219836ec6915e38b1c03253cb25c34", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Perlmutter \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\nCentralized Running\nDistributed Running\nConfiguring the Run\nMapping Tasks to Resources\nZero-resource workers\nAssigning GPUs\nVarying resources\nOverriding Auto-Detection\nSystems with Launch/MOM Nodes\nGlobus Compute - Remote User Functions\nInstructions for Specific Platforms\nAurora\nBebop\nFrontier\nImprov\nPerlmutter\nConfiguring Python and Installation\nInstalling libEnsemble and dependencies\nJob Submission\nExample\nRunning libEnsemble with mpi4py\nPerlmutter FAQ\nAdditional Information\n\nPolaris\nSummit (Decommissioned)\nlibEnsemble with SLURM\nExample Scheduler Submission Scripts\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nRunning on HPC Systems\nPerlmutter\n\n View page source\n\nPerlmutter\uf0c1\nPerlmutter is an HPE Cray \u201cShasta\u201d system located at NERSC. Its compute nodes\nare equipped with four A100 NVIDIA GPUs.\nIt uses the SLURM scheduler to submit jobs from login nodes to run on the\ncompute nodes.\n\nConfiguring Python and Installation\uf0c1\nBegin by loading the python module. The following modules are recommended:\nmodule load python\n\nCreate a conda environment\uf0c1\nYou can create a conda environment in which to install libEnsemble and\nall dependencies. For example:\nconda create -n libe-pm python=3.10 -y\n\nAs Perlmutter has a shared HOME filesystem with other clusters, using\nthe -pm suffix (for Perlmutter) is good practice.\nActivate your virtual environment with:\nexport PYTHONNOUSERSITE=1\nconda activate libe-pm\n\nInstalling libEnsemble and dependencies\uf0c1\nHaving loaded the Anaconda Python module, libEnsemble can be installed\nby one of the following ways.\n\nInstall via pip into the environment.\n\npip install libensemble\n\nInstall via conda:\n\nconda config --add channels conda-forge\nconda install -c conda-forge libensemble\n\nSee advanced installation for other installation options.\n\nJob Submission\uf0c1\nPerlmutter uses Slurm for job submission and management. The two most common\ncommands for initiating jobs are salloc and sbatch for running\nin interactive and batch modes, respectively. libEnsemble runs on the compute nodes\non Perlmutter using either multi-processing (recommended) or mpi4py.\nWhile libEnsemble should detect Perlmutter settings, you can ensure this by setting\none of the following environment variables in the submission script or interactive\nsession for either the CPU or GPU partitions of Perlmutter:\nexport LIBE_PLATFORM=\"perlmutter_c\" # For CPU partition\nexport LIBE_PLATFORM=\"perlmutter_g\" # For GPU partition\n\nExample\uf0c1\nTo run the forces_gpu tutorial on Perlmutter.\nTo obtain the example you can git clone libEnsemble - although only\nthe forces sub-directory is needed:\ngit clone https://github.com/Libensemble/libensemble\ncd libensemble/libensemble/tests/scaling_tests/forces/forces_app\n\nTo compile forces:\nmodule load PrgEnv-nvidia cudatoolkit craype-accel-nvidia80\ncc -DGPU -O3 -fopenmp -mp=gpu -target-accel=nvidia80 -o forces.x forces.c\n\nNow go to forces_gpu directory:\ncd ../forces_gpu\n\nNow grab an interactive session on one node:\nsalloc -N 1 -t 20 -C gpu -q interactive -A <project_id>\n\nThen in the session run:\nexport LIBE_PLATFORM=\"perlmutter_g\"\npython run_libe_forces.py -n 5\n\nThis places the generator on the first worker and runs simulations on the\nothers (each simulation using one GPU).\nTo see GPU usage, ssh into the node you are on in another window and run:\nwatch -n 0.1 nvidia-smi\n\nRunning generator on the manager\uf0c1\nAn alternative is to run the generator on a thread on the manager.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4029, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "60e7a63c-1616-4f2b-922b-d8343a4e41fd": {"__data__": {"id_": "60e7a63c-1616-4f2b-922b-d8343a4e41fd", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/perlmutter.html", "file_name": "perlmutter.html", "file_type": "text/html", "file_size": 32657, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ecd01a99-7021-4bc3-89ff-81d8f1292fdc", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/perlmutter.html", "file_name": "perlmutter.html", "file_type": "text/html", "file_size": 32657, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "4bd219c96ade147fd3c4068bcf210742c1f20dfac8d047098d19e323549a8146", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d97f5e70-97b4-43cb-959b-bd0d2830d149", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/perlmutter.html", "file_name": "perlmutter.html", "file_type": "text/html", "file_size": 32657, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "d8323b546bfb358735d5d6171e3f708d47e98f5c1345921c54441e23e9f1c912", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "To see GPU usage, ssh into the node you are on in another window and run:\nwatch -n 0.1 nvidia-smi\n\nRunning generator on the manager\uf0c1\nAn alternative is to run the generator on a thread on the manager. The\nnumber of workers can then be set to the number of simulation workers.\nChange the libE_specs in run_libe_forces.py as follows.\n\nnsim_workers = ensemble.nworkers\n\n# Persistent gen does not need resources\nensemble.libE_specs = LibeSpecs(\n gen_on_manager=True,\n\nand run with:\npython run_libe_forces.py -n 4\n\nTo watch video\uf0c1\n\nThere is a video demonstration of the forces example on Perlmutter.\n\nNote\nThe video uses libEnsemble version 0.9.3, where some adjustments of the\nscripts are needed to run on Perlmutter. These adjustments are no longer\nnecessary. libEnsemble now correctly detects MPI runner and GPU setting on\nPerlmutter and the GPU code runs with many more particles than the CPU\nversion (forces_simple).\n\nExample submission scripts are also given in the examples.\n\nRunning libEnsemble with mpi4py\uf0c1\nRunning libEnsemble with local comms is usually sufficient on Perlmutter. However, if you need\nto use mpi4py, you should install and run as follows:\nmodule load PrgEnv-gnu cudatoolkit\nMPICC=\"cc -target-accel=nvidia80 -shared\" pip install --force --no-cache-dir --no-binary=mpi4py mpi4py\n\nThis line will build mpi4py on top of a CUDA-aware Cray MPICH.\nTo run using 5 workers (one manager):\nexport SLURM_EXACT=1\nsrun -n 6 python my_script.py\n\nMore information on using Python and mpi4py on Perlmutter can be found\nin the Python on Perlmutter documentation.\n\nPerlmutter FAQ\uf0c1\nSome FAQs specific to Perlmutter. See more on the FAQ page.\n\nsrun: Job ****** step creation temporarily disabled, retrying (Requested nodes are busy)\nHaving created a dir /ccs/proj/<project_id>/libensemble:\nYou may also see: srun: Job ****** step creation still disabled, retrying (Requested nodes are busy)\nThis error has been encountered on Perlmutter. It is recommended to add these lines to submission scripts:\nexport SLURM_EXACT=1\nexport SLURM_MEM_PER_NODE=0\n\nand to avoid using #SBATCH commands that may limit resources to srun job steps such as:\n#SBATCH --ntasks-per-node=4\n#SBATCH --gpus-per-task=1\n\nInstead provide these to sub-tasks via the extra_args option to\nthe MPIExecutor submit function.\n\nGTL_DEBUG: [0] cudaHostRegister: no CUDA-capable device is detected\nIf using the environment variable MPICH_GPU_SUPPORT_ENABLED, then srun commands, at\ntime of writing, expect an option for allocating GPUs (e.g.~ --gpus-per-task=1 would\nallocate one GPU to each MPI task of the MPI run). It is recommended that tasks submitted\nvia the MPIExecutor specify this in the extra_args\noption to the submit function (rather than using an #SBATCH command). This is needed\neven when using setting CUDA_VISIBLE_DEVICES or other options.\nIf running the libEnsemble user calling script with srun, then it is recommended that\nMPICH_GPU_SUPPORT_ENABLED is set in the user sim_f or gen_f function where\nGPU runs will be submitted, instead of in the batch script. E.g:\nos.environ[\"MPICH_GPU_SUPPORT_ENABLED\"] = \"1\"\n\nwarning: /tmp/pgcudafatYDO6wtSva6K2.o: missing .note.GNU-stack section implies executable stack\nThis warning has been recently encountered when compiling the forces example\non Perlmutter. This does not affect the run, but can be suppressed by adding\n-Wl,-znoexecstack to the build line.\n\nAdditional Information\uf0c1\nSee the NERSC Perlmutter docs for more information about Perlmutter.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 3830, "end_char_idx": 7424, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "fbbc87f4-0967-4155-a499-b6825980b154": {"__data__": {"id_": "fbbc87f4-0967-4155-a499-b6825980b154", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/platforms_index.html", "file_name": "platforms_index.html", "file_type": "text/html", "file_size": 30568, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "aec38711-d522-4e77-963b-c5c04c42dc11", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/platforms_index.html", "file_name": "platforms_index.html", "file_type": "text/html", "file_size": 30568, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "20b9f3f6ba6a79525a7f3879d8d93eec8c3eb70adddce57f1e6986c89942fad5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9abb4415-c6d1-4044-afcb-2172852160a7", "node_type": "1", "metadata": {}, "hash": "e7b1ad121f6e7fa53f5532d4a5a7742ea31efd580bc09059579af67d1ee5d6a4", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Running on HPC Systems \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\nCentralized Running\nDedicated Mode\n\nDistributed Running\nConfiguring the Run\nMapping Tasks to Resources\nZero-resource workers\nAssigning GPUs\nVarying resources\nOverriding Auto-Detection\nSystems with Launch/MOM Nodes\nGlobus Compute - Remote User Functions\nInstructions for Specific Platforms\nAurora\nBebop\nFrontier\nImprov\nPerlmutter\nPolaris\nSummit (Decommissioned)\nlibEnsemble with SLURM\nExample Scheduler Submission Scripts\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nRunning on HPC Systems\n\n View page source\n\nRunning on HPC Systems\uf0c1\nlibEnsemble has been tested on systems of highly varying scales, from laptops to\nthousands of compute nodes. On multi-node systems, there are a few alternative\nways of configuring libEnsemble to run and launch tasks (i.e., user applications)\non the available nodes.\nThe Forces tutorial gives an\nexample with a simple MPI application.\nNote that while the diagrams below show one application being run per node,\nconfigurations with multiple nodes per worker or multiple workers per node\nare both common use cases.\n\nCentralized Running\uf0c1\nThe default communications scheme places the manager and workers on the first node.\nThe MPI Executor can then be invoked by each\nsimulation worker, and libEnsemble will distribute user applications across the\nnode allocation. This is the most common approach where each simulation\nruns an MPI application.\nThe generator will run on a worker by default, but if running a single generator,\nthe libE_specs option gen_on_manager is recommended,\nwhich runs the generator on the manager (using a thread) as below.\n\nIn calling script:\n1ensemble.libE_specs = LibeSpecs(\n2 gen_on_manager=True,\n3)\n\nA SLURM batch script may include:\n#SBATCH --nodes 3\n\npython run_libe_forces.py --nworkers 3\n\nWhen using gen_on_manager, set nworkers to the number of workers desired for running simulations.\n\nDedicated Mode\uf0c1\nIf the libE_specs option dedicated_mode is set to\nTrue, the MPI executor will not launch applications on nodes where libEnsemble Python\nprocesses (manager and workers) are running. Workers launch applications onto the\nremaining nodes in the allocation.\n\nIn calling script:\n1ensemble.libE_specs = LibeSpecs(\n2 num_resource_sets=2,\n3 dedicated_mode=True,\n4)\n\nA SLURM batch script may include:\n#SBATCH --nodes 3\n\npython run_libe_forces.py --nworkers 3\n\nNote that gen_on_manager is not set in the above example.\n\nDistributed Running\uf0c1\nIn the distributed approach, libEnsemble can be run using the mpi4py\ncommunicator, with workers distributed across nodes. This is most often used\nwhen workers run simulation code directly, via a Python interface. The user\nscript is invoked with an MPI runner, for example (using an mpich-based MPI):\nmpirun -np 4 -ppn 1 python myscript.py\n\nThe distributed approach, can also be used with the executor, to co-locate workers\nwith the applications they submit. Ensuring that workers are placed as required in this\ncase requires a careful MPI rank placement.\n\nThis allows the libEnsemble worker to read files produced by the application on\nlocal node storage.\n\nConfiguring the Run\uf0c1\nOn systems with a job scheduler, libEnsemble is typically run within a single\njob submission. All user simulations will run on\nthe nodes within that allocation.\nHow does libEnsemble know where to run tasks (user applications)?\nThe libEnsemble MPI Executor can be initialized from the user calling\nscript, and then used by workers to run tasks. The Executor will automatically detect the nodes\navailable on most systems. Alternatively, the user can provide a file called node_list in\nthe run directory. By default, the Executor will divide up the nodes evenly to each worker.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4273, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "9abb4415-c6d1-4044-afcb-2172852160a7": {"__data__": {"id_": "9abb4415-c6d1-4044-afcb-2172852160a7", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/platforms_index.html", "file_name": "platforms_index.html", "file_type": "text/html", "file_size": 30568, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "aec38711-d522-4e77-963b-c5c04c42dc11", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/platforms_index.html", "file_name": "platforms_index.html", "file_type": "text/html", "file_size": 30568, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "20b9f3f6ba6a79525a7f3879d8d93eec8c3eb70adddce57f1e6986c89942fad5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fbbc87f4-0967-4155-a499-b6825980b154", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/platforms_index.html", "file_name": "platforms_index.html", "file_type": "text/html", "file_size": 30568, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "9b467774e94db18bda35066777567c368fdd921c02150a69975b09edb8a80d38", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3ad5d927-76c8-4517-967b-fa97eb6018a7", "node_type": "1", "metadata": {}, "hash": "acffa59cd43b532feb809e17b3cd010a834863836a0733a8deb4338ee4837577", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Ensuring that workers are placed as required in this\ncase requires a careful MPI rank placement.\n\nThis allows the libEnsemble worker to read files produced by the application on\nlocal node storage.\n\nConfiguring the Run\uf0c1\nOn systems with a job scheduler, libEnsemble is typically run within a single\njob submission. All user simulations will run on\nthe nodes within that allocation.\nHow does libEnsemble know where to run tasks (user applications)?\nThe libEnsemble MPI Executor can be initialized from the user calling\nscript, and then used by workers to run tasks. The Executor will automatically detect the nodes\navailable on most systems. Alternatively, the user can provide a file called node_list in\nthe run directory. By default, the Executor will divide up the nodes evenly to each worker.\n\nMapping Tasks to Resources\uf0c1\nThe resource manager detects node lists from\ncommon batch schedulers,\nand partitions these to workers. The MPI Executor\naccesses the resources available to the current worker when launching tasks.\n\nZero-resource workers\uf0c1\nUsers with persistent gen_f functions may notice that the persistent workers\nare still automatically assigned system resources. This can be resolved by using\nthe gen_on_manager option or by\nfixing the number of resource sets.\n\nAssigning GPUs\uf0c1\nlibEnsemble automatically detects and assigns Nvidia, AMD, and Intel GPUs without modifying the user scripts. This automatically works on many systems, but if the assignment is incorrect or needs to be modified the user can specify platform information.\nThe forces_gpu tutorial shows an example of this.\n\nVarying resources\uf0c1\nlibEnsemble also features dynamic resource assignment, whereby the\nnumber of processes and/or the number of GPUs can be a set for each simulation by the generator.\n\nOverriding Auto-Detection\uf0c1\nlibEnsemble can automatically detect system information. This includes resource information, such as\navailable nodes and the number of cores on the node, and information about available MPI runners.\nSystem detection for resources can be overridden using the resource_info\nlibE_specs option.\nWhen using the MPI Executor, it is possible to override the detected information using the\ncustom_info argument. See the MPI Executor for more.\n\nSystems with Launch/MOM Nodes\uf0c1\nSome large systems have a 3-tier node setup. That is, they have a separate set of launch nodes\n(known as MOM nodes on Cray Systems). User batch jobs or interactive sessions run on a launch node.\nMost such systems supply a special MPI runner that has some application-level scheduling\ncapability (e.g., aprun, jsrun). MPI applications can only be submitted from these nodes. Examples\nof these systems include Summit and Sierra.\nThere are two ways of running libEnsemble on these kinds of systems. The first, and simplest,\nis to run libEnsemble on the launch nodes. This is often sufficient if the worker\u2019s simulation\nor generation functions are not doing much work (other than launching applications). This approach\nis inherently centralized. The entire node allocation is available for the worker-launched\ntasks.\nHowever, running libEnsemble on the compute nodes is potentially more scalable and\nwill better manage simulation and generation functions that contain considerable\ncomputational work or I/O. Therefore the second option is to use Globus Compute\nto isolate this work from the workers.\n\nGlobus Compute - Remote User Functions\uf0c1\nIf libEnsemble is running on some resource with\ninternet access (laptops, login nodes, other servers, etc.), workers can be instructed to\nlaunch generator or simulator user function instances to separate resources from\nthemselves via Globus Compute (formerly funcX), a distributed, high-performance function-as-a-service platform:\n\nThis is useful for running ensembles across machines and heterogeneous resources, but\ncomes with several caveats:\n\nUser functions registered with Globus Compute must be non-persistent, since\nmanager-worker communicators can\u2019t be serialized or used by a remote resource.\nLikewise, the Executor.manager_poll() capability is disabled. The only\navailable control over remote functions by workers is processing return values\nor exceptions when they complete.\nGlobus Compute imposes a handful of task-rate and data limits on submitted functions.\nUsers are responsible for authenticating via Globus and maintaining their\nGlobus Compute endpoints on their target systems.", "mimetype": "text/plain", "start_char_idx": 3479, "end_char_idx": 7882, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "3ad5d927-76c8-4517-967b-fa97eb6018a7": {"__data__": {"id_": "3ad5d927-76c8-4517-967b-fa97eb6018a7", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/platforms_index.html", "file_name": "platforms_index.html", "file_type": "text/html", "file_size": 30568, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "aec38711-d522-4e77-963b-c5c04c42dc11", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/platforms_index.html", "file_name": "platforms_index.html", "file_type": "text/html", "file_size": 30568, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "20b9f3f6ba6a79525a7f3879d8d93eec8c3eb70adddce57f1e6986c89942fad5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9abb4415-c6d1-4044-afcb-2172852160a7", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/platforms_index.html", "file_name": "platforms_index.html", "file_type": "text/html", "file_size": 30568, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "e57eb87d15254cffa7f1d496361800c91e00d89c25adbbe8695caa2d18d4470a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "), workers can be instructed to\nlaunch generator or simulator user function instances to separate resources from\nthemselves via Globus Compute (formerly funcX), a distributed, high-performance function-as-a-service platform:\n\nThis is useful for running ensembles across machines and heterogeneous resources, but\ncomes with several caveats:\n\nUser functions registered with Globus Compute must be non-persistent, since\nmanager-worker communicators can\u2019t be serialized or used by a remote resource.\nLikewise, the Executor.manager_poll() capability is disabled. The only\navailable control over remote functions by workers is processing return values\nor exceptions when they complete.\nGlobus Compute imposes a handful of task-rate and data limits on submitted functions.\nUsers are responsible for authenticating via Globus and maintaining their\nGlobus Compute endpoints on their target systems.\n\nUsers can still define Executor instances within their user functions and submit\nMPI applications normally, as long as libEnsemble and the target application are\naccessible on the remote system:\n# Within remote user function\nfrom libensemble.executors import MPIExecutor\nexctr = MPIExecutor()\nexctr.register_app(full_path=\"/home/user/forces.x\", app_name=\"forces\")\ntask = exctr.submit(app_name=\"forces\", num_procs=64)\n\nSpecify a Globus Compute endpoint in either sim_specs or gen_specs via the globus_compute_endpoint\nargument. For example:\nfrom libensemble.specs import SimSpecs\n\nsim_specs = SimSpecs(\n sim_f = sim_f,\n inputs = [\"x\"],\n out = [(\"f\", float)],\n globus_compute_endpoint = \"3af6dc24-3f27-4c49-8d11-e301ade15353\",\n)\n\nSee the libensemble/tests/scaling_tests/globus_compute_forces directory for a complete\nremote-simulation example.\n\nInstructions for Specific Platforms\uf0c1\nThe following subsections have more information about configuring and launching\nlibEnsemble on specific HPC systems.\n\nAurora\nBebop\nFrontier\nImprov\nPerlmutter\nPolaris\nSummit (Decommissioned)\nlibEnsemble with SLURM\nExample Scheduler Submission Scripts\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 6993, "end_char_idx": 9140, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "af7660aa-36d6-4ec7-9574-5c6cd45a7051": {"__data__": {"id_": "af7660aa-36d6-4ec7-9574-5c6cd45a7051", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/polaris.html", "file_name": "polaris.html", "file_type": "text/html", "file_size": 19805, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a671ed6b-fc0a-46c8-a025-f254081a912d", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/polaris.html", "file_name": "polaris.html", "file_type": "text/html", "file_size": 19805, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "967bb7b244f7b2e5224b1a099fae685e6dca9cb55daba8ca837a6d565493263b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Polaris \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\nCentralized Running\nDistributed Running\nConfiguring the Run\nMapping Tasks to Resources\nZero-resource workers\nAssigning GPUs\nVarying resources\nOverriding Auto-Detection\nSystems with Launch/MOM Nodes\nGlobus Compute - Remote User Functions\nInstructions for Specific Platforms\nAurora\nBebop\nFrontier\nImprov\nPerlmutter\nPolaris\nConfiguring Python and Installation\nJob Submission\nDemonstration\n\nSummit (Decommissioned)\nlibEnsemble with SLURM\nExample Scheduler Submission Scripts\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nRunning on HPC Systems\nPolaris\n\n View page source\n\nPolaris\uf0c1\nPolaris is a 560-node HPE system located in the ALCF at Argonne\nNational Laboratory. The compute nodes are equipped with one AMD EPYC Milan\nprocessor and four A100 NVIDIA GPUs. It uses the PBS scheduler to submit\njobs from login nodes to run on the compute nodes.\n\nConfiguring Python and Installation\uf0c1\nPython and libEnsemble are available on Polaris with the conda module. Load the\nconda module and activate the base environment:\nmodule use /soft/modulefiles\nmodule load conda; conda activate\n\nThis also gives you access to machine-optimized packages such as mpi4py.\nTo install further packages, including updating libEnsemble, you may either create\na virtual environment on top of this (if just using pip install) or clone the base\nenvironment (if you need conda install). More details at Python for Polaris.\n\nExample of Conda + virtual environment\nTo create a virtual environment that allows installation of further packages:\npython -m venv /path/to-venv --system-site-packages\n. /path/to-venv/bin/activate\n\nwhere /path/to-venv can be anywhere you have write access. For future sessions,\njust load the conda module and run the activate line.\nYou can now pip install libEnsemble:\npip install libensemble\n\nSee here for more information on advanced options\nfor installing libEnsemble, including using Spack.\n\nJob Submission\uf0c1\nPolaris uses the PBS scheduler to submit jobs from login nodes to run on\nthe compute nodes. libEnsemble runs on the compute nodes using either\nmulti-processing or mpi4py\nA simple example batch script for a libEnsemble use case that runs 5 workers\n(e.g., one persistent generator and four for simulations) on one node:\n 1#!/bin/bash\n 2#PBS -A <myproject>\n 3#PBS -lwalltime=00:15:00\n 4#PBS -lselect=1\n 5#PBS -q debug\n 6#PBS -lsystem=polaris\n 7#PBS -lfilesystems=home:grand\n 8\n 9export MPICH_GPU_SUPPORT_ENABLED=1\n10\n11cd $PBS_O_WORKDIR\n12\n13python run_libe_forces.py --nworkers 5\n\nThe script can be run with:\nqsub submit_libe.sh\n\nOr you can run an interactive session with:\nqsub -A <myproject> -l select=1 -l walltime=15:00 -lfilesystems=home:grand -qdebug -I\n\nYou may need to reload your conda module and reactivate venv environment\nagain after starting the interactive session.\n\nDemonstration\uf0c1\nFor an example that runs a small ensemble using a C application (offloading work to the\nGPU), see the forces_gpu tutorial. A video demonstration\nof this example is also available.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3712, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "29112f79-2efe-47b4-98ee-1ca42a51b22b": {"__data__": {"id_": "29112f79-2efe-47b4-98ee-1ca42a51b22b", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/srun.html", "file_name": "srun.html", "file_type": "text/html", "file_size": 23367, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d53f67b5-31c2-45f9-a2e6-4b98b9d4a42a", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/srun.html", "file_name": "srun.html", "file_type": "text/html", "file_size": 23367, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "908d5b7784260c8b3ae5e9d2b7e3179873c36a92cb2b898851aaad8c35873b4b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "70fdae85-b18e-4727-929e-daebc4fcebc3", "node_type": "1", "metadata": {}, "hash": "ed1eb06655bab67dfce58be3007fcd959d5cfaa4557894c98a0308b8bfd9a78b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "libEnsemble with SLURM \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\nCentralized Running\nDistributed Running\nConfiguring the Run\nMapping Tasks to Resources\nZero-resource workers\nAssigning GPUs\nVarying resources\nOverriding Auto-Detection\nSystems with Launch/MOM Nodes\nGlobus Compute - Remote User Functions\nInstructions for Specific Platforms\nAurora\nBebop\nFrontier\nImprov\nPerlmutter\nPolaris\nSummit (Decommissioned)\nlibEnsemble with SLURM\nCommon Errors\nNote on Resource Binding\nSome useful commands\n\nExample Scheduler Submission Scripts\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nRunning on HPC Systems\nlibEnsemble with SLURM\n\n View page source\n\nlibEnsemble with SLURM\uf0c1\nSLURM is a popular open-source workload manager.\nlibEnsemble can read SLURM node lists and partition these to workers. By\ndefault this is done by reading an environment variable.\nExample SLURM submission scripts for various systems are given in the\nexamples. Further examples are given in some of the specific\nplatform guides (e.g., Perlmutter guide)\nBy default, the MPIExecutor uses mpirun\nas a priority over srun as it works better in some cases. If mpirun does\nnot work well, then try telling the MPIExecutor to use srun when it is initiated\nin the calling script:\nfrom libensemble.executors.mpi_executor import MPIExecutor\nexctr = MPIExecutor(custom_info={\"mpi_runner\":\"srun\"})\n\nCommon Errors\uf0c1\nSLURM systems can have various configurations which may affect what is required\nwhen assigning more than one worker to any given node.\n\nsrun: Job ****** step creation temporarily disabled, retrying (Requested nodes are busy)\nYou may also see: srun: Job ****** step creation still disabled, retrying (Requested nodes are busy)\nIt is recommended to add these to submission scripts to prevent resource conflicts:\nexport SLURM_EXACT=1\nexport SLURM_MEM_PER_NODE=0\n\nAlternatively, the --exact option to srun, along with other relevant options\ncan be given on any srun lines, including the MPIExecutor submission lines\nvia the extra_args option (from version 0.10.0, these are added automatically).\nSecondly, while many configurations are possible, it is recommended to avoid using\n#SBATCH commands that may limit resources to srun job steps such as:\n#SBATCH --ntasks-per-node=4\n#SBATCH --gpus-per-task=1\n\nInstead provide these to sub-tasks via the extra_args option to the\nMPIExecutor submit function.\n\nGTL_DEBUG: [0] cudaHostRegister: no CUDA-capable device is detected\nIf using the environment variable MPICH_GPU_SUPPORT_ENABLED, then srun commands may\nexpect an option for allocating GPUs (e.g., --gpus-per-task=1 would\nallocate one GPU to each MPI task of the MPI run). It is recommended that tasks submitted\nvia the MPIExecutor specify this in the extra_args\noption to the submit function (rather than using an #SBATCH command).\nIf running the libEnsemble calling script with srun, then it is recommended that\nMPICH_GPU_SUPPORT_ENABLED is set in the user sim_f or gen_f function where\nGPU runs will be submitted, instead of in the batch script. For example:\nos.environ[\"MPICH_GPU_SUPPORT_ENABLED\"] = \"1\"\n\nNote on Resource Binding\uf0c1\n\nNote\nUpdate: From version 0.10.0, it is recommended that GPUs are assigned\nautomatically by libEnsemble. See the forces_gpu\ntutorial as an example.\n\nNote that the use of CUDA_VISIBLE_DEVICES and other environment variables is often\na highly portable way of assigning specific GPUs to workers, and has been known to work\non some systems when other methods do not. See the libEnsemble regression test test_persistent_sampling_CUDA_variable_resources.py for an example of setting\nCUDA_VISIBLE_DEVICES in the imported simulator function (CUDA_variable_resources).", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4216, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "70fdae85-b18e-4727-929e-daebc4fcebc3": {"__data__": {"id_": "70fdae85-b18e-4727-929e-daebc4fcebc3", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/srun.html", "file_name": "srun.html", "file_type": "text/html", "file_size": 23367, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d53f67b5-31c2-45f9-a2e6-4b98b9d4a42a", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/srun.html", "file_name": "srun.html", "file_type": "text/html", "file_size": 23367, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "908d5b7784260c8b3ae5e9d2b7e3179873c36a92cb2b898851aaad8c35873b4b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "29112f79-2efe-47b4-98ee-1ca42a51b22b", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/srun.html", "file_name": "srun.html", "file_type": "text/html", "file_size": 23367, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "e7fecf328c3fd36fabde7d23a6ab1402e45283e937b6e0b2950bdc187f6bf201", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "If running the libEnsemble calling script with srun, then it is recommended that\nMPICH_GPU_SUPPORT_ENABLED is set in the user sim_f or gen_f function where\nGPU runs will be submitted, instead of in the batch script. For example:\nos.environ[\"MPICH_GPU_SUPPORT_ENABLED\"] = \"1\"\n\nNote on Resource Binding\uf0c1\n\nNote\nUpdate: From version 0.10.0, it is recommended that GPUs are assigned\nautomatically by libEnsemble. See the forces_gpu\ntutorial as an example.\n\nNote that the use of CUDA_VISIBLE_DEVICES and other environment variables is often\na highly portable way of assigning specific GPUs to workers, and has been known to work\non some systems when other methods do not. See the libEnsemble regression test test_persistent_sampling_CUDA_variable_resources.py for an example of setting\nCUDA_VISIBLE_DEVICES in the imported simulator function (CUDA_variable_resources).\nOn other systems, like Perlmutter, using an option such as --gpus-per-task=1 or\n-gres=gpu:1 in extra_args is sufficient to allow SLURM to find the free GPUs.\nNote that the srun options such as:\n--gpu-bind=map_gpu:2,3\n\ndo not necessarily provide absolute GPU slots when there are more than one concurrent\njob steps (sruns) running on a node. If desired, such options could be set using the\nworker resources module in a similar manner\nto how CUDA_VISIBLE_DEVICES is set in the example.\n\nSome useful commands\uf0c1\nFind SLURM version:\nscontrol --version\n\nFind SLURM system configuration:\nscontrol show config\n\nFind SLURM partition configuration for a partition called \u201cgpu\u201d:\nscontrol show partition gpu\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 3354, "end_char_idx": 5038, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ba01a406-8226-4bff-8fbc-ea19f88b5506": {"__data__": {"id_": "ba01a406-8226-4bff-8fbc-ea19f88b5506", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/summit.html", "file_name": "summit.html", "file_type": "text/html", "file_size": 27799, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "683786c4-178f-4b2e-baee-5abe59a82c0a", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/summit.html", "file_name": "summit.html", "file_type": "text/html", "file_size": 27799, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "3bdeb8f4d304297bcbf67e9a9734a4bfd0100d3704914baca7aaa94a32eda7e0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8d6aa45f-5156-4939-98c0-6493a9bd71c6", "node_type": "1", "metadata": {}, "hash": "0bc00b896b1e2b5d9988a0c8f3184491e81ae599f466714a6ecf3885f1f4ac41", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Summit (Decommissioned) \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\nCentralized Running\nDistributed Running\nConfiguring the Run\nMapping Tasks to Resources\nZero-resource workers\nAssigning GPUs\nVarying resources\nOverriding Auto-Detection\nSystems with Launch/MOM Nodes\nGlobus Compute - Remote User Functions\nInstructions for Specific Platforms\nAurora\nBebop\nFrontier\nImprov\nPerlmutter\nPolaris\nSummit (Decommissioned)\nConfiguring Python\nInstalling libEnsemble\nJob Submission\nLaunching User Applications from libEnsemble Workers\n\nlibEnsemble with SLURM\nExample Scheduler Submission Scripts\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nRunning on HPC Systems\nSummit (Decommissioned)\n\n View page source\n\nSummit (Decommissioned)\uf0c1\nSummit was an IBM AC922 system located at the Oak Ridge Leadership Computing\nFacility (OLCF). Each of the approximately 4,600 compute nodes on Summit contained two\nIBM POWER9 processors and six NVIDIA Volta V100 accelerators.\nSummit featured three tiers of nodes: login, launch, and compute nodes.\nUsers on login nodes submit batch runs to the launch nodes.\nBatch scripts and interactive sessions run on the launch nodes. Only the launch\nnodes can submit MPI runs to the compute nodes via jsrun.\nThese docs are maintained to guide libEnsemble\u2019s usage on three-tier systems and/or\njsrun systems similar to Summit.\n\nConfiguring Python\uf0c1\nBegin by loading the Python 3 Anaconda module:\n$ module load python\n\nYou can now create and activate your own custom conda environment:\nconda create --name myenv python=3.10\nexport PYTHONNOUSERSITE=1 # Make sure get python from conda env\n. activate myenv\n\nIf you are installing any packages with extensions, ensure that the correct compiler\nmodule is loaded. If using mpi4py, this must be installed from source,\nreferencing the compiler. Currently, mpi4py must be built with gcc:\nmodule load gcc\n\nWith your environment activated, run\nCC=mpicc MPICC=mpicc pip install mpi4py --no-binary mpi4py\n\nInstalling libEnsemble\uf0c1\nObtaining libEnsemble is now as simple as pip install libensemble.\nYour prompt should be similar to the following line:\n(my_env) user@login5:~$ pip install libensemble\n\nNote\nIf you encounter pip errors, run python -m pip install --upgrade pip first\n\nOr, you can install via conda:\n(my_env) user@login5:~$ conda config --add channels conda-forge\n(my_env) user@login5:~$ conda install -c conda-forge libensemble\n\nSee here for more information on advanced options\nfor installing libEnsemble.\nSpecial note on resource sets and Executor submit options\n\nWhen using the portable MPI run configuration options (e.g., num_nodes) to the\nMPIExecutor submit function, it is important\nto note that, due to the resource sets used on Summit, the options refer to\nresource sets as follows:\n\nnum_procs (int, optional) \u2013 The total number resource sets for this run.\nnum_nodes (int, optional) \u2013 The number of nodes on which to submit the run.\nprocs_per_node (int, optional) \u2013 The number of resource sets per node.\n\nIt is recommended that the user defines a resource set as the minimal configuration\nof CPU cores/processes and GPUs. These can be added to the extra_args option\nof the submit function. Alternatively, the portable options can be ignored and\neverything expressed in extra_args.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3804, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "8d6aa45f-5156-4939-98c0-6493a9bd71c6": {"__data__": {"id_": "8d6aa45f-5156-4939-98c0-6493a9bd71c6", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/summit.html", "file_name": "summit.html", "file_type": "text/html", "file_size": 27799, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "683786c4-178f-4b2e-baee-5abe59a82c0a", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/summit.html", "file_name": "summit.html", "file_type": "text/html", "file_size": 27799, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "3bdeb8f4d304297bcbf67e9a9734a4bfd0100d3704914baca7aaa94a32eda7e0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ba01a406-8226-4bff-8fbc-ea19f88b5506", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/summit.html", "file_name": "summit.html", "file_type": "text/html", "file_size": 27799, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "7e8748ec6ea600ab5614c0051f2c8bc79fce540141925cd8b5b59e17b7ea2dbd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "88063d80-3687-420c-91fd-5e74c6311e90", "node_type": "1", "metadata": {}, "hash": "29d762244eaed7e12deb696b47a115d96bcf1b453971a40541f37d20970f3b66", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Special note on resource sets and Executor submit options\n\nWhen using the portable MPI run configuration options (e.g., num_nodes) to the\nMPIExecutor submit function, it is important\nto note that, due to the resource sets used on Summit, the options refer to\nresource sets as follows:\n\nnum_procs (int, optional) \u2013 The total number resource sets for this run.\nnum_nodes (int, optional) \u2013 The number of nodes on which to submit the run.\nprocs_per_node (int, optional) \u2013 The number of resource sets per node.\n\nIt is recommended that the user defines a resource set as the minimal configuration\nof CPU cores/processes and GPUs. These can be added to the extra_args option\nof the submit function. Alternatively, the portable options can be ignored and\neverything expressed in extra_args.\nFor example, the following jsrun line would run three resource sets,\neach having one core (with one process), and one GPU, along with some extra options:\njsrun -n 3 -a 1 -g 1 -c 1 --bind=packed:1 --smpiargs=\"-gpu\"\n\nTo express this line in the submit function may look\nsomething like the following:\nexctr = Executor.executor\ntask = exctr.submit(app_name=\"mycode\",\n num_procs=3,\n extra_args=\"-a 1 -g 1 -c 1 --bind=packed:1 --smpiargs=\"-gpu\"\"\n app_args=\"-i input\")\n\nThis would be equivalent to:\nexctr = Executor.executor\ntask = exctr.submit(app_name=\"mycode\",\n extra_args=\"-n 3 -a 1 -g 1 -c 1 --bind=packed:1 --smpiargs=\"-gpu\"\"\n app_args=\"-i input\")\n\nThe libEnsemble resource manager works out the resources available to each worker,\nbut unlike some other systems, jsrun on Summit dynamically schedules runs to\navailable slots across and within nodes. It can also queue tasks. This allows variable\nsize runs to easily be handled on Summit. If oversubscription to the jsrun system\nis desired, then libEnsemble\u2019s resource manager can be disabled in the\ncalling script via:\nlibE_specs[\"disable_resource_manager\"] = True\n\nIn the above example, the task being submitted used three GPUs, which is half those\navailable on a Summit node, and thus two such tasks may be allocated to each node\n(from different workers), if they were running at the same time.\n\nJob Submission\uf0c1\nSummit used LSF for job management and submission. For libEnsemble, the most\nimportant command is bsub for submitting batch scripts from the login nodes\nto execute on the launch nodes.\nIt is recommended to run libEnsemble on the launch nodes (assuming workers are\nsubmitting MPI applications) using the local communications mode (multiprocessing).\n\nInteractive Runs\uf0c1\nYou can run interactively with bsub by specifying the -Is flag,\nsimilarly to the following:\n$ bsub -W 30 -P [project] -nnodes 8 -Is\n\nThis will place you on a launch node.\n\nNote\nYou will need to reactivate your conda virtual environment.\n\nBatch Runs\uf0c1\nBatch scripts specify run settings using #BSUB statements. The following\nsimple example depicts configuring and launching libEnsemble to a launch node with\nmultiprocessing. This script also assumes the user is using the parse_args()\nconvenience function from libEnsemble\u2019s tools module.\n#!/bin/bash -x\n#BSUB -P <project code>\n#BSUB -J libe_mproc\n#BSUB -W 60\n#BSUB -nnodes 128\n#BSUB -alloc_flags \"smt1\"\n\n# --- Prepare Python ---\n\n# Load conda module and gcc.\nmodule load python\nmodule load gcc\n\n# Name of conda environment\nexport CONDA_ENV_NAME=my_env\n\n# Activate conda environment\nexport PYTHONNOUSERSITE=1\nsource activate $CONDA_ENV_NAME\n\n# --- Prepare libEnsemble ---\n\n# Name of calling script\nexport EXE=calling_script.py\n\n# Communication Method\nexport COMMS=\"--comms local\"\n\n# Number of workers.", "mimetype": "text/plain", "start_char_idx": 3022, "end_char_idx": 6584, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "88063d80-3687-420c-91fd-5e74c6311e90": {"__data__": {"id_": "88063d80-3687-420c-91fd-5e74c6311e90", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/summit.html", "file_name": "summit.html", "file_type": "text/html", "file_size": 27799, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "683786c4-178f-4b2e-baee-5abe59a82c0a", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/summit.html", "file_name": "summit.html", "file_type": "text/html", "file_size": 27799, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "3bdeb8f4d304297bcbf67e9a9734a4bfd0100d3704914baca7aaa94a32eda7e0", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8d6aa45f-5156-4939-98c0-6493a9bd71c6", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/platforms/summit.html", "file_name": "summit.html", "file_type": "text/html", "file_size": 27799, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "4e05e98131bd8bd8eb8e5b5ef43262a7a52debbb1358798918f598159fe2a917", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "The following\nsimple example depicts configuring and launching libEnsemble to a launch node with\nmultiprocessing. This script also assumes the user is using the parse_args()\nconvenience function from libEnsemble\u2019s tools module.\n#!/bin/bash -x\n#BSUB -P <project code>\n#BSUB -J libe_mproc\n#BSUB -W 60\n#BSUB -nnodes 128\n#BSUB -alloc_flags \"smt1\"\n\n# --- Prepare Python ---\n\n# Load conda module and gcc.\nmodule load python\nmodule load gcc\n\n# Name of conda environment\nexport CONDA_ENV_NAME=my_env\n\n# Activate conda environment\nexport PYTHONNOUSERSITE=1\nsource activate $CONDA_ENV_NAME\n\n# --- Prepare libEnsemble ---\n\n# Name of calling script\nexport EXE=calling_script.py\n\n# Communication Method\nexport COMMS=\"--comms local\"\n\n# Number of workers.\nexport NWORKERS=\"--nworkers 128\"\n\nhash -r # Check no commands hashed (pip/python...)\n\n# Launch libE\npython $EXE $COMMS $NWORKERS > out.txt 2>&1\n\nWith this saved as myscript.sh, allocating, configuring, and queueing\nlibEnsemble on Summit is achieved by running\n$ bsub myscript.sh\n\nExample submission scripts are also given in the examples.\n\nLaunching User Applications from libEnsemble Workers\uf0c1\nOnly the launch nodes can submit MPI runs to the compute nodes via jsrun.\nThis can be accomplished in user simulator functions directly. However, it is highly\nrecommended that the Executor interface\nbe used inside the simulator or generator, because this provides a portable interface\nwith many advantages including automatic resource detection, portability,\nlaunch failure resilience, and ease of use.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 5844, "end_char_idx": 7508, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f2c00860-5361-4bd9-a8a0-7b26fc19a9d0": {"__data__": {"id_": "f2c00860-5361-4bd9-a8a0-7b26fc19a9d0", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/posters.html", "file_name": "posters.html", "file_type": "text/html", "file_size": 10050, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "532f336d-e9b9-4450-9705-2794d62bf713", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/posters.html", "file_name": "posters.html", "file_type": "text/html", "file_size": 10050, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "b12bd0f71d87f7822e4b8e0438da5220a4b353e705a42357eb1e6bad0671d71a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Posters and Presentations \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\nExascale Computing Project 2023\nSciPy 2020\nCSE 2019\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nPosters and Presentations\n\n View page source\n\nPosters and Presentations\uf0c1\n\nExascale Computing Project 2023\uf0c1\n\nSciPy 2020\uf0c1\n\nCSE 2019\uf0c1\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 984, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "eea58d9a-695d-4dba-b86f-74dd191062dc": {"__data__": {"id_": "eea58d9a-695d-4dba-b86f-74dd191062dc", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/programming_libE.html", "file_name": "programming_libE.html", "file_type": "text/html", "file_size": 17160, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "40737f00-e136-43d4-9aad-c857a31ff443", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/programming_libE.html", "file_name": "programming_libE.html", "file_type": "text/html", "file_size": 17160, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "1d258b210e795dbe4563fdd14aa9e26cb9ae192601bcd892fa87b0186ef8692f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Constructing Workflows \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nOutput Management\nHistory Array\nResource Manager\nWriting User Functions\nExecutors\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\n\n View page source\n\nConstructing Workflows\uf0c1\nWe now give greater detail in programming with libEnsemble.\n\nThe Basics\n\nRunning an Ensemble\nEnsemble\nlibE()\n\nConfiguring libEnsemble\nLibE Specs\nGenerator Specs\nSimulation Specs\nAllocation Specs\nPlatform Specs\npersis_info\nExit Criteria\n\nOutput Management\nDefault Log Files\nLogger Configuration\nAnalysis Utilities\n\nHistory Array\nOverview\nReserved Fields\nExample Workflow updating History\n\nResource Manager\nZero-resource workers (e.g., Persistent gen does not need resources)\nDynamic Assignment of Resources\nResource Detection\nScheduler Module\nWorker Resources Module (query resources for current worker)\n\nWriting User Functions:\n\nWriting User Functions\nGenerator Functions\nSimulator Functions\nAllocation Functions\nUser Function API\ncalc_status\nWork Dictionary\nWorker Array\n\nCoordinating Apps\n\nExecutors\nExecutor Overview\nBase Executor - Local apps\nMPI Executor - MPI apps\n\nHelpful Additions\n\nConvenience Tools and Functions\nadd_unique_random_streams()\ncheck_npy_file_exists()\neprint()\nForkablePdb\nparse_args()\nsave_libE_output()\nPersistentSupport\nAllocException\nAllocSupport\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2098, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "4f35a78a-4073-418b-bb73-74afec88a070": {"__data__": {"id_": "4f35a78a-4073-418b-bb73-74afec88a070", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5f183f3a-e2e0-42c0-b387-99f8b24b4132", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "e99e175c461fe08a8273b6c03cfe1b7a2d75870e12336de5daa879bef71acc91", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "57498c3c-af99-438b-8023-0fb25ed1dd93", "node_type": "1", "metadata": {}, "hash": "14f3421a91d56bb4d2b1f3265f1687d6fff6d31c7d3625a7a2bb894a73f2d379", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Release Notes \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nRelease 1.5.0\nRelease 1.4.3\nRelease 1.4.2\nRelease 1.4.1\nRelease 1.4.0\nRelease 1.3.0\nRelease 1.2.2\nRelease 1.2.1\nRelease 1.2.0\nRelease 1.1.0\nRelease 1.0.0\nRelease 0.10.2\nRelease 0.10.1\nRelease 0.10.0\nRelease 0.9.3\nRelease 0.9.2\nRelease 0.9.1\nRelease 0.9.0\nRelease 0.8.0\nRelease 0.7.2\nRelease 0.7.1\nRelease 0.7.0\nRelease 0.6.0\nRelease 0.5.2\nRelease 0.5.1\nRelease 0.5.0\nRelease 0.4.1\nRelease 0.4.0\nRelease 0.3.0\nRelease 0.2.0\nRelease 0.1.0\n\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nRelease Notes\n\n View page source\n\nRelease Notes\uf0c1\nBelow are the notes from all libEnsemble releases.\nGitHub issues are referenced, and can be viewed with hyperlinks on the github releases page.\n\nRelease 1.5.0\uf0c1\n\nDate:\nApr 10, 2025\n\nGeneral Updates:\n\nMigrate package build system to pyproject.toml (with pixi support). #1459\nImprove handling when no MPI found. #1514\nensemble.save_output() can save without appending attributes append_attrs=False. #1531\nImprove handling of worker-specific persis_info fields when they are not initially provided. #1531\n* Bugfix: Fix final_gen_send when there are no worker-specific persis_info fields.\n* Handle worker-generated persis_info fields.\n* Ensure persis_info is initialized to an empty dictionary in user functions instead of None.\n\nExamples:\n\nUpdate Ax generator for Ax v0.5.0. #1508\nRename gpCAM generators. #1516\n* persistent_gpCAM_ask_tell to persistent_gpCAM\n* persistent_gpCAM_simple to persistent_gpCAM_covar (in fact less simple)\nPersistent generators return None as first return value unless H_o is updated. #1515\nAdd LUMI to known platforms. #1546\n\nDocumentation:\n\nRevamp Examples and HPC section of documentation. #1501, #1536, #1539\nAdd tutorial and notebook demonstrating surrogate model creation with gpCAM. #1531\nUpdate Aurora guide. #1510\nUpdate and documented APOSMM/WarpX example. #1543\n\nNote:\n\nTests were run on Linux and MacOS with Python versions 3.10, 3.11, 3.12, 3.13\nHeterogeneous workflows tested on Aurora (ALCF), Polaris (ALCF), LUMI (EuroHPC JU), and Perlmutter (NERSC).\n\nKnown Issues:\n\nSee known issues section in the documentation.\n\nRelease 1.4.3\uf0c1\n\nDate:\nDec 16, 2024\n\nFix wait_on_start type-instance condition checking. #1474\nLogging updates:\n* Add VDEBUG logging level for the tracking of log message communications. #1486\n* Show worker node in the log only when running in distributed mode and with DEBUG logging. #1486\n* Update uneven distribution messaging. #1486\n\nScripts:\n\nAdd scripts for plotting APOSMM optimization runs. #1461\nConvert test runner to Python. #1437\n\nExamples:\n\nMove dragonfly GP, heFFTe, ytopt, and Ax multitask tests to community examples.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3237, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "57498c3c-af99-438b-8023-0fb25ed1dd93": {"__data__": {"id_": "57498c3c-af99-438b-8023-0fb25ed1dd93", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5f183f3a-e2e0-42c0-b387-99f8b24b4132", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "e99e175c461fe08a8273b6c03cfe1b7a2d75870e12336de5daa879bef71acc91", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4f35a78a-4073-418b-bb73-74afec88a070", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "9e69bd43d792ee4f0deea0c0c0178e211dbfc11e6869700adaf4cb7f34f7b882", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "964904ab-31ea-4153-9d06-22411c6ae7c0", "node_type": "1", "metadata": {}, "hash": "81035ad70e2b268d133a87741f882878599c5de9f6788db9b70b669ce1352185", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Known Issues:\n\nSee known issues section in the documentation.\n\nRelease 1.4.3\uf0c1\n\nDate:\nDec 16, 2024\n\nFix wait_on_start type-instance condition checking. #1474\nLogging updates:\n* Add VDEBUG logging level for the tracking of log message communications. #1486\n* Show worker node in the log only when running in distributed mode and with DEBUG logging. #1486\n* Update uneven distribution messaging. #1486\n\nScripts:\n\nAdd scripts for plotting APOSMM optimization runs. #1461\nConvert test runner to Python. #1437\n\nExamples:\n\nMove dragonfly GP, heFFTe, ytopt, and Ax multitask tests to community examples. #1439\n\nNote:\n\nTests were run on Linux and MacOS with Python versions 3.9, 3.10, 3.11, 3.12, 3.13\nHeterogeneous workflows tested on Polaris (ALCF) and Perlmutter (NERSC).\n\nKnown Issues:\n\nSee known issues section in the documentation.\n\nRelease 1.4.2\uf0c1\n\nDate:\nAugust 14, 2024\n\nFix under-utilized resource usage. #1398\n* Fixes bug causing executor to wrongly increase processor counts when not all nodes are utilized.\n* Fixes case where setting num_gpus to zero was treated as None.\nAdd missing PerlmutterGPU specs (these were detected anyway). #1393\nHandle case where Perlmutter finds no partition. #1391\nLaunch environment scripts in shell. #1392\n\nExamples:\n\nAdd proxystore example (uses a proxy in history array). #1326\n\nNote:\n\nTests were run on Linux and MacOS with Python versions 3.9, 3.10, 3.11, 3.12\nHeterogeneous workflows tested on Frontier (OLCF), Polaris (ALCF), and Perlmutter (NERSC).\nNote that tests have been recently run on Aurora (ALCF), but the system was unavailable at time of release.\n\nKnown Issues:\n\nSee known issues section in the documentation.\n\nRelease 1.4.1\uf0c1\n\nDate:\nJuly 29, 2024\n\nFix erroneous nworkers warning when using mpi4py comms. #1383\n\nNote:\n\nTests were run on Linux and MacOS with Python versions 3.9, 3.10, 3.11, 3.12\nHeterogeneous workflows tested on Frontier (OLCF), Polaris (ALCF), and Perlmutter (NERSC).\nNote that tests have been recently run on Aurora (ALCF), but the system was unavailable at time of release.\n\nKnown Issues:\n\nSee known issues section in the documentation.\n\nRelease 1.4.0\uf0c1\n\nDate:\nJuly 25, 2024\n\nAdd a live_data option for real-time data collection / plotting. #1310\nnworkers/is_manager are set when Ensemble object is created. #1331/ #1336\n* This update locks the comms method when Ensemble object is created.\nAdd a group_size option to deal with unevenly resourced nodes. #1349\nBug fix: Fix shutdown hang on worker error when using gen_on_manager. #1348\nBug fix: Log level was locked to INFO when using class interface.\nUpdated code to support numpy 2.0.\n\nDocumentation:\n\nNotebook examples with Colab links added to documentation. #1310\n* E.g., https://colab.research.google.com/github/Libensemble/libensemble/blob/develop/examples/tutorials/aposmm/aposmm_tutorial_notebook.ipynb\nExample of templating input files added to forces tutorial. #1310\n\nExample user functions:\n\nUpdate gpCAM generators to work with latest interface.\nChange one_d_func to norm_eval. Works with multiple dimensions. #1352 / #1354\n\nNote:\n\nTests were run on Linux and MacOS with Python versions 3.9, 3.10, 3.11, 3.12\nHeterogeneous workflows tested on Frontier (OLCF), Polaris (ALCF), and Perlmutter (NERSC).\nNote that tests have been recently run on Aurora (ALCF), but the system was unavailable at time of release.\nTests were also run on Bebop and Improv LCRC systems.\n\nKnown Issues:\n\nSee known issues section in the documentation.\n\nRelease 1.3.0\uf0c1\n\nDate:\nMay 01, 2024\n\nSupport generator running on the manager (on a thread).", "mimetype": "text/plain", "start_char_idx": 2642, "end_char_idx": 6192, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "964904ab-31ea-4153-9d06-22411c6ae7c0": {"__data__": {"id_": "964904ab-31ea-4153-9d06-22411c6ae7c0", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5f183f3a-e2e0-42c0-b387-99f8b24b4132", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "e99e175c461fe08a8273b6c03cfe1b7a2d75870e12336de5daa879bef71acc91", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "57498c3c-af99-438b-8023-0fb25ed1dd93", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "a37b34032270471ff4ddd5360192944a930a9ca4dcfba5e2f9bd6c932b96babc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fc5bf7d2-e43e-45cd-a840-226089d40427", "node_type": "1", "metadata": {}, "hash": "48795a60a4298ef632184d3ea2da9b724eb4f2970d34af7842eb3ecceb26caa0", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "#1310\n\nExample user functions:\n\nUpdate gpCAM generators to work with latest interface.\nChange one_d_func to norm_eval. Works with multiple dimensions. #1352 / #1354\n\nNote:\n\nTests were run on Linux and MacOS with Python versions 3.9, 3.10, 3.11, 3.12\nHeterogeneous workflows tested on Frontier (OLCF), Polaris (ALCF), and Perlmutter (NERSC).\nNote that tests have been recently run on Aurora (ALCF), but the system was unavailable at time of release.\nTests were also run on Bebop and Improv LCRC systems.\n\nKnown Issues:\n\nSee known issues section in the documentation.\n\nRelease 1.3.0\uf0c1\n\nDate:\nMay 01, 2024\n\nSupport generator running on the manager (on a thread). #1216/#1290\n* Set libE_specs[\u201cgen_on_manager\u201d] = True\n* Then run with nworkers equal to the number of simulation workers.\nDefault to local comms when nworkers is supplied and no MPI runner is detected. #1169\nParse args defaults to local comms when \u2013nworkers (or -n) is set on the command line. #1169\n\nNote:\n\nTests were run on Linux and MacOS with Python versions 3.9, 3.10, 3.11, 3.12\nHeterogeneous workflows tested on Frontier (OLCF), Polaris (ALCF), and Perlmutter (NERSC).\nNote that tests have been recently run on Aurora (ALCF), but the system was unavailable at time of release.\nTests were also run on Bebop and Improv LCRC systems.\n\nKnown Issues:\n\nSee known issues section in the documentation.\n\nRelease 1.2.2\uf0c1\n\nDate:\nMarch 21, 2024\n\nBugfix: Some libE_specs were not passed through correctly when added after ensemble initialization. #1264\nplatform_specs options are now merged with detected platforms, rather than replacing. #1265\nEnsure simulation directories are created when sim_input_dir is specified, likewise for gen dirs. #1266\n\nExample user functions:\n\nImproved structure of gpCAM generator. #1260\n\nNote:\n\nTests were run on Linux and MacOS with Python versions 3.9, 3.10, 3.11, 3.12\nHeterogeneous workflows tested on Frontier (OLCF), Polaris (ALCF), and Perlmutter (NERSC).\nNote that tests have been recently run on Aurora (ALCF), but the system was unavailable at time of release.\nTests were also run on Bebop and Improv LCRC systems.\n\nKnown Issues:\n\nSee known issues section in the documentation.\n\nRelease 1.2.1\uf0c1\n\nDate:\nFebruary 23, 2024\n\nFix documentation bug where pydantic models do not display correctly. #1249\nImprove internal efficiency. #1243 / #1249\n\nNote:\n\nTests were run on Linux and MacOS with Python versions 3.9, 3.10, 3.11, 3.12\nHeterogeneous workflows tested on Aurora (ALCF), Frontier (OLCF), Polaris, and Perlmutter (NERSC).\nTests were also run on Bebop and Improv LCRC systems.\n\nKnown Issues:\n\nSee known issues section in the documentation.\n\nRelease 1.2.0\uf0c1\n\nDate:\nFebruary 8, 2024\n\nNew capabilities:\n\nSupport for both Pydantic 1 and 2. #1135\nSupport object dtype in history array. #1179 / #1181\nUsers can add additional fields to output arrays in user functions. #1203\nDecorators to provide user function in/out specs. #1072\n\nFixes:\n\nBug fix - Overwrite history file on completion when even when the pathname is unchanged. #1177\nPrevent duplicate save when using save_every_k_gens. #1154\nAdd a FAILED_TO_START task status. #1229\nSet ensemble.nworkers when create ensemble object even when parse_args is False. #1162\n\nPlatform support:\n\nAdd platform support for Aurora. #1183\n* Support for GPU tiles (new platform spec tiles_per_gpu).\n* Add libE_specs option use_tiles_as_gpus to treat each tile as a GPU.\n* Add Aurora platform guide.\nAdd platform guide for Improv. #1235\nDetection of Perlmutter GPU nodes updated.", "mimetype": "text/plain", "start_char_idx": 5534, "end_char_idx": 9041, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "fc5bf7d2-e43e-45cd-a840-226089d40427": {"__data__": {"id_": "fc5bf7d2-e43e-45cd-a840-226089d40427", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5f183f3a-e2e0-42c0-b387-99f8b24b4132", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "e99e175c461fe08a8273b6c03cfe1b7a2d75870e12336de5daa879bef71acc91", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "964904ab-31ea-4153-9d06-22411c6ae7c0", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "4b35226dcfe226ce195682ee5d169425bee06ac77ca297c734eea3a8b42e8f30", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "61ed0246-04c3-46a2-aca8-24eae5e438d2", "node_type": "1", "metadata": {}, "hash": "b66016137e54a312f7263943f1a0ea1c1d0beeee4a8094b0db21d1d01436d307", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "#1179 / #1181\nUsers can add additional fields to output arrays in user functions. #1203\nDecorators to provide user function in/out specs. #1072\n\nFixes:\n\nBug fix - Overwrite history file on completion when even when the pathname is unchanged. #1177\nPrevent duplicate save when using save_every_k_gens. #1154\nAdd a FAILED_TO_START task status. #1229\nSet ensemble.nworkers when create ensemble object even when parse_args is False. #1162\n\nPlatform support:\n\nAdd platform support for Aurora. #1183\n* Support for GPU tiles (new platform spec tiles_per_gpu).\n* Add libE_specs option use_tiles_as_gpus to treat each tile as a GPU.\n* Add Aurora platform guide.\nAdd platform guide for Improv. #1235\nDetection of Perlmutter GPU nodes updated. #1211\nMake srun GPU setting default to gpus_per_task instead of gpus_per_node. #1206\nRemove Theta support and guide. #1200\n\nExample user functions:\n\nAdd gpCAM generator. #1189 / #1213 / #1220\nSupport for IBCDFO local optimization methods in APOSMM. #998\nAdd mock_sim to enable replay of a previous run using history file. #1207\nFix Sine tutorial. #1168\n\nNote:\n\nTests were run on Linux and MacOS with Python versions 3.9, 3.10, 3.11, 3.12\nHeterogeneous workflows tested on Aurora (ALCF), Frontier (OLCF), Polaris, and Perlmutter (NERSC).\nTests were also run on Bebop and Improv LCRC systems.\n\nKnown Issues:\n\nSee known issues section in the documentation.\n\nRelease 1.1.0\uf0c1\n\nDate:\nNovember 8, 2023\n\nNew capabilities:\n\nNew history array save options in libE_specs. #1103/#1139/#1141\n* save_H_on_completion saves history before exiting main libE function.\n* save_H_with_date includes date and timestamp in the save.\n* H_file_prefix provides prefix for saved file.\n* save_H_on_completion defaults to True when save_every_k_gens/sims is set.\n\nSupport for Python versions:\n\nAdds support/testing for Python 3.12\nRemoves testing of Python 3.8\n\nNote:\n\nTests were run on Linux and MacOS with Python versions 3.9, 3.10, 3.11, 3.12\nHeterogeneous workflows tested on Frontier (OLCF), Polaris, and Perlmutter (NERSC).\nTests were also run on Bebop and Improv LCRC systems.\n\nKnown Issues:\n\nSee known issues section in the documentation.\n\nRelease 1.0.0\uf0c1\n\nDate:\nSeptember 25, 2023\n\nNew capabilities:\n\nlibE_specs option final_gen_send returns last results to the generator (replaces final_fields). #1086\nlibE_specs option reuse_output_dir allows reuse of workflow and ensemble directories. #1028 #1041\nlibE_specs option calc_dir_id_width no. of digits for calc ID in output sim/gen directories. #1052 / #1066\nAdded gen_num_procs and gen_num_gpus libE_specs (and persis_info) options for resourcing a generator. #1068\nAdded gpu_env_fallback option to platform fields - specifies a GPU environment variable (for non-MPI usage). #1050\nNew MPIExecutor submit() argument mpi_runner_type specifies an MPI runner for current call only. #1054\nAllow oversubscription when using the num_procs gen_specs[\u201cout\u201d] option. #1058\nsim/gen_specs can use outputs in place of out to be consistent with inputs. #1075\nExecutor can be obtained from libE_info (4th parameter) in user functions. #1078\n\nBreaking changes:\n\nlibE_specs option final_fields is removed in favor of final_gen_send. #1086\nlibE_specs option kill_canceled_sims now defaults to False. #1062\nparse_args is not run automatically by Ensemble constructor.\n\nUpdates to Object Oriented Ensemble interface:\n\nAdded parse_args as option to Ensemble constructor. #1065\nThe executor can be passed as an option to the Ensemble constructor. #1078\nBetter handling of Ensemble.add_random_streams and ensemble.persis_info. #1074\n\nOutput changes:\n\nThe worker ID suffix is removed from sim/gen output directories.", "mimetype": "text/plain", "start_char_idx": 8309, "end_char_idx": 11963, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "61ed0246-04c3-46a2-aca8-24eae5e438d2": {"__data__": {"id_": "61ed0246-04c3-46a2-aca8-24eae5e438d2", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5f183f3a-e2e0-42c0-b387-99f8b24b4132", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "e99e175c461fe08a8273b6c03cfe1b7a2d75870e12336de5daa879bef71acc91", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fc5bf7d2-e43e-45cd-a840-226089d40427", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "5b9193abf30c42c64b1eaa6303a136f3f0ffc72becd1ab16d8e9f93f19095f43", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "91691de3-1f09-4d81-be2b-d2bc94e1bee1", "node_type": "1", "metadata": {}, "hash": "fb1b508d5f1c6923de777a4b11ac08b5f5f60d690dc6894c2f0265476a5db384", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "#1054\nAllow oversubscription when using the num_procs gen_specs[\u201cout\u201d] option. #1058\nsim/gen_specs can use outputs in place of out to be consistent with inputs. #1075\nExecutor can be obtained from libE_info (4th parameter) in user functions. #1078\n\nBreaking changes:\n\nlibE_specs option final_fields is removed in favor of final_gen_send. #1086\nlibE_specs option kill_canceled_sims now defaults to False. #1062\nparse_args is not run automatically by Ensemble constructor.\n\nUpdates to Object Oriented Ensemble interface:\n\nAdded parse_args as option to Ensemble constructor. #1065\nThe executor can be passed as an option to the Ensemble constructor. #1078\nBetter handling of Ensemble.add_random_streams and ensemble.persis_info. #1074\n\nOutput changes:\n\nThe worker ID suffix is removed from sim/gen output directories. #1041\nSeparate ensemble.log and libE_stats.txt for different workflows directories. #1027 #1041\nDefaults to four digits for sim/gen ID in output directories (adds digits on overflow). #1052 / #1066\n\nBug fixes:\n\nResolved PETSc/Open-MPI issue (when using the Executor). #1064\nPrevent mpi4py validation running during local comms (when using OO interface). #1065\n\nPerformance changes:\n\nOptimize kill_cancelled_sims function. #1043 / #1063\nsafe_mode defaults to False (for performance). #1053\n\nUpdates to example functions:\n\nMultiple regression tests and examples ported to use OO ensemble interface. #1014\n\nUpdate forces examples:\n\nMake persistent generator the default for both simple and GPU examples (inc. updated tutorials).\nUpdate to object oriented interface.\nAdded separate variable resources example for forces GPU.\nRename multi_task example to multi_app.\n\nDocumentation:\n\nGeneral overhaul and simplification of documentation. #992\n\nNote:\n\nTested platforms include Linux, MacOS, Windows, and major systems such as Frontier (OLCF), Polaris, and Perlmutter (NERSC). The major system tests ran heterogeneous workflows.\nTested Python versions: (Cpython) 3.7, 3.8, 3.9, 3.10, 3.11.\n\nKnown Issues:\n\nSee known issues section in the documentation.\n\nRelease 0.10.2\uf0c1\n\nDate:\nJuly 24, 2023\n\nFixes issues with workflow directories:\n* Ensure relative paths are interpreted from where libEnsemble is run. #1020\n* Create intermediate directories for workflow paths. #1017\nFixes issue where libEnsemble pre-initialized a shared multiprocessing queue. #1026\n\nNote:\n\nTested platforms include Linux, MacOS, Windows and major systems including Frontier (OLCF), Polaris (ALCF), Perlmutter (NERSC), Theta (ALCF) and Bebop. The major system tests ran heterogeneous workflows.\n\nKnown issues:\n\nOn systems using SLURM 23.02, some issues have been experienced when using mpi4py comms.\nSee the known issues section in the documentation for more information (https://libensemble.readthedocs.io/en/main/known_issues.html).\n\nRelease 0.10.1\uf0c1\n\nDate:\nJuly 10, 2023\n\nHotfix for breaking changes in Pydantic.\n\nPin Pydantic to version < 2.\nMinor fixes for NumPy 1.25 deprecations.\n\nNote:\n\nTested platforms include Linux, MacOS, Windows and major systems including Frontier (OLCF) and Perlmutter (NERSC). The major system tests ran heterogeneous workflows.\nTested Python versions: (Cpython) 3.7, 3.8, 3.9, 3.10, 3.11.\n\nKnown issues:\n\nSee known issues section in the documentation.\n\nRelease 0.10.0\uf0c1\n\nDate:\nMay 26, 2023\n\nNew capabilities:\n\nEnhance portability and simplify the assignment of procs/GPUs to worker resources #928 / #983\n* Auto-detect GPUs across systems (inc. Nvidia, AMD, and Intel GPUs).\n* Auto-determination of GPU assignment method by MPI runner or provided platform.\n* Portable auto_assign_gpus / match_procs_to_gpus and num_gpus arguments added to the MPI executor submit.\n* Add set_to_gpus function (similar to set_to_slots).\n* Allow users to specify known systems via option or environment variable.\n* Allow users to specify their own system configurations.", "mimetype": "text/plain", "start_char_idx": 11149, "end_char_idx": 15007, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "91691de3-1f09-4d81-be2b-d2bc94e1bee1": {"__data__": {"id_": "91691de3-1f09-4d81-be2b-d2bc94e1bee1", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5f183f3a-e2e0-42c0-b387-99f8b24b4132", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "e99e175c461fe08a8273b6c03cfe1b7a2d75870e12336de5daa879bef71acc91", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "61ed0246-04c3-46a2-aca8-24eae5e438d2", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "5919a384c09dc996f3f4f58c3e22885f7b36843fb6ba78fd125e58d0e49797ad", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "89440a92-9dc7-47a8-a439-f7f1fa3bf68a", "node_type": "1", "metadata": {}, "hash": "1caf3ef531d41acffa2b0e22ded4c571e9b45bee0e12cff9527e5e3b2decab93", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "The major system tests ran heterogeneous workflows.\nTested Python versions: (Cpython) 3.7, 3.8, 3.9, 3.10, 3.11.\n\nKnown issues:\n\nSee known issues section in the documentation.\n\nRelease 0.10.0\uf0c1\n\nDate:\nMay 26, 2023\n\nNew capabilities:\n\nEnhance portability and simplify the assignment of procs/GPUs to worker resources #928 / #983\n* Auto-detect GPUs across systems (inc. Nvidia, AMD, and Intel GPUs).\n* Auto-determination of GPU assignment method by MPI runner or provided platform.\n* Portable auto_assign_gpus / match_procs_to_gpus and num_gpus arguments added to the MPI executor submit.\n* Add set_to_gpus function (similar to set_to_slots).\n* Allow users to specify known systems via option or environment variable.\n* Allow users to specify their own system configurations.\n* These changes remove a number of tweaks that were needed for particular platforms.\nResource management supports GPU and non-GPU simulations in the same ensemble. #993\n* User\u2019s can specify num_procs and num_gpus in the generator for each evaluation.\nPydantic models are used for validating major libE input (input can be provided as classes or dictionaries). #878\nAdded option to store output and ensemble directories in a workflow directory. #982\nSimplify user function interface. Valid user functions can accept <4 parameters and return <3 values. #971\nNew option to parse settings from TOML. #745\nNew dry_run option to libE() that checks scripts are valid and returns. #987\nAdded an option to the executor submit function to pre-execute a script in the task environment. #996\n\nBreaking changes:\n\nRemoved old Balsam Executor. #921\nEnsemble class moved from libensemble.api to libensemble.ensemble. #1003\nDefault to one resource set per simulation in dynamic scheduling mode. #996\n\nDocumentation:\n\nAdded type hints/annotations for major modules/functions. #823\nAdded Polaris Guide. #930\nAdded Frontier Guide. #909\nAdded PBS example scripts. #956 #930\nStreamlined and improved the readability of docs. #1004\n\nTests and Examples:\n\nUpdated forces_gpu tutorial example. #956\n* Source code edit is not required for the GPU version.\n* Reports whether running on device or host.\n* Increases problem size.\n* Added versions with persistent generator and multi-task (GPU v non-GPU).\nMoved multiple tests, generators, and simulators to the community repo.\nAdded ytopt example. And updated heFFTe example. #943\nSupport Python 3.11 #922\n\nNote:\n\nTested platforms include Linux, MacOS, Windows and major systems: Frontier (OLCF), Polaris (ALCF), and Perlmutter (NERSC). The major system tests ran heterogeneous workflows.\nRecent testing was also carried out on Summit (IBM Power9/LSF), but this was not possible at time of release.\nTested Python versions: (Cpython) 3.7, 3.8, 3.9, 3.10, 3.11.\n\nKnown issues:\n\nSee known issues section in the documentation.\n\nRelease 0.9.3\uf0c1\n\nDate:\nOctober 13, 2022\n\nNew capabilities:\n\nNew pair of utilities, liberegister and libesubmit (based on PSI/J), for easily preparing and launching libEnsemble workflows with local comms onto most machines and schedulers. #807\nNew persistent support function to cancel sim_ids (request_cancel_sim_ids). #880\nkeep_state option for persistent workers: this lets the manager know that the information being sent is intermediate. #880\n\nOther enhancements:\n\nThe Executor manager_poll() interface now sets consistent flags instead of literal strings. #877\nSome internal modules and the test suite now work on Windows. #869 #888\nSpecifying the num_resource_sets libE_specs option instead of zero_resource_workers is now recommended except when using a fixed worker/resource mapping. Use persis_info[\"gen_resources\"] to assign persistent generator resources (default is zero). #905\nAn extraneous warning removed.", "mimetype": "text/plain", "start_char_idx": 14235, "end_char_idx": 17971, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "89440a92-9dc7-47a8-a439-f7f1fa3bf68a": {"__data__": {"id_": "89440a92-9dc7-47a8-a439-f7f1fa3bf68a", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5f183f3a-e2e0-42c0-b387-99f8b24b4132", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "e99e175c461fe08a8273b6c03cfe1b7a2d75870e12336de5daa879bef71acc91", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "91691de3-1f09-4d81-be2b-d2bc94e1bee1", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "3bec9a1b83a02401b7a91f16fa37f909be2be915c18fdb5932c36425e3c406de", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5870eb92-a648-4052-b7eb-65d3f4d3fa6d", "node_type": "1", "metadata": {}, "hash": "753bcec41cb386cd5c76b7f2844776be010bf39db75c567c5ed42a61701b09c3", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "#807\nNew persistent support function to cancel sim_ids (request_cancel_sim_ids). #880\nkeep_state option for persistent workers: this lets the manager know that the information being sent is intermediate. #880\n\nOther enhancements:\n\nThe Executor manager_poll() interface now sets consistent flags instead of literal strings. #877\nSome internal modules and the test suite now work on Windows. #869 #888\nSpecifying the num_resource_sets libE_specs option instead of zero_resource_workers is now recommended except when using a fixed worker/resource mapping. Use persis_info[\"gen_resources\"] to assign persistent generator resources (default is zero). #905\nAn extraneous warning removed. #903\n\nNote:\n\nTested platforms include Linux, MacOS, Windows, Theta (Cray XC40/Cobalt), Summit (IBM Power9/LSF), Bebop (Cray CS400/Slurm), Swing (A100 GPU system), Perlmutter (HPE Cray EX with A100 NVIDIA GPUs). For Perlmutter, see \u201cKnown issues\u201d below.\nTested Python versions: (Cpython) 3.7, 3.8, 3.9, 3.10.\n\nKnown issues:\n\nAt time of testing on Perlmutter there was an issue running concurrent applications on a node, following a recent system update. This also affects previous versions of libEnsemble, and is being investigated.\nSee known issues section in the documentation.\n\nRelease 0.9.2\uf0c1\n\nDate:\nJuly 06, 2022\n\nNew capabilities:\n\nSupport auto-detection of PBS node lists. #602\nAdded configuration options for libE_stats.txt file. #743\nSupport for spawn and forkserver multiprocessing start methods. #797\n\nNote that macOS no longer switches to using fork. macOS (since Python 3.8) and Windows default to\nusing spawn. When using spawn, we recommend placing calling script code in an if __name__ == \"__main__\": block.\nThe multiprocessing interface can be used to switch methods (https://docs.python.org/3/library/multiprocessing.html#multiprocessing.set_start_method).\n\nUpdates to example functions:\nAdded simple dynamic sampling example. #833\nAdded heFFTe example. #844\nRegression tests separated into problem examples and functionality tests. #839\n\nNote:\n\nTested platforms include Linux, MacOS, Theta (Cray XC40/Cobalt), Summit (IBM Power9/LSF), Bebop (Cray CS400/Slurm), Swing (A100 GPU system), Perlmutter (HPE Cray EX with A100 NVIDIA GPUs).\nTested Python versions: (Cpython) 3.7, 3.8, 3.9, 3.10.\n\nKnown issues:\n\nThe APOSMM generator function has been noted to operate slower than expected with the spawn multiprocessing start method. For this reason we recommend using fork with APOSMM, when using local comms (fork is the default method on Linux systems).\nSee known issues section in the documentation.\n\nRelease 0.9.1\uf0c1\n\nDate:\nMay 11, 2022\n\nThis release has minimal changes, but a large number of touched lines.\n\nReformatted code for black compliance, including string normalization. #811, #814, #821\nAdded Spock and Crusher guides. #802\nUser can now set calc_status to any string (for output in libE_stats). #808\nAdded a workflows community initiative file. #817\n\nNote:\n\nTested platforms include Linux, MacOS, Theta (Cray XC40/Cobalt), Summit (IBM Power9/LSF), Bebop (Cray CS400/Slurm), Swing (A100 GPU system), Perlmutter (HPE Cray EX with A100 NVIDIA GPUs).\nTested Python versions: (Cpython) 3.7, 3.8, 3.9, 3.10.\n\nKnown issues:\n\nSee known issues section in the documentation.\n\nRelease 0.9.0\uf0c1\n\nDate:\nApr 29, 2022\n\nFeatured new capabilities:\n\nNew Balsam Executor with multi-site capability (run user applications on remote systems). #631, #729\nSupport for funcX (place user functions on remote systems). #712 / #713\nAdded partial support for concurrent/futures interface.", "mimetype": "text/plain", "start_char_idx": 17289, "end_char_idx": 20853, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "5870eb92-a648-4052-b7eb-65d3f4d3fa6d": {"__data__": {"id_": "5870eb92-a648-4052-b7eb-65d3f4d3fa6d", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5f183f3a-e2e0-42c0-b387-99f8b24b4132", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "e99e175c461fe08a8273b6c03cfe1b7a2d75870e12336de5daa879bef71acc91", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "89440a92-9dc7-47a8-a439-f7f1fa3bf68a", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "fa49307d6e52c1100a8436083fddcd193117bed9f592b0e3df29ad01311d396c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "81a00d21-66d7-46c3-9c91-78f740483859", "node_type": "1", "metadata": {}, "hash": "e7563c44ba2448431fdf58296ffef36593e01b68658397477123e4da314dc40d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "#808\nAdded a workflows community initiative file. #817\n\nNote:\n\nTested platforms include Linux, MacOS, Theta (Cray XC40/Cobalt), Summit (IBM Power9/LSF), Bebop (Cray CS400/Slurm), Swing (A100 GPU system), Perlmutter (HPE Cray EX with A100 NVIDIA GPUs).\nTested Python versions: (Cpython) 3.7, 3.8, 3.9, 3.10.\n\nKnown issues:\n\nSee known issues section in the documentation.\n\nRelease 0.9.0\uf0c1\n\nDate:\nApr 29, 2022\n\nFeatured new capabilities:\n\nNew Balsam Executor with multi-site capability (run user applications on remote systems). #631, #729\nSupport for funcX (place user functions on remote systems). #712 / #713\nAdded partial support for concurrent/futures interface. (cancel(), cancelled(), done(), running(), result(), exception() and context manager) #719\n\nBreaking API / helper function changes:\nSee \u201cUpdating for libEnsemble v0.9.0\u201d wiki for details:\nhttps://github.com/Libensemble/libensemble/wiki/Updating-for-libEnsemble-v0.9.0\n\nScheduler options moved from alloc_specs[\u2018user\u2019] to libE_specs. #790\nBalsamMPIExecutor is now LegacyBalsamMPIExecutor. #729\nThe exit_criteria elapsed_wallclock_time has been renamed wallclock_max. #750 (with a deprecation warning)\nClearer and consistent naming of libE-protected fields in history array. #760\n\nUpdates to example functions:\n\nMoved some examples to new repository - [libe-community-examples](https://github.com/Libensemble/libe-community-examples) (VTMOP, DEAP, DeepDriveMD). #716, #721, #726\nUpdates to Tasmanian examples to include asynchronous generator example. #727 / #732\nAdded multi-task, multi-fidelity optimization regression tests using ax. #717 / #720\n\nOther functionality enhancements:\n\nNon-blocking option added for persistent user function receives. #752\nAdded match_slots option to resource scheduler. #746\n\nDocumentation:\n\nAdded tutorial on assigning tasks to GPUs. #768\nRefactored Executor tutorial for simplicity. #749\nAdded Perlmutter guide. #728\nAdded Slurm guide. #728\nRefactored examples and tutorials - added exercises. #736 / #737\nUpdated history array documentation with visual workflow example. #723\n\nNote:\n\nTested platforms include Linux, MacOS, Theta (Cray XC40/Cobalt), Summit (IBM Power9/LSF), Bebop (Cray CS400/Slurm), Swing (A100 GPU system), Perlmutter (HPE Cray EX with A100 NVIDIA GPUs).\nTested Python versions: (Cpython) 3.7, 3.8, 3.9, 3.10.\n\nKnown issues:\n\nOpen-MPI does not work with direct MPI job launches in mpi4py comms mode,\nsince it does not support nested MPI launches.\n(Either use local mode or the Balsam Executor.)\nSee known issues section in the documentation for more issues.\n\nRelease 0.8.0\uf0c1\n\nDate:\nOct 20, 2021\n\nFeatured new capabilities:\n\nVariable resource workers (dynamic reassignment of resources to workers). #643\nAlternative libE interface. An Ensemble object is created and can be parameterized by a YAML file. #645\nImproved support classes/functions for alloc/gen/sims and executors.\nMany new example generator/simulators and workflows.\n\nBreaking API / helper function changes:\nSee \u201cUpdating for libEnsemble v0.8.0\u201d wiki for details:\nhttps://github.com/Libensemble/libensemble/wiki/Updating-for-libEnsemble-v0.8.0\n\nResources management is now independent of the executor. #345\nThe 'persis_in' field has been added to gen_specs/sim_specs (instead of being hard-coded in alloc funcs). #626 / #670\nalloc support module is now a class. #643 / #656\ngen_support module is replaced by Persistent Worker support module (now a class). #609 / #671\nRemove libE_ prefix from the logger. #608\navail_worker_ids function should specify EVAL_GEN_TAG or EVAL_SIM_TAG instead of True. #615 #643\nPass libE_info to allocation functions (allows more flexibility for user and efficiency improvements).", "mimetype": "text/plain", "start_char_idx": 20190, "end_char_idx": 23876, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "81a00d21-66d7-46c3-9c91-78f740483859": {"__data__": {"id_": "81a00d21-66d7-46c3-9c91-78f740483859", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5f183f3a-e2e0-42c0-b387-99f8b24b4132", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "e99e175c461fe08a8273b6c03cfe1b7a2d75870e12336de5daa879bef71acc91", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5870eb92-a648-4052-b7eb-65d3f4d3fa6d", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "d377d13bea50ebd3cbe3ea8b784f684cdac38575f4d1ae67515a6317f7f9813f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "34f5814b-1482-40dc-b2c5-c6c7c167ff8a", "node_type": "1", "metadata": {}, "hash": "e8f8ebe072ac5f393b196aa4d6edb73144931df670b9135d626db70147dab8f4", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Many new example generator/simulators and workflows.\n\nBreaking API / helper function changes:\nSee \u201cUpdating for libEnsemble v0.8.0\u201d wiki for details:\nhttps://github.com/Libensemble/libensemble/wiki/Updating-for-libEnsemble-v0.8.0\n\nResources management is now independent of the executor. #345\nThe 'persis_in' field has been added to gen_specs/sim_specs (instead of being hard-coded in alloc funcs). #626 / #670\nalloc support module is now a class. #643 / #656\ngen_support module is replaced by Persistent Worker support module (now a class). #609 / #671\nRemove libE_ prefix from the logger. #608\navail_worker_ids function should specify EVAL_GEN_TAG or EVAL_SIM_TAG instead of True. #615 #643\nPass libE_info to allocation functions (allows more flexibility for user and efficiency improvements). #672\n'given_back' is now a protected libEnsemble field in the manager\u2019s history array. #651\nSeveral name changes to functions and parameters (See the wiki above for details). #529 / #659\n\nUpdates to example functions:\n\nSuite of distributed optimization methods for minimizing sums of convex functions. #647 / #649. Methods include:\n\nprimal-dual sliding (https://arxiv.org/pdf/2101.00143).\nN-agent, or distributed gradient descent w/ gradient tracking (https://arxiv.org/abs/1908.11444).\nproximal sliding (https://arxiv.org/abs/1406.0919).\n\nAdded batched construction for Tasmanian example. #644\nAdded Tasmanian dependency to Spack package. spack/spack#25762\nAdded VTMOP source code and example usage. #676\nAdded a multi-fidelity persistent_gp regression test. #683 / #684\nAdded a DeepDriveMD inspired workflow. #630\nCreated a persistent sim example. #614 / #615\nAdded an example where cancellations are given from the alloc func. #677\n\nOther functionality changes:\n\nA helper function for generic task polling loop has been added. #572 / #612\nBreak main loop now happens when sim_max is returned rather than given out. #624\nEnable a final communication with gen. #620 / #628\nLogging updates - includes timestamps, enhanced debug logging, and libEnsemble version. #629 / #674\n\nNote:\n\nTested platforms include Linux, MacOS, Theta (Cray XC40/Cobalt), Summit (IBM Power9/LSF), Bebop (Cray CS400/Slurm), Swing (A100 GPU system).\nTested Python versions: (Cpython) 3.6, 3.7, 3.8, 3.9, 3.10 [1].\n\n[1]\nA reduced set of tests were run for python 3.10 due to some unavailable test dependencies at time of release.\n\nKnown issues:\n\nOpen-MPI does not work with direct MPI job launches in mpi4py comms mode,\nsince it does not support nested MPI launches.\n(Either use local mode or the Balsam Executor.)\nSee known issues section in the documentation for more issues.\n\nRelease 0.7.2\uf0c1\n\nDate:\nMay 03, 2021\n\nAPI additions:\n\nActive receive option added that allows irregular manager/worker communication patterns. (#527 / #595)\nA mechanism is added for the cancellation/killing of previously issued evaluations. (#528 / #595 / #596)\nA submit function is added in the base Executor class that runs a serial application locally. (#531 / #595)\nAdded libEnsemble history array protected fields: returned_time, last_given_time, and last_gen_time. (#590)\nUpdated libE_specs options (mpi_comm and profile). (#547 / #548)\nExplicit seeding of random streams in add_unique_random_streams() is now possible. (#542 / #545)\n\nUpdates to example functions:\n\nAdded Surmise calibration generator function and two examples (regression tests). (#595)\n\nOther changes:\n\nBetter support for uneven worker to node distribution (including at sub-node level). (#591 / #600)\nFixed crash when running on Windows. (#534)\nFixed crash when running with empty persis_info. (#571 / #578)\nError handling has been made more robust. (#592)\nImprove H0 processing (esp. for pre-generated, but not evaluated points).", "mimetype": "text/plain", "start_char_idx": 23081, "end_char_idx": 26832, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "34f5814b-1482-40dc-b2c5-c6c7c167ff8a": {"__data__": {"id_": "34f5814b-1482-40dc-b2c5-c6c7c167ff8a", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5f183f3a-e2e0-42c0-b387-99f8b24b4132", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "e99e175c461fe08a8273b6c03cfe1b7a2d75870e12336de5daa879bef71acc91", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "81a00d21-66d7-46c3-9c91-78f740483859", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "8f2907b999b15b4490f893d36de894a6d96961d2804806c7b24779dd3bccf783", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "595d028b-96bf-486a-bcec-078fe74f8616", "node_type": "1", "metadata": {}, "hash": "4b101de54994f67847574cfe7344530d3a301ee1137f19934d3096a504f74153", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "(#531 / #595)\nAdded libEnsemble history array protected fields: returned_time, last_given_time, and last_gen_time. (#590)\nUpdated libE_specs options (mpi_comm and profile). (#547 / #548)\nExplicit seeding of random streams in add_unique_random_streams() is now possible. (#542 / #545)\n\nUpdates to example functions:\n\nAdded Surmise calibration generator function and two examples (regression tests). (#595)\n\nOther changes:\n\nBetter support for uneven worker to node distribution (including at sub-node level). (#591 / #600)\nFixed crash when running on Windows. (#534)\nFixed crash when running with empty persis_info. (#571 / #578)\nError handling has been made more robust. (#592)\nImprove H0 processing (esp. for pre-generated, but not evaluated points). (#536 / #537)\nA global sim_id is now given, rather than a local count, in _libE_stats.txt_. Also a global gen count is given. (#587, #588)\nAdded support for Python 3.9. (#532 / Removed support for Python 3.5. (#562)\nImprove SLURM nodelist detection (more robust). (#560)\nAdd check that user does not change protected history fields (Disable via libE_specs['safe_mode'] = False). (#541)\nAdded print_fields.py script for better interrogating the output history files. (#558)\nIn examples, is_master changed to is_manager to be consistent with manager/worker nomenclature. (#524)\n\nDocumentation:\n\nAdded tutorial Borehole Calibration with Selective Simulation Cancellation. (#581 / #595)\n\nNote:\n\nTested platforms include Linux, MacOS, Theta (Cray XC40/Cobalt), Summit (IBM Power9/LSF), Bebop (Cray CS400/Slurm).\nTested Python versions: (Cpython) 3.6, 3.7, 3.8, 3.9.\n\nKnown issues:\n\nOpen-MPI does not work with direct MPI job launches in mpi4py comms mode, since it does not support nested MPI launches\n(Either use local mode or Balsam Executor).\nSee known issues section in the documentation for more issues.\n\nRelease 0.7.1\uf0c1\n\nDate:\nOct 15, 2020\n\nDependencies:\n\npsutils is now a required dependency. (#478 #491)\n\nAPI additions:\n\nExecutor updates:\n\nAddition of a zero-resource worker option for persistent gens (does not allocate nodes to gen). (#500)\nMultiple applications can be registered to the Executor (and submitted) by name. (#498)\nWait function added to Tasks. (#499)\n\nGen directories can now be created with options analogous to those for sim dirs. (#349 / #489)\n\nOther changes:\n\nImprove comms efficiency (Repack fields when NumPy version 1.15+). (#511)\nFix multiprocessing error on macOS/Python3.8 (Use \u2018fork\u2019 instead of \u2018spawn\u2019). (#502 / #503)\n\nUpdates to example functions:\n\nAllow APOSMM to trigger ensemble exit when condition reached. (#507)\nImprovement in how persistent APOSMM shuts down subprocesses (preventing PETSc MPI-abort). (#478)\n\nDocumentation:\n\nAPOSMM Tutorial added. (#468)\nWriting guide for user functions added to docs (e.g., creating sim_f, gen_f, alloc_f). (#510)\nAddition of posters and presentations section to docs (inc. Jupyter notebooks/binder links). (#492 #497)\n\nNote:\n\nTested platforms include Linux, MacOS, Theta (Cray XC40/Cobalt), Summit (IBM Power9/LSF), Bebop (Cray CS400/Slurm), and Bridges (HPE system at PSC).\nCori (Cray XC40/Slurm) was not tested with release code due to system issues.\nTested Python versions: (Cpython) 3.5, 3.6, 3.7, 3.8.\n\nKnown issues:\n\nWe currently recommend running in Central mode on Bridges, as distributed runs are experiencing hangs.\nOpen-MPI does not work with direct MPI job launches in mpi4py comms mode, since it does not support nested MPI launches\n(Either use local mode or Balsam Executor).\nSee known issues section in the documentation for more issues.", "mimetype": "text/plain", "start_char_idx": 26082, "end_char_idx": 29661, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "595d028b-96bf-486a-bcec-078fe74f8616": {"__data__": {"id_": "595d028b-96bf-486a-bcec-078fe74f8616", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5f183f3a-e2e0-42c0-b387-99f8b24b4132", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "e99e175c461fe08a8273b6c03cfe1b7a2d75870e12336de5daa879bef71acc91", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "34f5814b-1482-40dc-b2c5-c6c7c167ff8a", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "ebe410a87bd98e832dd4f192cf9d6923b04823dc961dcf9230fc92ca6f7b7afc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f2a2d483-3213-49a5-9d5d-17507b1ac8be", "node_type": "1", "metadata": {}, "hash": "402d2cb5a363cba985de091920a34c0c62acb6c47f81cd3583d8bc45df0289a0", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Jupyter notebooks/binder links). (#492 #497)\n\nNote:\n\nTested platforms include Linux, MacOS, Theta (Cray XC40/Cobalt), Summit (IBM Power9/LSF), Bebop (Cray CS400/Slurm), and Bridges (HPE system at PSC).\nCori (Cray XC40/Slurm) was not tested with release code due to system issues.\nTested Python versions: (Cpython) 3.5, 3.6, 3.7, 3.8.\n\nKnown issues:\n\nWe currently recommend running in Central mode on Bridges, as distributed runs are experiencing hangs.\nOpen-MPI does not work with direct MPI job launches in mpi4py comms mode, since it does not support nested MPI launches\n(Either use local mode or Balsam Executor).\nSee known issues section in the documentation for more issues.\n\nRelease 0.7.0\uf0c1\n\nDate:\nMay 22, 2020\n\nBreaking API changes:\n\nJob_controller/Job renamed to Executor/Task and launch function to submit. (#285)\nExecutors/Resources/Utils moved into sub-packages. utils now in package tools. (#285)\nsim/gen/alloc support functions moved into tools sub-package. (#285)\nRestructuring of sim directory creation with libE_specs configuration options.\nE.g: When sim_input_dir is given, directories for each sim are created. (#267)\nUser can supply a file called node_list (replaces worker_list). (#455)\n\nAPI additions:\n\nAdded gen_funcs.rc configuration framework with option to select APOSMM Optimizers for import. (#444)\nProvide alloc_specs defaults via alloc_funcs.defaults module. (#325)\nAdded extra_args option to the Executor submit function to allow addition of arbitrary MPI runner options. (#445)\nAdded custom_info argument to MPI Executor to allow overriding of detected settings. (#448)\nAdded libE_specs option to disable log files. (#368)\n\nOther changes:\n\nAdded libEnsemble Conda package, hosted on conda-forge.\nBugfix: Intermittent failures with repeated libE calls under mpi4py comms.\nEvery libE call now uses its own duplicate of provided communicator and closes out. (#373/#387)\nMore accurate timing in libE_stats.txt. (#318)\nAddition of new post-processing scripts.\n\nUpdates to example functions:\n\nPersistent APOSMM is now the recommended APOSMM (aposmm.py renamed to old_aposmm.py). (#435)\nNew alloc/gen func: Finite difference parameters with noise estimation. (#350)\nNew example gen func: Tasmanian UQ generator. (#351)\nNew example gen func: Deap/NSGA2 generator. (#407)\nNew example gen func to interface with VTMOP.\nNew example sim func: Borehole. (#367)\nNew example use-case: WarpX/APOSMM. (#425)\n\nNote:\n\nTested platforms include Linux, MacOS, Theta (Cray XC40/Cobalt), Summit (IBM Power9/LSF), Bebop (Cray CS400/Slurm), Cori (Cray XC40/Slurm), and Bridges (HPE system at PSC).\nTested Python versions: (Cpython) 3.5, 3.6, 3.7, 3.8.\n\nKnown issues:\n\nWe currently recommended running in Central mode on Bridges as distributed runs are experiencing hangs.\nSee known issues section in the documentation for more issues.\n\nRelease 0.6.0\uf0c1\n\nDate:\nDecember 4, 2019\n\nAPI changes:\n\nsim/gen/alloc_specs options that do not directly involve these routines are moved to libE_specs (see docs). (#266, #269)\nsim/gen/alloc_specs now require user-defined attributes to be added under the 'user' field (see docs and examples). (#266, #269)\nAddition of a utils module to help users create calling scripts. Includes an argument parser and utility functions. (#308)\ncheck_inputs() function is moved to the utils module. (#308)\nThe libE_specs option nprocesses has been changed to nworkers. (#235)\n\nNew example functions:\n\nAddition of a persistent APOSMM generator function. (#217)\n\nOther changes:\n\nOverhaul of documentation, including HPC platform guides and a new pdf structure. (inc. #232, #282)\nAddition of OpenMP threading and GPU support to forces test. (#250)\nBalsam job_controller now tested on Travis.", "mimetype": "text/plain", "start_char_idx": 28982, "end_char_idx": 32692, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f2a2d483-3213-49a5-9d5d-17507b1ac8be": {"__data__": {"id_": "f2a2d483-3213-49a5-9d5d-17507b1ac8be", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5f183f3a-e2e0-42c0-b387-99f8b24b4132", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "e99e175c461fe08a8273b6c03cfe1b7a2d75870e12336de5daa879bef71acc91", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "595d028b-96bf-486a-bcec-078fe74f8616", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "73cdb7c76c5418cccfaca6e9b129aa8c9fd6c9a4676be4fe2bcfd8146a532c10", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ce96e6fa-0fea-42ab-a191-4ea329170c02", "node_type": "1", "metadata": {}, "hash": "fbdad5f2e7c02d0c63bcb97b2c31d83726ddb85e2f410931c184f40da15e2c86", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "(#266, #269)\nsim/gen/alloc_specs now require user-defined attributes to be added under the 'user' field (see docs and examples). (#266, #269)\nAddition of a utils module to help users create calling scripts. Includes an argument parser and utility functions. (#308)\ncheck_inputs() function is moved to the utils module. (#308)\nThe libE_specs option nprocesses has been changed to nworkers. (#235)\n\nNew example functions:\n\nAddition of a persistent APOSMM generator function. (#217)\n\nOther changes:\n\nOverhaul of documentation, including HPC platform guides and a new pdf structure. (inc. #232, #282)\nAddition of OpenMP threading and GPU support to forces test. (#250)\nBalsam job_controller now tested on Travis. (#47)\n\nNote:\n\nTested platforms include Linux, MacOS, Theta (Cray XC40/Cobalt), Summit (IBM Power9/LSF), Bebop (Cray CS400/Slurm), and Cori (Cray XC40/Slurm).\nTested Python versions: (Cpython) 3.5, 3.6, 3.7\n\nKnown issues:\n\nThese are unchanged from v0.5.0.\nA known issues section has now been added to the documentation.\n\nRelease 0.5.2\uf0c1\n\nDate:\nAugust 19, 2019\n\nCode has been restructured to meet xSDK package policies for interoperable ECP software (version 0.5.0). #208\nThe use of MPI.COMM_WORLD has been removed. Uses a duplicate of COMM_WORLD if no communicator passed (any process not in communicator returns with an exit code of 3). #108\nAll output from libEnsemble goes via logger. MANAGER_WARNING level added. This level and above are echoed to stderr by default. API option to change echo level.\nSimulation directories are created only during sim_f calls are suffixed by _worker. #146\nNew user function libE.check_inputs() can be used to check valid configuration of inputs. Can be called in serial or under MPI (see libE API). #65\nInstallation option has been added to install dependencies used in tests pip install libensemble[extras].\nA profiling option has been added to sim_specs. #170\nResults comparison scripts have been included for convenience.\n\nNote:\n\nTested platforms include Linux, MacOS (New), Theta (Cray XC40/Cobalt), Summit (IBM Power9/LSF), and Bebop (Cray CS400/Slurm).\nTested Python versions: (Cpython) 3.5, 3.6, 3.7\nNote Support has been removed for Python 3.4 since it is officially retired. Also NumPy has removed support.\n\nKnown issues:\n\nThese are unchanged from v0.5.0.\n\nRelease 0.5.1\uf0c1\n\nDate:\nJuly 11, 2019\n\nFixed LSF resource detection for large jobs on LSF systems (e.g., Summit). #184\nAdded support for macOS. #182\nImproved the documentation (including addition of beginner\u2019s tutorial and FAQ).\n\nNote:\n\nTested platforms include Local Linux, Theta (Cray XC40/Cobalt), Summit (IBM Power9/LSF), and Bebop (Cray CS400/Slurm).\nTested Python versions: (Cpython) 3.4, 3.5, 3.6, 3.7.\n\nKnown issues:\n\nThese are unchanged from v0.5.0.\n\nRelease 0.5.0\uf0c1\n\nDate:\nMay 22, 2019\n\nAdded local (multiprocessing) and TCP options for manager/worker communications, in addition to mpi4py. (#42).\n\nExample: libEnsemble can be run on MOM/launch nodes (e.g., those of ALCF/Theta & OLCF/Summit) and can remotely detect compute resources.\nExample: libEnsemble can be run on a system without MPI.\nExample: libEnsemble can be run with a local manager and remote TCP workers.\n\nAdded support for Summit/LSF scheduler in job controller.\nMPI job controller detects and retries launches on failure; adding resilience. (#143)\nJob controller supports option to extract/print job times in libE_stats.txt. (#136)\nDefault logging level changed to INFO. (#164)\nLogging interface added, which allows user to change logging level and file.", "mimetype": "text/plain", "start_char_idx": 31984, "end_char_idx": 35522, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ce96e6fa-0fea-42ab-a191-4ea329170c02": {"__data__": {"id_": "ce96e6fa-0fea-42ab-a191-4ea329170c02", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5f183f3a-e2e0-42c0-b387-99f8b24b4132", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "e99e175c461fe08a8273b6c03cfe1b7a2d75870e12336de5daa879bef71acc91", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f2a2d483-3213-49a5-9d5d-17507b1ac8be", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "3b3f91484d407c93bcf7845f61d8fbb0295c15c6dadc55a54e896aa86887dae2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0a31dac0-0c7b-44b8-be39-22a21c4b5aab", "node_type": "1", "metadata": {}, "hash": "fe6c1cb793fb85d66e076da5d40e159bc3c8738d57a9d291a667b91068e85f44", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Release 0.5.0\uf0c1\n\nDate:\nMay 22, 2019\n\nAdded local (multiprocessing) and TCP options for manager/worker communications, in addition to mpi4py. (#42).\n\nExample: libEnsemble can be run on MOM/launch nodes (e.g., those of ALCF/Theta & OLCF/Summit) and can remotely detect compute resources.\nExample: libEnsemble can be run on a system without MPI.\nExample: libEnsemble can be run with a local manager and remote TCP workers.\n\nAdded support for Summit/LSF scheduler in job controller.\nMPI job controller detects and retries launches on failure; adding resilience. (#143)\nJob controller supports option to extract/print job times in libE_stats.txt. (#136)\nDefault logging level changed to INFO. (#164)\nLogging interface added, which allows user to change logging level and file. (#110)\nAll worker logging and calculation stats are routed through manager.\nlibEnsemble can be run without a gen_func, for example, when using a previously computed random sample. (#122)\nAborts dump persis_info with the history.\n\nNote:\n\nThis version no longer supports Python 2.\nTested platforms include Local Linux, Theta (Cray XC40/Cobalt), Summit (IBM Power9/LSF), and Bebop (Cray CS400/Slurm).\n\nKnown issues:\n\nOpen-MPI does not work with direct MPI job launches in mpi4py comms mode, since it does not support nested MPI launches\n(Either use local mode or Balsam job controller).\nLocal comms mode (multiprocessing) may fail if MPI is initialized before forking processors. This is thought to be responsible for issues combining with PETSc.\nRemote detection of logical cores via LSB_HOSTS (e.g., Summit) returns number of physical cores since SMT info not available.\nTCP mode does not support (1) more than one libEnsemble call in a given script or (2) the auto-resources option to the job controller.\n\nRelease 0.4.1\uf0c1\n\nDate:\nFebruary 20, 2019\n\nLogging no longer uses root logger (also added option to change libEnsemble log level). (#105)\nAdded wait_on_run option for job controller launch to block until jobs have started. (#111)\npersis_info can be passed to sim as well as gen functions. (#112)\nPostprocessing scripts added to create performance/utilization graphs. (#102)\nNew scaling test added (not part of current CI test suite). (#114)\n\nRelease 0.4.0\uf0c1\n\nDate:\nNovember 7, 2018\n\nSeparated job controller classes into different modules including a base class (API change).\nAdded central_mode run option to distributed type (MPI) job_controllers (API addition). (#93)\nMade poll and kill job methods (API change).\nIn job_controller, set_kill_mode is removed and replaced by a wait argument for a hard kill (API change).\nRemoved register module - incorporated into job_controller (API change).\nAPOSMM has improved asynchronicity when batch mode is false (with new example). (#96)\nManager errors (instead of hangs) when alloc_f or gen_f don\u2019t return work when all workers are idle. (#95)\n\nKnown issues:\n\nOpen-MPI is not supported with direct MPI launches since nested MPI launches are not supported.\n\nRelease 0.3.0\uf0c1\n\nDate:\nSeptember 7, 2018\n\nIssues with killing jobs have been fixed. (#21)\nFixed job_controller manager_poll to work with multiple jobs. (#62)\nAPI change: persis_info now included as an argument to libE and is returned from libE instead of gen_info\nGen funcs: aposmm_logic module renamed to aposmm.\nNew example gen and allocation functions.\nUpdated Balsam launch script (with new Balsam workflow).\nHistory is dumped to file on manager or worker exception and MPI aborted (with exit code 1). (#46)\nDefault logging level changed to DEBUG and redirected to file ensemble.log.\nAdded directory of standalone tests (comms, job kills, and nested MPI launches).\nImproved and sped up unit tests. (#68)\nConsiderable documentation enhancements.\n\nKnown issues:\n\nOpen-MPI is not supported with direct MPI launches since nested MPI launches are not supported.\n\nRelease 0.2.0\uf0c1\n\nDate:\nJune 29, 2018\n\nAdded job_controller interface (for portable user scripts).\nAdded support for using the Balsam job manager. Enables portability and dynamic scheduling.", "mimetype": "text/plain", "start_char_idx": 34752, "end_char_idx": 38775, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "0a31dac0-0c7b-44b8-be39-22a21c4b5aab": {"__data__": {"id_": "0a31dac0-0c7b-44b8-be39-22a21c4b5aab", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5f183f3a-e2e0-42c0-b387-99f8b24b4132", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "e99e175c461fe08a8273b6c03cfe1b7a2d75870e12336de5daa879bef71acc91", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ce96e6fa-0fea-42ab-a191-4ea329170c02", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/release_notes.html", "file_name": "release_notes.html", "file_type": "text/html", "file_size": 83679, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "d169dc035bef659db36b249543d30268e04173bcaa5ed266483e8fde0b4c9d79", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "New example gen and allocation functions.\nUpdated Balsam launch script (with new Balsam workflow).\nHistory is dumped to file on manager or worker exception and MPI aborted (with exit code 1). (#46)\nDefault logging level changed to DEBUG and redirected to file ensemble.log.\nAdded directory of standalone tests (comms, job kills, and nested MPI launches).\nImproved and sped up unit tests. (#68)\nConsiderable documentation enhancements.\n\nKnown issues:\n\nOpen-MPI is not supported with direct MPI launches since nested MPI launches are not supported.\n\nRelease 0.2.0\uf0c1\n\nDate:\nJune 29, 2018\n\nAdded job_controller interface (for portable user scripts).\nAdded support for using the Balsam job manager. Enables portability and dynamic scheduling.\nAdded autodetection of system resources.\nScalability testing: Ensemble performed with 1023 workers on Theta (Cray XC40) using Balsam.\nTested MPI libraries: MPICH and Intel MPI.\n\nKnown issues:\n\nKilling MPI jobs does not work correctly on some systems (including Cray XC40 and CS400). In these cases, libEnsemble continues, but processes remain running.\nOpen-MPI does not work correctly with direct launches (and has not been tested with Balsam).\n\nRelease 0.1.0\uf0c1\n\nDate:\nNovember 30, 2017\n\nInitial release.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 38039, "end_char_idx": 39406, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "fea28a9d-ca32-4a5c-8311-2a468adfc563": {"__data__": {"id_": "fea28a9d-ca32-4a5c-8311-2a468adfc563", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/resource_manager/overview.html", "file_name": "overview.html", "file_type": "text/html", "file_size": 33705, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "04c450f2-4611-402c-b202-7b2a25b3b230", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/resource_manager/overview.html", "file_name": "overview.html", "file_type": "text/html", "file_size": 33705, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "3991bff13b265946d37c0ae38f70b19920d643c01352498ce7b1e78e35ab4b16", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "18aa502b-1c26-4e24-8a16-a7f2d034b569", "node_type": "1", "metadata": {}, "hash": "7881f35087763b63607dc7943cad329b15c45b687740506bbbf6f1aecf91a491", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Dynamic Assignment of Resources \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nOutput Management\nHistory Array\nResource Manager\nZero-resource workers (e.g., Persistent gen does not need resources)\nDynamic Assignment of Resources\nOverview\nVariable resource assignment\nExample scenarios\n\nResource Detection\nScheduler Module\nWorker Resources Module (query resources for current worker)\n\nWriting User Functions\nExecutors\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nResource Manager\nDynamic Assignment of Resources\n\n View page source\n\nDynamic Assignment of Resources\uf0c1\n\nOverview\uf0c1\nlibEnsemble comes with built-in resource management. This entails the\ndetection of available resources (e.g., nodelists,\ncore counts, and GPUs), and the allocation of resources to workers.\nBy default, the provisioned resources are divided by the number of workers.\nlibEnsemble\u2019s MPI Executor is aware of\nthese supplied resources, and if not given any of num_nodes, num_procs,\nor procs_per_node in the submit function, it will try to use all nodes and\nCPU cores available to the worker.\nDetected resources can be overridden using the libE_specs option\nresource_info.\n\nVariable resource assignment\uf0c1\n\nNote\nAs of version 0.10.0, the concept of resource sets is not needed. The generator\ncan use special gen_specs[\"out\"] fields of num_procs and num_gpus for each\nsimulation generated. These will be used to assign resources and will be\nautomatically passed through and used by the executor (if no other run configuration\nis given in the submit line). Furthermore, GPUs will be automatically assigned\nin the correct way for the given system (including Nvidia, AMD, and Intel GPUs);\nyou do not need to set CUDA_VISIBLE_DEVICES or equivalent. Example:\ntest_GPU_variable_resources.py\n\nIn slightly more detail, the resource manager divides resources into resource sets.\nOne resource set is the smallest unit of resources that can be assigned (and\ndynamically reassigned) to workers. By default, the provisioned resources are\ndivided by the number of workers (excluding any workers given in the\nzero_resource_workers libE_specs option).\nHowever, it can also be set directly by the num_resource_sets\nlibE_specs option. If the latter is set, the\ndynamic resource assignment algorithm will always be used.\nIf there are more resource sets than nodes, then the resource sets on each node\nwill be given a slot number, enumerated from zero. For example, if there are three\nslots on a node, they will have slot numbers 0, 1, and 2.\nThe resource manager will not split a resource set over nodes, rather the resource\nsets on each node will be the integer division of resource sets over nodes, with\nthe remainder dealt out from the first node. Even breakdowns are generally\npreferable, however.\nFor example, say a given system has four GPUs per node, and the user has run\nlibEnsemble on two nodes, with eight workers. The default division of resources\nwould be:\n\nVariable Size simulations\uf0c1\nA dynamic assignment of resources to simulation workers can be achieved by the\nconvention of using a field in the history array called resource_sets. While\nthis is technically a user space field, the allocation functions are set up to\nread this field, check available resources, and assign resource sets to workers,\nalong with the work request (simulation).\nIn the calling script, use a gen_specs[\"out\"] field called resource_sets:\ngen_specs = {\n \"gen_f\": gen_f,\n \"in\": [\"sim_id\"],\n \"out\": [\n (\"priority\", float),\n (\"resource_sets\", int),\n (\"x\", float, n),\n ],\n}\n\nFor an example calling script, see the regression test\ntest_persistent_sampling_CUDA_variable_resources.py\nIn the generator, the resource_sets field must be set to a value for each point\n(simulation) generated (if it is not set, it will have the initialized value of zero,\nand supply zero resources).", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4464, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "18aa502b-1c26-4e24-8a16-a7f2d034b569": {"__data__": {"id_": "18aa502b-1c26-4e24-8a16-a7f2d034b569", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/resource_manager/overview.html", "file_name": "overview.html", "file_type": "text/html", "file_size": 33705, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "04c450f2-4611-402c-b202-7b2a25b3b230", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/resource_manager/overview.html", "file_name": "overview.html", "file_type": "text/html", "file_size": 33705, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "3991bff13b265946d37c0ae38f70b19920d643c01352498ce7b1e78e35ab4b16", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fea28a9d-ca32-4a5c-8311-2a468adfc563", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/resource_manager/overview.html", "file_name": "overview.html", "file_type": "text/html", "file_size": 33705, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "fed9d3864f0d434258f1f9097a38a80c1f97464a65e81219acbbc43cf01de83c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c225d90d-8497-44f9-935b-0320c04c460d", "node_type": "1", "metadata": {}, "hash": "4dff067ab214aa54705fac5cb608d3176c049d60f31f8d3151dd2ec9a5cb902d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "While\nthis is technically a user space field, the allocation functions are set up to\nread this field, check available resources, and assign resource sets to workers,\nalong with the work request (simulation).\nIn the calling script, use a gen_specs[\"out\"] field called resource_sets:\ngen_specs = {\n \"gen_f\": gen_f,\n \"in\": [\"sim_id\"],\n \"out\": [\n (\"priority\", float),\n (\"resource_sets\", int),\n (\"x\", float, n),\n ],\n}\n\nFor an example calling script, see the regression test\ntest_persistent_sampling_CUDA_variable_resources.py\nIn the generator, the resource_sets field must be set to a value for each point\n(simulation) generated (if it is not set, it will have the initialized value of zero,\nand supply zero resources).\nH_o = np.zeros(b, dtype=gen_specs[\"out\"])\nfor i in range(0, b):\n H_o[\"x\"][i] = x[b]\n H_o[\"resource_sets\"][i] = sim_size[b]\n\nFor an example generator, see the uniform_sample\nfunction in persistent_sampling_var_resources.py\nWhen the allocation function assigns the points to workers for evaluation, it\nwill check if the requested number of resource sets are available for each point\nto evaluate. If they are not available, then the evaluation will not be given to\na worker until enough resources become available. This functionality is built\ninto the supplied allocation functions and generally requires no modification\nfrom the user.\n\nThe particular nodes and slots assigned to each worker will be determined by the\nlibEnsemble built-in scheduler, although users can provide\nan alternative scheduler via the allocation function.\nIn short, the scheduler will prefer fitting simulations onto a node, and using\neven splits across nodes, if necessary.\n\nAccessing resources from the simulation function\uf0c1\nIn the user\u2019s simulation function, the resources supplied to the worker can be\ninterrogated directly via the resources class attribute.\nlibEnsemble\u2019s executors (e.g., the MPI Executor) are\naware of these supplied resources, and if not given any of num_nodes, num_procs,\nor procs_per_node in the submit function, it will try to use all nodes and CPU\ncores available.\nvar_resources.py has two examples of how resource information for the worker may be\naccessed in the sim function (multi_points_with_variable_resources and\nCUDA_variable_resources).\nFor example, in CUDA_variable_resources, the environment variable\nCUDA_VISIBLE_DEVICES is set to slots:\nresources = Resources.resources.worker_resources\nresources.set_env_to_slots(\"CUDA_VISIBLE_DEVICES\") # Use convenience function.\nnum_nodes = resources.local_node_count\ncores_per_node = resources.slot_count # One CPU per GPU\n\nIn the figure above, this would result in worker one setting:\nexport CUDA_VISIBLE_DEVICES=0,1\n\nwhile worker five would set:\nexport CUDA_VISIBLE_DEVICES=2,3\n\nNote\nIf the user sets the number of resource sets directly using the num_resource_sets\nlibE_specs option, then the dynamic resource\nassignment algorithm will always be used. If resource_sets is not a field in H,\nthen each worker will use one resource set.\n\nResource Scheduler Options\uf0c1\nThe following options are available for the built-in scheduler\nand can be set by a dictionary supplied via libE_specs[\"scheduler_opts\"]\n\nsplit2fit [boolean]Try to split resource sets across more nodes if space is not currently\navailable on the minimum node count required. Allows more efficient\nscheduling.\nDefault: True\n\nmatch_slots [boolean]:When splitting resource sets across multiple nodes, slot IDs must match.\nUseful if setting an environment variable such as CUDA_VISIBLE_DEVICES\nto specific slot counts, which should match over multiple nodes.\nDefault: True\n\nIn the following example, assume the next simulation requires four resource\nsets. This could fit on one node if all slots were free, but only two are free on each\nnode.\n\nsplit2fit allows the two resource sets to be used on each node. However, the task\nwill not be scheduled unless match_slots is set to False:\nlibE_specs[\"scheduler_opts\"] = {\"match_slots\": False}\n\nThis is only recommended if not enumerating resources to slot IDs (e.g., via CUDA_VISIBLE_DEVICES).\nNote that if six resource sets were requested, then they would be split three per node, even\nif split2fit is False, as this could otherwise never be scheduled.\n\nVarying generator resources\uf0c1\nBy default, generators are not allocated resources in dynamic mode. Fixed resources\nfor the generator can be set using the libE_specs options\ngen_num_procs and gen_num_gpus, which take integer values.", "mimetype": "text/plain", "start_char_idx": 3750, "end_char_idx": 8203, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "c225d90d-8497-44f9-935b-0320c04c460d": {"__data__": {"id_": "c225d90d-8497-44f9-935b-0320c04c460d", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/resource_manager/overview.html", "file_name": "overview.html", "file_type": "text/html", "file_size": 33705, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "04c450f2-4611-402c-b202-7b2a25b3b230", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/resource_manager/overview.html", "file_name": "overview.html", "file_type": "text/html", "file_size": 33705, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "3991bff13b265946d37c0ae38f70b19920d643c01352498ce7b1e78e35ab4b16", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "18aa502b-1c26-4e24-8a16-a7f2d034b569", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/resource_manager/overview.html", "file_name": "overview.html", "file_type": "text/html", "file_size": 33705, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "aef34c52c9271908237ef1b571d58897338a3ecd9c8a5c0e0b99a2c6e02c5cfd", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Default: True\n\nIn the following example, assume the next simulation requires four resource\nsets. This could fit on one node if all slots were free, but only two are free on each\nnode.\n\nsplit2fit allows the two resource sets to be used on each node. However, the task\nwill not be scheduled unless match_slots is set to False:\nlibE_specs[\"scheduler_opts\"] = {\"match_slots\": False}\n\nThis is only recommended if not enumerating resources to slot IDs (e.g., via CUDA_VISIBLE_DEVICES).\nNote that if six resource sets were requested, then they would be split three per node, even\nif split2fit is False, as this could otherwise never be scheduled.\n\nVarying generator resources\uf0c1\nBy default, generators are not allocated resources in dynamic mode. Fixed resources\nfor the generator can be set using the libE_specs options\ngen_num_procs and gen_num_gpus, which take integer values.\nIf only gen_num_gpus is set, then the number of processors will be set to match.\nTo vary generator resources, persis_info settings can be used in allocation\nfunctions before calling the gen_work support function. This takes the\nsame options (gen_num_procs and gen_num_gpus).\nAlternatively, the setting persis_info[\"gen_resources\"] can also be set to\na number of resource sets.\nNote that persistent workers maintain their resources until they come out of a\npersistent state.\n\nExample scenarios\uf0c1\n\nPersistent generator\uf0c1\nYou have one persistent generator and want eight workers to run concurrent\nsimulations. In this case you can run with nine workers.\nEither explicitly set eight resource sets (recommended):\nlibE_specs[\"num_resource_sets\"] = 8\n\nOr if the generator should always be the same worker, use one zero-resource worker:\nlibE_specs[\"zero_resource_workers\"] = [1]\n\nFor the second option, an allocation function supporting zero-resource workers must be used.\nUsing the two-node example above, the initial worker mapping in this example will be:\n\nUsing large resource sets\uf0c1\nNote that resource_sets and slot numbers are based on workers by default. If you\nhalved the workers in this example you would have the following (each resource\nset has twice the CPUs and GPUs).\n\nTo set CUDA_VISIBLE_DEVICES to slots in this case, use the multiplier\nargument in the set_env_to_slots function:\nresources = Resources.resources.worker_resources\nresources.set_env_to_slots(\"CUDA_VISIBLE_DEVICES\", multiplier=2)\n\nSetting more resource sets than workers\uf0c1\nResource sets can be set to more than the number of corresponding workers. In this\nexample there are 5 workers (one for the generator) and 8 resource sets. The additional\nresources will be used for larger simulations.\n\nThis could be achieved by setting:\nlibE_specs[\"num_resource_sets\"] = 8\n\nand running on 5 workers.\nAlso, this can be set on the command line as a convenience.\npython run_ensemble.py --nworkers 5 --nresource_sets 8\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 7333, "end_char_idx": 10303, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "0d2f7e11-8740-46a2-a850-da21ca1446fe": {"__data__": {"id_": "0d2f7e11-8740-46a2-a850-da21ca1446fe", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/resource_manager/resource_detection.html", "file_name": "resource_detection.html", "file_type": "text/html", "file_size": 13743, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ca36a375-9dc5-463a-9d07-3e61d4857f71", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/resource_manager/resource_detection.html", "file_name": "resource_detection.html", "file_type": "text/html", "file_size": 13743, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "2c489cedc1dce6908783feb57123383cba5b8748dcfa0744188d611ee27ee36e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Resource Detection \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nOutput Management\nHistory Array\nResource Manager\nZero-resource workers (e.g., Persistent gen does not need resources)\nDynamic Assignment of Resources\nResource Detection\nScheduler Module\nWorker Resources Module (query resources for current worker)\n\nWriting User Functions\nExecutors\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nResource Manager\nResource Detection\n\n View page source\n\nResource Detection\uf0c1\nThe resource manager can detect system resources, and partition\nthese to workers. The MPI Executor\naccesses the resources available to the current worker when launching tasks.\nNode-lists are detected by an environment variable on the following systems:\n\nScheduler\nNodelist Env. variable\n\nSLURM\nSLURM_NODELIST\n\nCOBALT\nCOBALT_PARTNAME\n\nLSF\nLSB_HOSTS/LSB_MCPU_HOSTS\n\nPBS\nPBS_NODEFILE\n\nThese environment variable names can be modified via the resource_info\nlibE_specs option.\nOn other systems, you may have to supply a node list in a file called node_list\nin your run directory. For example, on the ALCF system Cooley, the session node list\ncan be obtained as follows:\ncat $COBALT_NODEFILE > node_list\n\nResource detection can be disabled by setting\nlibE_specs[\"disable_resource_manager\"] = True, and users can supply run\nconfiguration options on the Executor submit line.\nThis will usually work sufficiently on\nsystems that have application-level scheduling and queuing (e.g., jsrun).\nHowever, on many cluster and multi-node systems, if the built-in resource\nmanager is disabled, then runs without a hostlist or machinefile supplied may be\nundesirably scheduled to the same nodes.\nSystem detection for resources can be overridden using the resource_info\nlibE_specs option.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2520, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a92e0f48-7166-4480-801d-f52fe23e7b1b": {"__data__": {"id_": "a92e0f48-7166-4480-801d-f52fe23e7b1b", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/resource_manager/resources_index.html", "file_name": "resources_index.html", "file_type": "text/html", "file_size": 12026, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1d1a8cd8-b16b-434c-a441-ed945966649d", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/resource_manager/resources_index.html", "file_name": "resources_index.html", "file_type": "text/html", "file_size": 12026, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "9e1f4150ec08c9208d632d6dd9709c4248bf96ec9a7ac50d76fe94ff17f189aa", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Resource Manager \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nOutput Management\nHistory Array\nResource Manager\nZero-resource workers (e.g., Persistent gen does not need resources)\nDynamic Assignment of Resources\nResource Detection\nScheduler Module\nWorker Resources Module (query resources for current worker)\n\nWriting User Functions\nExecutors\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nResource Manager\n\n View page source\n\nResource Manager\uf0c1\nlibEnsemble comes with built-in resource management. This entails the detection\nof available resources (e.g., nodelists, core counts, and GPUs), and the allocation\nof resources to workers.\nResource management can be disabled by setting\nlibE_specs[\"disable_resource_manager\"] = True. This will prevent libEnsemble\nfrom doing any resource detection or management.\n\nResource Manager:\n\nZero-resource workers (e.g., Persistent gen does not need resources)\nDynamic Assignment of Resources\nResource Detection\nScheduler Module\nWorker Resources Module (query resources for current worker)\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1808, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "c5c00d9f-1f49-49a3-bc97-114700b5e72a": {"__data__": {"id_": "c5c00d9f-1f49-49a3-bc97-114700b5e72a", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/resource_manager/scheduler_module.html", "file_name": "scheduler_module.html", "file_type": "text/html", "file_size": 17279, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "821d4e5f-b7be-4d38-91e7-94e5d254078c", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/resource_manager/scheduler_module.html", "file_name": "scheduler_module.html", "file_type": "text/html", "file_size": 17279, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "0e03feb924d2cbe73e6aa98e6a78cb2f397399e3d4215d1b8821fdf6faaf088f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Scheduler Module \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nOutput Management\nHistory Array\nResource Manager\nZero-resource workers (e.g., Persistent gen does not need resources)\nDynamic Assignment of Resources\nResource Detection\nScheduler Module\nResourceScheduler\n\nWorker Resources Module (query resources for current worker)\n\nWriting User Functions\nExecutors\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nResource Manager\nScheduler Module\n\n View page source\n\nScheduler Module\uf0c1\nThe scheduler is called within the scope of the allocation function, usually\nvia the alloc_support module function assign_resources() (either\ncalled directly or via sim_work() or gen_work()), which\nis a wrapper for the main scheduler function assign_resources().\nThe alloc_support module allows users to supply an alternative scheduler\nthat fits this interface. This could be achieved, for example, by inheriting\nthe built-in scheduler and making modifications.\nOptions can also be provided to the scheduler though the\nlibE_specs[\"scheduler_opts\"] dictionary.\n\nclass resources.scheduler.ResourceScheduler(user_resources=None, sched_opts={})\uf0c1\nCalculates and returns resource set ids from a dictionary of resource sets\nby group. The available resource sets are read initially from the resources\nmodule or from a resources object passed in.\nResource sets are locally provisioned to work items by a call to the\nassign_resources function, and a cache of available resource sets is\nmaintained for the life of the object (usually corresponding to one call\nof the allocation function). Note that work item resources are formally\nassigned to workers only when a work item is sent to the worker.\n\n__init__(user_resources=None, sched_opts={})\uf0c1\nInitiate a ResourceScheduler object\n\nParameters:\n\nuser_resources (Resources, optional) \u2013 A resources object. If present overrides the class variable.\nsched_opts (dict, optional) \u2013 A dictionary of scheduler options. Passed via libE_specs[\"scheduler_opts\"]\n\nThe supported fields for sched_opts are:\n\"split2fit\" [Boolean]:\n Try to split resource sets across more nodes if space is not currently\n available on the minimum node count required. Allows more efficient\n scheduling.\n Default: True\n\n\"match_slots\" [Boolean]:\n When splitting resource sets across multiple nodes, slot IDs must match.\n Useful if setting an environment variable such as ``CUDA_VISIBLE_DEVICES``\n to specific slots, which should match over multiple nodes.\n Default: True\n\nassign_resources(rsets_req, use_gpus=None, user_params=[])\uf0c1\nSchedule resource sets to a work item if possible.\nIf the resources required are less than one node, they will be\nallocated to the smallest available sufficient slot.\nIf the resources required are more than one node, then\nthe scheduler will attempt to find an even split. If no even split\nis possible, then enough additional resource sets will be\nassigned to enable an even split.\nReturns a list of resource set IDs or raises an exception (either\nInsufficientResourcesError or InsufficientFreeResources).\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3803, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "cccb3e0c-8d14-4b82-b5ef-a6a2ca2195b0": {"__data__": {"id_": "cccb3e0c-8d14-4b82-b5ef-a6a2ca2195b0", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/resource_manager/worker_resources.html", "file_name": "worker_resources.html", "file_type": "text/html", "file_size": 21269, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec55d61-1537-44c9-9238-3e755728df7d", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/resource_manager/worker_resources.html", "file_name": "worker_resources.html", "file_type": "text/html", "file_size": 21269, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "8c6f7478d5d7c03aba730084e7982e364550d44575ca6facdb953ff2e58f8cee", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ed59fe60-c5b1-4631-bce8-11477c0dba25", "node_type": "1", "metadata": {}, "hash": "48eb15f62d6cd2f846c8b31f57e31a323cb6b4d9b6491a68de82187debb88ef8", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Worker Resources Module \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nOutput Management\nHistory Array\nResource Manager\nZero-resource workers (e.g., Persistent gen does not need resources)\nDynamic Assignment of Resources\nResource Detection\nScheduler Module\nWorker Resources Module (query resources for current worker)\n\nWriting User Functions\nExecutors\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nResource Manager\nWorker Resources Module\n\n View page source\n\nWorker Resources Module\uf0c1\nThe worker resources module can be interrogated by the user function on a worker\nto obtain the following attributes. The convenience functions below can also be used.\n\nclass resources.worker_resources.WorkerResources(num_workers, resources, workerID)\nBases: RSetResources\nProvide system resources per worker to libEnsemble and executor.\nObject Attributes:\nSome of these attributes may be updated as the ensemble progresses.\nrsets below is used to abbreviate resource sets.\n\nVariables:\n\nworkerID (int) \u2013 workerID for this worker.\nlocal_nodelist (list) \u2013 A list of all nodes assigned to this worker.\nrset_team (list) \u2013 list of rset IDs currently assigned to this worker.\nnum_rsets (int) \u2013 The number of resource sets assigned to this worker.\nslots (dict) \u2013 A dictionary with a list of slot IDs for each node.\neven_slots (bool) \u2013 True if each node has the same number of slots.\nmatching_slots (bool) \u2013 True if each node has matching slot IDs.\nslot_count (int) \u2013 The number of slots per node if even_slots is True, else None.\nslots_on_node (list) \u2013 A list of slots IDs if matching_slots is True, else None.\nlocal_node_count (int) \u2013 The number of nodes available to this worker (rounded up to whole number).\nrsets_per_node (int) \u2013 The number of rsets per node (if a rset > 1 node, will be 1).\n\nThe worker_resources attributes can be queried, and convenience functions\ncalled, via the resources class attribute. For example:\nWith resources imported:\nfrom libensemble.resources.resources import Resources\n\nA user function (sim/gen) may do:\nresources = Resources.resources.worker_resources\nnum_nodes = resources.local_node_count\ncores_per_node = resources.slot_count # One CPU per GPU\nresources.set_env_to_slots(\"CUDA_VISIBLE_DEVICES\") # Use convenience function.\n\nNote that slots are resource sets enumerated on a node (starting with zero).\nIf a resource set has more than one node, then each node is considered to have slot zero.\nIf even_slots is True, then the attributes slot_count will give the number\nof slots on each node. If matching_slots is True, then slots_on_node will\ngive the slot IDs for all nodes. These can be used for simplicity; otherwise, the\nslots dictionary can be used to get information for each node.\n\nget_slots_as_string(multiplier=1, delimiter=',', limit=None)\nReturns list of slots as a string\n\nParameters:\n\nmultiplier \u2013 Optional int. Assume this many items per slot.\ndelimiter \u2013 Optional int. Delimiter for output string.\nlimit \u2013 Optional int. Maximum slots (truncate list after this many slots).\n\nset_env_to_slots(env_var, multiplier=1, delimiter=',')\nSets the given environment variable to slots\n\nParameters:\n\nenv_var \u2013 String. Name of environment variable to set.\nmultiplier \u2013 Optional int. Assume this many items per slot.\ndelimiter \u2013 Optional int. Delimiter for output string.\n\nExample usage in a sim function:\nWith resources imported:\nfrom libensemble.resources.resources import Resources\n\nObtain worker resources:\nresources = Resources.resources.worker_resources\nresources.set_env_to_slots(\"CUDA_VISIBLE_DEVICES\")\n\nset_env_to_gpus(env_var=None, delimiter=',')\nSets the given environment variable to GPUs\n\nParameters:\n\nenv_var \u2013 String. Name of environment variable to set.\ndelimiter \u2013 Optional int. Delimiter for output string.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4395, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ed59fe60-c5b1-4631-bce8-11477c0dba25": {"__data__": {"id_": "ed59fe60-c5b1-4631-bce8-11477c0dba25", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/resource_manager/worker_resources.html", "file_name": "worker_resources.html", "file_type": "text/html", "file_size": 21269, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cec55d61-1537-44c9-9238-3e755728df7d", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/resource_manager/worker_resources.html", "file_name": "worker_resources.html", "file_type": "text/html", "file_size": 21269, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "8c6f7478d5d7c03aba730084e7982e364550d44575ca6facdb953ff2e58f8cee", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cccb3e0c-8d14-4b82-b5ef-a6a2ca2195b0", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/resource_manager/worker_resources.html", "file_name": "worker_resources.html", "file_type": "text/html", "file_size": 21269, "creation_date": "2025-11-25", "last_modified_date": "2025-06-11"}, "hash": "e311112f1eb04344ee7a8ee1264e7b3640eb37c8cea3f5cfc6da9cd323d3e41a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Assume this many items per slot.\ndelimiter \u2013 Optional int. Delimiter for output string.\nlimit \u2013 Optional int. Maximum slots (truncate list after this many slots).\n\nset_env_to_slots(env_var, multiplier=1, delimiter=',')\nSets the given environment variable to slots\n\nParameters:\n\nenv_var \u2013 String. Name of environment variable to set.\nmultiplier \u2013 Optional int. Assume this many items per slot.\ndelimiter \u2013 Optional int. Delimiter for output string.\n\nExample usage in a sim function:\nWith resources imported:\nfrom libensemble.resources.resources import Resources\n\nObtain worker resources:\nresources = Resources.resources.worker_resources\nresources.set_env_to_slots(\"CUDA_VISIBLE_DEVICES\")\n\nset_env_to_gpus(env_var=None, delimiter=',')\nSets the given environment variable to GPUs\n\nParameters:\n\nenv_var \u2013 String. Name of environment variable to set.\ndelimiter \u2013 Optional int. Delimiter for output string.\n\nExample usage in a sim function:\nWith resources imported:\nfrom libensemble.resources.resources import Resources\n\nObtain worker resources:\nresources = Resources.resources.worker_resources\nresources.set_env_to_gpus(\"CUDA_VISIBLE_DEVICES\")\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 3495, "end_char_idx": 4760, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "e7e938f1-58af-4087-b299-d5e2f5e3cf19": {"__data__": {"id_": "e7e938f1-58af-4087-b299-d5e2f5e3cf19", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/resource_manager/zero_resource_workers.html", "file_name": "zero_resource_workers.html", "file_type": "text/html", "file_size": 18159, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3620b7eb-69dd-49ce-92dd-64e358223b82", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/resource_manager/zero_resource_workers.html", "file_name": "zero_resource_workers.html", "file_type": "text/html", "file_size": 18159, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "b9b0476f7d7c8a5fbf4b8536a3c87f03b9a066375a866af37e8ca2ecc9c6018f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Zero-resource workers \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nOutput Management\nHistory Array\nResource Manager\nZero-resource workers (e.g., Persistent gen does not need resources)\nPlacing zero-resource functions on a fixed worker\n\nDynamic Assignment of Resources\nResource Detection\nScheduler Module\nWorker Resources Module (query resources for current worker)\n\nWriting User Functions\nExecutors\nConvenience Tools and Functions\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nResource Manager\nZero-resource workers\n\n View page source\n\nZero-resource workers\uf0c1\nUsers with persistent gen_f functions may notice that the persistent workers\nare still automatically assigned resources. This can be wasteful if those workers\nonly run gen_f functions in-place (i.e., they do not use the Executor\nto submit applications to allocated nodes). Suppose the user is using the\nparse_args() function and runs:\npython run_ensemble_persistent_gen.py --nworkers 3\n\nIf three nodes are available in the node allocation, the result may look like the\nfollowing.\n\nTo avoid the the wasted node above, add an extra worker:\npython run_ensemble_persistent_gen.py --nworkers 4\n\nand in the calling script (run_ensemble_persistent_gen.py), explicitly set the\nnumber of resource sets to the number of workers that will be running simulations.\nnworkers, is_manager, libE_specs, _ = parse_args()\nlibE_specs[\"num_resource_sets\"] = nworkers - 1\n\nWhen the num_resource_sets option is used, libEnsemble will use the dynamic\nresource scheduler, and any worker may assign work to any node. This works well\nfor most users.\n\nOptional: An alternative way to express the above would be to use the command\nline:\npython run_ensemble_persistent_gen.py --comms local --nsim_workers 3\n\nThis would automatically set the num_resource_sets option and add a single\nworker for the persistent generator - a common use-case.\nIn general, the number of resource sets should be set to enable the maximum\nconcurrency desired by the ensemble, taking into account generators and simulators.\nUsers can set generator resources using the libE_specs options\ngen_num_procs and/or gen_num_gpus, which take integer values.\nIf only gen_num_gpus is set, then the number of processors is set to match.\nTo vary generator resources, persis_info settings can be used in allocation\nfunctions before calling the gen_work support function. This takes the\nsame options (gen_num_procs and gen_num_gpus).\nAlternatively, the setting persis_info[\"gen_resources\"] can also be set to\na number of resource sets.\nThe available nodes are always divided by the number of resource sets, and there\nmay be multiple nodes or a partition of a node in each resource set. If the split\nis uneven, resource sets are not split between nodes. For example, if there are\ntwo nodes and five resource sets, one node will have three resource sets, and\nthe other will have two.\n\nPlacing zero-resource functions on a fixed worker\uf0c1\nIf the generator must always be on worker one, then instead of using\nnum_resource_sets, use the zero_resource_workers libE_specs option:\nlibE_specs[\"zero_resource_workers\"] = [1]\n\nin the calling script and worker one will not be allocated resources. In general,\nset the parameter zero_resource_workers to a list of worker IDs that should not\nhave resources assigned.\nThis approach can be useful if running in\ndistributed mode.\nThe use of the zero_resource_workers libE_specs option must be supported by\nthe allocation function, see start_only_persistent)\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4231, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "fec9a20b-23a3-43c7-8fe4-948cc59ca9c6": {"__data__": {"id_": "fec9a20b-23a3-43c7-8fe4-948cc59ca9c6", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/running_libE.html", "file_name": "running_libE.html", "file_type": "text/html", "file_size": 27409, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "58af216c-666f-427a-92ed-296c48f93f94", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/running_libE.html", "file_name": "running_libE.html", "file_type": "text/html", "file_size": 27409, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "17423a732efb12ef2a861eebeb4062fee487cf2b80fcce7af09ed80eb2f8fe42", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f251f570-85dc-48fb-a314-137822e7bace", "node_type": "1", "metadata": {}, "hash": "c655cee51d482fef79a1d48b9692137884276695de8fb3a897cf4b0f39695e06", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Running libEnsemble \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nIntroduction\nFurther Command Line Options\nPersistent Workers\nRunning generator on the manager\nEnvironment Variables\nFurther Run Information\n\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nRunning libEnsemble\n\n View page source\n\nRunning libEnsemble\uf0c1\n\nIntroduction\uf0c1\nlibEnsemble runs with one manager and multiple workers. Each worker may run either\na generator or simulator function (both are Python scripts). Generators\ndetermine the parameters/inputs for simulations. Simulator functions run and\nmanage simulations, which often involve running a user application (see\nExecutor).\n\nNote\nAs of version 1.3.0, the generator can be run as a thread on the manager,\nusing the libE_specs option gen_on_manager.\nWhen using this option, set the number of workers desired for running\nsimulations. See Running generator on the manager\nfor more details.\n\nTo use libEnsemble, you will need a calling script, which in turn will specify\ngenerator and simulator functions. Many examples\nare available.\nThere are currently three communication options for libEnsemble (determining how\nthe Manager and Workers communicate). These are local, mpi, tcp.\nThe default is local if nworkers is specified, otherwise mpi.\nNote that local comms can be used on multi-node systems, where\nthe MPI executor is used to distribute MPI applications\nacross the nodes. Indeed, this is the most commonly used option, even on large\nsupercomputers.\n\nNote\nYou do not need the mpi communication mode to use the\nMPI Executor. The communication modes described\nhere only refer to how the libEnsemble manager and workers communicate.\n\nLocal Comms\nUses Python\u2019s built-in multiprocessing module.\nThe comms type local and number of workers nworkers may\nbe provided in libE_specs.\nThen run:\npython myscript.py\n\nOr, if the script uses the parse_args function\nor an Ensemble object with Ensemble(parse_args=True),\nyou can specify these on the command line:\npython myscript.py --nworkers N\n\nThis will launch one manager and N workers.\nThe following abbreviated line is equivalent to the above:\npython myscript.py -n N\n\nlibEnsemble will run on one node in this scenario. To\ndisallow this node\nfrom app-launches (if running libEnsemble on a compute node),\nset libE_specs[\"dedicated_mode\"] = True.\nThis mode can also be used to run on a launch node of a three-tier\nsystem (e.g., Summit), ensuring the whole compute-node allocation is available for\nlaunching apps. Make sure there are no imports of mpi4py in your Python scripts.\nNote that on macOS (since Python 3.8) and Windows, the default multiprocessing method\nis \"spawn\" instead of \"fork\"; to resolve many related issues, we recommend placing\ncalling script code in an if __name__ == \"__main__\": block.\nLimitations of local mode\n\nWorkers cannot be distributed across nodes.\nIn some scenarios, any import of mpi4py will cause this to break.\nDoes not have the potential scaling of MPI mode, but is sufficient for most users.\n\nMPI Comms\nThis option uses mpi4py for the Manager/Worker communication. It is used automatically if\nyou run your libEnsemble calling script with an MPI runner such as:\nmpirun -np N python myscript.py\n\nwhere N is the number of processes. This will launch one manager and\nN-1 workers.\nThis option requires mpi4py to be installed to interface with the MPI on your system.\nIt works on a standalone system, and with both\ncentral and distributed modes of running libEnsemble on\nmulti-node systems.\nIt also potentially scales the best when running with many workers on HPC systems.\nLimitations of MPI mode\nIf launching MPI applications from workers, then MPI is nested. This is not\nsupported with Open MPI. This can be overcome by using a proxy launcher.\nThis nesting does work with MPICH and its derivative MPI implementations.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4365, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f251f570-85dc-48fb-a314-137822e7bace": {"__data__": {"id_": "f251f570-85dc-48fb-a314-137822e7bace", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/running_libE.html", "file_name": "running_libE.html", "file_type": "text/html", "file_size": 27409, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "58af216c-666f-427a-92ed-296c48f93f94", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/running_libE.html", "file_name": "running_libE.html", "file_type": "text/html", "file_size": 27409, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "17423a732efb12ef2a861eebeb4062fee487cf2b80fcce7af09ed80eb2f8fe42", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fec9a20b-23a3-43c7-8fe4-948cc59ca9c6", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/running_libE.html", "file_name": "running_libE.html", "file_type": "text/html", "file_size": 27409, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "54fef5a22f45bac4e3c1b28c6909e42344a29487b86b5de2f9ff128578cf87f8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8b358e9c-8e8d-431b-bd77-b37a39aa4997", "node_type": "1", "metadata": {}, "hash": "93858e67d3161e9f138544489ac58531b0bf2f12a29c507fe451466cfd066447", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Does not have the potential scaling of MPI mode, but is sufficient for most users.\n\nMPI Comms\nThis option uses mpi4py for the Manager/Worker communication. It is used automatically if\nyou run your libEnsemble calling script with an MPI runner such as:\nmpirun -np N python myscript.py\n\nwhere N is the number of processes. This will launch one manager and\nN-1 workers.\nThis option requires mpi4py to be installed to interface with the MPI on your system.\nIt works on a standalone system, and with both\ncentral and distributed modes of running libEnsemble on\nmulti-node systems.\nIt also potentially scales the best when running with many workers on HPC systems.\nLimitations of MPI mode\nIf launching MPI applications from workers, then MPI is nested. This is not\nsupported with Open MPI. This can be overcome by using a proxy launcher.\nThis nesting does work with MPICH and its derivative MPI implementations.\nIt is also unsuitable to use this mode when running on the launch nodes of\nthree-tier systems (e.g., Summit). In that case local mode is recommended.\n\nTCP Comms\nRun the Manager on one system and launch workers to remote\nsystems or nodes over TCP. Configure through\nlibE_specs, or on the command line\nif using an Ensemble object with\nEnsemble(parse_args=True),\nReverse-ssh interface\nSet comms to ssh to launch workers on remote ssh-accessible systems. This\nco-locates workers, functions, and any applications. User\nfunctions can also be persistent, unlike when launching remote functions via\nGlobus Compute.\nThe remote working directory and Python need to be specified. This may resemble:\npython myscript.py --comms ssh --workers machine1 machine2 --worker_pwd /home/workers --worker_python /home/.conda/.../python\n\nLimitations of TCP mode\n\nThere cannot be two calls to libE() or Ensemble.run() in the same script.\n\nFurther Command Line Options\uf0c1\nSee the parse_args function in Convenience Tools for\nfurther command line options.\n\nPersistent Workers\uf0c1\nIn a regular (non-persistent) worker, the user\u2019s generator or simulation function is called\nwhenever the worker receives work. A persistent worker is one that continues to run the\ngenerator or simulation function between work units, maintaining the local data environment.\nA common use-case consists of a persistent generator (such as persistent_aposmm)\nthat maintains optimization data while generating new simulation inputs. The persistent generator runs\non a dedicated worker while in persistent mode. This requires an appropriate\nallocation function that will run the generator as persistent.\nWhen running with a persistent generator, it is important to remember that a worker will be dedicated\nto the generator and cannot run simulations. For example, the following run:\nmpirun -np 3 python my_script.py\n\nstarts one manager, one worker with a persistent generator, and one worker for running simulations.\nIf this example was run as:\nmpirun -np 2 python my_script.py\n\nNo simulations will be able to run.\n\nRunning generator on the manager\uf0c1\nThe majority of libEnsemble use cases run a single generator. The\nlibE_specs option gen_on_manager will cause\nthe generator function to run on a thread on the manager. This can run\npersistent user functions, sharing data structures with the manager, and avoids\nadditional communication to a generator running on a worker. When using this\noption, the number of workers specified should be the (maximum) number of\nconcurrent simulations.\nIf modifying a workflow to use gen_on_manager consider the following.\n\nSet nworkers to the number of workers desired for running simulations.\nIf using add_unique_random_streams()\nto seed random streams, the default generator seed will be zero.\nIf you have a line like libE_specs[\"nresource_sets\"] = nworkers -1, this\nline should be removed.\nIf the generator does use resources, nresource_sets can be increased as needed\nso that the generator and all simulations are resourced.\n\nEnvironment Variables\uf0c1\nEnvironment variables required in your run environment can be set in your Python sim or gen function.\nFor example:\nos.environ[\"OMP_NUM_THREADS\"] = 4\n\nset in your simulation script before the Executor submit command will export the setting\nto your run. For running a bash script in a sub environment when using the Executor, see\nthe env_script option to the MPI Executor.\n\nFurther Run Information\uf0c1\nFor running on multi-node platforms and supercomputers, there are alternative ways to configure\nlibEnsemble to resources.", "mimetype": "text/plain", "start_char_idx": 3460, "end_char_idx": 7913, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "8b358e9c-8e8d-431b-bd77-b37a39aa4997": {"__data__": {"id_": "8b358e9c-8e8d-431b-bd77-b37a39aa4997", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/running_libE.html", "file_name": "running_libE.html", "file_type": "text/html", "file_size": 27409, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "58af216c-666f-427a-92ed-296c48f93f94", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/running_libE.html", "file_name": "running_libE.html", "file_type": "text/html", "file_size": 27409, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "17423a732efb12ef2a861eebeb4062fee487cf2b80fcce7af09ed80eb2f8fe42", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f251f570-85dc-48fb-a314-137822e7bace", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/running_libE.html", "file_name": "running_libE.html", "file_type": "text/html", "file_size": 27409, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "91aca30edf44488e6229b9101dafd7d3d92c87932ee166507d4c2ee44d4098f3", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Set nworkers to the number of workers desired for running simulations.\nIf using add_unique_random_streams()\nto seed random streams, the default generator seed will be zero.\nIf you have a line like libE_specs[\"nresource_sets\"] = nworkers -1, this\nline should be removed.\nIf the generator does use resources, nresource_sets can be increased as needed\nso that the generator and all simulations are resourced.\n\nEnvironment Variables\uf0c1\nEnvironment variables required in your run environment can be set in your Python sim or gen function.\nFor example:\nos.environ[\"OMP_NUM_THREADS\"] = 4\n\nset in your simulation script before the Executor submit command will export the setting\nto your run. For running a bash script in a sub environment when using the Executor, see\nthe env_script option to the MPI Executor.\n\nFurther Run Information\uf0c1\nFor running on multi-node platforms and supercomputers, there are alternative ways to configure\nlibEnsemble to resources. See the Running on HPC Systems\nguide for more information, including some examples for specific systems.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 6965, "end_char_idx": 8145, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a96c892f-98a4-419a-99de-8f755b21c4c5": {"__data__": {"id_": "a96c892f-98a4-419a-99de-8f755b21c4c5", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/schemas/aposmm_options_schema.json", "file_name": "aposmm_options_schema.json", "file_type": "application/json", "file_size": 5876, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c5113269-d48d-4d2e-b35c-41ef5aebcc0c", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/schemas/aposmm_options_schema.json", "file_name": "aposmm_options_schema.json", "file_type": "application/json", "file_size": 5876, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "e6f5a34545b422b4b0f36807e112d528db0266fe2ddd635013b7736e9b385bd9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a89b0206-d0e0-43c2-981b-d4b69f7a556c", "node_type": "1", "metadata": {}, "hash": "bec515f82a4bcbe36dd3869ddb88846eda809ce596a2540fef199239dde6b34c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "{\n \"aposmm_options\": {\n \"lb\": {\n \"type\": \"array[number]\",\n \"description\": \"Lower bounds of the search domain.\",\n \"required\": true\n },\n \"ub\": {\n \"type\": \"array[number]\",\n \"description\": \"Upper bounds of the search domain.\",\n \"required\": true\n },\n \"localopt_method\": {\n \"type\": \"string\",\n \"description\": \"Name of local optimization routine (NLopt, PETSc/TAO, SciPy, DFOLS, IBCDFO, or external). Determines additional required fields.\",\n \"required\": true\n },\n \"initial_sample_size\": {\n \"type\": \"integer\",\n \"description\": \"Number of uniformly drawn points to evaluate before any local optimization runs.\",\n \"required\": true\n },\n\n \"max_active_runs\": {\n \"type\": \"integer\",\n \"default\": 1,\n \"description\": \"Max number of local optimization runs APOSMM may advance simultaneously.\"\n },\n \"sample_points\": {\n \"type\": \"array[array[number]]\",\n \"description\": \"User-specified initial sample points. If exhausted, APOSMM samples uniformly.\"\n },\n \"components\": {\n \"type\": \"integer\",\n \"description\": \"Number of objective components. Required when using least-squares (fvec).\"\n },\n \"dist_to_bound_multiple\": {\n \"type\": \"number\",\n \"description\": \"Fraction (0,1] of distance to nearest boundary used for initial localopt step size.\"\n },\n \"lhs_divisions\": {\n \"type\": \"integer\",\n \"description\": \"Number of Latin-hypercube divisions. 0 or 1 gives uniform sampling.\"\n },\n \"mu\": {\n \"type\": \"number\",\n \"description\": \"Minimum distance from domain boundaries for all localopt starts.\"\n },\n \"nu\": {\n \"type\": \"number\",\n \"description\": \"Minimum distance from identified minima for all localopt starts.\"\n },\n \"rk_const\": {\n \"type\": \"number\",\n \"description\": \"Multiplier applied to the r_k value for launching new runs.\"\n },\n \"stop_after_k_minima\": {\n \"type\": \"integer\",\n \"description\": \"Terminate APOSMM after this many local minima have been found.\"\n },\n \"stop_after_k_runs\": {\n \"type\": \"integer\",\n \"description\": \"Terminate after this many local optimizations have ended.\"\n },\n\n \"method_specific_tolerances\": {\n \"type\": \"object\",\n \"description\": \"Tolerances required by the chosen optimizer. NLopt uses ftol_abs/ftol_rel/xtol_abs, PETSc/TAO uses gatol/grtol/etc., SciPy requires opt_return_codes.\"\n }\n },\n\n \"local_optimizers\": {\n \"NLopt\": {\n \"LN_SBPLX\": {\n \"description\": \"Derivative-free subplex method. Good for noisy or nonsmooth objectives.\",\n \"requires_f\": true,\n \"requires_grad\": false,\n \"requires_fvec\": false\n },\n \"LN_BOBYQA\": {\n \"description\": \"Bound-constrained quadratic model method. Good for smooth problems.\",\n \"requires_f\": true,\n \"requires_grad\": false,\n \"requires_fvec\": false\n },\n \"LN_COBYLA\": {\n \"description\": \"Derivative-free constrained optimization using linear approximations.\",\n \"requires_f\": true,\n \"requires_grad\": false,\n \"requires_fvec\": false\n },\n \"LN_NEWUOA\": {\n \"description\": \"Unconstrained quadratic model method for smooth problems.\",\n \"requires_f\": true,\n \"requires_grad\": false,\n \"requires_fvec\": false\n },\n \"LN_NELDERMEAD\": {\n \"description\": \"Classic simplex search. Robust but slower; good for noisy objectives.\",\n \"requires_f\": true,\n \"requires_grad\": false,\n \"requires_fvec\": false\n },\n \"LD_MMA\": {\n \"description\": \"Gradient-based Method of Moving Asymptotes.\",\n \"requires_f\": true,\n \"requires_grad\": true,\n \"requires_fvec\": false\n }\n },\n\n \"PETSc_TAO\": {\n \"pounders\": {\n \"description\": \"Least-squares trust-region method for fvec problems.\",\n \"requires_f\": false,\n \"requires_grad\": false,\n \"requires_fvec\": true\n },\n \"blmvm\": {\n \"description\": \"Bounded limited-memory variable metric method (gradient-based).\",\n \"requires_f\": true,\n \"requires_grad\": true,\n \"requires_fvec\": false\n },\n \"nm\": {\n \"description\": \"Nelder-Mead variant in TAO.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3649, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a89b0206-d0e0-43c2-981b-d4b69f7a556c": {"__data__": {"id_": "a89b0206-d0e0-43c2-981b-d4b69f7a556c", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/schemas/aposmm_options_schema.json", "file_name": "aposmm_options_schema.json", "file_type": "application/json", "file_size": 5876, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c5113269-d48d-4d2e-b35c-41ef5aebcc0c", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/schemas/aposmm_options_schema.json", "file_name": "aposmm_options_schema.json", "file_type": "application/json", "file_size": 5876, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "e6f5a34545b422b4b0f36807e112d528db0266fe2ddd635013b7736e9b385bd9", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a96c892f-98a4-419a-99de-8f755b21c4c5", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/schemas/aposmm_options_schema.json", "file_name": "aposmm_options_schema.json", "file_type": "application/json", "file_size": 5876, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "0dd41289d263bdc87d6b62ed844668520a2d129c06023143b6ea63ea03cc1384", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Robust but slower; good for noisy objectives.\",\n \"requires_f\": true,\n \"requires_grad\": false,\n \"requires_fvec\": false\n },\n \"LD_MMA\": {\n \"description\": \"Gradient-based Method of Moving Asymptotes.\",\n \"requires_f\": true,\n \"requires_grad\": true,\n \"requires_fvec\": false\n }\n },\n\n \"PETSc_TAO\": {\n \"pounders\": {\n \"description\": \"Least-squares trust-region method for fvec problems.\",\n \"requires_f\": false,\n \"requires_grad\": false,\n \"requires_fvec\": true\n },\n \"blmvm\": {\n \"description\": \"Bounded limited-memory variable metric method (gradient-based).\",\n \"requires_f\": true,\n \"requires_grad\": true,\n \"requires_fvec\": false\n },\n \"nm\": {\n \"description\": \"Nelder-Mead variant in TAO.\",\n \"requires_f\": true,\n \"requires_grad\": false,\n \"requires_fvec\": false\n }\n },\n\n \"SciPy\": {\n \"scipy_Nelder-Mead\": {\n \"description\": \"Nelder-Mead via SciPy.\",\n \"requires_f\": true,\n \"requires_grad\": false,\n \"requires_fvec\": false\n },\n \"scipy_COBYLA\": {\n \"description\": \"COBYLA via SciPy; derivative-free constrained optimization.\",\n \"requires_f\": true,\n \"requires_grad\": false,\n \"requires_fvec\": false\n },\n \"scipy_BFGS\": {\n \"description\": \"Gradient-based quasi-Newton method.\",\n \"requires_f\": true,\n \"requires_grad\": true,\n \"requires_fvec\": false\n }\n },\n\n \"DFOLS\": {\n \"dfols\": {\n \"description\": \"Derivative-free least-squares method for vector-valued objectives.\",\n \"requires_f\": false,\n \"requires_grad\": false,\n \"requires_fvec\": true\n }\n },\n\n \"IBCDFO\": {\n \"pounders\": {\n \"description\": \"IBCDFO variant of least-squares trust-region method.\",\n \"requires_f\": false,\n \"requires_grad\": false,\n \"requires_fvec\": true\n },\n \"manifold_sampling_primal\": {\n \"description\": \"Nonsmooth derivative-free solver for vector-valued objectives.\",\n \"requires_f\": false,\n \"requires_grad\": false,\n \"requires_fvec\": true\n }\n },\n\n \"external_localopt\": {\n \"external_localopt\": {\n \"description\": \"Optimization controlled via external file-based interface.\",\n \"requires_f\": true,\n \"requires_grad\": false,\n \"requires_fvec\": false\n }\n }\n }\n}", "mimetype": "text/plain", "start_char_idx": 2976, "end_char_idx": 4962, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "44cc48a5-ca20-49c5-863a-ca45df072784": {"__data__": {"id_": "44cc48a5-ca20-49c5-863a-ca45df072784", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/__init__.py", "file_name": "__init__.py", "file_type": "text/x-python", "file_size": 0, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "344af5a7-bbe4-46f7-945d-7ed459a11b12", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/__init__.py", "file_name": "__init__.py", "file_type": "text/x-python", "file_size": 0, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "f9f4d3b78f1551dc1dc6f5682e647d831c5c31a045af8b79a0b662f22847674e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 0, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "832010e3-d697-4b30-a1e8-f0b1ef412ad7": {"__data__": {"id_": "832010e3-d697-4b30-a1e8-f0b1ef412ad7", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/check_libE_stats.py", "file_name": "check_libE_stats.py", "file_type": "text/x-python", "file_size": 2271, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8a5fdb3e-0ae3-4ca6-84ef-9e0c874d06e0", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/check_libE_stats.py", "file_name": "check_libE_stats.py", "file_type": "text/x-python", "file_size": 2271, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "8a44a977f02744c20f0840bc54b0cc86e05d433f991a611d2a6af9a903d9ee9b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"Script to check format of libE_stats.txt\n\nChecks matching start and end times existing for calculation and tasks if\nrequired. Checks that dates/times are in a valid format.\n\n\"\"\"\n\nfrom dateutil.parser import parse\n\ninfile = \"libE_stats.txt\"\n\ndef is_date(string, fuzzy=False):\n \"\"\"Return whether the string can be interpreted as a date\"\"\"\n try:\n parse(string, fuzzy=fuzzy)\n return True\n\n except ValueError:\n return False\n\ndef check_datetime(t1, t2):\n \"\"\"Check if entry is a valid datetime\n\n Allows for either date and time, or just time\n If just time, then t2 will be non-datetime.\n If second is datetime (time), then merger should be a datetime\n \"\"\"\n if is_date(t2):\n dt = t1 + \" \" + t2\n else:\n dt = t1\n assert is_date(dt), f\"Expected a datetime, found {dt}\"\n\ndef check_start_end_times(start=\"Start:\", end=\"End:\", everyline=True):\n \"\"\"Iterate over rows in infile and check delimiters and datetime formats\"\"\"\n with open(infile) as f:\n total_cnt = 0\n for line in f:\n s_cnt = 0\n e_cnt = 0\n lst = line.split()\n if line.startswith(\"Manager : Starting\") or line.startswith(\"Manager : Exiting\"):\n check_datetime(lst[5], lst[6])\n continue\n for i, val in enumerate(lst):\n if val == start:\n s1 = lst[i + 1]\n s2 = lst[i + 2]\n check_datetime(s1, s2)\n s_cnt += 1\n if val == end:\n e1 = lst[i + 1]\n e2 = lst[i + 2]\n check_datetime(e1, e2)\n e_cnt += 1\n if everyline:\n assert s_cnt > 0, \"Expected timings not found\"\n assert s_cnt == e_cnt, f\"Start/end count different {s_cnt} {e_cnt}\"\n total_cnt += s_cnt\n assert total_cnt > 0, f\"No timings found starting {start}\"\n\ndef check_libE_stats(task_datetime=False):\n \"\"\"Determine and run checks\"\"\"\n check_start_end_times()\n if task_datetime:\n check_start_end_times(start=\"Tstart:\", end=\"Tend:\", everyline=False)\n\nif __name__ == \"__main__\":\n check_libE_stats()\n check_libE_stats(task_datetime=True)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1825, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "37c1be9d-adc9-451c-9077-9518027637c2": {"__data__": {"id_": "37c1be9d-adc9-451c-9077-9518027637c2", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/common.py", "file_name": "common.py", "file_type": "text/x-python", "file_size": 2379, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3657a5d9-3eec-467b-a2ef-34fba5d534de", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/common.py", "file_name": "common.py", "file_type": "text/x-python", "file_size": 2379, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "5f783964122296cf9e1ad51ee120fe689f85b9066768bdc472f4292c466f4670", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nCommon plumbing for regression tests\n\"\"\"\n\nimport glob\nimport os\nimport os.path\nimport time\n\nclass FileNotFoundError(Exception):\n \"\"\"Exception raised when a file is not found within the specified timeout.\"\"\"\n\n pass\n\ndef read_generated_file(file_pattern, timeout=2.0):\n start_time = time.time()\n while time.time() - start_time < timeout:\n hfiles = glob.glob(file_pattern)\n if hfiles:\n return hfiles[-1]\n else:\n time.sleep(0.1)\n raise FileNotFoundError(f\"File with pattern '{file_pattern}' not found within {timeout} seconds.\")\n\ndef create_node_file(num_nodes, name=\"node_list\"):\n \"\"\"Create a nodelist file\"\"\"\n if os.path.exists(name):\n os.remove(name)\n with open(name, \"w\") as f:\n for i in range(1, num_nodes + 1):\n f.write(\"node-\" + str(i) + \"\\n\")\n f.flush()\n os.fsync(f)\n\ndef mpi_comm_excl(exc=[0], comm=None):\n \"Exclude ranks from a communicator for MPI comms.\"\n from mpi4py import MPI, rc\n\n if rc.initialize is False and not MPI.Is_initialized():\n MPI.Init() # For unit tests, since auto-init disabled to prevent test_executor issues\n\n parent_comm = comm or MPI.COMM_WORLD\n parent_group = parent_comm.Get_group()\n new_group = parent_group.Excl(exc)\n mpi_comm = parent_comm.Create(new_group)\n return mpi_comm, MPI.COMM_NULL\n\ndef mpi_comm_split(num_parts, comm=None):\n \"Split COMM_WORLD into sub-communicators for MPI comms.\"\n from mpi4py import MPI, rc\n\n if rc.initialize is False and not MPI.Is_initialized():\n MPI.Init()\n\n parent_comm = comm or MPI.COMM_WORLD\n parent_size = parent_comm.Get_size()\n key = parent_comm.Get_rank()\n row_size = parent_size // num_parts\n sub_comm_number = key // row_size\n sub_comm = parent_comm.Split(sub_comm_number, key)\n return sub_comm, sub_comm_number\n\ndef build_simfunc():\n import subprocess\n\n # Build simfunc\n # buildstring='mpif90 -o my_simtask.x my_simtask.f90' # On cray need to use ftn\n buildstring = \"mpicc -o my_simtask.x ../unit_tests/simdir/my_simtask.c\"\n # subprocess.run(buildstring.split(),check=True) #Python3.5+\n subprocess.check_call(buildstring.split())\n\ndef build_borehole():\n import subprocess\n\n buildstring = \"gcc -o borehole.x ../unit_tests/simdir/borehole.c -lm\"\n subprocess.check_call(buildstring.split())", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2169, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "8431756a-9829-487b-a301-77563cb61db1": {"__data__": {"id_": "8431756a-9829-487b-a301-77563cb61db1", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/declare_hfun_and_combine_model_with_jax.py", "file_name": "declare_hfun_and_combine_model_with_jax.py", "file_type": "text/x-python", "file_size": 1136, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2240882e-4d23-4bd3-b323-899e979e95b4", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/declare_hfun_and_combine_model_with_jax.py", "file_name": "declare_hfun_and_combine_model_with_jax.py", "file_type": "text/x-python", "file_size": 1136, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "5d70c9aa9931e8d2b0ee1e085d60db8f681b86e2bf4b0c9a29acf9f3f1135e0d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# This declares the hfun for Test_compare_pounder_pounders_with_jax.py and\n# then used jax to combine the quadratic models of each component of the\n# inputs to the hfun.\n#\n# For other general use cases of pounders on smooth hfuns, only the hfun below\n# needs to be changed (and combinemodels_jax can be given to pounders)\n\nimport jax\nimport numpy\n\njax.config.update(\"jax_enable_x64\", True)\n\ndef hfun(z):\n res = z[0] * z[1] - z[2] ** 2\n return res\n\n@jax.jit\ndef hfun_d(z, zd):\n resd = jax.jvp(hfun, (z,), (zd,))\n return resd\n\n@jax.jit\ndef hfun_dd(z, zd, zdt, zdd):\n _, resdd = jax.jvp(hfun_d, (z, zd), (zdt, zdd))\n return resdd\n\ndef G_combine(Cres, Gres):\n n, m = Gres.shape\n G = numpy.zeros(n)\n for i in range(n):\n _, G[i] = hfun_d(Cres, Gres[i, :])\n return G\n\ndef H_combine(Cres, Gres, Hres):\n n, _, m = Hres.shape\n H = numpy.zeros((n, n))\n for i in range(n):\n for j in range(n):\n _, H[i, j] = hfun_dd(Cres, Gres[i, :], Gres[j, :], Hres[i, j, :])\n return H\n\ndef combinemodels_jax(Cres, Gres, Hres):\n return G_combine(Cres, Gres), H_combine(Cres, Gres, Hres)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1058, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "59ccdaa3-539a-4cdd-9c45-9502acb15b2f": {"__data__": {"id_": "59ccdaa3-539a-4cdd-9c45-9502acb15b2f", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/forces_simf.py", "file_name": "forces_simf.py", "file_type": "text/x-python", "file_size": 1276, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "542bf419-1582-4833-9f1d-1857456896b2", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/forces_simf.py", "file_name": "forces_simf.py", "file_type": "text/x-python", "file_size": 1276, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "c256ef0adcee83e4e49310006bed665a95200ead0156ca2577fe5cca041f4dba", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "import numpy as np\n\n# Optional status codes to display in libE_stats.txt for each gen or sim\nfrom libensemble.message_numbers import TASK_FAILED, WORKER_DONE\n\ndef run_forces(H, persis_info, sim_specs, libE_info):\n \"\"\"Runs the forces MPI application\"\"\"\n\n calc_status = 0\n\n # Parse out num particles, from generator function\n particles = str(int(H[\"x\"][0][0]))\n\n # app arguments: num particles, timesteps, also using num particles as seed\n args = particles + \" \" + str(10) + \" \" + particles\n\n # Retrieve our MPI Executor\n exctr = libE_info[\"executor\"]\n\n # Submit our forces app for execution.\n task = exctr.submit(app_name=\"forces\", app_args=args)\n\n # Block until the task finishes\n task.wait()\n\n # Try loading final energy reading, set the sim's status\n statfile = \"forces.stat\"\n try:\n data = np.loadtxt(statfile)\n final_energy = data[-1]\n calc_status = WORKER_DONE\n except Exception:\n final_energy = np.nan\n calc_status = TASK_FAILED\n\n # Define our output array, populate with energy reading\n output = np.zeros(1, dtype=sim_specs[\"out\"])\n output[\"energy\"] = final_energy\n\n # Return final information to worker, for reporting to manager\n return output, persis_info, calc_status", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1176, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ae9f0e24-9564-4612-bcc7-3a9fc336a706": {"__data__": {"id_": "ae9f0e24-9564-4612-bcc7-3a9fc336a706", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/sine_gen.py", "file_name": "sine_gen.py", "file_type": "text/x-python", "file_size": 756, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "664f9c79-aacd-4ae6-b0d6-90aa1a6ef35b", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/sine_gen.py", "file_name": "sine_gen.py", "file_type": "text/x-python", "file_size": 756, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "8641041dee21b1bce0dcf160048a255b02a05fa5c2df7e30a91605d183101145", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "import numpy as np\n\ndef gen_random_sample(InputArray, persis_info, gen_specs):\n # Pull out user parameters\n user_specs = gen_specs[\"user\"]\n\n # Get lower and upper bounds\n lower = user_specs[\"lower\"]\n upper = user_specs[\"upper\"]\n\n # Determine how many values to generate\n num = len(lower)\n batch_size = user_specs[\"gen_batch_size\"]\n\n # Create empty array of \"batch_size\" zeros. Array dtype should match \"out\" fields\n OutputArray = np.zeros(batch_size, dtype=gen_specs[\"out\"])\n\n # Set the \"x\" output field to contain random numbers, using random stream\n OutputArray[\"x\"] = persis_info[\"rand_stream\"].uniform(lower, upper, (batch_size, num))\n\n # Send back our output and persis_info\n return OutputArray, persis_info", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 712, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f717ef8b-6bce-4154-8e9e-64ab3610b444": {"__data__": {"id_": "f717ef8b-6bce-4154-8e9e-64ab3610b444", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/sine_sim.py", "file_name": "sine_sim.py", "file_type": "text/x-python", "file_size": 320, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d19c23d7-2406-4a7a-982a-87e0797b8be9", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/sine_sim.py", "file_name": "sine_sim.py", "file_type": "text/x-python", "file_size": 320, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "d9d74dd529ce1654dad1f551a53a401ae322cdab158e3510ece80dbbc89f6355", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "import numpy as np\n\ndef sim_find_sine(InputArray, _, sim_specs):\n # Create an output array of a single zero\n OutputArray = np.zeros(1, dtype=sim_specs[\"out\"])\n\n # Set the zero to the sine of the InputArray value\n OutputArray[\"y\"] = np.sin(InputArray[\"x\"])\n\n # Send back our output\n return OutputArray", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 300, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "fd7cdfa6-a872-4d38-9304-07b8d0470979": {"__data__": {"id_": "fd7cdfa6-a872-4d38-9304-07b8d0470979", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/support.py", "file_name": "support.py", "file_type": "text/x-python", "file_size": 3666, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "30cbde39-197f-4005-9af2-82286294fd85", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/support.py", "file_name": "support.py", "file_type": "text/x-python", "file_size": 3666, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "5267c487c736eea649e2f04c8aab537787b648ee8014ac2a0ae9e9aa4d50c396", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "efc12dbe-9fe2-43c5-b595-be3941b070c3", "node_type": "1", "metadata": {}, "hash": "6bef7cab8f6fa84b51c4379273509fa626ad736ece6aced0dc456d8c9e36e9fb", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "import copy\n\nimport numpy as np\n\nfrom libensemble.specs import input_fields, output_data\n\nbranin_vals_and_minima = np.array(\n [\n [-3.14159, 12.275, 0.397887],\n [3.14159, 2.275, 0.397887],\n [9.42478, 2.475, 0.397887],\n ]\n)\n\nsix_hump_camel_minima = np.array(\n [\n [-0.089842, 0.712656],\n [0.089842, -0.712656],\n [-1.70361, 0.796084],\n [1.70361, -0.796084],\n [-1.6071, -0.568651],\n [1.6071, 0.568651],\n ]\n)\n\ndef nan_func(calc_in, persis_info, sim_specs, libE_info):\n H = np.zeros(1, dtype=sim_specs[\"out\"])\n H[\"f_i\"] = np.nan\n H[\"f\"] = np.nan\n return (H, persis_info)\n\n@input_fields([\"x\"])\n@output_data([(\"f\", float, (2,))])\ndef write_sim_func(calc_in, persis_info, sim_specs, libE_info):\n out = np.zeros(1, dtype=sim_specs[\"out\"])\n out[\"f\"] = calc_in[\"x\"]\n with open(\"test_sim_out.txt\", \"a\") as f:\n f.write(f\"sim_f received: {out['f']}\\n\")\n return out, persis_info\n\ndef remote_write_sim_func(calc_in, persis_info, sim_specs, libE_info):\n import numpy as np\n\n out = np.zeros(1, dtype=sim_specs[\"out\"])\n calc_dir = sim_specs[\"user\"][\"calc_dir\"]\n out[\"f\"] = calc_in[\"x\"]\n with open(calc_dir + \"/test_sim_out.txt\", \"a\") as f:\n f.write(f\"sim_f received: {out['f']}\\n\")\n return out, persis_info\n\ndef remote_write_gen_func(calc_in, persis_info, gen_specs, libE_info):\n import secrets\n import socket\n\n import numpy as np\n\n H_o = np.zeros(1, dtype=gen_specs[\"out\"])\n H_o[\"x\"] = socket.gethostname() + \"_\" + secrets.token_hex(nbytes=3)\n with open(\"test_gen_out.txt\", \"a\") as f:\n f.write(f\"gen_f produced: {H_o['x']}\\n\")\n return H_o, persis_info\n\ndef write_uniform_gen_func(H, persis_info, gen_specs, _):\n ub = gen_specs[\"user\"][\"ub\"]\n lb = gen_specs[\"user\"][\"lb\"]\n n = len(lb)\n b = gen_specs[\"user\"][\"gen_batch_size\"]\n H_o = np.zeros(b, dtype=gen_specs[\"out\"])\n H_o[\"x\"] = persis_info[\"rand_stream\"].uniform(lb, ub, (b, n))\n with open(\"test_gen_out.txt\", \"a\") as f:\n f.write(f\"gen_f produced: {H_o['x']}\\n\")\n return H_o, persis_info\n\nuniform_or_localopt_gen_out = [\n (\"priority\", float),\n (\"local_pt\", bool),\n (\"known_to_aposmm\", bool),\n (\"dist_to_unit_bounds\", float),\n (\"dist_to_better_l\", float),\n (\"dist_to_better_s\", float),\n (\"ind_of_better_l\", int),\n (\"ind_of_better_s\", int),\n (\"started_run\", bool),\n (\"num_active_runs\", int),\n (\"local_min\", bool),\n]\n\naposmm_gen_out = copy.deepcopy(uniform_or_localopt_gen_out)\naposmm_gen_out += [\n (\"sim_id\", int),\n (\"paused\", bool),\n (\"pt_id\", int), # Identify the same point evaluated by different sim_f's or components\n]\n\n# give_sim_work_first persis_info\npersis_info_1 = {\n \"total_gen_calls\": 0, # Counts gen calls in alloc_f\n \"last_worker\": 0, # Remembers last gen worker in alloc_f\n \"next_to_give\": 0, # Remembers next H row to give in alloc_f\n}\n\npersis_info_1[0] = {\n \"run_order\": {}, # Used by manager to remember run order\n \"total_runs\": 0,", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2779, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "efc12dbe-9fe2-43c5-b595-be3941b070c3": {"__data__": {"id_": "efc12dbe-9fe2-43c5-b595-be3941b070c3", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/support.py", "file_name": "support.py", "file_type": "text/x-python", "file_size": 3666, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "30cbde39-197f-4005-9af2-82286294fd85", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/support.py", "file_name": "support.py", "file_type": "text/x-python", "file_size": 3666, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "5267c487c736eea649e2f04c8aab537787b648ee8014ac2a0ae9e9aa4d50c396", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fd7cdfa6-a872-4d38-9304-07b8d0470979", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/support.py", "file_name": "support.py", "file_type": "text/x-python", "file_size": 3666, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "66153f436f230ef4af4236e94c591ec55ff43c4e5144ecd6a81d33edbd0cd618", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "int),\n (\"ind_of_better_s\", int),\n (\"started_run\", bool),\n (\"num_active_runs\", int),\n (\"local_min\", bool),\n]\n\naposmm_gen_out = copy.deepcopy(uniform_or_localopt_gen_out)\naposmm_gen_out += [\n (\"sim_id\", int),\n (\"paused\", bool),\n (\"pt_id\", int), # Identify the same point evaluated by different sim_f's or components\n]\n\n# give_sim_work_first persis_info\npersis_info_1 = {\n \"total_gen_calls\": 0, # Counts gen calls in alloc_f\n \"last_worker\": 0, # Remembers last gen worker in alloc_f\n \"next_to_give\": 0, # Remembers next H row to give in alloc_f\n}\n\npersis_info_1[0] = {\n \"run_order\": {}, # Used by manager to remember run order\n \"total_runs\": 0, # Used by manager to count total runs\n \"rand_stream\": np.random.default_rng(1),\n}\n# end_persis_info_rst_tag\n\npersis_info_2 = copy.deepcopy(persis_info_1)\npersis_info_2[1] = persis_info_2[0]\npersis_info_2.pop(0)\n\n# give_sim_work_first_pausing persis_info\npersis_info_3 = copy.deepcopy(persis_info_1)\npersis_info_3.pop(\"next_to_give\")\npersis_info_3[\"need_to_give\"] = set()\npersis_info_3[\"complete\"] = set()\npersis_info_3[\"has_nan\"] = set()\npersis_info_3[\"already_paused\"] = set()\npersis_info_3[\"H_len\"] = 0\npersis_info_3[\"best_complete_val\"] = np.inf\npersis_info_3[\"local_pt_ids\"] = set()\npersis_info_3[\"inds_of_pt_ids\"] = {}", "mimetype": "text/plain", "start_char_idx": 2138, "end_char_idx": 3403, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "1d3b02eb-451b-4572-808c-77c159c53652": {"__data__": {"id_": "1d3b02eb-451b-4572-808c-77c159c53652", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_1d_sampling.py", "file_name": "test_1d_sampling.py", "file_type": "text/x-python", "file_size": 1744, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1e5a4a8f-3018-49d6-9376-cca91b3d3df0", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_1d_sampling.py", "file_name": "test_1d_sampling.py", "file_type": "text/x-python", "file_size": 1744, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "9132c7d5df09aee974223f6a9fd538a939c0d908f0d6bec95b8a4a8a01bb06e4", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with Latin hypercube sampling on a simple 1D problem\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_1d_sampling.py\n python test_1d_sampling.py --nworkers 3\n python test_1d_sampling.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local threads tcp\n# TESTSUITE_NPROCS: 2 4\n\nimport numpy as np\n\nfrom libensemble import Ensemble\nfrom libensemble.gen_funcs.sampling import latin_hypercube_sample as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.sim_funcs.simple_sim import norm_eval as sim_f\nfrom libensemble.specs import ExitCriteria, GenSpecs, LibeSpecs, SimSpecs\nfrom libensemble.tools import add_unique_random_streams\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n sampling = Ensemble(parse_args=True)\n sampling.libE_specs = LibeSpecs(save_every_k_gens=300, safe_mode=False, disable_log_files=True)\n sampling.sim_specs = SimSpecs(sim_f=sim_f)\n sampling.gen_specs = GenSpecs(\n gen_f=gen_f,\n outputs=[(\"x\", float, (1,))],\n user={\n \"gen_batch_size\": 100,\n \"lb\": np.array([-3]),\n \"ub\": np.array([3]),\n },\n )\n\n sampling.persis_info = add_unique_random_streams({}, sampling.nworkers + 1)\n sampling.exit_criteria = ExitCriteria(sim_max=500)\n\n sampling.run()\n if sampling.is_manager:\n assert len(sampling.H) >= 500\n print(\"\\nlibEnsemble with random sampling has generated enough points\")\n sampling.save_output(__file__)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1632, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "9a0e687f-b8eb-4d38-8aac-4479756cbb2e": {"__data__": {"id_": "9a0e687f-b8eb-4d38-8aac-4479756cbb2e", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_1d_sampling_from_files.py", "file_name": "test_1d_sampling_from_files.py", "file_type": "text/x-python", "file_size": 1322, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e56d1770-06bc-47cf-ac78-336b3e951043", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_1d_sampling_from_files.py", "file_name": "test_1d_sampling_from_files.py", "file_type": "text/x-python", "file_size": 1322, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "168d86021779b989acaeefdb15087439fde5ebc74e0e20247a6a75b716c98980", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with Latin hypercube sampling on a simple 1D problem using\nthe libEnsemble yaml interface\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_1d_sampling_from_yaml.py\n python test_1d_sampling_from_yaml.py --nworkers 3\n python test_1d_sampling_from_yaml.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local tcp\n# TESTSUITE_NPROCS: 2 4\n# TESTSUITE_EXTRA: true\n\nimport numpy as np\n\nfrom libensemble import Ensemble\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n sampling = Ensemble(parse_args=True)\n sampling.from_json(\"1d_sampling.json\")\n sampling.from_toml(\"1d_sampling.toml\")\n sampling.from_yaml(\"1d_sampling.yaml\")\n\n sampling.gen_specs.user.update(\n {\n \"lb\": np.array([-3]),\n \"ub\": np.array([3]),\n }\n )\n\n sampling.add_random_streams()\n\n # Perform the run\n sampling.run()\n\n if sampling.is_manager:\n assert len(sampling.H) >= 501\n print(\"\\nlibEnsemble with random sampling has generated enough points\")\n sampling.save_output(__file__)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1232, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "2bef6a0a-7137-4ec1-877d-401814dede2e": {"__data__": {"id_": "2bef6a0a-7137-4ec1-877d-401814dede2e", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_1d_sampling_no_comms_given.py", "file_name": "test_1d_sampling_no_comms_given.py", "file_type": "text/x-python", "file_size": 2005, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "945e24e1-e868-4be3-86bf-c08be09e92cb", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_1d_sampling_no_comms_given.py", "file_name": "test_1d_sampling_no_comms_given.py", "file_type": "text/x-python", "file_size": 2005, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "5c23b222e94e65f8ee8a5ff4d117e29bef59ca97e1f1fd80a2c095cf335224ca", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with Latin hypercube sampling on a simple 1D problem\nUnlike other tests, the command line options are not parsed.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_1d_sampling_no_comms_given.py\n python test_1d_sampling_no_comms_given.py\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# Note for this test: NPROCS on command line will be ignored for local comms\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 4\n\nimport numpy as np\n\nfrom libensemble import Ensemble\nfrom libensemble.gen_funcs.sampling import latin_hypercube_sample as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.sim_funcs.simple_sim import norm_eval as sim_f\nfrom libensemble.specs import ExitCriteria, GenSpecs, LibeSpecs, SimSpecs\nfrom libensemble.tools import check_npy_file_exists\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n\n libE_specs = LibeSpecs(save_every_k_gens=300, disable_log_files=True, nworkers=3)\n\n sim_specs = SimSpecs(\n sim_f=sim_f,\n inputs=[\"x\"],\n outputs=[(\"f\", float)],\n )\n\n gen_specs = GenSpecs(\n gen_f=gen_f,\n outputs=[(\"x\", float, (1,))],\n user={\n \"gen_batch_size\": 500,\n \"lb\": np.array([-3]),\n \"ub\": np.array([3]),\n },\n )\n\n exit_criteria = ExitCriteria(gen_max=501)\n\n sampling = Ensemble(\n libE_specs=libE_specs,\n sim_specs=sim_specs,\n gen_specs=gen_specs,\n exit_criteria=exit_criteria,\n )\n\n sampling.add_random_streams()\n H, persis_info, flag = sampling.run()\n\n if sampling.is_manager:\n assert len(H) >= 501\n print(\"\\nlibEnsemble with random sampling has generated enough points\")\n sampling.save_output(__file__)\n assert check_npy_file_exists(__file__, basename=True)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1833, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "36e635d3-307f-4cc2-936d-3092d4dffc51": {"__data__": {"id_": "36e635d3-307f-4cc2-936d-3092d4dffc51", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_1d_sampling_with_profile.py", "file_name": "test_1d_sampling_with_profile.py", "file_type": "text/x-python", "file_size": 2162, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "aa2683e8-afec-4b10-84d4-2fa91c1554c8", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_1d_sampling_with_profile.py", "file_name": "test_1d_sampling_with_profile.py", "file_type": "text/x-python", "file_size": 2162, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "ac7cddbe3c04e128ca60313f8fedd1530d16c878804e82db4c228054f00289cf", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble 1D sampling test with worker profiling.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_1d_sampling_with_profile.py\n python test_1d_sampling_with_profile.py --nworkers 3\n python test_1d_sampling_with_profile.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 4\n# TESTSUITE_EXTRA: true\n\nimport os\nimport time\n\nimport numpy as np\n\nfrom libensemble.gen_funcs.sampling import latin_hypercube_sample as gen_f\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.simple_sim import norm_eval as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n libE_specs[\"profile\"] = True\n libE_specs[\"safe_mode\"] = False\n libE_specs[\"kill_canceled_sims\"] = False\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"out\": [(\"x\", float, (1,))],\n \"user\": {\n \"gen_batch_size\": 500,\n \"lb\": np.array([-3]),\n \"ub\": np.array([3]),\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n exit_criteria = {\"sim_max\": 501}\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs)\n\n if is_manager:\n assert len(H) >= 501\n print(\"\\nlibEnsemble with random sampling has generated enough points\")\n\n assert \"manager.prof\" in os.listdir(), \"Expected manager profile not found after run\"\n\n prof_files = [f\"worker_{i + 1}.prof\" for i in range(nworkers)]\n\n # Ensure profile writes complete before checking\n time.sleep(0.5)\n\n for file in prof_files:\n assert file in os.listdir(), \"Expected profile {file} not found after run\"", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1974, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "768d606d-3536-49e3-8a3a-c0ec03aad8fa": {"__data__": {"id_": "768d606d-3536-49e3-8a3a-c0ec03aad8fa", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_1d_splitcomm.py", "file_name": "test_1d_splitcomm.py", "file_type": "text/x-python", "file_size": 2183, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3048cc40-4fcc-4eae-a99b-4c1934713b89", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_1d_splitcomm.py", "file_name": "test_1d_splitcomm.py", "file_type": "text/x-python", "file_size": 2183, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "a537505c54c2a4e96ddaafc5f3f485f17ad4c6c9cd2986ba0e4d457fa1038038", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with Latin hypercube sampling on a simple 1D problem\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_1d_sampling.py\n python test_1d_sampling.py --nworkers 3\n python test_1d_sampling.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi\n# TESTSUITE_NPROCS: 4\n\nimport numpy as np\n\nfrom libensemble.gen_funcs.sampling import latin_hypercube_sample as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.simple_sim import norm_eval as sim_f\nfrom libensemble.tests.regression_tests.common import mpi_comm_split\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n num_comms = 2 # Must have at least num_comms*2 processors\n nworkers, is_manager, libE_specs, _ = parse_args()\n libE_specs[\"mpi_comm\"], sub_comm_number = mpi_comm_split(num_comms)\n is_manager = libE_specs[\"mpi_comm\"].Get_rank() == 0\n\n libE_specs[\"save_every_k_gens\"] = 300\n libE_specs[\"H_file_prefix\"] = \"splitcomm_\" + str(sub_comm_number)\n libE_specs[\"safe_mode\"] = False\n libE_specs[\"disable_log_files\"] = True\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"out\": [(\"x\", float, (1,))],\n \"user\": {\n \"gen_batch_size\": 500,\n \"lb\": np.array([-3]),\n \"ub\": np.array([3]),\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1, seed=1234)\n\n exit_criteria = {\"gen_max\": 501}\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs)\n\n if is_manager:\n assert len(H) >= 501\n print(\"\\nlibEnsemble with random sampling has generated enough points\")\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2021, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "59c32de8-f1d1-41cd-a5d9-62471d0c6f84": {"__data__": {"id_": "59c32de8-f1d1-41cd-a5d9-62471d0c6f84", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_1d_subcomm.py", "file_name": "test_1d_subcomm.py", "file_type": "text/x-python", "file_size": 2255, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "882d30f3-a6f3-46ca-a091-612af66e82ce", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_1d_subcomm.py", "file_name": "test_1d_subcomm.py", "file_type": "text/x-python", "file_size": 2255, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "40d5b379475cc03945ef9411c11d99c3a739f3e1b07e1f7da1bd3bc63eb883ab", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with Latin hypercube sampling on a simple 1D problem\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_1d_sampling.py\n python test_1d_sampling.py --nworkers 3\n python test_1d_sampling.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi\n# TESTSUITE_NPROCS: 4\n\nimport numpy as np\n\nfrom libensemble.gen_funcs.sampling import latin_hypercube_sample as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.simple_sim import norm_eval as sim_f\nfrom libensemble.tests.regression_tests.common import mpi_comm_excl\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n libE_specs[\"mpi_comm\"], mpi_comm_null = mpi_comm_excl()\n\n if libE_specs[\"mpi_comm\"] == mpi_comm_null:\n is_excluded = True\n is_manager = False\n else:\n is_manager = libE_specs[\"mpi_comm\"].Get_rank() == 0\n is_excluded = False\n\n libE_specs[\"save_every_k_gens\"] = 300\n libE_specs[\"safe_mode\"] = False\n libE_specs[\"disable_log_files\"] = True\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"out\": [(\"x\", float, (1,))],\n \"user\": {\n \"gen_batch_size\": 500,\n \"lb\": np.array([-3]),\n \"ub\": np.array([3]),\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1, seed=1234)\n\n exit_criteria = {\"gen_max\": 501}\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs)\n\n if is_manager:\n assert len(H) >= 501\n assert flag == 0\n print(\"\\nlibEnsemble with random sampling has generated enough points\")\n save_libE_output(H, persis_info, __file__, nworkers)\n\n elif is_excluded:\n assert flag == 3", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2052, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "614cbef1-cb42-41eb-8d6b-75ff5144d09f": {"__data__": {"id_": "614cbef1-cb42-41eb-8d6b-75ff5144d09f", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_1d_super_simple.py", "file_name": "test_1d_super_simple.py", "file_type": "text/x-python", "file_size": 2071, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f646c596-da6c-407f-86ba-4aa719e1b85e", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_1d_super_simple.py", "file_name": "test_1d_super_simple.py", "file_type": "text/x-python", "file_size": 2071, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "035fb9c33d7c3ca4f56033dc6aeba180195cdd7f3e93d5e84eef5556c5f4e36a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with Latin hypercube sampling on a simple 1D problem\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_1d_sampling.py\n python test_1d_sampling.py --nworkers 3\n python test_1d_sampling.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 2 4\n\nimport numpy as np\n\nfrom libensemble.gen_funcs.sampling import latin_hypercube_sample as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\ndef sim_f(In):\n Out = np.zeros(1, dtype=[(\"f\", float)])\n Out[\"f\"] = np.linalg.norm(In)\n return Out\n\ndef sim_f_noreturn(In):\n print(np.linalg.norm(In))\n\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"out\": [(\"x\", float, (1,))],\n \"user\": {\n \"gen_batch_size\": 500,\n \"lb\": np.array([-3]),\n \"ub\": np.array([3]),\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1, seed=1234)\n\n exit_criteria = {\"gen_max\": 501}\n\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs)\n\n if is_manager:\n assert len(H) >= 501\n print(\"\\nlibEnsemble with random sampling has generated enough points\")\n save_libE_output(H, persis_info, __file__, nworkers)\n\n # Test running a sim_f without any returns\n sim_specs = {\n \"sim_f\": sim_f_noreturn,\n \"in\": [\"x\"],\n }\n\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs)\n\n if is_manager:\n assert len(H) >= 501\n print(\"\\nlibEnsemble with random sampling has generated enough points\")", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1876, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "3a0e075f-50fa-494b-9eb0-c688e9632460": {"__data__": {"id_": "3a0e075f-50fa-494b-9eb0-c688e9632460", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_1d_uniform_sampling_with_comm_dup.py", "file_name": "test_1d_uniform_sampling_with_comm_dup.py", "file_type": "text/x-python", "file_size": 2706, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "63af6ee9-7cd1-43a8-a11a-bba8f31650a9", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_1d_uniform_sampling_with_comm_dup.py", "file_name": "test_1d_uniform_sampling_with_comm_dup.py", "file_type": "text/x-python", "file_size": 2706, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "079bbc44d68801aa6a54e5a129f4227bff3f0cf4414fae321f76ad07256fee96", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with uniform random sampling on a simple 1D problem\nwithout specifying the default communicator. Tests that mpi is taken\nas default, with a duplicate of MPI.COMM_WORLD. If libEnsemble\nuses MPI.COMM_WORLD, this test will fail.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_1d_uniform_sampling_with_comm_dup.py\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi\n# TESTSUITE_NPROCS: 2 4\n# TESTSUITE_OS_SKIP: WIN\n\nimport sys\n\nimport numpy as np\n\nfrom libensemble.gen_funcs.sampling import uniform_random_sample as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.simple_sim import norm_eval as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n if libE_specs[\"comms\"] != \"mpi\":\n sys.exit(\"This test only runs with MPI -- aborting...\")\n # After this check will remove libE_specs[\"comms\"]\n else:\n from mpi4py import MPI\n\n # Check independence of default communicator from MPI.COMM_WORLD\n world = MPI.COMM_WORLD\n if not is_manager:\n world.isend(world.Get_rank(), dest=0, tag=0)\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"in\": [\"sim_id\"],\n \"out\": [(\"x\", float, (1,))],\n \"user\": {\n \"lb\": np.array([-3]),\n \"ub\": np.array([3]),\n \"gen_batch_size\": 500,\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n exit_criteria = {\"gen_max\": 501}\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info)\n\n if is_manager:\n # assert libE_specs[\"comms\"] == \"mpi\", \"MPI default comms should be set\"\n # Potential to cause a hang\n worker_ids = []\n exp_worker_ids = list(range(1, nworkers + 1))\n mpi_status = MPI.Status()\n for worker in range(1, nworkers + 1):\n worker_rank = world.recv(source=worker, status=mpi_status)\n worker_ids.append(worker_rank)\n assert worker_ids == exp_worker_ids, \"MPI World values are not as expected\"\n assert len(H) >= 501\n print(\"\\nlibEnsemble with random sampling has generated enough points\")\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2449, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "8a271d68-f87f-4ba5-be0f-368837bc9348": {"__data__": {"id_": "8a271d68-f87f-4ba5-be0f-368837bc9348", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_2d_sampling.py", "file_name": "test_2d_sampling.py", "file_type": "text/x-python", "file_size": 1728, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cb32afa0-cf4b-4af7-8b8f-f36ec88a3a3a", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_2d_sampling.py", "file_name": "test_2d_sampling.py", "file_type": "text/x-python", "file_size": 1728, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "75b92194d6d85d9da15195b4fce76ce7ba14799bba60e420c8fadb52c576f4b9", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with Latin hypercube sampling on a simple 2D problem\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_2d_sampling.py\n python test_2d_sampling.py --nworkers 3\n python test_2d_sampling.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local threads tcp\n# TESTSUITE_NPROCS: 2 4\n\nimport numpy as np\n\nfrom libensemble import Ensemble\nfrom libensemble.gen_funcs.sampling import latin_hypercube_sample as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.sim_funcs.simple_sim import norm_eval as sim_f\nfrom libensemble.specs import ExitCriteria, GenSpecs, LibeSpecs, SimSpecs\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n sampling = Ensemble(parse_args=True)\n sampling.libE_specs = LibeSpecs(save_every_k_sims=100)\n sampling.sim_specs = SimSpecs(sim_f=sim_f)\n sampling.gen_specs = GenSpecs(\n gen_f=gen_f,\n outputs=[(\"x\", float, 2)],\n user={\n \"gen_batch_size\": 100,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n )\n\n sampling.exit_criteria = ExitCriteria(sim_max=200)\n sampling.add_random_streams()\n\n sampling.run()\n if sampling.is_manager:\n assert len(sampling.H) >= 200\n x = sampling.H[\"x\"]\n f = sampling.H[\"f\"]\n assert np.all(np.isclose(f, np.sqrt(np.sum(x**2, axis=1))))\n print(\"\\nlibEnsemble has calculated the 2D vector norm of all points\")\n sampling.save_output(__file__)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1595, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "105eabf9-6e8e-4b30-b998-78ebbbd9b8f7": {"__data__": {"id_": "105eabf9-6e8e-4b30-b998-78ebbbd9b8f7", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_GPU_gen_resources.py", "file_name": "test_GPU_gen_resources.py", "file_type": "text/x-python", "file_size": 5139, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e09e505e-78a4-44ea-9a3d-be329dac5012", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_GPU_gen_resources.py", "file_name": "test_GPU_gen_resources.py", "file_type": "text/x-python", "file_size": 5139, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "73d9cfafcaefe0efad862e45521b8f8706706e9fd02d5ea0925862879094643a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8c1d9ef4-f8a8-4d02-a6d0-60364291fa70", "node_type": "1", "metadata": {}, "hash": "76886331664f295d828d7c8ebb162d933468219c7e4b17bd70730c8e69550852", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests variable resource detection and automatic GPU assignment in both\ngenerator and simulators.\n\nThe persistent generator creates simulations with variable resource requirements,\nwhile also requiring resources itself. The resources required by a sim must\nnot be larger than what remains once the generator resources are assigned.\n\nThe sim_f (gpu_variable_resources_from_gen) asserts that the GPU assignment\nis correct for the default method for the MPI runner. GPUs are not actually\nused for the default application. Four GPUs per node is mocked up below (if this line\nis removed, libEnsemble will detect any GPUs available).\n\nA dry_run option is provided. This can be set in the calling script, and will\njust print run-lines and GPU settings. This may be used for testing run-lines\nproduced and GPU settings for different MPI runners.\n\nExecute via one of the following commands (e.g., 4 workers):\n mpiexec -np 5 python test_GPU_gen_resources.py\n python test_GPU_gen_resources.py --nworkers 4\n\nWhen running with the above command, the number of concurrent evaluations of\nthe objective function will be 4, as one of the five workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 5\n\nimport sys\n\nimport numpy as np\n\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.executors.mpi_executor import MPIExecutor\nfrom libensemble.gen_funcs.persistent_sampling_var_resources import uniform_sample_with_sim_gen_resources as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs import six_hump_camel\nfrom libensemble.sim_funcs.var_resources import gpu_variable_resources_from_gen as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\n# from libensemble import logger\n# logger.set_level(\"DEBUG\") # For testing the test\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n libE_specs[\"num_resource_sets\"] = nworkers # Persistent gen DOES need resources\n\n # Mock GPU system / uncomment to detect GPUs\n libE_specs[\"sim_dirs_make\"] = True # Will only contain files if dry_run is False\n libE_specs[\"gen_dirs_make\"] = True # Will only contain files if dry_run is False\n libE_specs[\"ensemble_dir_path\"] = \"./ensemble_GPU_gen_resources_w\" + str(nworkers)\n libE_specs[\"reuse_output_dir\"] = True\n dry_run = True\n\n if libE_specs[\"comms\"] == \"tcp\":\n sys.exit(\"This test only runs with MPI or local -- aborting...\")\n\n # Get paths for applications to run\n six_hump_camel_app = six_hump_camel.__file__\n exctr = MPIExecutor()\n exctr.register_app(full_path=six_hump_camel_app, app_name=\"six_hump_camel\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n \"user\": {\"dry_run\": dry_run},\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [\"f\", \"x\", \"sim_id\"],\n \"out\": [(\"num_procs\", int), (\"num_gpus\", int), (\"x\", float, n)],\n \"user\": {\n \"initial_batch_size\": nworkers - 1,\n \"max_procs\": nworkers - 1, # Any sim created can req. 1 worker up to all.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3229, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "8c1d9ef4-f8a8-4d02-a6d0-60364291fa70": {"__data__": {"id_": "8c1d9ef4-f8a8-4d02-a6d0-60364291fa70", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_GPU_gen_resources.py", "file_name": "test_GPU_gen_resources.py", "file_type": "text/x-python", "file_size": 5139, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e09e505e-78a4-44ea-9a3d-be329dac5012", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_GPU_gen_resources.py", "file_name": "test_GPU_gen_resources.py", "file_type": "text/x-python", "file_size": 5139, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "73d9cfafcaefe0efad862e45521b8f8706706e9fd02d5ea0925862879094643a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "105eabf9-6e8e-4b30-b998-78ebbbd9b8f7", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_GPU_gen_resources.py", "file_name": "test_GPU_gen_resources.py", "file_type": "text/x-python", "file_size": 5139, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "96d8c2dabfe77c553463c893a8a7c2fd645351ac92cbf2274801f74ecfa5da20", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "1 worker up to all.\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n \"dry_run\": dry_run,\n },\n }\n\n alloc_specs = {\n \"alloc_f\": alloc_f,\n \"user\": {\n \"give_all_with_same_priority\": False,\n \"async_return\": False, # False batch returns\n },\n }\n\n exit_criteria = {\"sim_max\": 20}\n libE_specs[\"resource_info\"] = {\"cores_on_node\": (nworkers * 2, nworkers * 4), \"gpus_on_node\": nworkers}\n\n base_libE_specs = libE_specs.copy()\n for gen_on_manager in [False, True]:\n for run in range(5):\n # reset\n libE_specs = base_libE_specs.copy()\n libE_specs[\"gen_on_manager\"] = gen_on_manager\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n if run == 0:\n libE_specs[\"gen_num_procs\"] = 2\n elif run == 1:\n if gen_on_manager:\n print(\"SECOND LIBE CALL WITH GEN ON MANAGER\")\n libE_specs[\"gen_num_gpus\"] = 1\n elif run == 2:\n persis_info[\"gen_num_gpus\"] = 1\n elif run == 3:\n # Two GPUs per resource set\n libE_specs[\"resource_info\"][\"gpus_on_node\"] = nworkers * 2\n persis_info[\"gen_num_gpus\"] = 1\n elif run == 4:\n # Two GPUs requested for gen\n persis_info[\"gen_num_procs\"] = 2\n persis_info[\"gen_num_gpus\"] = 2\n gen_specs[\"user\"][\"max_procs\"] = max(nworkers - 2, 1)\n\n # Perform the run\n H, persis_info, flag = libE(\n sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs, alloc_specs=alloc_specs\n )\n\n# All asserts are in gen and sim funcs", "mimetype": "text/plain", "start_char_idx": 3210, "end_char_idx": 4549, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "b2fe1fa8-7701-4dcf-99f7-e8acc47eda0f": {"__data__": {"id_": "b2fe1fa8-7701-4dcf-99f7-e8acc47eda0f", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_GPU_variable_resources.py", "file_name": "test_GPU_variable_resources.py", "file_type": "text/x-python", "file_size": 4122, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0e247933-5bc0-401b-b3dd-c8e0ee299a60", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_GPU_variable_resources.py", "file_name": "test_GPU_variable_resources.py", "file_type": "text/x-python", "file_size": 4122, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "12f000dcdf2fdd9b3c7ad913af5a23f7b207db4d1d7f0380c91bc5d3d23f69d0", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests variable resource detection and automatic GPU assignment in libEnsemble\n\nThe persistent generator creates simulations with variable resource requirements.\n\nThe sim_f (gpu_variable_resources_from_gen) asserts that GPUs assignment\nis correct for the default method for the MPI runner. GPUs are not actually\nused for default application. Four GPUs per node is mocked up below (if this line\nis removed, libEnsemble will detect any GPUs available).\n\nA dry_run option is provided. This can be set in the calling script, and will\njust print run-lines and GPU settings. This may be used for testing run-lines\nproduced and GPU settings for different MPI runners.\n\nExecute via one of the following commands (e.g. 5 workers):\n mpiexec -np 6 python test_GPU_variable_resources.py\n python test_GPU_variable_resources.py --nworkers 5\n\nWhen running with the above command, the number of concurrent evaluations of\nthe objective function will be 4, as one of the five workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 6\n\nimport numpy as np\n\nfrom libensemble import Ensemble\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.executors.mpi_executor import MPIExecutor\nfrom libensemble.gen_funcs.persistent_sampling_var_resources import uniform_sample_with_procs_gpus as gen_f1\nfrom libensemble.gen_funcs.persistent_sampling_var_resources import uniform_sample_with_var_gpus as gen_f2\n\n# Import libEnsemble items for this test\nfrom libensemble.sim_funcs import six_hump_camel\nfrom libensemble.sim_funcs.var_resources import gpu_variable_resources_from_gen as sim_f\nfrom libensemble.specs import AllocSpecs, ExitCriteria, GenSpecs, LibeSpecs, SimSpecs\nfrom libensemble.tools import add_unique_random_streams\n\n# from libensemble import logger\n# logger.set_level(\"DEBUG\") # For testing the test\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n # Get paths for applications to run\n six_hump_camel_app = six_hump_camel.__file__\n exctr = MPIExecutor()\n exctr.register_app(full_path=six_hump_camel_app, app_name=\"six_hump_camel\")\n\n gpu_test = Ensemble(parse_args=True, executor=exctr)\n gpu_test.libE_specs = LibeSpecs(\n num_resource_sets=gpu_test.nworkers - 1,\n resource_info={\"cores_on_node\": (8, 16), \"gpus_on_node\": 4},\n sim_dirs_make=True,\n ensemble_dir_path=\"./ensemble_GPU_variable_w\" + str(gpu_test.nworkers),\n reuse_output_dir=True,\n )\n\n gpu_test.sim_specs = SimSpecs(\n sim_f=sim_f,\n inputs=[\"x\"],\n out=[(\"f\", float)],\n user={\"dry_run\": False},\n )\n gpu_test.gen_specs = GenSpecs(\n gen_f=gen_f1,\n persis_in=[\"f\", \"x\", \"sim_id\"],\n out=[(\"num_procs\", int), (\"num_gpus\", int), (\"x\", float, 2)],\n user={\n \"initial_batch_size\": gpu_test.nworkers - 1,\n \"max_procs\": gpu_test.nworkers - 1, # Any sim created can req. 1 worker up to max\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n )\n\n gpu_test.alloc_specs = AllocSpecs(\n alloc_f=alloc_f,\n user={\n \"give_all_with_same_priority\": False,\n \"async_return\": False, # False causes batch returns\n },\n )\n\n # Run with random num_procs/num_gpus for each simulation\n gpu_test.persis_info = add_unique_random_streams({}, gpu_test.nworkers + 1)\n gpu_test.exit_criteria = ExitCriteria(sim_max=20)\n\n gpu_test.run()\n if gpu_test.is_manager:\n assert gpu_test.flag == 0\n\n # Run with num_gpus based on x[0] for each simulation\n gpu_test.gen_specs.gen_f = gen_f2\n gpu_test.gen_specs.user[\"max_gpus\"] = gpu_test.nworkers - 1\n gpu_test.persis_info = add_unique_random_streams({}, gpu_test.nworkers + 1)\n gpu_test.exit_criteria = ExitCriteria(sim_max=20)\n gpu_test.run()\n\n if gpu_test.is_manager:\n assert gpu_test.flag == 0\n\n gpu_test.save_output(__file__)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3832, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "3e57ad9a-045c-47af-9724-49ebef5fe745": {"__data__": {"id_": "3e57ad9a-045c-47af-9724-49ebef5fe745", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_GPU_variable_resources_multi_task.py", "file_name": "test_GPU_variable_resources_multi_task.py", "file_type": "text/x-python", "file_size": 4131, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1f295d15-30d1-4af8-be88-3c8de889595c", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_GPU_variable_resources_multi_task.py", "file_name": "test_GPU_variable_resources_multi_task.py", "file_type": "text/x-python", "file_size": 4131, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "142488323a1be4a525bb0ffb46fca3b3d8d9f7da337595d8e389b978c985c741", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "30742c0c-779e-459d-b92a-e73cfbf43667", "node_type": "1", "metadata": {}, "hash": "ef02c8e0a7908be0edd9d5179ea41060809a2d415a2350cc8e31a57e7e0d1c27", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests multi-task (using GPU and non-GPU tasks using variable resources\nand automatic GPU assignment in libEnsemble.\n\nThe persistent generator creates simulations with variable resource requirements\nand some that require GPUs and some do not. The \"num_procs\" and \"num_gpus\"\nfor each task are set in the generator. These are automatically passed through\nto the executor used by the sim.\n\nThe sim_f (gpu_variable_resources_from_gen) asserts that GPUs assignment\nis correct for the default method for the MPI runner. GPUs are not actually\nused for default application. CPUs and GPUs per node are mocked up below\n(if this line is removed, libEnsemble will detect any CPUs/GPUs available).\n\nA dry_run option is provided. This can be set in the calling script, and will\njust print run-lines and GPU settings. This may be used for testing run-lines\nproduced and GPU settings for different MPI runners.\n\nExecute via one of the following commands (e.g. 9 workers):\n mpiexec -np 10 python test_GPU_variable_resources_multi_task.py\n python test_GPU_variable_resources_multi_task.py --nworkers 9\n\nWhen running with the above command, the number of concurrent evaluations of\nthe objective function will be 8, as one of the nine workers will be the\npersistent generator.\n\nThis test must be run with 9 or more workers (8 sim workers), in order\nto resource all works units. More generally:\n ((nworkers - 1) - gpus_on_node) >= gen_specs[\"user\"][max_procs]\n\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 10\n\nimport numpy as np\n\nfrom libensemble import Ensemble\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.executors.mpi_executor import MPIExecutor\n\n# Using num_procs / num_gpus in gen\nfrom libensemble.gen_funcs.persistent_sampling_var_resources import uniform_sample_diff_simulations as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.sim_funcs import six_hump_camel\nfrom libensemble.sim_funcs.var_resources import gpu_variable_resources_from_gen as sim_f\nfrom libensemble.specs import AllocSpecs, ExitCriteria, GenSpecs, LibeSpecs, SimSpecs\nfrom libensemble.tools import add_unique_random_streams\n\n# from libensemble import logger\n# logger.set_level(\"DEBUG\") # For testing the test\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n # Get paths for applications to run\n six_hump_camel_app = six_hump_camel.__file__\n exctr = MPIExecutor()\n exctr.register_app(full_path=six_hump_camel_app, app_name=\"six_hump_camel\")\n\n gpu_test = Ensemble(parse_args=True, executor=exctr)\n nworkers = gpu_test.nworkers\n gpu_test.libE_specs = LibeSpecs(\n num_resource_sets=gpu_test.nworkers - 1,\n resource_info={\"cores_on_node\": (32, 64), \"gpus_on_node\": 4},\n sim_dirs_make=True,\n ensemble_dir_path=\"./ensemble_GPU_variable_multi_task_w\" + str(nworkers),\n )\n\n gpu_test.sim_specs = SimSpecs(\n sim_f=sim_f,\n inputs=[\"x\"],\n out=[(\"f\", float)],\n user={\"dry_run\": False},\n )\n gpu_test.gen_specs = GenSpecs(\n gen_f=gen_f,\n persis_in=[\"f\", \"x\", \"sim_id\"],\n out=[(\"num_procs\", int), (\"num_gpus\", int), (\"x\", float, 2)],\n user={\n \"initial_batch_size\": nworkers - 1,\n \"max_procs\": (nworkers - 1) // 2, # Any sim created can req.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3322, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "30742c0c-779e-459d-b92a-e73cfbf43667": {"__data__": {"id_": "30742c0c-779e-459d-b92a-e73cfbf43667", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_GPU_variable_resources_multi_task.py", "file_name": "test_GPU_variable_resources_multi_task.py", "file_type": "text/x-python", "file_size": 4131, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1f295d15-30d1-4af8-be88-3c8de889595c", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_GPU_variable_resources_multi_task.py", "file_name": "test_GPU_variable_resources_multi_task.py", "file_type": "text/x-python", "file_size": 4131, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "142488323a1be4a525bb0ffb46fca3b3d8d9f7da337595d8e389b978c985c741", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3e57ad9a-045c-47af-9724-49ebef5fe745", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_GPU_variable_resources_multi_task.py", "file_name": "test_GPU_variable_resources_multi_task.py", "file_type": "text/x-python", "file_size": 4131, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "ce608ac26b9b9e607c4b59f828b0ba2a8edc5b503b7284f2ed16054ef7c4f0cf", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "1 worker up to max\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n \"multi_task\": True,\n },\n )\n\n gpu_test.alloc_specs = AllocSpecs(\n alloc_f=alloc_f,\n user={\n \"give_all_with_same_priority\": False,\n \"async_return\": False, # False causes batch returns\n },\n )\n\n gpu_test.persis_info = add_unique_random_streams({}, gpu_test.nworkers + 1)\n gpu_test.exit_criteria = ExitCriteria(sim_max=40, wallclock_max=300)\n\n if gpu_test.ready():\n gpu_test.run()\n\n if gpu_test.is_manager:\n assert gpu_test.flag == 0\n gpu_test.save_output(__file__)", "mimetype": "text/plain", "start_char_idx": 3323, "end_char_idx": 3855, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "2f237dd6-8c7a-4e14-a2b0-0f67cc8a4e37": {"__data__": {"id_": "2f237dd6-8c7a-4e14-a2b0-0f67cc8a4e37", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_active_persistent_worker_abort.py", "file_name": "test_active_persistent_worker_abort.py", "file_type": "text/x-python", "file_size": 2749, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2aa04aff-993e-4c33-802f-fc8616890514", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_active_persistent_worker_abort.py", "file_name": "test_active_persistent_worker_abort.py", "file_type": "text/x-python", "file_size": 2749, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "092bddef288fc1db2b4a9d0f8ede5939b06e41ae1e14c08bd49c4979216d5502", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests libEnsemble capability to abort persistent worker.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_6-hump_camel_active_persistent_worker_abort.py\n python test_6-hump_camel_active_persistent_worker_abort.py --nworkers 3\n python test_6-hump_camel_active_persistent_worker_abort.py --nworkers 3 --comms tcp\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 2, as one of the three workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local tcp\n# TESTSUITE_NPROCS: 3 4\n# TESTSUITE_EXTRA: true\n\nimport sys\n\nimport numpy as np\n\nimport libensemble.gen_funcs\n\nlibensemble.gen_funcs.rc.aposmm_optimizers = \"scipy\"\n\nfrom libensemble.alloc_funcs.start_persistent_local_opt_gens import start_persistent_local_opt_gens as alloc_f\nfrom libensemble.gen_funcs.uniform_or_localopt import uniform_or_localopt as gen_f\n\n# Import libEnsemble requirements\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.six_hump_camel import six_hump_camel as sim_f\nfrom libensemble.tests.regression_tests.support import uniform_or_localopt_gen_out as gen_out\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_out += [(\"x\", float, 2), (\"x_on_cube\", float, 2)]\n gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [\"x\", \"f\"],\n \"out\": gen_out,\n \"user\": {\n \"localopt_method\": \"LN_BOBYQA\",\n \"xtol_rel\": 1e-4,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n \"gen_batch_size\": 2,\n \"dist_to_bound_multiple\": 0.5,\n \"localopt_maxeval\": 4,\n },\n }\n\n alloc_specs = {\n \"alloc_f\": alloc_f,\n \"user\": {\n \"batch_mode\": True,\n \"num_active_gens\": 1,\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n # Set sim_max small so persistent worker is quickly terminated\n exit_criteria = {\"sim_max\": 10, \"wallclock_max\": 300}\n\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n if is_manager:\n assert flag == 0\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2500, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d5d53990-ade9-4765-b9ae-a8fd0c22d80e": {"__data__": {"id_": "d5d53990-ade9-4765-b9ae-a8fd0c22d80e", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_asktell_aposmm_nlopt.py", "file_name": "test_asktell_aposmm_nlopt.py", "file_type": "text/x-python", "file_size": 3426, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "35931699-d535-499f-a8e4-f38325dd396c", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_asktell_aposmm_nlopt.py", "file_name": "test_asktell_aposmm_nlopt.py", "file_type": "text/x-python", "file_size": 3426, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "cdeedefb81b80a098b07daa9671aa6b2714c546b89d5636635f4b757f7915f69", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with APOSMM with the NLopt local optimizer.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_persistent_aposmm_nlopt.py\n python test_persistent_aposmm_nlopt.py --nworkers 3 --comms local\n python test_persistent_aposmm_nlopt.py --nworkers 3 --comms tcp\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 2, as one of the three workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: local mpi tcp\n# TESTSUITE_NPROCS: 3\n\nimport sys\nfrom math import gamma, pi, sqrt\n\nimport numpy as np\n\nimport libensemble.gen_funcs\n\n# Import libEnsemble items for this test\nfrom libensemble.sim_funcs.six_hump_camel import six_hump_camel as sim_f\n\nlibensemble.gen_funcs.rc.aposmm_optimizers = \"nlopt\"\nfrom time import time\n\nfrom gest_api.vocs import VOCS\n\nfrom libensemble import Ensemble\nfrom libensemble.alloc_funcs.persistent_aposmm_alloc import persistent_aposmm_alloc as alloc_f\nfrom libensemble.gen_classes import APOSMM\nfrom libensemble.specs import AllocSpecs, ExitCriteria, GenSpecs, SimSpecs\nfrom libensemble.tests.regression_tests.support import six_hump_camel_minima as minima\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n\n workflow = Ensemble(parse_args=True)\n\n if workflow.is_manager:\n start_time = time()\n\n if workflow.nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n n = 2\n workflow.sim_specs = SimSpecs(sim_f=sim_f, inputs=[\"x\"], outputs=[(\"f\", float)])\n workflow.alloc_specs = AllocSpecs(alloc_f=alloc_f)\n workflow.exit_criteria = ExitCriteria(sim_max=2000)\n\n vocs = VOCS(\n variables={\"core\": [-3, 3], \"edge\": [-2, 2], \"core_on_cube\": [-3, 3], \"edge_on_cube\": [-2, 2]},\n objectives={\"energy\": \"MINIMIZE\"},\n )\n\n aposmm = APOSMM(\n vocs,\n max_active_runs=workflow.nworkers, # should this match nworkers always? practically?\n variables_mapping={\"x\": [\"core\", \"edge\"], \"x_on_cube\": [\"core_on_cube\", \"edge_on_cube\"], \"f\": [\"energy\"]},\n initial_sample_size=100,\n sample_points=minima,\n localopt_method=\"LN_BOBYQA\",\n rk_const=0.5 * ((gamma(1 + (n / 2)) * 5) ** (1 / n)) / sqrt(pi),\n xtol_abs=1e-6,\n ftol_abs=1e-6,\n )\n\n # SH TODO - dont want this stuff duplicated - pass with vocs instead\n workflow.gen_specs = GenSpecs(\n persis_in=[\"x\", \"x_on_cube\", \"sim_id\", \"local_min\", \"local_pt\", \"f\"],\n generator=aposmm,\n batch_size=5,\n initial_batch_size=10,\n user={\"initial_sample_size\": 100},\n )\n\n workflow.libE_specs.gen_on_manager = True\n workflow.add_random_streams()\n\n H, _, _ = workflow.run()\n\n # Perform the run\n\n if workflow.is_manager:\n print(\"[Manager]:\", H[np.where(H[\"local_min\"])][\"x\"])\n print(\"[Manager]: Time taken =\", time() - start_time, flush=True)\n\n tol = 1e-5\n for m in minima:\n # The minima are known on this test problem.\n # We use their values to test APOSMM has identified all minima\n print(np.min(np.sum((H[H[\"local_min\"]][\"x\"] - m) ** 2, 1)), flush=True)\n assert np.min(np.sum((H[H[\"local_min\"]][\"x\"] - m) ** 2, 1)) < tol", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3163, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "c27391e3-a3c7-472d-8ef2-d9f1465bc0a0": {"__data__": {"id_": "c27391e3-a3c7-472d-8ef2-d9f1465bc0a0", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_asktell_gpCAM.py", "file_name": "test_asktell_gpCAM.py", "file_type": "text/x-python", "file_size": 3202, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "68ee645a-8fab-46e2-a76c-07d82a49da24", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_asktell_gpCAM.py", "file_name": "test_asktell_gpCAM.py", "file_type": "text/x-python", "file_size": 3202, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "9418adff28b336a4ba55745055e4df8ed0dd3f1efe10803563449c3c5c0a5d5e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests libEnsemble with gpCAM\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_gpCAM_class.py\n python test_gpCAM_class.py --nworkers 3 --comms local\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 2, as one of the three workers will be the\npersistent generator.\n\nSee libensemble.gen_funcs.persistent_gpCAM for more details about the generator\nsetup.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 4\n# TESTSUITE_EXTRA: true\n\nimport sys\nimport warnings\n\nimport numpy as np\nfrom gest_api.vocs import VOCS\n\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.gen_classes.gpCAM import GP_CAM, GP_CAM_Covar\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.rosenbrock import rosenbrock_eval as sim_f\nfrom libensemble.tools import parse_args, save_libE_output\n\nwarnings.filterwarnings(\"ignore\", message=\"Default hyperparameter_bounds\")\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n n = 4\n batch_size = 15\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [\n (\"f\", float),\n ],\n }\n\n gen_specs = {\n \"persis_in\": [\"x\", \"f\", \"sim_id\"],\n \"out\": [(\"x\", float, (n,))],\n \"batch_size\": batch_size,\n \"user\": {\n \"lb\": np.array([-3, -2, -1, -1]),\n \"ub\": np.array([3, 2, 1, 1]),\n },\n }\n\n vocs = VOCS(variables={\"x0\": [-3, 3], \"x1\": [-2, 2], \"x2\": [-1, 1], \"x3\": [-1, 1]}, objectives={\"f\": \"MINIMIZE\"})\n\n alloc_specs = {\"alloc_f\": alloc_f}\n\n gen = GP_CAM_Covar(vocs)\n\n for inst in range(3):\n if inst == 0:\n gen_specs[\"generator\"] = gen\n num_batches = 10\n exit_criteria = {\"sim_max\": num_batches * batch_size, \"wallclock_max\": 300}\n libE_specs[\"save_every_k_gens\"] = 150\n libE_specs[\"H_file_prefix\"] = \"gpCAM_nongrid\"\n if inst == 1:\n gen = GP_CAM_Covar(vocs, use_grid=True, test_points_file=\"gpCAM_nongrid_after_gen_150.npy\")\n gen_specs[\"generator\"] = gen\n libE_specs[\"final_gen_send\"] = True\n del libE_specs[\"H_file_prefix\"]\n del libE_specs[\"save_every_k_gens\"]\n elif inst == 2:\n gen = GP_CAM(vocs, ask_max_iter=1)\n gen_specs[\"generator\"] = gen\n num_batches = 3 # Few because the ask_tell gen can be slow\n exit_criteria = {\"sim_max\": num_batches * batch_size, \"wallclock_max\": 300}\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, {}, alloc_specs, libE_specs)\n if is_manager:\n assert len(np.unique(H[\"gen_ended_time\"])) == num_batches\n\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2838, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "b0ee58b9-dc4b-4058-bff0-3076efaf437a": {"__data__": {"id_": "b0ee58b9-dc4b-4058-bff0-3076efaf437a", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_asktell_sampling.py", "file_name": "test_asktell_sampling.py", "file_type": "text/x-python", "file_size": 2446, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "6a6b77be-e48c-46aa-a927-62aa06c80d0d", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_asktell_sampling.py", "file_name": "test_asktell_sampling.py", "file_type": "text/x-python", "file_size": 2446, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "4f3fb91bf5260d757475a59d774643a6b4ea328fb760612fd715def7d5db2c0f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with Latin hypercube sampling on a simple 1D problem\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_sampling_asktell_gen.py\n python test_sampling_asktell_gen.py --nworkers 3 --comms local\n python test_sampling_asktell_gen.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 2 4\n\nimport numpy as np\nfrom gest_api.vocs import VOCS\n\n# Import libEnsemble items for this test\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.gen_classes.sampling import UniformSample\nfrom libensemble.libE import libE\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\ndef sim_f(In):\n Out = np.zeros(1, dtype=[(\"f\", float)])\n Out[\"f\"] = np.linalg.norm(In)\n return Out\n\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n libE_specs[\"gen_on_manager\"] = True\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = {\n \"persis_in\": [\"x\", \"f\", \"sim_id\"],\n \"out\": [(\"x\", float, (2,))],\n \"initial_batch_size\": 20,\n \"batch_size\": 10,\n \"user\": {\n \"initial_batch_size\": 20, # for wrapper\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n variables = {\"x0\": [-3, 3], \"x1\": [-2, 2]}\n objectives = {\"energy\": \"EXPLORE\"}\n\n vocs = VOCS(variables=variables, objectives=objectives)\n\n alloc_specs = {\"alloc_f\": alloc_f}\n exit_criteria = {\"gen_max\": 201}\n persis_info = add_unique_random_streams({}, nworkers + 1, seed=1234)\n\n for test in range(2):\n if test == 0:\n persis_info[\"num_gens_started\"] = 0\n generator = UniformSample(vocs)\n elif test == 1:\n persis_info[\"num_gens_started\"] = 0\n generator = UniformSample(vocs, variables_mapping={\"x\": [\"x0\", \"x1\"], \"f\": [\"energy\"]})\n gen_specs[\"generator\"] = generator\n H, persis_info, flag = libE(\n sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs=libE_specs\n )\n\n if is_manager:\n print(H[[\"sim_id\", \"x\", \"f\"]][:10])\n assert len(H) >= 201, f\"H has length {len(H)}\"", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2173, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f6e6498c-2a2f-489e-8da1-4e65d47b2556": {"__data__": {"id_": "f6e6498c-2a2f-489e-8da1-4e65d47b2556", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_asktell_sampling_array_gen.py", "file_name": "test_asktell_sampling_array_gen.py", "file_type": "text/x-python", "file_size": 3661, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ee2835d5-f31b-4105-b64a-968ae78a3a40", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_asktell_sampling_array_gen.py", "file_name": "test_asktell_sampling_array_gen.py", "file_type": "text/x-python", "file_size": 3661, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "acc816eb7555243f2a5964f8d4475f1083097805cfd809b27118c52287bced4b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with Latin hypercube sampling on a simple 1D problem\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_sampling_asktell_gen.py\n python test_sampling_asktell_gen.py --nworkers 3 --comms local\n python test_sampling_asktell_gen.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 2 4\n\nimport numpy as np\nfrom gest_api import Generator\nfrom gest_api.vocs import VOCS\nfrom gest_api.vocs import ContinuousVariable\n\n# Import libEnsemble items for this test\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.gen_classes.sampling import UniformSample\nfrom libensemble.libE import libE\nfrom libensemble.specs import GenSpecs\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\nclass UniformSampleArray(Generator):\n \"\"\"\n This sampler adheres to the gest-api VOCS interface and data structures.\n\n Uses one array variable of any dimension. Array is a numpy array.\n \"\"\"\n\n def __init__(self, VOCS: VOCS):\n self.VOCS = VOCS\n self.rng = np.random.default_rng(1)\n super().__init__(VOCS)\n\n def _validate_vocs(self, VOCS):\n assert len(self.VOCS.variables) == 1, \"VOCS must contain exactly one variable.\"\n\n def suggest(self, n_trials):\n output = []\n key = list(self.VOCS.variables.keys())[0]\n var = self.VOCS.variables[key]\n for _ in range(n_trials):\n trial = {key: np.array([\n self.rng.uniform(bounds[0], bounds[1])\n for bounds in var.domain\n ])}\n output.append(trial)\n return output\n\n def ingest(self, calc_in):\n pass # random sample so nothing to tell\n\ndef sim_f(In):\n Out = np.zeros(1, dtype=[(\"f\", float)])\n Out[\"f\"] = np.linalg.norm(In)\n return Out\n\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n libE_specs[\"gen_on_manager\"] = True\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = GenSpecs(\n persis_in=[\"x\", \"f\", \"sim_id\"],\n outputs=[(\"x\", float, (2,))],\n initial_batch_size=20,\n batch_size=10,\n user={\n \"initial_batch_size\": 20, # for wrapper\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n )\n\n # variables = {\"x0\": [-3, 3], \"x1\": [-2, 2]}\n\n variables = {\"x\": ContinuousVariable(dtype=(2,),domain=[[-3, 3], [-2, 2]])}\n\n objectives = {\"energy\": \"EXPLORE\"}\n\n vocs = VOCS(variables=variables, objectives=objectives)\n\n alloc_specs = {\"alloc_f\": alloc_f}\n exit_criteria = {\"gen_max\": 201}\n persis_info = add_unique_random_streams({}, nworkers + 1, seed=1234)\n\n for test in range(1): # 3\n if test == 0:\n generator = UniformSampleArray(vocs)\n\n # elif test == 1:\n # persis_info[\"num_gens_started\"] = 0\n # generator = UniformSample(vocs)\n\n # elif test == 2:\n # persis_info[\"num_gens_started\"] = 0\n # generator = UniformSample(vocs, variables_mapping={\"x\": [\"x0\", \"x1\"], \"f\": [\"energy\"]})\n\n gen_specs.generator = generator\n H, persis_info, flag = libE(\n sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs=libE_specs\n )\n\n if is_manager:\n print(H[[\"sim_id\", \"x\", \"f\"]][:10])\n assert len(H) >= 201, f\"H has length {len(H)}\"", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3205, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "359aaaf9-702d-4e82-9fa1-b0114e88545a": {"__data__": {"id_": "359aaaf9-702d-4e82-9fa1-b0114e88545a", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_asktell_sampling_external_gen.py", "file_name": "test_asktell_sampling_external_gen.py", "file_type": "text/x-python", "file_size": 2957, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1a022b1f-7c35-4952-b135-3ef4769ae435", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_asktell_sampling_external_gen.py", "file_name": "test_asktell_sampling_external_gen.py", "file_type": "text/x-python", "file_size": 2957, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "42a8198fdfdc17b02769dca6ad7576d389cde2cbf975f616dcfe1582abc766af", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with Latin hypercube sampling on a simple 1D problem\n\nusing external gest_api compatible generators.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_asktell_sampling_external_gen.py\n python test_asktell_sampling_external_gen.py --nworkers 3 --comms local\n python test_asktell_sampling_external_gen.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 2 4\n\nimport numpy as np\nfrom gest_api.vocs import VOCS\n\n# from gest_api.vocs import ContinuousVariable\n\n# Import libEnsemble items for this test\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\n\n# from libensemble.gen_classes.external.sampling import UniformSampleArray\nfrom libensemble.gen_classes.external.sampling import UniformSample\nfrom libensemble import Ensemble\nfrom libensemble.specs import GenSpecs, SimSpecs, AllocSpecs, ExitCriteria, LibeSpecs\n\ndef sim_f_array(In):\n Out = np.zeros(1, dtype=[(\"f\", float)])\n Out[\"f\"] = np.linalg.norm(In)\n return Out\n\ndef sim_f_scalar(In):\n Out = np.zeros(1, dtype=[(\"f\", float)])\n Out[\"f\"] = np.linalg.norm(In[\"x0\"], In[\"x1\"])\n return Out\n\nif __name__ == \"__main__\":\n\n libE_specs = LibeSpecs(gen_on_manager=True)\n\n for test in range(1): # 2\n\n objectives = {\"f\": \"EXPLORE\"}\n\n if test == 0:\n sim_f = sim_f_scalar\n variables = {\"x0\": [-3, 3], \"x1\": [-2, 2]}\n vocs = VOCS(variables=variables, objectives=objectives)\n generator = UniformSample(vocs)\n\n # Requires gest-api variables array bounds update\n # elif test == 1:\n # sim_f = sim_f_array\n # variables = {\"x\": ContinuousVariable(dtype=(float, (2,)),domain=[[-3, 3], [-2, 2]])}\n # vocs = VOCS(variables=variables, objectives=objectives)\n # generator = UniformSampleArray(vocs)\n\n sim_specs = SimSpecs(\n sim_f=sim_f,\n vocs=vocs,\n )\n\n gen_specs = GenSpecs(\n generator=generator,\n initial_batch_size=20,\n batch_size=10,\n vocs=vocs,\n )\n\n alloc_specs = AllocSpecs(alloc_f=alloc_f)\n exit_criteria = ExitCriteria(gen_max=201)\n\n ensemble = Ensemble(\n parse_args=True,\n sim_specs=sim_specs,\n gen_specs=gen_specs,\n exit_criteria=exit_criteria,\n alloc_specs=alloc_specs,\n libE_specs=libE_specs,\n )\n\n ensemble.add_random_streams()\n ensemble.run()\n\n if ensemble.is_manager:\n print(ensemble.H[[\"sim_id\", \"x0\", \"x1\", \"f\"]][:10])\n # print(ensemble.H[[\"sim_id\", \"x\", \"f\"]][:10]) # For array variables\n assert len(ensemble.H) >= 201, f\"H has length {len(ensemble.H)}\"", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2563, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "92c86c2f-4fcf-441d-adf7-fbe6c382f81d": {"__data__": {"id_": "92c86c2f-4fcf-441d-adf7-fbe6c382f81d", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_asktell_sampling_vocs_array.py", "file_name": "test_asktell_sampling_vocs_array.py", "file_type": "text/x-python", "file_size": 2929, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bf0049ac-0303-4e23-b456-4c203913f543", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_asktell_sampling_vocs_array.py", "file_name": "test_asktell_sampling_vocs_array.py", "file_type": "text/x-python", "file_size": 2929, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "8344dde2b35c9c6988cd86f874d781f9f183d886d4b44df9bbfe10446c9d046b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with Latin hypercube sampling on a simple 1D problem\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_sampling_asktell_gen.py\n python test_sampling_asktell_gen.py --nworkers 3 --comms local\n python test_sampling_asktell_gen.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 2 4\n\nimport numpy as np\nfrom gest_api import Generator\nfrom gest_api.vocs import VOCS\nfrom gest_api.vocs import ContinuousVariable\n\n# Import libEnsemble items for this test\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.gen_classes.sampling import UniformSample\nfrom libensemble.gen_classes.external.sampling import UniformSampleArray as ExternalUniformSampleArray\nfrom libensemble.gen_classes.external.sampling import UniformSample as ExternalUniformSample\nfrom libensemble.libE import libE\nfrom libensemble.specs import GenSpecs\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\ndef sim_f(In):\n Out = np.zeros(1, dtype=[(\"f\", float)])\n Out[\"f\"] = np.linalg.norm(In)\n return Out\n\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n libE_specs[\"gen_on_manager\"] = True\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = GenSpecs(\n persis_in=[\"x\", \"f\", \"sim_id\"],\n outputs=[(\"x\", float, (2,))],\n initial_batch_size=20,\n batch_size=10,\n user={\n \"initial_batch_size\": 20, # for wrapper\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n )\n\n # variables = {\"x0\": [-3, 3], \"x1\": [-2, 2]}\n\n variables = {\"x\": ContinuousVariable(dtype=(2,), domain=[[-3, 3], [-2, 2]])}\n\n objectives = {\"energy\": \"EXPLORE\"}\n\n vocs = VOCS(variables=variables, objectives=objectives)\n\n alloc_specs = {\"alloc_f\": alloc_f}\n exit_criteria = {\"gen_max\": 201}\n persis_info = add_unique_random_streams({}, nworkers + 1, seed=1234)\n\n for test in range(1): # 3\n if test == 0:\n generator = UniformSampleArray(vocs)\n\n # elif test == 1:\n # persis_info[\"num_gens_started\"] = 0\n # generator = UniformSample(vocs)\n\n # elif test == 2:\n # persis_info[\"num_gens_started\"] = 0\n # generator = UniformSample(vocs, variables_mapping={\"x\": [\"x0\", \"x1\"], \"f\": [\"energy\"]})\n\n gen_specs.generator = generator\n H, persis_info, flag = libE(\n sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs=libE_specs\n )\n\n if is_manager:\n print(H[[\"sim_id\", \"x\", \"f\"]][:10])\n assert len(H) >= 201, f\"H has length {len(H)}\"", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2634, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "9b3a4150-9f44-454f-a858-12e04a26e0bb": {"__data__": {"id_": "9b3a4150-9f44-454f-a858-12e04a26e0bb", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_calc_exception.py", "file_name": "test_calc_exception.py", "file_type": "text/x-python", "file_size": 1768, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cc12a813-27e8-43c8-973f-3428a22843b2", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_calc_exception.py", "file_name": "test_calc_exception.py", "file_type": "text/x-python", "file_size": 1768, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "2b5c2d3efa495ea17896252e5e14a74b67e587fa55970e3ba34b8c6e95cfeacb", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nA test of libEnsemble exception handling.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_calc_exception.py\n python test_calc_exception.py --nworkers 3\n python test_calc_exception.py --nworkers 3 --comms tcp\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local tcp\n# TESTSUITE_NPROCS: 2 4\n\nimport numpy as np\n\nfrom libensemble.gen_funcs.sampling import uniform_random_sample as gen_f\nfrom libensemble.libE import libE\nfrom libensemble.manager import LoggedException\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\n# Define sim_func\ndef six_hump_camel_err(H, persis_info, sim_specs, _):\n raise Exception(\"Deliberate error\")\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n sim_specs = {\n \"sim_f\": six_hump_camel_err,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"in\": [\"sim_id\"],\n \"out\": [(\"x\", float, 2)],\n \"user\": {\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n \"gen_batch_size\": 10,\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n exit_criteria = {\"wallclock_max\": 10}\n\n libE_specs[\"abort_on_exception\"] = False\n\n # Perform the run\n return_flag = 1\n try:\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs)\n except LoggedException as e:\n print(f\"Caught deliberate exception: {e}\")\n return_flag = 0\n\n if is_manager:\n assert return_flag == 0", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1600, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "b6bb6c04-be55-4b3d-898f-6288b9aba9b4": {"__data__": {"id_": "b6bb6c04-be55-4b3d-898f-6288b9aba9b4", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_cancel_in_alloc.py", "file_name": "test_cancel_in_alloc.py", "file_type": "text/x-python", "file_size": 2513, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0fea7603-68dd-4e19-81b5-3ba6c17d1047", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_cancel_in_alloc.py", "file_name": "test_cancel_in_alloc.py", "file_type": "text/x-python", "file_size": 2513, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "4969a9862870cb1875ccf7f8d88f207192a45f0a71069a74d0410d3a7e2b0ae9", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble in order to test the ability of an allocation function to\ncancel long-running simulations. In this case, the simulation has a run-time\nin seconds that is drawn uniformly from [0,10] and any time the allocation\nfunction is called and a sim_id has been evaluated for more than 5 seconds,\nit is cancelled.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_cancel_in_alloc.py\n python test_cancel_in_alloc.py --nworkers 3\n python test_cancel_in_alloc.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local tcp\n# TESTSUITE_NPROCS: 2 4\n\nimport numpy as np\n\nfrom libensemble.alloc_funcs.give_sim_work_first import give_sim_work_first\nfrom libensemble.gen_funcs.sampling import uniform_random_sample as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.branin.branin_obj import call_branin as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n libE_specs[\"kill_canceled_sims\"] = True\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n \"user\": {\"uniform_random_pause_ub\": 10},\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"in\": [\"sim_id\"],\n \"out\": [(\"x\", float, (2,))],\n \"user\": {\n \"gen_batch_size\": 5,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n alloc_specs = {\n \"alloc_f\": give_sim_work_first,\n \"user\": {\n \"cancel_sims_time\": 3,\n \"batch_mode\": False,\n \"num_active_gens\": 1,\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n exit_criteria = {\"sim_max\": 10, \"wallclock_max\": 300}\n\n # Perform the run\n H, persis_info, flag = libE(\n sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs, alloc_specs=alloc_specs\n )\n\n if is_manager:\n test = np.any(H[\"cancel_requested\"]) and np.any(H[\"kill_sent\"])\n assert test, \"This test should have requested a cancellation and had a kill sent\"\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2286, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "65a4c5af-7551-4b37-afb3-ab51121c6399": {"__data__": {"id_": "65a4c5af-7551-4b37-afb3-ab51121c6399", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_comms.py", "file_name": "test_comms.py", "file_type": "text/x-python", "file_size": 2382, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7c6c3917-02ef-4f6b-8a50-205b393ad4d3", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_comms.py", "file_name": "test_comms.py", "file_type": "text/x-python", "file_size": 2382, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "d4f8e5ef4e8f8003ccac5b9ae421898559fd6e8ac347940d58046a0ab99e3b3d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble to test basic worker/manager communications\nScale up array_size and number of workers as required\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_comms.py\n python test_comms.py --nworkers 3\n python test_comms.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be N-1.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local tcp\n# TESTSUITE_NPROCS: 2 4\n\nimport numpy as np\n\nfrom libensemble.executors.mpi_executor import MPIExecutor # Only used to get workerID in float_x1000\nfrom libensemble.gen_funcs.sampling import uniform_random_sample as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.comms_testing import float_x1000 as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n libE_specs[\"disable_resource_manager\"] = True\n exctr = MPIExecutor()\n\n array_size = int(1e6) # Size of large array in sim_specs\n rounds = 2 # Number of work units for each worker\n sim_max = nworkers * rounds\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"arr_vals\", float, array_size), (\"scal_val\", float)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"in\": [\"sim_id\"],\n \"out\": [(\"x\", float, (2,))],\n \"user\": {\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n \"gen_batch_size\": sim_max,\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n exit_criteria = {\"sim_max\": sim_max, \"wallclock_max\": 300}\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs)\n\n if is_manager:\n assert flag == 0\n for i in range(sim_max):\n x1 = H[\"x\"][i][0] * 1000.0\n x2 = H[\"x\"][i][1]\n assert np.all(H[\"arr_vals\"][i] == x1), \"Array values do not all match\"\n assert H[\"scal_val\"][i] == x2 + x2 / 1e7, \"Scalar values do not all match\"\n\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2173, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "6ac92a7b-0cc7-4133-9144-28172c6db6e6": {"__data__": {"id_": "6ac92a7b-0cc7-4133-9144-28172c6db6e6", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_elapsed_time_abort.py", "file_name": "test_elapsed_time_abort.py", "file_type": "text/x-python", "file_size": 2121, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2644de71-163c-4d81-9dac-62697c70e6b2", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_elapsed_time_abort.py", "file_name": "test_elapsed_time_abort.py", "file_type": "text/x-python", "file_size": 2121, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "c4162e78bdc9fe914c6e042d1cdf258d36d08a25ae98f158dfebdc7c2a73ae01", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests libEnsemble's capability to abort after a certain amount of elapsed time.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_6-hump_camel_elapsed_time_abort.py\n python test_6-hump_camel_elapsed_time_abort.py --nworkers 3\n python test_6-hump_camel_elapsed_time_abort.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local tcp\n# TESTSUITE_NPROCS: 2 4\n\nimport numpy as np\n\nfrom libensemble.alloc_funcs.give_sim_work_first import give_sim_work_first\nfrom libensemble.gen_funcs.sampling import uniform_random_sample as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.six_hump_camel import six_hump_camel as sim_f\nfrom libensemble.tools import add_unique_random_streams, eprint, parse_args, save_libE_output\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n \"user\": {\"pause_time\": 2},\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"in\": [\"sim_id\"],\n \"out\": [(\"x\", float, (2,))],\n \"user\": {\n \"gen_batch_size\": 5,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n alloc_specs = {\n \"alloc_f\": give_sim_work_first,\n \"user\": {\n \"batch_mode\": False,\n \"num_active_gens\": 2,\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n exit_criteria = {\"wallclock_max\": 1}\n\n # Perform the run\n H, persis_info, flag = libE(\n sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs, alloc_specs=alloc_specs\n )\n\n if is_manager:\n eprint(flag)\n eprint(H)\n assert flag == 2\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1901, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "dcc3ca45-bf0c-4129-a8c8-e8f15b6dd255": {"__data__": {"id_": "dcc3ca45-bf0c-4129-a8c8-e8f15b6dd255", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_ensemble_platform_workdir.py", "file_name": "test_ensemble_platform_workdir.py", "file_type": "text/x-python", "file_size": 3121, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b2ce08bc-dbb7-4479-ad49-01751647816e", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_ensemble_platform_workdir.py", "file_name": "test_ensemble_platform_workdir.py", "file_type": "text/x-python", "file_size": 3121, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "7293efcc92e1999906ede13ec02e9900046ae1e8b5b198bdd7c6719ab3df6f6f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "import glob\nimport os\nimport re\n\nimport numpy as np\n\n# Import libEnsemble items for this test\nfrom libensemble import Ensemble\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.executors.mpi_executor import MPIExecutor\nfrom libensemble.gen_funcs.persistent_sampling_var_resources import uniform_sample as gen_f\nfrom libensemble.resources.platforms import PerlmutterGPU\nfrom libensemble.sim_funcs import six_hump_camel\nfrom libensemble.sim_funcs.var_resources import gpu_variable_resources as sim_f\nfrom libensemble.specs import LibeSpecs\n\n# from libensemble import logger\n# logger.set_level(\"DEBUG\") # For testing the test\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n # Get paths for applications to run\n six_hump_camel_app = six_hump_camel.__file__\n n = 2\n\n alloc_specs = {\n \"alloc_f\": alloc_f,\n \"user\": {\n \"give_all_with_same_priority\": False,\n \"async_return\": False, # False batch returns\n },\n }\n\n exit_criteria = {\"sim_max\": 20}\n\n # Ensure LIBE_PLATFORM environment variable is not set.\n if \"LIBE_PLATFORM\" in os.environ:\n del os.environ[\"LIBE_PLATFORM\"]\n\n exctr = MPIExecutor()\n exctr.register_app(full_path=six_hump_camel_app, app_name=\"six_hump_camel\")\n\n ensemble = Ensemble(\n parse_args=True,\n executor=exctr,\n alloc_specs=alloc_specs,\n exit_criteria=exit_criteria,\n # libE_specs = LibeSpecs(use_workflow_dir=True, platform_specs=platform_specs), # works\n )\n\n platform_specs = PerlmutterGPU()\n ensemble.libE_specs = LibeSpecs(\n num_resource_sets=ensemble.nworkers - 1,\n resource_info={\"gpus_on_node\": 4},\n use_workflow_dir=True,\n platform_specs=platform_specs,\n )\n\n ensemble.gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [\"f\", \"x\", \"sim_id\"],\n \"out\": [(\"priority\", float), (\"resource_sets\", int), (\"x\", float, n)],\n \"user\": {\n \"initial_batch_size\": ensemble.nworkers - 1,\n \"max_resource_sets\": ensemble.nworkers - 1, # Any sim created can req. 1 worker up to all.\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n ensemble.sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n \"user\": {\"dry_run\": True},\n }\n\n ensemble.add_random_streams()\n ensemble.run()\n\n if ensemble.is_manager:\n matching_dirs = glob.glob(\"workflow_*\")\n assert matching_dirs, \"No workflow dir found\"\n most_recent_dir = max(matching_dirs, key=os.path.getctime)\n print(f\"Checking ensemble.log in {most_recent_dir}\")\n file_path = file_path = os.path.join(most_recent_dir, \"ensemble.log\")\n if os.path.exists(file_path): # an assert\n with open(file_path, \"r\") as file:\n content = file.read()\n pattern = r\"Runline:\\s+srun\"\n assert re.findall(pattern, content), \"Incorrect MPI runner\"", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2731, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "98c4f5b5-4825-4314-9589-ed562e2f5c89": {"__data__": {"id_": "98c4f5b5-4825-4314-9589-ed562e2f5c89", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_evaluate_existing_plus_gen.py", "file_name": "test_evaluate_existing_plus_gen.py", "file_type": "text/x-python", "file_size": 2569, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "16a63730-a4b1-4fff-887a-9a8daaebfb65", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_evaluate_existing_plus_gen.py", "file_name": "test_evaluate_existing_plus_gen.py", "file_type": "text/x-python", "file_size": 2569, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "9ff3404aef08cd4d49a49a77d7c47012e38214ba25bd137fab5de2d3071df602", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTest libEnsemble's capability to evaluate existing points and then generate\nnew samples via gen_on_manager.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_evaluate_existing_sample.py\n python test_evaluate_existing_sample.py --nworkers 3\n python test_evaluate_existing_sample.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local tcp\n# TESTSUITE_NPROCS: 2 4\n\nimport numpy as np\n\n# Import libEnsemble items for this test\nfrom libensemble import Ensemble\nfrom libensemble.gen_funcs.sampling import latin_hypercube_sample as gen_f\nfrom libensemble.sim_funcs.six_hump_camel import six_hump_camel as sim_f\nfrom libensemble.specs import ExitCriteria, GenSpecs, SimSpecs\nfrom libensemble.tools import add_unique_random_streams\n\ndef create_H0(persis_info, gen_specs, H0_size):\n \"\"\"Create an H0 for give_pregenerated_sim_work\"\"\"\n # Manually creating H0\n ub = gen_specs[\"user\"][\"ub\"]\n lb = gen_specs[\"user\"][\"lb\"]\n n = len(lb)\n b = H0_size\n\n H0 = np.zeros(b, dtype=[(\"x\", float, 2), (\"sim_id\", int), (\"sim_started\", bool)])\n H0[\"x\"] = persis_info[0][\"rand_stream\"].uniform(lb, ub, (b, n))\n H0[\"sim_id\"] = range(b)\n H0[\"sim_started\"] = False\n return H0\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n\n sampling = Ensemble(parse_args=True)\n sampling.libE_specs.gen_on_manager = True\n sampling.sim_specs = SimSpecs(sim_f=sim_f, inputs=[\"x\"], out=[(\"f\", float)])\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"outputs\": [(\"x\", float, (2,))],\n \"user\": {\n \"gen_batch_size\": 50,\n \"lb\": np.array([-3, -3]),\n \"ub\": np.array([3, 3]),\n },\n }\n sampling.gen_specs = GenSpecs(**gen_specs)\n sampling.exit_criteria = ExitCriteria(sim_max=100)\n sampling.persis_info = add_unique_random_streams({}, sampling.nworkers + 1)\n sampling.H0 = create_H0(sampling.persis_info, gen_specs, 50)\n sampling.run()\n\n if sampling.is_manager:\n assert len(sampling.H) == 2 * len(sampling.H0)\n assert np.array_equal(sampling.H0[\"x\"][:50], sampling.H[\"x\"][:50])\n assert np.all(sampling.H[\"sim_ended\"])\n assert np.all(sampling.H[\"gen_worker\"] == 0)\n print(\"\\nlibEnsemble correctly appended to the initial sample via an additional gen.\")\n sampling.save_output(__file__)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2391, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "3f39c7ed-6b5c-420c-b6c8-af58b7bf02f4": {"__data__": {"id_": "3f39c7ed-6b5c-420c-b6c8-af58b7bf02f4", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_evaluate_existing_sample.py", "file_name": "test_evaluate_existing_sample.py", "file_type": "text/x-python", "file_size": 1886, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "712fabbb-079c-4f1c-ae45-8d65ba983e5d", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_evaluate_existing_sample.py", "file_name": "test_evaluate_existing_sample.py", "file_type": "text/x-python", "file_size": 1886, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "a0918ce26317de9fd432c5772fb70acdacf36d71bc5902c1db5b8cbee1e56e04", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTest libEnsemble's capability to use no gen_f and instead coordinates the\nevaluation of an existing set of points.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_evaluate_existing_sample.py\n python test_evaluate_existing_sample.py --nworkers 3\n python test_evaluate_existing_sample.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local tcp\n# TESTSUITE_NPROCS: 2 4\n\nimport numpy as np\n\n# Import libEnsemble items for this test\nfrom libensemble import Ensemble\nfrom libensemble.alloc_funcs.give_pregenerated_work import give_pregenerated_sim_work as alloc_f\nfrom libensemble.sim_funcs.borehole import borehole as sim_f\nfrom libensemble.sim_funcs.borehole import gen_borehole_input\nfrom libensemble.specs import AllocSpecs, ExitCriteria, SimSpecs\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n n_samp = 1000\n H0 = np.zeros(n_samp, dtype=[(\"x\", float, 8), (\"sim_id\", int), (\"sim_started\", bool)])\n np.random.seed(0)\n H0[\"x\"] = gen_borehole_input(n_samp)\n H0[\"sim_id\"] = range(n_samp)\n H0[\"sim_started\"] = False\n\n sampling = Ensemble(parse_args=True)\n sampling.H0 = H0\n sampling.sim_specs = SimSpecs(sim_f=sim_f, inputs=[\"x\"], out=[(\"f\", float)])\n sampling.alloc_specs = AllocSpecs(alloc_f=alloc_f)\n sampling.exit_criteria = ExitCriteria(sim_max=len(H0))\n sampling.run()\n\n if sampling.is_manager:\n assert len(sampling.H) == len(H0)\n assert np.array_equal(H0[\"x\"], sampling.H[\"x\"])\n assert np.all(sampling.H[\"sim_ended\"])\n print(\"\\nlibEnsemble correctly didn't add anything to initial sample\")\n sampling.save_output(__file__)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1805, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "044a371e-b3bb-41d9-9f19-32d4b03fd8a8": {"__data__": {"id_": "044a371e-b3bb-41d9-9f19-32d4b03fd8a8", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_evaluate_mixed_sample.py", "file_name": "test_evaluate_mixed_sample.py", "file_type": "text/x-python", "file_size": 2156, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5242f9f8-0bb1-469d-a1d7-2ecaff5b1d23", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_evaluate_mixed_sample.py", "file_name": "test_evaluate_mixed_sample.py", "file_type": "text/x-python", "file_size": 2156, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "73ca3f7e2a4b728e71a751995e02647e01cf7eae52f3df79fc89fd12d337d7d2", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests libEnsemble's capability to take in an existing sample of points with\nsim_f values and do additional evaluations.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_evaluate_mixed_sample.py\n python test_evaluate_mixed_sample.py --nworkers 3\n python test_evaluate_mixed_sample.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local tcp\n# TESTSUITE_NPROCS: 2 4\n\nimport warnings\n\nimport numpy as np\n\nfrom libensemble import Ensemble\nfrom libensemble.alloc_funcs.give_pregenerated_work import give_pregenerated_sim_work as alloc_f\n\n# Import libEnsemble items for this test\nfrom libensemble.sim_funcs.borehole import borehole as sim_f\nfrom libensemble.sim_funcs.borehole import borehole_func, gen_borehole_input\nfrom libensemble.specs import AllocSpecs, ExitCriteria, SimSpecs\n\nwarnings.filterwarnings(\"ignore\", category=DeprecationWarning)\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n samp = 1000\n n = 8\n\n H0 = np.zeros(\n samp, dtype=[(\"x\", float, n), (\"f\", float), (\"sim_id\", int), (\"sim_started\", bool), (\"sim_ended\", bool)]\n )\n np.random.seed(0)\n H0[\"x\"] = gen_borehole_input(samp)\n for i in range(500):\n H0[\"f\"][i] = borehole_func(H0[\"x\"][i])\n H0[\"sim_started\"][:500] = True\n H0[\"sim_ended\"][:500] = True\n\n sampling = Ensemble(parse_args=True)\n sampling.libE_specs.gen_on_manager = True\n sampling.H0 = H0\n sampling.sim_specs = SimSpecs(sim_f=sim_f, inputs=[\"x\"], out=[(\"f\", float)])\n sampling.alloc_specs = AllocSpecs(alloc_f=alloc_f)\n sampling.exit_criteria = ExitCriteria(sim_max=len(H0))\n sampling.run()\n\n if sampling.is_manager:\n assert len(sampling.H) == len(H0)\n assert np.array_equal(H0[\"x\"], sampling.H[\"x\"])\n assert np.all(sampling.H[\"sim_ended\"])\n print(\"\\nlibEnsemble correctly didn't add anything to initial sample\")\n sampling.save_output(__file__)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2049, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "b7feb142-639f-4b25-bff4-568e4f62cc91": {"__data__": {"id_": "b7feb142-639f-4b25-bff4-568e4f62cc91", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_executor_forces_tutorial.py", "file_name": "test_executor_forces_tutorial.py", "file_type": "text/x-python", "file_size": 2305, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7684cc94-0d65-400f-874b-25c9ca0564e9", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_executor_forces_tutorial.py", "file_name": "test_executor_forces_tutorial.py", "file_type": "text/x-python", "file_size": 2305, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "017eeb9081036a0ad48c4a44f156f5086e659671cb954cacebe927bb9fd7cf93", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "import os\nimport sys\n\nimport numpy as np\nfrom forces_simf import run_forces # Sim func from current dir\n\nfrom libensemble import Ensemble\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.executors import MPIExecutor\nfrom libensemble.gen_funcs.persistent_sampling import persistent_uniform as gen_f\nfrom libensemble.specs import AllocSpecs, ExitCriteria, GenSpecs, LibeSpecs, SimSpecs\n\nif __name__ == \"__main__\":\n # Initialize MPI Executor\n exctr = MPIExecutor()\n\n # Register simulation executable with executor\n sim_app = os.path.join(os.getcwd(), \"../forces_app/forces.x\")\n\n if not os.path.isfile(sim_app):\n sys.exit(\"forces.x not found - please build first in ../forces_app dir\")\n\n exctr.register_app(full_path=sim_app, app_name=\"forces\")\n\n # Parse number of workers, comms type, etc. from arguments\n ensemble = Ensemble(parse_args=True, executor=exctr)\n\n nsim_workers = ensemble.nworkers - 1 # One worker is for persistent generator\n\n # Persistent gen does not need resources\n ensemble.libE_specs = LibeSpecs(\n num_resource_sets=nsim_workers, sim_dirs_make=True, ensemble_dir_path=\"./test_executor_forces_tutorial\"\n )\n\n ensemble.sim_specs = SimSpecs(\n sim_f=run_forces,\n inputs=[\"x\"],\n outputs=[(\"energy\", float)],\n )\n\n ensemble.gen_specs = GenSpecs(\n gen_f=gen_f,\n inputs=[], # No input when starting persistent generator\n persis_in=[\"sim_id\"], # Return sim_ids of evaluated points to generator\n outputs=[(\"x\", float, (1,))],\n user={\n \"initial_batch_size\": nsim_workers,\n \"lb\": np.array([1000]), # min particles\n \"ub\": np.array([3000]), # max particles\n },\n ) # gen_specs_end_tag\n\n # Starts one persistent generator. Simulated values are returned in batch.\n ensemble.alloc_specs = AllocSpecs(\n alloc_f=alloc_f,\n user={\n \"async_return\": False, # False causes batch returns\n },\n )\n\n # Instruct libEnsemble to exit after this many simulations\n ensemble.exit_criteria = ExitCriteria(sim_max=8)\n\n # Seed random streams for each worker, particularly for gen_f\n ensemble.add_random_streams()\n\n # Run ensemble\n ensemble.run()", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2079, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a0fdc365-8a03-40ed-aca0-73e9263ca786": {"__data__": {"id_": "a0fdc365-8a03-40ed-aca0-73e9263ca786", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_executor_forces_tutorial_2.py", "file_name": "test_executor_forces_tutorial_2.py", "file_type": "text/x-python", "file_size": 2384, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "780d198e-a690-427a-aa80-bfe21b98a28d", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_executor_forces_tutorial_2.py", "file_name": "test_executor_forces_tutorial_2.py", "file_type": "text/x-python", "file_size": 2384, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "1a7ac6574fb3c20571139a862b8c4d625db65dc3ca412858210c0143764e64d2", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "import os\nimport sys\n\nimport numpy as np\nfrom forces_simf import run_forces # Sim func from current dir\n\nfrom libensemble import Ensemble, logger\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.executors import MPIExecutor\nfrom libensemble.gen_funcs.persistent_sampling import persistent_uniform as gen_f\nfrom libensemble.specs import AllocSpecs, ExitCriteria, GenSpecs, LibeSpecs, SimSpecs\n\nlogger.set_level(\"DEBUG\")\n\nif __name__ == \"__main__\":\n # Initialize MPI Executor\n exctr = MPIExecutor(custom_info={\"mpi_runner\": \"openmpi\"})\n\n # Register simulation executable with executor\n sim_app = os.path.join(os.getcwd(), \"../forces_app/forces.x\")\n\n if not os.path.isfile(sim_app):\n sys.exit(\"forces.x not found - please build first in ../forces_app dir\")\n\n exctr.register_app(full_path=sim_app, app_name=\"forces\")\n\n # Parse number of workers, comms type, etc. from arguments\n ensemble = Ensemble(parse_args=True, executor=exctr)\n\n nsim_workers = ensemble.nworkers - 1 # One worker is for persistent generator\n\n # Persistent gen does not need resources\n ensemble.libE_specs = LibeSpecs(\n num_resource_sets=nsim_workers, sim_dirs_make=True, ensemble_dir_path=\"./test_executor_forces_tutorial_2\"\n )\n\n ensemble.sim_specs = SimSpecs(\n sim_f=run_forces,\n inputs=[\"x\"],\n outputs=[(\"energy\", float)],\n )\n\n ensemble.gen_specs = GenSpecs(\n gen_f=gen_f,\n inputs=[], # No input when starting persistent generator\n persis_in=[\"sim_id\"], # Return sim_ids of evaluated points to generator\n outputs=[(\"x\", float, (1,))],\n user={\n \"initial_batch_size\": nsim_workers,\n \"lb\": np.array([1000]), # min particles\n \"ub\": np.array([3000]), # max particles\n },\n ) # gen_specs_end_tag\n\n # Starts one persistent generator. Simulated values are returned in batch.\n ensemble.alloc_specs = AllocSpecs(\n alloc_f=alloc_f,\n user={\n \"async_return\": True,\n },\n )\n\n # Instruct libEnsemble to exit after this many simulations\n ensemble.exit_criteria = ExitCriteria(sim_max=8)\n\n # Seed random streams for each worker, particularly for gen_f\n ensemble.add_random_streams()\n\n # Run ensemble\n ensemble.run()\n\n ensemble.save_output(__file__)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2156, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "49147ab2-8704-4330-85f8-49f328994aa3": {"__data__": {"id_": "49147ab2-8704-4330-85f8-49f328994aa3", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_executor_hworld_pass_fail.py", "file_name": "test_executor_hworld_pass_fail.py", "file_type": "text/x-python", "file_size": 3793, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fc372d99-3926-4600-b90d-34d8a4fdf2d7", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_executor_hworld_pass_fail.py", "file_name": "test_executor_hworld_pass_fail.py", "file_type": "text/x-python", "file_size": 3793, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "a6ddc8de26bde523213d730859303451b37b4be8dc77e155228a5a7248d1296b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble testing the executor functionality.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_executor_hworld.py\n python test_executor_hworld.py --nworkers 3\n python test_executor_hworld.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\nimport multiprocessing\nimport os\n\nimport numpy as np\n\nimport libensemble.sim_funcs.six_hump_camel as six_hump_camel\nfrom libensemble.executors.mpi_executor import MPIExecutor\nfrom libensemble.gen_funcs.sampling import uniform_random_sample as gen_f\nfrom libensemble.libE import libE\n\n# Import libEnsemble items for this test\nfrom libensemble.message_numbers import TASK_FAILED, WORKER_DONE, WORKER_KILL_ON_ERR, WORKER_KILL_ON_TIMEOUT\nfrom libensemble.sim_funcs.executor_hworld import executor_hworld as sim_f\nfrom libensemble.tests.regression_tests.common import build_simfunc\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local tcp\n# TESTSUITE_OS_SKIP: OSX WIN\n# TESTSUITE_NPROCS: 2 3 4\n# TESTSUITE_OMPI_SKIP: true\n# TESTSUITE_EXTRA: true\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n libE_specs[\"disable_resource_manager\"] = True\n\n cores_per_task = 1\n logical_cores = multiprocessing.cpu_count()\n cores_all_tasks = nworkers * cores_per_task\n\n if cores_all_tasks > logical_cores:\n disable_resource_manager = True\n mess_resources = \"Oversubscribing - Resource manager disabled\"\n elif libE_specs.get(\"comms\", False) == \"tcp\":\n disable_resource_manager = True\n mess_resources = \"TCP comms does not support resource management. Resource manager disabled\"\n else:\n disable_resource_manager = False\n mess_resources = \"Resource manager enabled\"\n\n if is_manager:\n print(f\"\\nCores req: {cores_all_tasks} Cores avail: {logical_cores}\\n {mess_resources}\\n\")\n\n sim_app = \"./my_simtask.x\"\n if not os.path.isfile(sim_app):\n build_simfunc()\n sim_app2 = six_hump_camel.__file__\n\n exctr = MPIExecutor()\n\n exctr.register_app(full_path=sim_app, calc_type=\"sim\") # Default 'sim' app - backward compatible\n exctr.register_app(full_path=sim_app2, app_name=\"six_hump_camel\") # Named app\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float), (\"cstat\", int)],\n \"user\": {\"cores\": cores_per_task},\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"in\": [\"sim_id\"],\n \"out\": [(\"x\", float, (2,))],\n \"user\": {\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n \"gen_batch_size\": nworkers,\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n # num sim_ended_count conditions in executor_hworld\n exit_criteria = {\"sim_max\": nworkers * 5}\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs)\n\n if is_manager:\n print(\"\\nChecking expected task status against Workers ...\\n\")\n\n calc_status_list_in = np.asarray(\n [WORKER_DONE, WORKER_KILL_ON_ERR, WORKER_DONE, WORKER_KILL_ON_TIMEOUT, TASK_FAILED]\n )\n calc_status_list = np.repeat(calc_status_list_in, nworkers)\n\n # For debug\n print(f\"Expecting: {calc_status_list}\")\n print(\"Received: {H['cstat']}\\n\")\n\n assert np.array_equal(H[\"cstat\"], calc_status_list), \"Error - unexpected calc status. Received: \" + str(\n H[\"cstat\"]\n )\n\n print(\"\\n\\n\\nRun completed.\")", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3463, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "6001e288-ddbc-4c5c-99ec-eb7aa5ec6758": {"__data__": {"id_": "6001e288-ddbc-4c5c-99ec-eb7aa5ec6758", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_executor_hworld_timeout.py", "file_name": "test_executor_hworld_timeout.py", "file_type": "text/x-python", "file_size": 3808, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "433af848-399e-49fa-a073-52a8446e972a", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_executor_hworld_timeout.py", "file_name": "test_executor_hworld_timeout.py", "file_type": "text/x-python", "file_size": 3808, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "64369df170fb1563728b4b3e2bde9bf682f3758d094847a1264d4c7981877c0e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble testing the executor functionality.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_executor_hworld.py\n python test_executor_hworld.py --nworkers 3\n python test_executor_hworld.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\nimport multiprocessing\nimport os\n\nimport numpy as np\n\nimport libensemble.sim_funcs.six_hump_camel as six_hump_camel\nfrom libensemble.executors.mpi_executor import MPIExecutor\nfrom libensemble.gen_funcs.sampling import uniform_random_sample as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.executor_hworld import executor_hworld as sim_f\nfrom libensemble.tests.regression_tests.common import build_simfunc\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local tcp\n# TESTSUITE_NPROCS: 2 3 4\n# TESTSUITE_OMPI_SKIP: true\n# TESTSUITE_OS_SKIP: OSX WIN\n# TESTSUITE_EXTRA: true\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n libE_specs[\"disable_resource_manager\"] = True\n\n cores_per_task = 1\n logical_cores = multiprocessing.cpu_count()\n cores_all_tasks = nworkers * cores_per_task\n\n if cores_all_tasks > logical_cores:\n disable_resource_manager = True\n mess_resources = \"Oversubscribing - Resource manager disabled\"\n elif libE_specs.get(\"comms\", False) == \"tcp\":\n disable_resource_manager = True\n mess_resources = \"TCP comms does not support resource management. Resource manager disabled\"\n else:\n disable_resource_manager = False\n mess_resources = \"Resource manager enabled\"\n\n if is_manager:\n print(f\"\\nCores req: {cores_all_tasks} Cores avail: {logical_cores}\\n {mess_resources}\\n\")\n\n sim_app = \"./my_simtask.x\"\n if not os.path.isfile(sim_app):\n build_simfunc()\n sim_app2 = six_hump_camel.__file__\n\n exctr = MPIExecutor()\n\n exctr.register_app(full_path=sim_app, calc_type=\"sim\") # Default 'sim' app - backward compatible\n exctr.register_app(full_path=sim_app2, app_name=\"six_hump_camel\") # Named app\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float), (\"cstat\", int)],\n \"user\": {\n \"cores\": cores_per_task,\n \"elapsed_timeout\": True,\n },\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"in\": [\"sim_id\"],\n \"out\": [(\"x\", float, (2,))],\n \"user\": {\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n \"gen_batch_size\": nworkers,\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n exit_criteria = {\"wallclock_max\": 10}\n\n # TCP does not support multiple libE calls\n if libE_specs[\"comms\"] == \"tcp\":\n iterations = 1\n else:\n iterations = 2\n\n for i in range(iterations):\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs)\n\n if is_manager:\n print(\"\\nChecking expected task status against Workers ...\\n\")\n\n calc_status_list_in = np.asarray([0])\n calc_status_list = np.repeat(calc_status_list_in, nworkers)\n\n # For debug\n print(f\"Expecting: {calc_status_list}\")\n print(f\"Received: {H['cstat']}\\n\")\n\n assert np.array_equal(H[\"cstat\"], calc_status_list), \"Error - unexpected calc status. Received: \" + str(\n H[\"cstat\"]\n )\n\n print(\"\\n\\n\\nRun completed.\")", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3392, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ef95d248-6597-4a68-8d8a-e65d0e44284d": {"__data__": {"id_": "ef95d248-6597-4a68-8d8a-e65d0e44284d", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_executor_simple.py", "file_name": "test_executor_simple.py", "file_type": "text/x-python", "file_size": 2644, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "043c6c3b-abd7-42a3-af00-18fcc24c1032", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_executor_simple.py", "file_name": "test_executor_simple.py", "file_type": "text/x-python", "file_size": 2644, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "6985aed45d1ef16913404d6aa03170b0dad42106473c2fbbf819ec9749c60335", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble testing the executor functionality.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_executor_hworld.py\n python test_executor_hworld.py --nworkers 3\n python test_executor_hworld.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\nimport numpy as np\n\nimport libensemble.sim_funcs.six_hump_camel as six_hump_camel\nfrom libensemble.executors.mpi_executor import MPIExecutor\nfrom libensemble.gen_funcs.sampling import uniform_random_sample as gen_f\nfrom libensemble.libE import libE\n\n# Import libEnsemble items for this test\nfrom libensemble.message_numbers import WORKER_DONE\nfrom libensemble.sim_funcs.executor_hworld import executor_hworld as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 4\n# TESTSUITE_OMPI_SKIP: true\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n cores_per_task = 1\n cores_all_tasks = nworkers * cores_per_task\n\n sim_app2 = six_hump_camel.__file__\n\n exctr = MPIExecutor()\n exctr.register_app(full_path=sim_app2, app_name=\"six_hump_camel\", calc_type=\"sim\") # Named app\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float), (\"cstat\", int)],\n \"user\": {\"cores\": cores_per_task},\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"in\": [\"sim_id\"],\n \"out\": [(\"x\", float, (2,))],\n \"user\": {\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n \"gen_batch_size\": nworkers,\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n # num sim_ended_count conditions in executor_hworld\n exit_criteria = {\"sim_max\": nworkers * 5}\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs)\n\n if is_manager:\n print(\"\\nChecking expected task status against Workers ...\\n\")\n\n calc_status_list_in = np.asarray([WORKER_DONE] * 5)\n calc_status_list = np.repeat(calc_status_list_in, nworkers)\n\n # For debug\n print(f\"Expecting: {calc_status_list}\")\n print(f\"Received: {H['cstat']}\\n\")\n\n assert np.array_equal(H[\"cstat\"], calc_status_list), \"Error - unexpected calc status. Received: \" + str(\n H[\"cstat\"]\n )\n\n print(\"\\n\\n\\nRun completed.\")", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2417, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f012807b-a09f-4141-8ed6-b07228f41519": {"__data__": {"id_": "f012807b-a09f-4141-8ed6-b07228f41519", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_fast_alloc.py", "file_name": "test_fast_alloc.py", "file_type": "text/x-python", "file_size": 3011, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "23ebc8c3-8f4f-44e2-8742-5de3f7a7da15", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_fast_alloc.py", "file_name": "test_fast_alloc.py", "file_type": "text/x-python", "file_size": 3011, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "177715b60e5ae0520ba94263521d9edd6a35f7c3bbf456611c71089bf0918890", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests various capabilities of the libEnsemble fast_alloc alloc_f\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_fast_alloc.py\n python test_fast_alloc.py --nworkers 3\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 2 4\n\nimport gc\nimport sys\n\nimport numpy as np\n\nfrom libensemble.alloc_funcs.fast_alloc import give_sim_work_first as alloc_f\nfrom libensemble.alloc_funcs.only_one_gen_alloc import ensure_one_active_gen as alloc_f2\nfrom libensemble.gen_funcs.sampling import uniform_random_sample as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.branin.branin_obj import call_branin as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n num_pts = 30 * (nworkers)\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float), (\"large\", float, 1000000)],\n \"user\": {},\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"in\": [\"sim_id\"],\n \"out\": [(\"x\", float, (2,))],\n \"user\": {\n \"gen_batch_size\": num_pts,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n exit_criteria = {\"sim_max\": 2 * num_pts, \"wallclock_max\": 300}\n\n if libE_specs[\"comms\"] == \"tcp\":\n # Can't use the same interface for manager and worker if we want\n # repeated calls to libE -- the manager sets up a different server\n # each time, and the worker will not know what port to connect to.\n sys.exit(\"Cannot run with tcp when repeated calls to libE -- aborting...\")\n\n for time in np.append([0], np.logspace(-5, -1, 2)):\n if is_manager:\n print(\"Starting for time: \", time, flush=True)\n if time == 0:\n alloc_specs = {\"alloc_f\": alloc_f2}\n else:\n alloc_specs = {\"alloc_f\": alloc_f, \"user\": {\"num_active_gens\": 1}}\n\n for rep in range(1):\n sim_specs[\"user\"][\"uniform_random_pause_ub\"] = time\n\n if time == 0:\n sim_specs[\"user\"].pop(\"uniform_random_pause_ub\")\n gen_specs[\"user\"][\"gen_batch_size\"] = num_pts // 2\n\n persis_info[\"next_to_give\"] = 0\n persis_info[\"total_gen_calls\"] = 1\n\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n if is_manager:\n assert flag == 0\n assert len(H) == 2 * num_pts\n\n del H\n gc.collect() # If doing multiple libE calls, users might need to clean up their memory space.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2642, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "94d6fafb-9bcd-4701-8d0b-3c618897e0e3": {"__data__": {"id_": "94d6fafb-9bcd-4701-8d0b-3c618897e0e3", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_gpCAM.py", "file_name": "test_gpCAM.py", "file_type": "text/x-python", "file_size": 3491, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d0a6375f-4797-46cd-895c-33102442b313", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_gpCAM.py", "file_name": "test_gpCAM.py", "file_type": "text/x-python", "file_size": 3491, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "24ad821d77458f3aa9db23fb3e32276ea2004f59e9634a6b63d7181786e8d7ea", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests libEnsemble with gpCAM\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_gpCAM.py\n python test_gpCAM.py --nworkers 3\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 2, as one of the three workers will be the\npersistent generator.\n\nRuns three variants of gpCAM. The first two use the posterior covariance\nsampling method, whereby the second run uses the grid approach and uses\nthe points from the first run as it\u2019s test points. The third run uses the\ngpCAM ask/tell interface.\n\nSee libensemble.gen_funcs.persistent_gpCAM for more details about the\ngenerator setup.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 4\n# TESTSUITE_EXTRA: true\n\nimport sys\nimport warnings\n\nimport numpy as np\n\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.gen_funcs.persistent_gpCAM import persistent_gpCAM, persistent_gpCAM_covar\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.rosenbrock import rosenbrock_eval as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\nwarnings.filterwarnings(\"ignore\", message=\"Default hyperparameter_bounds\")\nwarnings.filterwarnings(\"ignore\", message=\"Hyperparameters initialized\")\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n n = 4\n batch_size = 15\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [\n (\"f\", float),\n ],\n }\n\n gen_specs = {\n \"persis_in\": [\"x\", \"f\", \"sim_id\"],\n \"out\": [(\"x\", float, (n,))],\n \"user\": {\n \"batch_size\": batch_size,\n \"lb\": np.array([-3, -2, -1, -1]),\n \"ub\": np.array([3, 2, 1, 1]),\n },\n }\n\n alloc_specs = {\"alloc_f\": alloc_f}\n\n for inst in range(3):\n if inst == 0:\n gen_specs[\"gen_f\"] = persistent_gpCAM_covar\n num_batches = 10\n exit_criteria = {\"sim_max\": num_batches * batch_size, \"wallclock_max\": 300}\n libE_specs[\"save_every_k_gens\"] = 150\n libE_specs[\"H_file_prefix\"] = \"gpCAM_nongrid\"\n if inst == 1:\n gen_specs[\"user\"][\"use_grid\"] = True\n gen_specs[\"user\"][\"test_points_file\"] = \"gpCAM_nongrid_after_gen_150.npy\"\n libE_specs[\"final_gen_send\"] = True\n del libE_specs[\"H_file_prefix\"]\n del libE_specs[\"save_every_k_gens\"]\n elif inst == 2:\n gen_specs[\"gen_f\"] = persistent_gpCAM\n num_batches = 3 # Few because the ask_tell gen can be slow\n gen_specs[\"user\"][\"ask_max_iter\"] = 1 # For quicker test\n exit_criteria = {\"sim_max\": num_batches * batch_size, \"wallclock_max\": 300}\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n if is_manager:\n assert len(np.unique(H[\"gen_ended_time\"])) == num_batches\n\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3119, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "712cb3b7-60c0-4a0c-aa39-54ef1cf59829": {"__data__": {"id_": "712cb3b7-60c0-4a0c-aa39-54ef1cf59829", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_inverse_bayes_example.py", "file_name": "test_inverse_bayes_example.py", "file_type": "text/x-python", "file_size": 2759, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "997e19de-a77f-43bf-8a07-e8c3d514190f", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_inverse_bayes_example.py", "file_name": "test_inverse_bayes_example.py", "file_type": "text/x-python", "file_size": 2759, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "cba7b760a96b6bcd972a6630064ce79ca3cd8ae9783a3d0d443c27a57463b02a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests libEnsemble's inverse_bayes generator function\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_inverse_bayes_example.py\n python test_inverse_bayes_example.py --nworkers 3\n python test_inverse_bayes_example.py --nworkers 3 --comms tcp\n\nDebugging:\n mpiexec -np 4 xterm -e \"python inverse_bayes_example.py\"\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 2, as one of the three workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local tcp\n# TESTSUITE_NPROCS: 3 4\n\nimport numpy as np\n\nfrom libensemble import Ensemble\nfrom libensemble.alloc_funcs.inverse_bayes_allocf import only_persistent_gens_for_inverse_bayes as alloc_f\nfrom libensemble.gen_funcs.persistent_inverse_bayes import persistent_updater_after_likelihood as gen_f\nfrom libensemble.sim_funcs.inverse_bayes import likelihood_calculator as sim_f\nfrom libensemble.specs import AllocSpecs, ExitCriteria, GenSpecs, SimSpecs\nfrom libensemble.tools import add_unique_random_streams\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n # Parse args for test code\n bayes_test = Ensemble(\n parse_args=True,\n sim_specs=SimSpecs(\n sim_f=sim_f,\n inputs=[\"x\"],\n out=[(\"like\", float)],\n ),\n gen_specs=GenSpecs(\n gen_f=gen_f,\n out=[\n (\"x\", float, 2),\n (\"batch\", int),\n (\"subbatch\", int),\n (\"prior\", float),\n (\"prop\", float),\n (\"weight\", float),\n ],\n user={\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n \"subbatch_size\": 3,\n \"num_subbatches\": 2,\n \"num_batches\": 10,\n },\n ),\n alloc_specs=AllocSpecs(alloc_f=alloc_f),\n )\n\n bayes_test.persis_info = add_unique_random_streams({}, bayes_test.nworkers + 1)\n gen_user = bayes_test.gen_specs.user\n val = gen_user[\"subbatch_size\"] * gen_user[\"num_subbatches\"] * gen_user[\"num_batches\"]\n bayes_test.exit_criteria = ExitCriteria(sim_max=val, wallclock_max=300)\n\n # Perform the run\n H, _, flag = bayes_test.run()\n\n if bayes_test.is_manager:\n assert flag == 0\n # Change the last weights to correct values (H is a list on other cores and only array on manager)\n ind = 2 * gen_user[\"subbatch_size\"] * gen_user[\"num_subbatches\"]\n H[-ind:] = H[\"prior\"][-ind:] + H[\"like\"][-ind:] - H[\"prop\"][-ind:]\n assert len(H) == 60, \"Failed\"", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2390, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "80cba1a5-eeb0-4811-be70-2e3c0177c38f": {"__data__": {"id_": "80cba1a5-eeb0-4811-be70-2e3c0177c38f", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_local_sine_tutorial.py", "file_name": "test_local_sine_tutorial.py", "file_type": "text/x-python", "file_size": 2049, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4c8f3ea2-fe7b-4988-a4b8-10330fcaffea", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_local_sine_tutorial.py", "file_name": "test_local_sine_tutorial.py", "file_type": "text/x-python", "file_size": 2049, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "5503a27b57e58641ff47dbb9da9bd491aeec688b8a06cd68dcb06382258488da", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "import numpy as np\nfrom sine_gen import gen_random_sample\nfrom sine_sim import sim_find_sine\n\nfrom libensemble import Ensemble\nfrom libensemble.specs import ExitCriteria, GenSpecs, LibeSpecs, SimSpecs\n\nif __name__ == \"__main__\": # Python-quirk required on macOS and windows\n libE_specs = LibeSpecs(nworkers=4, comms=\"local\")\n\n gen_specs = GenSpecs(\n gen_f=gen_random_sample, # Our generator function\n out=[(\"x\", float, (1,))], # gen_f output (name, type, size)\n user={\n \"lower\": np.array([-3]), # lower boundary for random sampling\n \"upper\": np.array([3]), # upper boundary for random sampling\n \"gen_batch_size\": 5, # number of x's gen_f generates per call\n },\n )\n\n sim_specs = SimSpecs(\n sim_f=sim_find_sine, # Our simulator function\n inputs=[\"x\"], # InputArray field names. \"x\" from gen_f output\n out=[(\"y\", float)], # sim_f output. \"y\" = sine(\"x\")\n ) # sim_specs_end_tag\n\n exit_criteria = ExitCriteria(sim_max=80) # Stop libEnsemble after 80 simulations\n\n ensemble = Ensemble(sim_specs, gen_specs, exit_criteria, libE_specs)\n ensemble.add_random_streams() # setup the random streams unique to each worker\n ensemble.run() # start the ensemble. Blocks until completion.\n\n history = ensemble.H # start visualizing our results\n\n print([i for i in history.dtype.fields]) # (optional) to visualize our history array\n print(history)\n\n import matplotlib.pyplot as plt\n\n colors = [\"b\", \"g\", \"r\", \"y\", \"m\", \"c\", \"k\", \"w\"]\n\n for i in range(1, libE_specs.nworkers + 1):\n worker_xy = np.extract(history[\"sim_worker\"] == i, history)\n x = [entry.tolist()[0] for entry in worker_xy[\"x\"]]\n y = [entry for entry in worker_xy[\"y\"]]\n plt.scatter(x, y, label=\"Worker {}\".format(i), c=colors[i - 1])\n\n plt.title(\"Sine calculations for a uniformly sampled random distribution\")\n plt.xlabel(\"x\")\n plt.ylabel(\"sine(x)\")\n plt.legend(loc=\"lower right\")\n plt.savefig(\"tutorial_sines.png\")", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1863, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "85e6b4d1-ba3b-4c42-91de-8c0a89512264": {"__data__": {"id_": "85e6b4d1-ba3b-4c42-91de-8c0a89512264", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_local_sine_tutorial_2.py", "file_name": "test_local_sine_tutorial_2.py", "file_type": "text/x-python", "file_size": 1160, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "dadb01c7-a678-4996-8be9-120025dad82d", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_local_sine_tutorial_2.py", "file_name": "test_local_sine_tutorial_2.py", "file_type": "text/x-python", "file_size": 1160, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "4b0b1a6027744385bc6ab5a7206cb32f1fcd0288317a8896e5d5c22a47871cd8", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "import numpy as np\nfrom sine_gen import gen_random_sample\nfrom sine_sim import sim_find_sine\n\nfrom libensemble import Ensemble\nfrom libensemble.specs import ExitCriteria, GenSpecs, LibeSpecs, SimSpecs\n\nif __name__ == \"__main__\":\n libE_specs = LibeSpecs(nworkers=4, comms=\"local\")\n\n gen_specs = GenSpecs(\n gen_f=gen_random_sample, # Our generator function\n out=[(\"x\", float, (1,))], # gen_f output (name, type, size)\n user={\n \"lower\": np.array([-6]), # lower boundary for random sampling\n \"upper\": np.array([6]), # upper boundary for random sampling\n \"gen_batch_size\": 10, # number of x's gen_f generates per call\n },\n )\n\n sim_specs = SimSpecs(\n sim_f=sim_find_sine, # Our simulator function\n inputs=[\"x\"], # InputArray field names. \"x\" from gen_f output\n out=[(\"y\", float)], # sim_f output. \"y\" = sine(\"x\")\n )\n\n exit_criteria = ExitCriteria(gen_max=160)\n\n ensemble = Ensemble(sim_specs, gen_specs, exit_criteria, libE_specs)\n ensemble.add_random_streams()\n ensemble.run()\n\n if ensemble.flag != 0:\n print(\"Oh no! An error occurred!\")", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1032, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "39df4377-0ad3-4329-b95d-f14421201d01": {"__data__": {"id_": "39df4377-0ad3-4329-b95d-f14421201d01", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_local_sine_tutorial_3.py", "file_name": "test_local_sine_tutorial_3.py", "file_type": "text/x-python", "file_size": 2126, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "129fca7e-3d07-44fa-a8bf-96bb55cfaddb", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_local_sine_tutorial_3.py", "file_name": "test_local_sine_tutorial_3.py", "file_type": "text/x-python", "file_size": 2126, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "b2004b48b6b6351f7bb08cd2d3486f55ec6b58a59c96a3a63e48410226d65d4c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "import numpy as np\nfrom sine_gen import gen_random_sample\nfrom sine_sim import sim_find_sine\n\nfrom libensemble import Ensemble\nfrom libensemble.specs import ExitCriteria, GenSpecs, SimSpecs\n\nif __name__ == \"__main__\": # Python-quirk required on macOS and windows\n # libE_specs = LibeSpecs(nworkers=4, comms=\"local\")\n\n gen_specs = GenSpecs(\n gen_f=gen_random_sample, # Our generator function\n out=[(\"x\", float, (1,))], # gen_f output (name, type, size)\n user={\n \"lower\": np.array([-3]), # lower boundary for random sampling\n \"upper\": np.array([3]), # upper boundary for random sampling\n \"gen_batch_size\": 5, # number of x's gen_f generates per call\n },\n )\n\n sim_specs = SimSpecs(\n sim_f=sim_find_sine, # Our simulator function\n inputs=[\"x\"], # InputArray field names. \"x\" from gen_f output\n out=[(\"y\", float)], # sim_f output. \"y\" = sine(\"x\")\n ) # sim_specs_end_tag\n\n exit_criteria = ExitCriteria(sim_max=80) # Stop libEnsemble after 80 simulations\n\n # replace libE_specs with parse_args=True. Detects MPI runtime\n ensemble = Ensemble(sim_specs, gen_specs, exit_criteria, parse_args=True)\n\n ensemble.add_random_streams()\n ensemble.run() # start the ensemble. Blocks until completion.\n\n if ensemble.is_manager: # only True on rank 0\n history = ensemble.H # start visualizing our results\n print([i for i in history.dtype.fields])\n print(history)\n\n import matplotlib.pyplot as plt\n\n colors = [\"b\", \"g\", \"r\", \"y\", \"m\", \"c\", \"k\", \"w\"]\n\n for i in range(1, ensemble.nworkers + 1):\n worker_xy = np.extract(history[\"sim_worker\"] == i, history)\n x = [entry.tolist()[0] for entry in worker_xy[\"x\"]]\n y = [entry for entry in worker_xy[\"y\"]]\n plt.scatter(x, y, label=\"Worker {}\".format(i), c=colors[i - 1])\n\n plt.title(\"Sine calculations for a uniformly sampled random distribution\")\n plt.xlabel(\"x\")\n plt.ylabel(\"sine(x)\")\n plt.legend(loc=\"lower right\")\n plt.savefig(\"tutorial_sines.png\")", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1875, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d521fa73-f4aa-4027-8736-4cfcaa1e05a3": {"__data__": {"id_": "d521fa73-f4aa-4027-8736-4cfcaa1e05a3", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_comms.py", "file_name": "test_mpi_comms.py", "file_type": "text/x-python", "file_size": 3164, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4505efd2-317f-4499-9a0f-eccad646b7e3", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_comms.py", "file_name": "test_mpi_comms.py", "file_type": "text/x-python", "file_size": 3164, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "fb560150b31860885a7c8ebac9bdd4179fe35c51132983238cfa24502cffe3f6", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTest of MPI comms.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_mpi_comms.py\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\nfrom mpi4py import MPI\n\nfrom libensemble.comms.mpi import MPIComm, Timeout\nfrom libensemble.tools import parse_args\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi\n# TESTSUITE_NPROCS: 2 4\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n assert libE_specs[\"comms\"] == \"mpi\", \"This test can only be run with mpi comms -- aborting...\"\n\n def check_recv(comm, expected_msg):\n msg = comm.recv()\n assert msg == expected_msg, f\"Expected {expected_msg}, received {msg}\"\n\n def worker_main(mpi_comm):\n \"Worker main routine\"\n comm = MPIComm(mpi_comm)\n check_recv(comm, \"Hello\")\n check_recv(comm, \"World\")\n check_recv(comm, comm.rank)\n comm.send(comm.rank)\n check_recv(comm, \"Goodbye\")\n\n def manager_main(mpi_comm):\n \"Manager main routine\"\n worker_comms = [MPIComm(mpi_comm, r) for r in range(1, mpi_comm.Get_size())]\n for comm in worker_comms:\n try:\n okay_flag = True\n comm.recv(0)\n okay_flag = False\n except Timeout:\n pass\n assert okay_flag, \"Worker comm behaved as expected.\"\n for comm in worker_comms:\n comm.send(\"Hello\")\n comm.send(\"World\")\n comm.send(comm.remote_rank)\n for comm in worker_comms:\n check_recv(comm, comm.remote_rank)\n comm.send(\"Goodbye\")\n\n def mpi_comm_excl(exc=[0]):\n world_group = MPI.COMM_WORLD.Get_group()\n new_group = world_group.Excl(exc)\n mpi_comm = MPI.COMM_WORLD.Create(new_group)\n return mpi_comm\n\n def check_ranks(mpi_comm, test_exp, test_num):\n try:\n rank = mpi_comm.Get_rank()\n except Exception:\n rank = -1\n comm_ranks_in_world = MPI.COMM_WORLD.allgather(rank)\n print(f\"got {comm_ranks_in_world}, exp {test_exp[test_num]} \", flush=True)\n # This is really testing the test is testing what is it supposed to test\n assert comm_ranks_in_world == test_exp[test_num], (\n \"comm_ranks_in_world are: \" + str(comm_ranks_in_world) + \" Expected: \" + str(test_exp[test_num])\n )\n if rank == -1:\n return False\n return True\n\n # Run Tests\n all_ranks = list(range(MPI.COMM_WORLD.Get_size()))\n\n tests = {\n 1: MPI.COMM_WORLD.Dup,\n 2: mpi_comm_excl,\n }\n\n test_exp = {\n 1: all_ranks,\n 2: [-1] + all_ranks[:-1],\n }\n\n for test_num in range(1, len(tests) + 1):\n mpi_comm = tests[test_num]()\n if check_ranks(mpi_comm, test_exp, test_num):\n is_manager = mpi_comm.Get_rank() == 0\n if is_manager:\n manager_main(mpi_comm)\n else:\n worker_main(mpi_comm)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2632, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "08324bec-858e-4d6c-993d-22fbb46482aa": {"__data__": {"id_": "08324bec-858e-4d6c-993d-22fbb46482aa", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_gpu_settings.py", "file_name": "test_mpi_gpu_settings.py", "file_type": "text/x-python", "file_size": 10247, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fde0be83-2da3-4e77-b8e2-681d6ae29b5d", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_gpu_settings.py", "file_name": "test_mpi_gpu_settings.py", "file_type": "text/x-python", "file_size": 10247, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "95c40d59bdac2aa0a7a76640c104d6701a148a0010800b127a52bf566d1d27c6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6add70a5-353c-41ed-97bd-02016c0118e6", "node_type": "1", "metadata": {}, "hash": "903b5c12b6b57c3a4de6dfe67fb9518f30a3f27d6fbb0ee6ad9a4be2b05907ee", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests variable resource detection and automatic GPU assignment in libEnsemble.\n\nThis test is like the regression test test_GPU_variable_resources.py, but uses\nthe dry_run option to test correct GPU settings for different mocked up systems.\nTest assertions are in the sim function via the check_gpu_setting function.\n\nThe persistent generator creates simulations with variable resource requirements.\n\nRuns six sets of tests.\n\nSet 1.\nFour GPUs per node is mocked up below (if this line is removed, libEnsemble will\ndetect any GPUs available). MPI runner is provided via Executor custom_info\n\nSet 2.\nA platform_specs is used (as pydantic type). The MPI runner is changed for each call.\n\nSet 3.\nA platform_specs is used (as dictionary). The MPI runner is changed for each call.\n\nSet 4.\nA known platform is specified for known systems.\n\nSet 5.\nA known platform is specified for known systems via environment variable.\n\nSet 6.\nA known platform is specified for known systems via platforms_specs (imported classes)\n\nExecute via one of the following commands (e.g. 5 workers):\n mpiexec -np 6 python test_mpi_gpu_settings.py\n python test_mpi_gpu_settings.py --nworkers 5\n\nWhen running with the above command, the number of concurrent evaluations of\nthe objective function will be 4, as one of the five workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 3 6\n\nimport os\nimport sys\nimport warnings\n\nimport numpy as np\n\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.executors.mpi_executor import MPIExecutor\nfrom libensemble.gen_funcs.persistent_sampling_var_resources import uniform_sample as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.resources.platforms import Aurora, Frontier, PerlmutterGPU, Platform, Polaris, Summit\nfrom libensemble.sim_funcs import six_hump_camel\nfrom libensemble.sim_funcs.var_resources import gpu_variable_resources as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\n# from libensemble import logger\n# logger.set_level(\"DEBUG\") # For testing the test\n\nwarnings.filterwarnings(\"ignore\", category=UserWarning)\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n libE_specs[\"num_resource_sets\"] = nworkers - 1 # Persistent gen does not need resources\n libE_specs[\"use_workflow_dir\"] = True # Only a place for Open MPI machinefiles\n\n if libE_specs[\"comms\"] == \"tcp\":\n sys.exit(\"This test only runs with MPI or local -- aborting...\")\n\n # Get paths for applications to run\n six_hump_camel_app = six_hump_camel.__file__\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n \"user\": {\"dry_run\": True},\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [\"f\", \"x\", \"sim_id\"],\n \"out\": [(\"priority\", float), (\"resource_sets\", int), (\"x\", float, n)],\n \"user\": {\n \"initial_batch_size\": nworkers - 1,\n \"max_resource_sets\": nworkers - 1, # Any sim created can req. 1 worker up to all.\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n alloc_specs = {\n \"alloc_f\": alloc_f,\n \"user\": {\n \"give_all_with_same_priority\": False,\n \"async_return\": False, # False batch returns\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n exit_criteria = {\"sim_max\": 20}\n\n # Ensure LIBE_PLATFORM environment variable is not set.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3553, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "6add70a5-353c-41ed-97bd-02016c0118e6": {"__data__": {"id_": "6add70a5-353c-41ed-97bd-02016c0118e6", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_gpu_settings.py", "file_name": "test_mpi_gpu_settings.py", "file_type": "text/x-python", "file_size": 10247, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fde0be83-2da3-4e77-b8e2-681d6ae29b5d", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_gpu_settings.py", "file_name": "test_mpi_gpu_settings.py", "file_type": "text/x-python", "file_size": 10247, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "95c40d59bdac2aa0a7a76640c104d6701a148a0010800b127a52bf566d1d27c6", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "08324bec-858e-4d6c-993d-22fbb46482aa", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_gpu_settings.py", "file_name": "test_mpi_gpu_settings.py", "file_type": "text/x-python", "file_size": 10247, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "4b8c13785055dd55744d5d02fd29a6db2bcbe0c906aa0ab506cd7932e2fff373", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e7b25091-b67d-4b41-b8e2-5cacb1a2347c", "node_type": "1", "metadata": {}, "hash": "3cb403676f71fe5cec089d2a2408d5aecede702c03c172094c6072c512240331", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "1 worker up to all.\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n alloc_specs = {\n \"alloc_f\": alloc_f,\n \"user\": {\n \"give_all_with_same_priority\": False,\n \"async_return\": False, # False batch returns\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n exit_criteria = {\"sim_max\": 20}\n\n # Ensure LIBE_PLATFORM environment variable is not set.\n if \"LIBE_PLATFORM\" in os.environ:\n del os.environ[\"LIBE_PLATFORM\"]\n\n # First set - use executor setting ------------------------------------------------------------\n libE_specs[\"resource_info\"] = {\"gpus_on_node\": 4} # Mock GPU system / remove to detect GPUs\n\n for run_set in [\"mpich\", \"openmpi\", \"aprun\", \"srun\", \"jsrun\", \"msmpi\", \"custom\"]:\n print(f\"\\nRunning GPU setting checks (via resource_info / custom_info) for {run_set} ------------- \")\n exctr = MPIExecutor(custom_info={\"mpi_runner\": run_set})\n exctr.register_app(full_path=six_hump_camel_app, app_name=\"six_hump_camel\")\n\n # Reset persis_info. If has num_gens_started > 0 from alloc, will not runs any sims.\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n # Perform the run\n H, _, flag = libE(\n sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs, alloc_specs=alloc_specs\n )\n\n del libE_specs[\"resource_info\"] # this would override\n\n # Second set - use platform_specs (pydantic class) setting ------------------------------------\n libE_specs[\"platform_specs\"] = Platform(\n # mpi_runner=run_set, # fill in for each run\n cores_per_node=64,\n logical_cores_per_node=128,\n gpus_per_node=8,\n gpu_setting_type=\"runner_default\",\n scheduler_match_slots=False,\n )\n\n for run_set in [\"mpich\", \"openmpi\", \"aprun\", \"srun\", \"jsrun\", \"msmpi\", \"custom\"]:\n print(f\"\\nRunning GPU setting checks (via platform_specs class) for {run_set} ------------------- \")\n libE_specs[\"platform_specs\"].mpi_runner = run_set\n\n print(f'{libE_specs[\"platform_specs\"]=}')\n\n exctr = MPIExecutor()\n exctr.register_app(full_path=six_hump_camel_app, app_name=\"six_hump_camel\")\n\n # check having only cores_per_node\n if run_set == \"jsrun\":\n del libE_specs[\"platform_specs\"].logical_cores_per_node\n\n if run_set == \"custom\":\n del libE_specs[\"platform_specs\"].cores_per_node\n libE_specs[\"platform_specs\"].logical_cores_per_node = 128\n\n # Reset persis_info. If has num_gens_started > 0 from alloc, will not runs any sims.\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n # Perform the run\n H, _, flag = libE(\n sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs, alloc_specs=alloc_specs\n )\n\n del libE_specs[\"platform_specs\"]\n\n # Third set - use platform_specs (dictionary) setting ------------------------------------\n libE_specs[\"platform_specs\"] = {\n # \"mpi_runner\" : run_set, # fill in for each run\n \"cores_per_node\": 64,\n \"logical_cores_per_node\": 128,\n \"gpus_per_node\": 8,\n \"gpu_setting_type\": \"runner_default\",\n \"scheduler_match_slots\": False,\n }\n\n for run_set in [\"mpich\", \"openmpi\", \"aprun\", \"srun\", \"jsrun\", \"msmpi\", \"custom\"]:\n print(f\"\\nRunning GPU setting checks (via platform_specs dict) for {run_set} ------------------- \")\n libE_specs[\"platform_specs\"][\"mpi_runner\"] = run_set\n\n print(f'{libE_specs[\"platform_specs\"]=}')\n\n exctr = MPIExecutor()\n exctr.register_app(full_path=six_hump_camel_app, app_name=\"six_hump_camel\")\n\n # check having only cores_per_node\n if run_set == \"jsrun\":\n del libE_specs[\"platform_specs\"][\"logical_cores_per_node\"]\n\n if run_set == \"custom\":\n del libE_specs[\"platform_specs\"][\"cores_per_node\"]\n libE_specs[\"platform_specs\"][\"logical_cores_per_node\"] = 128\n\n # Reset persis_info.", "mimetype": "text/plain", "start_char_idx": 3182, "end_char_idx": 6751, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "e7b25091-b67d-4b41-b8e2-5cacb1a2347c": {"__data__": {"id_": "e7b25091-b67d-4b41-b8e2-5cacb1a2347c", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_gpu_settings.py", "file_name": "test_mpi_gpu_settings.py", "file_type": "text/x-python", "file_size": 10247, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "fde0be83-2da3-4e77-b8e2-681d6ae29b5d", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_gpu_settings.py", "file_name": "test_mpi_gpu_settings.py", "file_type": "text/x-python", "file_size": 10247, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "95c40d59bdac2aa0a7a76640c104d6701a148a0010800b127a52bf566d1d27c6", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6add70a5-353c-41ed-97bd-02016c0118e6", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_gpu_settings.py", "file_name": "test_mpi_gpu_settings.py", "file_type": "text/x-python", "file_size": 10247, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "456f1436a8533c4da6357080c1e6b89e195ebf70e6e34a8b331a7bd6b4f1f33f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "If has num_gens_started > 0 from alloc, will not runs any sims.\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n # Perform the run\n H, _, flag = libE(\n sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs, alloc_specs=alloc_specs\n )\n\n del libE_specs[\"platform_specs\"]\n\n # Fourth set - use platform setting ------------------------------------------------------------\n for platform in [\"summit\", \"frontier\", \"perlmutter_g\", \"polaris\", \"aurora\"]:\n print(f\"\\nRunning GPU setting checks (via known platform) for {platform} ------------------- \")\n libE_specs[\"platform\"] = platform\n\n exctr = MPIExecutor()\n exctr.register_app(full_path=six_hump_camel_app, app_name=\"six_hump_camel\")\n\n # Reset persis_info. If has num_gens_started > 0 from alloc, will not runs any sims.\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n # Perform the run\n H, _, flag = libE(\n sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs, alloc_specs=alloc_specs\n )\n\n del libE_specs[\"platform\"]\n\n # Fifth set - use platform environment setting -----------------------------------------------\n for platform in [\"summit\", \"frontier\", \"perlmutter_g\", \"polaris\", \"aurora\"]:\n print(f\"\\nRunning GPU setting checks (via known platform env. variable) for {platform} ----- \")\n os.environ[\"LIBE_PLATFORM\"] = platform\n\n exctr = MPIExecutor()\n exctr.register_app(full_path=six_hump_camel_app, app_name=\"six_hump_camel\")\n\n # Reset persis_info. If has num_gens_started > 0 from alloc, will not runs any sims.\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n # Perform the run\n H, _, flag = libE(\n sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs, alloc_specs=alloc_specs\n )\n\n del os.environ[\"LIBE_PLATFORM\"]\n\n # Sixth set - use platform_specs with known systems -------------------------------------------\n for platform in [Summit, Frontier, PerlmutterGPU, Polaris, Aurora]:\n print(f\"\\nRunning GPU setting checks (via known platform - platform_specs) for {platform} ------------------- \")\n libE_specs[\"platform_specs\"] = platform()\n\n exctr = MPIExecutor()\n exctr.register_app(full_path=six_hump_camel_app, app_name=\"six_hump_camel\")\n\n # Reset persis_info. If has num_gens_started > 0 from alloc, will not runs any sims.\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n # Perform the run\n H, _, flag = libE(\n sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs, alloc_specs=alloc_specs\n )\n\n del libE_specs[\"platform_specs\"]\n\n # All asserts are in sim func", "mimetype": "text/plain", "start_char_idx": 6752, "end_char_idx": 9289, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f0da29df-a9ca-4212-ac90-16aa1113df23": {"__data__": {"id_": "f0da29df-a9ca-4212-ac90-16aa1113df23", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_gpu_settings_env.py", "file_name": "test_mpi_gpu_settings_env.py", "file_type": "text/x-python", "file_size": 3661, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d2c84527-5e9d-411a-bf6f-a53d74eba6f5", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_gpu_settings_env.py", "file_name": "test_mpi_gpu_settings_env.py", "file_type": "text/x-python", "file_size": 3661, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "1671a7b12e483fd62b47df4e4eeaa55ed404c69c23240d47a6a7b96524025717", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests options to run an application in a bash-specified environment, without\naffecting the parent environment.\n\nThis is based on the variable resource detection and automatic GPU assignment test.\n\nThis test uses the dry_run option to test the correct runline and GPU settings\nfor different mocked-up systems. Test assertions are in the sim function via\nthe check_mpi_runner and check_gpu_setting functions.\n\nExecute via one of the following commands (e.g., 5 workers):\n mpiexec -np 6 python test_mpi_gpu_settings_env.py\n python test_mpi_gpu_settings_env.py --nworkers 5\n\nWhen running with the above command, the number of concurrent evaluations of\nthe objective function will be 4, as one of the five workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 3 6\n\nimport os\nimport sys\n\nimport numpy as np\n\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.executors.mpi_executor import MPIExecutor\nfrom libensemble.gen_funcs.persistent_sampling_var_resources import uniform_sample as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs import six_hump_camel\nfrom libensemble.sim_funcs.var_resources import gpu_variable_resources_subenv as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\n# from libensemble import logger\n# logger.set_level(\"DEBUG\") # For testing the test\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n libE_specs[\"num_resource_sets\"] = nworkers - 1 # Persistent gen does not need resources\n libE_specs[\"use_workflow_dir\"] = True # Only a place for Open MPI machinefiles\n\n # Optional for organization of output scripts\n libE_specs[\"sim_dirs_make\"] = True\n\n if libE_specs[\"comms\"] == \"tcp\":\n sys.exit(\"This test only runs with MPI or local -- aborting...\")\n\n # Get paths for applications to run\n six_hump_camel_app = six_hump_camel.__file__\n\n env_script_path = os.path.join(os.getcwd(), \"./env_script_in.sh\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n \"user\": {\"dry_run\": True, \"env_script\": env_script_path},\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [\"f\", \"x\", \"sim_id\"],\n \"out\": [(\"priority\", float), (\"resource_sets\", int), (\"x\", float, n)],\n \"user\": {\n \"initial_batch_size\": nworkers - 1,\n \"max_resource_sets\": nworkers - 1, # Any sim created can req. 1 worker up to all.\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n alloc_specs = {\n \"alloc_f\": alloc_f,\n \"user\": {\n \"give_all_with_same_priority\": False,\n \"async_return\": False, # False batch returns\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n exit_criteria = {\"sim_max\": 10}\n\n # Ensure LIBE_PLATFORM environment variable is not set.\n if \"LIBE_PLATFORM\" in os.environ:\n del os.environ[\"LIBE_PLATFORM\"]\n\n libE_specs[\"resource_info\"] = {\"gpus_on_node\": 4} # Mock GPU system / remove to detect GPUs\n\n exctr = MPIExecutor(custom_info={\"mpi_runner\": \"mpich\"})\n exctr.register_app(full_path=six_hump_camel_app, app_name=\"six_hump_camel\")\n\n # Perform the run\n H, _, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs, alloc_specs=alloc_specs)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3410, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "1fd1a737-ef44-40e7-936e-1b30296be5fa": {"__data__": {"id_": "1fd1a737-ef44-40e7-936e-1b30296be5fa", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_gpu_settings_mock_nodes_multi_task.py", "file_name": "test_mpi_gpu_settings_mock_nodes_multi_task.py", "file_type": "text/x-python", "file_size": 5413, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "710f430e-fed4-4923-a7a5-76b0c73bae0e", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_gpu_settings_mock_nodes_multi_task.py", "file_name": "test_mpi_gpu_settings_mock_nodes_multi_task.py", "file_type": "text/x-python", "file_size": 5413, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "9fb6cb50a3bbe225df4cb285e1eb5b6a6ab61b6fa301dd944489bcc7c9752690", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0703eb99-67c1-47e0-96ef-f6b972fc6505", "node_type": "1", "metadata": {}, "hash": "ab98c52520908a50e8cf9c6a61fb6dacaf4302af7fd93cd08bcf8efa432166b2", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests multi-task (using GPU and non-GPU tasks using variable resource detection\nand automatic GPU assignment in libEnsemble.\n\nThis test is based on test_mpi_gpu_settings.py.\n\nUses the dry_run option to test correct GPU settings for different mocked up systems.\nTest assertions are in the sim function via the check_gpu_setting function.\n\nThe persistent generator creates simulations with variable resource requirements.\n\nExecute via one of the following commands (e.g. 5 workers):\n mpiexec -np 6 python test_mpi_gpu_settings_mock_nodes_multi_task.py\n python test_mpi_gpu_settings_mock_nodes_multi_task.py --nworkers 5\n\nWhen running with the above command, the number of concurrent evaluations of\nthe objective function will be 4, as one of the five workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# The 12 process (11 worker) run is necessary to test configurations that must be adjusted.\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 3 6 12\n\nimport os\nimport sys\n\nimport numpy as np\n\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.executors.mpi_executor import MPIExecutor\nfrom libensemble.gen_funcs.persistent_sampling_var_resources import uniform_sample_diff_simulations as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs import six_hump_camel\nfrom libensemble.sim_funcs.var_resources import gpu_variable_resources_from_gen as sim_f\nfrom libensemble.tests.regression_tests.common import create_node_file\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\n# from libensemble import logger\n# logger.set_level(\"DEBUG\") # For testing the test\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n nsim_workers = nworkers - 1\n libE_specs[\"num_resource_sets\"] = nsim_workers # Persistent gen does not need resources\n libE_specs[\"use_workflow_dir\"] = True # Only a place for Open MPI machinefiles\n\n if libE_specs[\"comms\"] == \"tcp\":\n sys.exit(\"This test only runs with MPI or local -- aborting...\")\n\n # Get paths for applications to run\n six_hump_camel_app = six_hump_camel.__file__\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n \"user\": {\"dry_run\": True},\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [\"f\", \"x\", \"sim_id\"],\n \"out\": [(\"priority\", float), (\"num_procs\", int), (\"num_gpus\", int), (\"x\", float, n)],\n \"user\": {\n \"initial_batch_size\": nsim_workers,\n \"max_procs\": max(nsim_workers // 2, 1), # Any sim created can req. 1 worker up to max\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n \"multi_task\": True,\n },\n }\n\n alloc_specs = {\n \"alloc_f\": alloc_f,\n \"user\": {\n \"give_all_with_same_priority\": False,\n \"async_return\": False, # False batch returns\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n exit_criteria = {\"sim_max\": nsim_workers * 2}\n\n # Ensure LIBE_PLATFORM environment variable is not set.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3109, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "0703eb99-67c1-47e0-96ef-f6b972fc6505": {"__data__": {"id_": "0703eb99-67c1-47e0-96ef-f6b972fc6505", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_gpu_settings_mock_nodes_multi_task.py", "file_name": "test_mpi_gpu_settings_mock_nodes_multi_task.py", "file_type": "text/x-python", "file_size": 5413, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "710f430e-fed4-4923-a7a5-76b0c73bae0e", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_gpu_settings_mock_nodes_multi_task.py", "file_name": "test_mpi_gpu_settings_mock_nodes_multi_task.py", "file_type": "text/x-python", "file_size": 5413, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "9fb6cb50a3bbe225df4cb285e1eb5b6a6ab61b6fa301dd944489bcc7c9752690", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1fd1a737-ef44-40e7-936e-1b30296be5fa", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_gpu_settings_mock_nodes_multi_task.py", "file_name": "test_mpi_gpu_settings_mock_nodes_multi_task.py", "file_type": "text/x-python", "file_size": 5413, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "8fa1e139a493f676766809cdce16c52f1b4ec2bdf99dbf813e27e3e8ee8cb48c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "1 worker up to max\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n \"multi_task\": True,\n },\n }\n\n alloc_specs = {\n \"alloc_f\": alloc_f,\n \"user\": {\n \"give_all_with_same_priority\": False,\n \"async_return\": False, # False batch returns\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n exit_criteria = {\"sim_max\": nsim_workers * 2}\n\n # Ensure LIBE_PLATFORM environment variable is not set.\n if \"LIBE_PLATFORM\" in os.environ:\n del os.environ[\"LIBE_PLATFORM\"]\n\n node_file = \"nodelist_mpi_gpu_settings\"\n\n if is_manager:\n create_node_file(num_nodes=2, name=node_file)\n\n # Mock GPU system / remove to detect GPUs, CPUs, and/or nodes\n libE_specs[\"resource_info\"] = {\"gpus_on_node\": 4, \"node_file\": node_file, \"cores_on_node\": (32, 64)}\n\n for run_set in [\"mpich\", \"openmpi\", \"aprun\", \"srun\", \"jsrun\", \"custom\"]:\n print(f\"\\nRunning GPU setting checks (via resource_info / custom_info) for {run_set} ------------- \")\n exctr = MPIExecutor(custom_info={\"mpi_runner\": run_set})\n exctr.register_app(full_path=six_hump_camel_app, app_name=\"six_hump_camel\")\n\n # Reset persis_info. If has num_gens_started > 0 from alloc, will not runs any sims.\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n # Perform the run\n H, _, flag = libE(\n sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs, alloc_specs=alloc_specs\n )\n\n # Oversubscribe procs\n if nsim_workers >= 4:\n cores_per_node = nsim_workers // 4\n else:\n cores_per_node = 1\n\n libE_specs[\"resource_info\"] = {\n \"gpus_on_node\": 4,\n \"node_file\": node_file,\n \"cores_on_node\": (cores_per_node, cores_per_node),\n }\n\n for run_set in [\"mpich\", \"openmpi\", \"aprun\", \"srun\", \"jsrun\", \"custom\"]:\n print(f\"\\nRunning GPU setting checks (via resource_info / custom_info) for {run_set} ------------- \")\n exctr = MPIExecutor(custom_info={\"mpi_runner\": run_set})\n exctr.register_app(full_path=six_hump_camel_app, app_name=\"six_hump_camel\")\n\n # Reset persis_info. If has num_gens_started > 0 from alloc, will not runs any sims.\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n # Perform the run\n H, _, flag = libE(\n sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs, alloc_specs=alloc_specs\n )\n\n del libE_specs[\"resource_info\"]\n\n # All asserts are in sim func", "mimetype": "text/plain", "start_char_idx": 2704, "end_char_idx": 4959, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f604392e-7c50-4016-9d8f-f07277502c48": {"__data__": {"id_": "f604392e-7c50-4016-9d8f-f07277502c48", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners.py", "file_name": "test_mpi_runners.py", "file_type": "text/x-python", "file_size": 13813, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1236e457-6819-46ff-a442-08fac9c4cbf4", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners.py", "file_name": "test_mpi_runners.py", "file_type": "text/x-python", "file_size": 13813, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "4106ff3b74d2f43aedf5d9e6942a2bd7f0781c95134578897e17d7ac7386bc8a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0a798288-819f-4fbb-ba26-13ea5fb1a549", "node_type": "1", "metadata": {}, "hash": "ca4fcb8887839bc2a9297460aff86cfa51c4265ddb67b9b4a2dd68b5b77ea9b4", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble testing the MPI Runners command creation.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_mpi_runners.py\n python test_mpi_runners.py --nworkers 3\n python test_mpi_runners.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\nimport numpy as np\n\nfrom libensemble import logger\nfrom libensemble.executors.mpi_executor import MPIExecutor\nfrom libensemble.gen_funcs.sampling import uniform_random_sample as gen_f\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.run_line_check import runline_check as sim_f\nfrom libensemble.tests.regression_tests.common import create_node_file\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\n# logger.set_level(\"DEBUG\") # For testing the test\nlogger.set_level(\"INFO\")\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 2 4\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n rounds = 1\n sim_app = \"/path/to/fakeapp.x\"\n comms = libE_specs[\"comms\"]\n\n libE_specs[\"dedicated_mode\"] = True\n libE_specs[\"enforce_worker_core_bounds\"] = True\n\n # To allow visual checking - log file not used in test\n log_file = \"ensemble_mpi_runners_comms_\" + str(comms) + \"_wrks_\" + str(nworkers) + \".log\"\n logger.set_filename(log_file)\n\n nodes_per_worker = 2\n\n # For varying size test - relate node count to nworkers\n node_file = \"nodelist_mpi_runners_comms_\" + str(comms) + \"_wrks_\" + str(nworkers)\n nnodes = nworkers * nodes_per_worker\n\n if is_manager:\n create_node_file(num_nodes=nnodes, name=node_file)\n\n if comms == \"mpi\":\n libE_specs[\"mpi_comm\"].Barrier()\n\n # Mock up system\n custom_resources = {\n \"cores_on_node\": (16, 64), # Tuple (physical cores, logical cores)\n \"node_file\": node_file, # Name of file containing a node-list\n \"gpus_on_node\": 4, # For tests with ngpus\n }\n libE_specs[\"resource_info\"] = custom_resources\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n exit_criteria = {\"sim_max\": nworkers * rounds}\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"in\": [\"sim_id\"],\n \"out\": [(\"x\", float, (2,))],\n \"user\": {\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n \"gen_batch_size\": 100,\n },\n }\n\n # Each worker has 2 nodes.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2473, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "0a798288-819f-4fbb-ba26-13ea5fb1a549": {"__data__": {"id_": "0a798288-819f-4fbb-ba26-13ea5fb1a549", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners.py", "file_name": "test_mpi_runners.py", "file_type": "text/x-python", "file_size": 13813, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1236e457-6819-46ff-a442-08fac9c4cbf4", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners.py", "file_name": "test_mpi_runners.py", "file_type": "text/x-python", "file_size": 13813, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "4106ff3b74d2f43aedf5d9e6942a2bd7f0781c95134578897e17d7ac7386bc8a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f604392e-7c50-4016-9d8f-f07277502c48", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners.py", "file_name": "test_mpi_runners.py", "file_type": "text/x-python", "file_size": 13813, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "849ffb919d4d284bd9bdf2fd452b7264536daf299e31a5d6870d93c5041bf29f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f6393100-a0c0-4430-a667-4b4bad148542", "node_type": "1", "metadata": {}, "hash": "893d7bd69a08ee1e22b05a4de252c260b6e6b0dbcc8cdaf822f2d9386adebbfb", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Basic test list for portable options\n test_list_base = [\n {\"testid\": \"base1\", \"nprocs\": 2, \"nnodes\": 1, \"ppn\": 2, \"e_args\": \"--xarg 1\"}, # Under use\n {\"testid\": \"base2\"}, # Give no config and no extra_args\n {\"testid\": \"base3\", \"e_args\": \"--xarg 1\"}, # Give no config with extra_args\n {\"testid\": \"base4\", \"e_args\": \"--xarg 1\", \"ht\": True}, # Give no config but with HT\n {\"testid\": \"base5\", \"nprocs\": 16, \"e_args\": \"--xarg 1\"}, # Just nprocs (will use one node)\n {\"testid\": \"base6\", \"nprocs\": 16, \"nnodes\": 2, \"e_args\": \"--xarg 1\"}, # nprocs, nnodes\n ]\n\n # extra_args tests for each mpi runner\n # extra_args should be parsed - however, the string should stay intact, inc abbreviated/different expressions\n eargs_mpich = [\n {\"testid\": \"mp1\", \"nprocs\": 16, \"e_args\": \"--xarg 1 --ppn 16\"}, # nprocs + parse extra_args\n {\"testid\": \"mp2\", \"e_args\": \"-np 8 --xarg 1 --ppn 4\"}, # parse extra_args\n ]\n\n eargs_openmpi = [\n {\"testid\": \"ompi1\", \"nprocs\": 16, \"e_args\": \"--xarg 1 -npernode 16\"}, # nprocs + parse extra_args\n {\"testid\": \"ompi2\", \"e_args\": \"-np 8 --xarg 1 -npernode 4\"}, # parse extra_args\n ]\n\n eargs_aprun = [\n {\"testid\": \"ap1\", \"nprocs\": 16, \"e_args\": \"--xarg 1 -N 16\"}, # nprocs + parse extra_args\n {\"testid\": \"ap2\", \"e_args\": \"-n 8 --xarg 1 -N 4\"}, # parse extra_args\n ]\n\n # Note in a8: -n 8 is abbreviated form of --ntasks, this should be unaltered while --nodes is derived and inserted.\n eargs_srun = [\n {\"testid\": \"sr1\", \"nprocs\": 16, \"e_args\": \"--xarg 1 --ntasks-per-node 16\"}, # nprocs + parse extra_args\n {\"testid\": \"sr2\", \"e_args\": \"-n 8 --xarg 1 --ntasks-per-node 4\"}, # parse extra_args\n {\"testid\": \"sr3\", \"e_args\": \"--nodes 2 -n 8 --xarg 1 --ntasks-per-node 4\"},\n {\"testid\": \"sr4\", \"ngpus\": 8, \"e_args\": \"--nodes 2 -n 8 --xarg 1 --ntasks-per-node 4\"},\n {\"testid\": \"sr5\", \"ngpus\": 8, \"e_args\": \"-n 8 --xarg 1 --ntasks-per-node 4\"},\n ]\n\n # Note for jsrun: proc = resource set. Awkward naming but this seems like the best solution.\n # Define extra_args as minimal relation of tasks/cores/gpus (one resource set), then n (nprocs) as multiplier.", "mimetype": "text/plain", "start_char_idx": 2474, "end_char_idx": 4529, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f6393100-a0c0-4430-a667-4b4bad148542": {"__data__": {"id_": "f6393100-a0c0-4430-a667-4b4bad148542", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners.py", "file_name": "test_mpi_runners.py", "file_type": "text/x-python", "file_size": 13813, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1236e457-6819-46ff-a442-08fac9c4cbf4", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners.py", "file_name": "test_mpi_runners.py", "file_type": "text/x-python", "file_size": 13813, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "4106ff3b74d2f43aedf5d9e6942a2bd7f0781c95134578897e17d7ac7386bc8a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0a798288-819f-4fbb-ba26-13ea5fb1a549", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners.py", "file_name": "test_mpi_runners.py", "file_type": "text/x-python", "file_size": 13813, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "4ab4f3db859b0b2a8ced22e1cb64bce456fa635e6b90d118177094816a34aacb", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "de0bf22a-0b6c-4887-a9d8-e46c78dce9e0", "node_type": "1", "metadata": {}, "hash": "2ab605638b689792a1c15caa27c8121170020e89822342f538a266cb8890eeb4", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Awkward naming but this seems like the best solution.\n # Define extra_args as minimal relation of tasks/cores/gpus (one resource set), then n (nprocs) as multiplier.\n eargs_jsrun = [\n {\"testid\": \"jsr1\", \"nprocs\": 16, \"e_args\": \"--xarg 1 -r 16\"}, # nprocs + parse extra_args\n {\"testid\": \"jsr2\", \"e_args\": \"-n 8 --xarg 1 -r 4\"}, # parse extra_args\n {\"testid\": \"jsr3\", \"nprocs\": 3, \"e_args\": '-a 1 -c 1 -g 1 --bind=packed:1 --smpiargs=\"-gpu\"'}, # combine r-sets\n {\n \"testid\": \"jsr4\",\n \"e_args\": '-n 3 -a 1 -c 1 -g 1 --bind=packed:1 --smpiargs=\"-gpu\"',\n }, # r-sets all in extra_args\n ]\n\n eargs_custom = [{\"testid\": \"cust1\", \"e_args\": \"--xarg 1 --ppn 16\"}]\n\n # Expected Outputs\n # Node IDs are modified for different workers in sim func.\n exp_mpich = [\n \"mpirun -hosts node-1 -np 2 --ppn 2 --xarg 1 /path/to/fakeapp.x --testid base1\",\n \"mpirun -hosts node-1,node-2 -np 32 --ppn 16 /path/to/fakeapp.x --testid base2\",\n \"mpirun -hosts node-1,node-2 -np 32 --ppn 16 --xarg 1 /path/to/fakeapp.x --testid base3\",\n \"mpirun -hosts node-1,node-2 -np 128 --ppn 64 --xarg 1 /path/to/fakeapp.x --testid base4\",\n \"mpirun -hosts node-1 -np 16 --ppn 16 --xarg 1 /path/to/fakeapp.x --testid base5\",\n \"mpirun -hosts node-1,node-2 -np 16 --ppn 8 --xarg 1 /path/to/fakeapp.x --testid base6\",\n \"mpirun -hosts node-1 -np 16 --xarg 1 --ppn 16 /path/to/fakeapp.x --testid mp1\",\n \"mpirun -hosts node-1,node-2 -np 8 --xarg 1 --ppn 4 /path/to/fakeapp.x --testid mp2\",\n ]\n\n exp_rename_mpich = [\n \"inst -dummy mpich -hosts node-1 -np 2 --ppn 2 --xarg 1 /path/to/fakeapp.x --testid base1\",\n \"inst -dummy mpich -hosts node-1,node-2 -np 32 --ppn 16 /path/to/fakeapp.x --testid base2\",\n \"inst -dummy mpich -hosts node-1,node-2 -np 32 --ppn 16 --xarg 1 /path/to/fakeapp.x --testid base3\",\n \"inst -dummy mpich -hosts node-1,node-2 -np 128 --ppn 64 --xarg 1 /path/to/fakeapp.x --testid base4\",\n \"inst -dummy mpich -hosts node-1 -np 16 --ppn 16 --xarg 1 /path/to/fakeapp.x --testid base5\",\n \"inst -dummy mpich -hosts node-1,node-2 -np 16 --ppn 8 --xarg 1 /path/to/fakeapp.x --testid base6\",\n \"inst -dummy mpich -hosts node-1 -np 16 --xarg 1 --ppn 16 /path/to/fakeapp.x --testid mp1\",\n \"inst -dummy mpich -hosts node-1,node-2 -np 8 --xarg 1 --ppn 4 /path/to/fakeapp.x --testid mp2\",", "mimetype": "text/plain", "start_char_idx": 4364, "end_char_idx": 6606, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "de0bf22a-0b6c-4887-a9d8-e46c78dce9e0": {"__data__": {"id_": "de0bf22a-0b6c-4887-a9d8-e46c78dce9e0", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners.py", "file_name": "test_mpi_runners.py", "file_type": "text/x-python", "file_size": 13813, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1236e457-6819-46ff-a442-08fac9c4cbf4", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners.py", "file_name": "test_mpi_runners.py", "file_type": "text/x-python", "file_size": 13813, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "4106ff3b74d2f43aedf5d9e6942a2bd7f0781c95134578897e17d7ac7386bc8a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f6393100-a0c0-4430-a667-4b4bad148542", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners.py", "file_name": "test_mpi_runners.py", "file_type": "text/x-python", "file_size": 13813, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "647912a0f6f3cee715b95985a1b147513bd7bd049828754043d3f1eee2a35d75", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1ea299f7-c87b-45e7-9fc0-2bdd55abbcf1", "node_type": "1", "metadata": {}, "hash": "175cb9f4c358a6bbdccdd4a68867aa010fb80bea4ad539218fee91277ff8ada4", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "node-2 -np 128 --ppn 64 --xarg 1 /path/to/fakeapp.x --testid base4\",\n \"inst -dummy mpich -hosts node-1 -np 16 --ppn 16 --xarg 1 /path/to/fakeapp.x --testid base5\",\n \"inst -dummy mpich -hosts node-1,node-2 -np 16 --ppn 8 --xarg 1 /path/to/fakeapp.x --testid base6\",\n \"inst -dummy mpich -hosts node-1 -np 16 --xarg 1 --ppn 16 /path/to/fakeapp.x --testid mp1\",\n \"inst -dummy mpich -hosts node-1,node-2 -np 8 --xarg 1 --ppn 4 /path/to/fakeapp.x --testid mp2\",\n ]\n\n # openmpi requires machinefiles (-host requires\n # exp_openmpi = \\\n # ['mpirun -host node-1 -np 2 -npernode 2 --xarg 1 /path/to/fakeapp.x --testid base1',\n # 'mpirun -host node-1,node-2 -np 32 -npernode 16 /path/to/fakeapp.x --testid base2',\n # 'mpirun -host node-1,node-2 -np 32 -npernode 16 --xarg 1 /path/to/fakeapp.x --testid base3',\n # 'mpirun -host node-1,node-2 -np 128 -npernode 64 --xarg 1 /path/to/fakeapp.x --testid base4',\n # 'mpirun -host node-1 -np 16 -npernode 16 --xarg 1 /path/to/fakeapp.x --testid base5',\n # 'mpirun -host node-1,node-2 -np 16 -npernode 8 --xarg 1 /path/to/fakeapp.x --testid base6',\n # 'mpirun -host node-1 -np 16 --xarg 1 -npernode 16 /path/to/fakeapp.x --testid ompi1',\n # 'mpirun -host node-1,node-2 -np 8 --xarg 1 -npernode 4 /path/to/fakeapp.x --testid ompi2',\n # ]\n\n exp_aprun = [\n \"aprun -L node-1 -n 2 -N 2 --xarg 1 /path/to/fakeapp.x --testid base1\",\n \"aprun -L node-1,node-2 -n 32 -N 16 /path/to/fakeapp.x --testid base2\",\n \"aprun -L node-1,node-2 -n 32 -N 16 --xarg 1 /path/to/fakeapp.x --testid base3\",\n \"aprun -L node-1,node-2 -n 128 -N 64 --xarg 1 /path/to/fakeapp.x --testid base4\",\n \"aprun -L node-1 -n 16 -N 16 --xarg 1 /path/to/fakeapp.x --testid base5\",\n \"aprun -L node-1,node-2 -n 16 -N 8 --xarg 1 /path/to/fakeapp.x --testid base6\",\n \"aprun -L node-1 -n 16 --xarg 1 -N 16 /path/to/fakeapp.x --testid ap1\",\n \"aprun -L node-1,node-2 -n 8 --xarg 1 -N 4 /path/to/fakeapp.x --testid ap2\",\n ]\n\n exp_srun = [\n \"srun -w node-1 --ntasks 2 --nodes 1 --ntasks-per-node 2 --xarg 1 --exact /path/to/fakeapp.x --testid base1\",\n \"srun -w node-1,node-2 --ntasks 32 --nodes 2 --ntasks-per-node 16 --exact /path/to/fakeapp.", "mimetype": "text/plain", "start_char_idx": 6151, "end_char_idx": 8274, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "1ea299f7-c87b-45e7-9fc0-2bdd55abbcf1": {"__data__": {"id_": "1ea299f7-c87b-45e7-9fc0-2bdd55abbcf1", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners.py", "file_name": "test_mpi_runners.py", "file_type": "text/x-python", "file_size": 13813, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1236e457-6819-46ff-a442-08fac9c4cbf4", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners.py", "file_name": "test_mpi_runners.py", "file_type": "text/x-python", "file_size": 13813, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "4106ff3b74d2f43aedf5d9e6942a2bd7f0781c95134578897e17d7ac7386bc8a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "de0bf22a-0b6c-4887-a9d8-e46c78dce9e0", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners.py", "file_name": "test_mpi_runners.py", "file_type": "text/x-python", "file_size": 13813, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "b564436b4466e6759b0f877e6499e5bc5c6700a9eccd58bfc05fc3debb6f9b10", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f59b2ef6-edaa-4012-af8e-c66b589d21ff", "node_type": "1", "metadata": {}, "hash": "5a10678463ea38c7a5ee73d1f03a3dfa06cb16ffb521effde74541268ed6738e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "node-2 -n 16 -N 8 --xarg 1 /path/to/fakeapp.x --testid base6\",\n \"aprun -L node-1 -n 16 --xarg 1 -N 16 /path/to/fakeapp.x --testid ap1\",\n \"aprun -L node-1,node-2 -n 8 --xarg 1 -N 4 /path/to/fakeapp.x --testid ap2\",\n ]\n\n exp_srun = [\n \"srun -w node-1 --ntasks 2 --nodes 1 --ntasks-per-node 2 --xarg 1 --exact /path/to/fakeapp.x --testid base1\",\n \"srun -w node-1,node-2 --ntasks 32 --nodes 2 --ntasks-per-node 16 --exact /path/to/fakeapp.x --testid base2\",\n \"srun -w node-1,node-2 --ntasks 32 --nodes 2 --ntasks-per-node 16 --xarg 1 --exact /path/to/fakeapp.x --testid base3\",\n \"srun -w node-1,node-2 --ntasks 128 --nodes 2 --ntasks-per-node 64 --xarg 1 --exact /path/to/fakeapp.x --testid base4\",\n \"srun -w node-1 --ntasks 16 --nodes 1 --ntasks-per-node 16 --xarg 1 --exact /path/to/fakeapp.x --testid base5\",\n \"srun -w node-1,node-2 --ntasks 16 --nodes 2 --ntasks-per-node 8 --xarg 1 --exact /path/to/fakeapp.x --testid base6\",\n \"srun -w node-1 --ntasks 16 --nodes 1 --xarg 1 --ntasks-per-node 16 --exact /path/to/fakeapp.x --testid sr1\",\n \"srun -w node-1,node-2 --nodes 2 -n 8 --xarg 1 --ntasks-per-node 4 --exact /path/to/fakeapp.x --testid sr2\",\n \"srun -w node-1,node-2 --nodes 2 -n 8 --xarg 1 --ntasks-per-node 4 --exact /path/to/fakeapp.x --testid sr3\",\n \"srun -w node-1,node-2 --nodes 2 -n 8 --xarg 1 --ntasks-per-node 4 --gpus-per-task 1 --exact /path/to/fakeapp.x --testid sr4\",\n \"srun -w node-1,node-2 --nodes 2 -n 8 --xarg 1 --ntasks-per-node 4 --gpus-per-task 1 --exact /path/to/fakeapp.x --testid sr5\",\n ]\n\n exp_jsrun = [\n \"jsrun -n 2 -r 2 --xarg 1 /path/to/fakeapp.x --testid base1\",\n \"jsrun -n 32 /path/to/fakeapp.x --testid base2\",\n \"jsrun -n 32 --xarg 1 /path/to/fakeapp.x --testid base3\",\n \"jsrun -n 128 --xarg 1 /path/to/fakeapp.x --testid base4\",\n \"jsrun -n 16 -r 16 --xarg 1 /path/to/fakeapp.x --testid base5\",\n \"jsrun -n 16 -r 8 --xarg 1 /path/to/fakeapp.x --testid base6\",\n \"jsrun -n 16 --xarg 1 -r 16 /path/to/fakeapp.x --testid jsr1\",\n \"jsrun -n 8 --xarg 1 -r 4 /path/to/fakeapp.x --testid jsr2\",\n 'jsrun -n 3 -r 3 -a 1 -c 1 -g 1 --bind=packed:1 --smpiargs=\"-gpu\" /path/to/fakeapp.x --testid jsr3',", "mimetype": "text/plain", "start_char_idx": 7839, "end_char_idx": 9960, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f59b2ef6-edaa-4012-af8e-c66b589d21ff": {"__data__": {"id_": "f59b2ef6-edaa-4012-af8e-c66b589d21ff", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners.py", "file_name": "test_mpi_runners.py", "file_type": "text/x-python", "file_size": 13813, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1236e457-6819-46ff-a442-08fac9c4cbf4", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners.py", "file_name": "test_mpi_runners.py", "file_type": "text/x-python", "file_size": 13813, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "4106ff3b74d2f43aedf5d9e6942a2bd7f0781c95134578897e17d7ac7386bc8a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1ea299f7-c87b-45e7-9fc0-2bdd55abbcf1", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners.py", "file_name": "test_mpi_runners.py", "file_type": "text/x-python", "file_size": 13813, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "e3e91ea85d0ef632ceed3eafac6399b4a9cdc171fc19f2b822539294cae25301", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9894ba4b-fa2a-40de-8121-13f35ca77140", "node_type": "1", "metadata": {}, "hash": "adca82d00428527f3144f0b5e0675137f15cccd6ca29ce61be69ea7939cf874d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "x --testid base4\",\n \"jsrun -n 16 -r 16 --xarg 1 /path/to/fakeapp.x --testid base5\",\n \"jsrun -n 16 -r 8 --xarg 1 /path/to/fakeapp.x --testid base6\",\n \"jsrun -n 16 --xarg 1 -r 16 /path/to/fakeapp.x --testid jsr1\",\n \"jsrun -n 8 --xarg 1 -r 4 /path/to/fakeapp.x --testid jsr2\",\n 'jsrun -n 3 -r 3 -a 1 -c 1 -g 1 --bind=packed:1 --smpiargs=\"-gpu\" /path/to/fakeapp.x --testid jsr3',\n 'jsrun -r 3 -n 3 -a 1 -c 1 -g 1 --bind=packed:1 --smpiargs=\"-gpu\" /path/to/fakeapp.x --testid jsr4',\n ]\n\n exp_custom = [\n \"myrunner --xarg 1 /path/to/fakeapp.x --testid base1\",\n \"myrunner /path/to/fakeapp.x --testid base2\",\n \"myrunner --xarg 1 /path/to/fakeapp.x --testid base3\",\n \"myrunner --xarg 1 /path/to/fakeapp.x --testid base4\",\n \"myrunner --xarg 1 /path/to/fakeapp.x --testid base5\",\n \"myrunner --xarg 1 /path/to/fakeapp.x --testid base6\",\n \"myrunner --xarg 1 --ppn 16 /path/to/fakeapp.x --testid cust1\",\n ]\n\n # Loop here for mocking different systems.", "mimetype": "text/plain", "start_char_idx": 9585, "end_char_idx": 10522, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "9894ba4b-fa2a-40de-8121-13f35ca77140": {"__data__": {"id_": "9894ba4b-fa2a-40de-8121-13f35ca77140", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners.py", "file_name": "test_mpi_runners.py", "file_type": "text/x-python", "file_size": 13813, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1236e457-6819-46ff-a442-08fac9c4cbf4", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners.py", "file_name": "test_mpi_runners.py", "file_type": "text/x-python", "file_size": 13813, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "4106ff3b74d2f43aedf5d9e6942a2bd7f0781c95134578897e17d7ac7386bc8a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f59b2ef6-edaa-4012-af8e-c66b589d21ff", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners.py", "file_name": "test_mpi_runners.py", "file_type": "text/x-python", "file_size": 13813, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "53194f7d8dec09fcb9d2254220ca6397b4307cae426aff7714c780736f2753cf", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "x --testid jsr4',\n ]\n\n exp_custom = [\n \"myrunner --xarg 1 /path/to/fakeapp.x --testid base1\",\n \"myrunner /path/to/fakeapp.x --testid base2\",\n \"myrunner --xarg 1 /path/to/fakeapp.x --testid base3\",\n \"myrunner --xarg 1 /path/to/fakeapp.x --testid base4\",\n \"myrunner --xarg 1 /path/to/fakeapp.x --testid base5\",\n \"myrunner --xarg 1 /path/to/fakeapp.x --testid base6\",\n \"myrunner --xarg 1 --ppn 16 /path/to/fakeapp.x --testid cust1\",\n ]\n\n # Loop here for mocking different systems.\n def run_tests(mpi_runner, runner_name, test_list_exargs, exp_list):\n mpi_customizer = {\n \"mpi_runner\": mpi_runner, # Select runner: mpich, openmpi, aprun, srun, jsrun\n \"runner_name\": runner_name, # Runner name: Replaces run command if not None\n }\n\n exctr = MPIExecutor(custom_info=mpi_customizer)\n exctr.register_app(full_path=sim_app, calc_type=\"sim\")\n\n test_list = test_list_base + test_list_exargs\n sim_specs[\"user\"] = {\n \"expect\": exp_list,\n \"nodes_per_worker\": nodes_per_worker,\n \"offset_for_scheduler\": True,\n \"persis_gens\": 0,\n \"tests\": test_list,\n }\n\n # Perform the run\n H, pinfo, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs)\n\n # for run_set in ['mpich', 'openmpi', 'aprun', 'srun', 'jsrun', 'rename_mpich', 'custom']:\n for run_set in [\"mpich\", \"aprun\", \"srun\", \"jsrun\", \"rename_mpich\", \"custom\"]:\n # Could use classes, pref in separate data_set module\n runner_name = None # Use default\n\n if run_set == \"mpich\":\n runner = \"mpich\"\n test_list_exargs = eargs_mpich\n exp_list = exp_mpich\n\n # if run_set == 'openmpi':\n # runner = 'openmpi'\n # test_list_exargs = eargs_openmpi\n # exp_list = exp_openmpi\n\n if run_set == \"aprun\":\n runner = \"aprun\"\n test_list_exargs = eargs_aprun\n exp_list = exp_aprun\n\n if run_set == \"srun\":\n runner = \"srun\"\n test_list_exargs = eargs_srun\n exp_list = exp_srun\n\n if run_set == \"jsrun\":\n runner = \"jsrun\"\n test_list_exargs = eargs_jsrun\n exp_list = exp_jsrun\n\n if run_set == \"rename_mpich\":\n runner = \"mpich\"\n runner_name = \"inst -dummy mpich\"\n test_list_exargs = eargs_mpich\n exp_list = exp_rename_mpich\n\n # Auto-resources will not parse - everything goes in extra_args\n if run_set == \"custom\":\n runner = \"custom\"\n runner_name = \"myrunner\"\n test_list_exargs = eargs_custom\n exp_list = exp_custom\n\n run_tests(runner, runner_name, test_list_exargs, exp_list)\n\n # All asserts are in sim func", "mimetype": "text/plain", "start_char_idx": 10045, "end_char_idx": 12386, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "fdc3c776-9717-4a3e-ad13-7251b25b8196": {"__data__": {"id_": "fdc3c776-9717-4a3e-ad13-7251b25b8196", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_subnode.py", "file_name": "test_mpi_runners_subnode.py", "file_type": "text/x-python", "file_size": 4261, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "31fea909-51a0-4c66-aeb3-1f99739d2473", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_subnode.py", "file_name": "test_mpi_runners_subnode.py", "file_type": "text/x-python", "file_size": 4261, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "862e69aca7ea90d80d661eeb1ff196f19a0673ba8b9aad21b23d4dac64d32d0e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "05ae7e83-0f15-422e-bb82-bf6e29206b25", "node_type": "1", "metadata": {}, "hash": "9727f2ef0bc1b1dd27324588c8ee24197b5d2a7c58d3399c4feb5705312de89e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble testing the MPI Runners command creation with 2 workers per node.\n\nThis test must be run on an even number of workers >= 2 (e.g. odd no. of procs when using mpi4py).\n\nExecute via one of the following commands (e.g. 4 workers):\n mpiexec -np 5 python test_mpi_runners_subnode.py\n python test_mpi_runners_subnode.py --nworkers 4\n python test_mpi_runners_subnode.py --nworkers 4 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\nimport sys\n\nimport numpy as np\n\nfrom libensemble import logger\nfrom libensemble.executors.mpi_executor import MPIExecutor\nfrom libensemble.gen_funcs.sampling import uniform_random_sample as gen_f\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.run_line_check import runline_check as sim_f\nfrom libensemble.tests.regression_tests.common import create_node_file\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\n# logger.set_level(\"DEBUG\") # For testing the test\nlogger.set_level(\"INFO\")\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 3\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n rounds = 1\n sim_app = \"/path/to/fakeapp.x\"\n comms = libE_specs[\"comms\"]\n\n libE_specs[\"dedicated_mode\"] = True\n libE_specs[\"enforce_worker_core_bounds\"] = True\n\n # To allow visual checking - log file not used in test\n log_file = \"ensemble_mpi_runners_subnode_comms_\" + str(comms) + \"_wrks_\" + str(nworkers) + \".log\"\n logger.set_filename(log_file)\n\n nodes_per_worker = 0.5\n\n # For varying size test - relate node count to nworkers\n nsim_workers = nworkers\n\n if not (nsim_workers * nodes_per_worker).is_integer():\n sys.exit(f\"Sim workers ({nsim_workers}) must divide evenly into nodes\")\n\n comms = libE_specs[\"comms\"]\n node_file = \"nodelist_mpi_runners_subnode_comms_\" + str(comms) + \"_wrks_\" + str(nworkers)\n nnodes = int(nsim_workers * nodes_per_worker)\n\n # Mock up system\n custom_resources = {\n \"cores_on_node\": (16, 64), # Tuple (physical cores, logical cores)\n \"node_file\": node_file, # Name of file containing a node-list\n }\n libE_specs[\"resource_info\"] = custom_resources\n\n if is_manager:\n create_node_file(num_nodes=nnodes, name=node_file)\n\n if comms == \"mpi\":\n libE_specs[\"mpi_comm\"].Barrier()\n\n # Create executor and register sim to it.\n exctr = MPIExecutor(custom_info={\"mpi_runner\": \"srun\"})\n exctr.register_app(full_path=sim_app, calc_type=\"sim\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"in\": [],\n \"out\": [(\"x\", float, (n,))],\n \"user\": {\n \"gen_batch_size\": 20,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n exit_criteria = {\"sim_max\": (nsim_workers) * rounds}\n\n # Each worker has 2 nodes.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2961, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "05ae7e83-0f15-422e-bb82-bf6e29206b25": {"__data__": {"id_": "05ae7e83-0f15-422e-bb82-bf6e29206b25", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_subnode.py", "file_name": "test_mpi_runners_subnode.py", "file_type": "text/x-python", "file_size": 4261, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "31fea909-51a0-4c66-aeb3-1f99739d2473", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_subnode.py", "file_name": "test_mpi_runners_subnode.py", "file_type": "text/x-python", "file_size": 4261, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "862e69aca7ea90d80d661eeb1ff196f19a0673ba8b9aad21b23d4dac64d32d0e", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fdc3c776-9717-4a3e-ad13-7251b25b8196", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_subnode.py", "file_name": "test_mpi_runners_subnode.py", "file_type": "text/x-python", "file_size": 4261, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "e821d931763be08b2d47a550e583cfa4674809f249cdef3ab4e3a9f7b3debc33", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "exctr = MPIExecutor(custom_info={\"mpi_runner\": \"srun\"})\n exctr.register_app(full_path=sim_app, calc_type=\"sim\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"in\": [],\n \"out\": [(\"x\", float, (n,))],\n \"user\": {\n \"gen_batch_size\": 20,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n exit_criteria = {\"sim_max\": (nsim_workers) * rounds}\n\n # Each worker has 2 nodes. Basic test list for portable options\n test_list_base = [\n {\"testid\": \"base1\"}, # Give no config and no extra_args\n {\"testid\": \"base2\", \"nprocs\": 5},\n {\"testid\": \"base3\", \"nnodes\": 1},\n {\"testid\": \"base4\", \"ppn\": 6},\n ]\n\n exp_srun = [\n \"srun -w node-1 --ntasks 8 --nodes 1 --ntasks-per-node 8 --exact /path/to/fakeapp.x --testid base1\",\n \"srun -w node-1 --ntasks 5 --nodes 1 --ntasks-per-node 5 --exact /path/to/fakeapp.x --testid base2\",\n \"srun -w node-1 --ntasks 8 --nodes 1 --ntasks-per-node 8 --exact /path/to/fakeapp.x --testid base3\",\n \"srun -w node-1 --ntasks 6 --nodes 1 --ntasks-per-node 6 --exact /path/to/fakeapp.x --testid base4\",\n ]\n\n test_list = test_list_base\n exp_list = exp_srun\n sim_specs[\"user\"] = {\n \"tests\": test_list,\n \"expect\": exp_list,\n \"nodes_per_worker\": nodes_per_worker,\n }\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs)\n\n # All asserts are in sim func", "mimetype": "text/plain", "start_char_idx": 2459, "end_char_idx": 3917, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f85cd28f-93f6-4b9f-894d-dc797bf0bc9a": {"__data__": {"id_": "f85cd28f-93f6-4b9f-894d-dc797bf0bc9a", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_subnode_uneven.py", "file_name": "test_mpi_runners_subnode_uneven.py", "file_type": "text/x-python", "file_size": 5054, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b9b30a3c-3ff7-4420-a40b-94373302a747", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_subnode_uneven.py", "file_name": "test_mpi_runners_subnode_uneven.py", "file_type": "text/x-python", "file_size": 5054, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "f2c114ace0d4fd9418385d8f5201d177df0611756f3e02790ff7ed6f64c41e72", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4c554b82-d34b-41de-9b86-d36708003026", "node_type": "1", "metadata": {}, "hash": "67b96fc192fff73822098847359d8e507b01e1f93c19db35bcb6e304e74ecc42", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble testing the MPI Runners command creation with uneven workers per node.\n\nThis test must be run on an odd number of workers >= 3 and <= 31 (e.g. even no. of procs when using mpi4py).\n\nExecute via one of the following commands (e.g. 5 workers):\n mpiexec -np 6 python test_mpi_runners_subnode_uneven.py\n python test_mpi_runners_subnode_uneven.py --nworkers 5\n python test_mpi_runners_subnode_uneven.py --nworkers 5 --comms tcp\n\"\"\"\n\nimport sys\n\nimport numpy as np\n\nfrom libensemble import logger\nfrom libensemble.executors.mpi_executor import MPIExecutor\nfrom libensemble.gen_funcs.sampling import uniform_random_sample as gen_f\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.run_line_check import runline_check_by_worker as sim_f\nfrom libensemble.tests.regression_tests.common import create_node_file\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\n# logger.set_level(\"DEBUG\") # For testing the test\nlogger.set_level(\"INFO\")\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 4 6\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n rounds = 1\n sim_app = \"/path/to/fakeapp.x\"\n comms = libE_specs[\"comms\"]\n\n # To allow visual checking - log file not used in test\n log_file = \"ensemble_mpi_runners_subnode_uneven_comms_\" + str(comms) + \"_wrks_\" + str(nworkers) + \".log\"\n logger.set_filename(log_file)\n\n # For varying size test - relate node count to nworkers\n nsim_workers = nworkers\n\n if nsim_workers % 2 == 0:\n sys.exit(f\"This test must be run with an odd of workers >= 3 and <= 31. There are {nsim_workers} workers.\")\n\n comms = libE_specs[\"comms\"]\n node_file = \"nodelist_mpi_runners_subnode_uneven_comms_\" + str(comms) + \"_wrks_\" + str(nworkers)\n nnodes = 2\n\n if is_manager:\n create_node_file(num_nodes=nnodes, name=node_file)\n\n if comms == \"mpi\":\n libE_specs[\"mpi_comm\"].Barrier()\n\n # Mock up system\n mpi_customizer = {\n \"mpi_runner\": \"srun\", # Select runner: mpich, openmpi, aprun, srun, jsrun\n \"runner_name\": \"srun\",\n } # Runner name: Replaces run command if not None\n\n custom_resources = {\n \"cores_on_node\": (16, 64), # Tuple (physical cores, logical cores)\n \"node_file\": node_file,\n } # Name of file containing a node-list\n\n libE_specs[\"dedicated_mode\"] = True\n libE_specs[\"enforce_worker_core_bounds\"] = True\n libE_specs[\"resource_info\"] = custom_resources\n\n # Create executor and register sim to it.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2558, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "4c554b82-d34b-41de-9b86-d36708003026": {"__data__": {"id_": "4c554b82-d34b-41de-9b86-d36708003026", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_subnode_uneven.py", "file_name": "test_mpi_runners_subnode_uneven.py", "file_type": "text/x-python", "file_size": 5054, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b9b30a3c-3ff7-4420-a40b-94373302a747", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_subnode_uneven.py", "file_name": "test_mpi_runners_subnode_uneven.py", "file_type": "text/x-python", "file_size": 5054, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "f2c114ace0d4fd9418385d8f5201d177df0611756f3e02790ff7ed6f64c41e72", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f85cd28f-93f6-4b9f-894d-dc797bf0bc9a", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_subnode_uneven.py", "file_name": "test_mpi_runners_subnode_uneven.py", "file_type": "text/x-python", "file_size": 5054, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "9c6c56a9abc2dfb21891d5fae95dc3356bf0cfe2ef198172d5fd95893ec696ce", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "exctr = MPIExecutor(custom_info=mpi_customizer)\n exctr.register_app(full_path=sim_app, calc_type=\"sim\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"in\": [],\n \"out\": [(\"x\", float, (n,))],\n \"user\": {\n \"gen_batch_size\": 20,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n exit_criteria = {\"sim_max\": (nsim_workers) * rounds}\n\n test_list_base = [\n {\"testid\": \"base1\"}, # Give no config and no extra_args\n ]\n\n # Example: On 5 workers, runlines should be ...\n # [w1]: srun -w node-1 --ntasks 5 --nodes 1 --ntasks-per-node 5 --exact /path/to/fakeapp.x --testid base1\n # [w2]: srun -w node-1 --ntasks 5 --nodes 1 --ntasks-per-node 5 --exact /path/to/fakeapp.x --testid base1\n # [w3]: srun -w node-1 --ntasks 5 --nodes 1 --ntasks-per-node 5 --exact /path/to/fakeapp.x --testid base1\n # [w4]: srun -w node-2 --ntasks 8 --nodes 1 --ntasks-per-node 8 --exact /path/to/fakeapp.x --testid base1\n # [w5]: srun -w node-2 --ntasks 8 --nodes 1 --ntasks-per-node 8 --exact /path/to/fakeapp.x --testid base1\n\n srun_p1 = \"srun -w \"\n srun_p2 = \" --ntasks \"\n srun_p3 = \" --nodes 1 --ntasks-per-node \"\n srun_p4 = \" --exact /path/to/fakeapp.x --testid base1\"\n\n exp_tasks = []\n exp_srun = []\n\n # Hard coding an example for 2 nodes to avoid replicating general logic in libEnsemble.\n low_wpn = nsim_workers // nnodes\n high_wpn = nsim_workers // nnodes + 1\n\n for i in range(nsim_workers):\n if i < (nsim_workers // nnodes + 1):\n nodename = \"node-1\"\n ntasks = 16 // high_wpn\n else:\n nodename = \"node-2\"\n ntasks = 16 // low_wpn\n exp_tasks.append(ntasks)\n exp_srun.append(srun_p1 + str(nodename) + srun_p2 + str(ntasks) + srun_p3 + str(ntasks) + srun_p4)\n\n test_list = test_list_base\n exp_list = exp_srun\n sim_specs[\"user\"] = {\n \"tests\": test_list,\n \"expect\": exp_list,\n \"offset_for_schedular\": True,\n }\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs)\n\n # All asserts are in sim func", "mimetype": "text/plain", "start_char_idx": 2560, "end_char_idx": 4629, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "2a0911c1-39db-45ed-a185-e1304b080fa7": {"__data__": {"id_": "2a0911c1-39db-45ed-a185-e1304b080fa7", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_supernode_uneven.py", "file_name": "test_mpi_runners_supernode_uneven.py", "file_type": "text/x-python", "file_size": 4619, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0b17ab31-7209-4540-aa39-5faeded85a12", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_supernode_uneven.py", "file_name": "test_mpi_runners_supernode_uneven.py", "file_type": "text/x-python", "file_size": 4619, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "63b6f7ec0fe69287a32f0845009595d10999132e0896d114267e66cdc41662d5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "87ac740c-397a-4972-ae17-ffa91c933379", "node_type": "1", "metadata": {}, "hash": "67e7e30af43ea43693fd7ba65be4787d9da6275abf6d556428d9cee9551d1f1b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble testing the MPI Runners command creation with multiple and uneven nodes per worker.\n\nThis test must be run on a number of workers >= 2.\n\nExecute via one of the following commands (e.g. 5 workers):\n mpiexec -np 6 python test_mpi_runners_supernode_uneven.py\n python test_mpi_runners_supernode_uneven.py --nworkers 5\n\"\"\"\n\nimport numpy as np\n\nfrom libensemble import logger\nfrom libensemble.executors.mpi_executor import MPIExecutor\nfrom libensemble.gen_funcs.sampling import uniform_random_sample as gen_f\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.run_line_check import runline_check_by_worker as sim_f\nfrom libensemble.tests.regression_tests.common import create_node_file\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\n# logger.set_level(\"DEBUG\") # For testing the test\nlogger.set_level(\"INFO\")\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 3 4 5\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n rounds = 1\n sim_app = \"/path/to/fakeapp.x\"\n comms = libE_specs[\"comms\"]\n\n libE_specs[\"dedicated_mode\"] = True\n libE_specs[\"enforce_worker_core_bounds\"] = True\n\n # To allow visual checking - log file not used in test\n log_file = \"ensemble_mpi_runners_supernode_uneven_comms_\" + str(comms) + \"_wrks_\" + str(nworkers) + \".log\"\n logger.set_filename(log_file)\n\n nodes_per_worker = 2.5\n\n # For varying size test - relate node count to nworkers\n nsim_workers = nworkers\n comms = libE_specs[\"comms\"]\n node_file = \"nodelist_mpi_runners_supernode_uneven_comms_\" + str(comms) + \"_wrks_\" + str(nworkers)\n nnodes = int(nsim_workers * nodes_per_worker)\n\n # Mock up system\n custom_resources = {\n \"cores_on_node\": (16, 64), # Tuple (physical cores, logical cores)\n \"node_file\": node_file,\n } # Name of file containing a node-list\n libE_specs[\"resource_info\"] = custom_resources\n\n if is_manager:\n create_node_file(num_nodes=nnodes, name=node_file)\n\n if comms == \"mpi\":\n libE_specs[\"mpi_comm\"].Barrier()\n\n # Create executor and register sim to it.\n exctr = MPIExecutor(custom_info={\"mpi_runner\": \"srun\"})\n exctr.register_app(full_path=sim_app, calc_type=\"sim\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"in\": [],\n \"out\": [(\"x\", float, (n,))],\n \"user\": {\n \"gen_batch_size\": 20,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n exit_criteria = {\"sim_max\": (nsim_workers) * rounds}\n\n # Each worker has either 3 or 2 nodes. Basic test list for portable options\n test_list_base = [\n {\"testid\": \"base1\"}, # Give no config and no extra_args\n ]\n\n # Example: On 2 workers, runlines should be ...\n # (one workers has 3 nodes, the other 2 - does not split 2.5 nodes each).", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2952, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "87ac740c-397a-4972-ae17-ffa91c933379": {"__data__": {"id_": "87ac740c-397a-4972-ae17-ffa91c933379", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_supernode_uneven.py", "file_name": "test_mpi_runners_supernode_uneven.py", "file_type": "text/x-python", "file_size": 4619, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0b17ab31-7209-4540-aa39-5faeded85a12", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_supernode_uneven.py", "file_name": "test_mpi_runners_supernode_uneven.py", "file_type": "text/x-python", "file_size": 4619, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "63b6f7ec0fe69287a32f0845009595d10999132e0896d114267e66cdc41662d5", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2a0911c1-39db-45ed-a185-e1304b080fa7", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_supernode_uneven.py", "file_name": "test_mpi_runners_supernode_uneven.py", "file_type": "text/x-python", "file_size": 4619, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "ab20b1ceede6159adca08f7f057ab24489bb27999ecbb96d41ffb50bea7a8b5b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Basic test list for portable options\n test_list_base = [\n {\"testid\": \"base1\"}, # Give no config and no extra_args\n ]\n\n # Example: On 2 workers, runlines should be ...\n # (one workers has 3 nodes, the other 2 - does not split 2.5 nodes each).\n # [w1]: srun -w node-1,node-2,node-3 --ntasks 48 --nodes 3 --ntasks-per-node 16 /path/to/fakeapp.x --testid base1\n # [w2]: srun -w node-4,node-5 --ntasks 32 --nodes 2 --ntasks-per-node 16 /path/to/fakeapp.x --testid base1\n\n srun_p1 = \"srun -w \"\n srun_p2 = \" --ntasks \"\n srun_p3 = \" --nodes \"\n srun_p4 = \" --ntasks-per-node 16 --exact /path/to/fakeapp.x --testid base1\"\n\n exp_tasks = []\n exp_srun = []\n\n # Hard coding an example for 2 nodes to avoid replicating general logic in libEnsemble.\n low_npw = nnodes // nsim_workers\n high_npw = nnodes // nsim_workers + 1\n\n nodelist = []\n for i in range(1, nnodes + 1):\n nodelist.append(\"node-\" + str(i))\n\n inode = 0\n for i in range(nsim_workers):\n if i < (nsim_workers // 2):\n npw = high_npw\n else:\n npw = low_npw\n nodename = \",\".join(nodelist[inode : inode + npw])\n inode += npw\n ntasks = 16 * npw\n loc_nodes = npw\n exp_tasks.append(ntasks)\n exp_srun.append(srun_p1 + str(nodename) + srun_p2 + str(ntasks) + srun_p3 + str(loc_nodes) + srun_p4)\n\n test_list = test_list_base\n exp_list = exp_srun\n sim_specs[\"user\"] = {\n \"tests\": test_list,\n \"expect\": exp_list,\n }\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs)\n\n # All asserts are in sim func", "mimetype": "text/plain", "start_char_idx": 2711, "end_char_idx": 4213, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "dc7f4e1e-9e04-4862-a21d-e7ac3655335b": {"__data__": {"id_": "dc7f4e1e-9e04-4862-a21d-e7ac3655335b", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_zrw_subnode_uneven.py", "file_name": "test_mpi_runners_zrw_subnode_uneven.py", "file_type": "text/x-python", "file_size": 6258, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4fd39138-4ea4-44d3-96aa-67dd5027e4de", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_zrw_subnode_uneven.py", "file_name": "test_mpi_runners_zrw_subnode_uneven.py", "file_type": "text/x-python", "file_size": 6258, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "ee807ef0bf5850b47b69b9856ef96821c89745de7d735d2d5a976862abe7ecea", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "18d077f0-bd92-406b-9717-07e00c99e2f5", "node_type": "1", "metadata": {}, "hash": "7d5b0b9061b1f8a925dd67c3359ec941005899f9c90c78a86216f91491e5744d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble testing the MPI Runners command creation with uneven workers per node.\n\nThis test must be run on an even number of workers >= 4 and <= 32 (e.g. odd no. of procs when using mpi4py).\n\nExecute via one of the following commands (e.g. 6 workers - one is zero resource):\n mpiexec -np 7 python test_mpi_runners_zrw_subnode_uneven.py\n python test_mpi_runners_zrw_subnode_uneven.py --nworkers 6\n python test_mpi_runners_zrw_subnode_uneven.py --nworkers 6 --comms tcp\n\nThe resource sets are split unevenly between the two nodes (e.g. 3 and 2).\n\nTwo tests are run. In the first, num_resource_sets is used, and thus the dynamic scheduler.\nThis will fill node two slots first as there are fewer resource sets on node two, and the\nscheduler will preference a smaller space for assigning the task. On the second test,\nzero_resource_workers are used, and the static scheduler will fill node one first.\n\"\"\"\n\nimport sys\n\nimport numpy as np\n\nfrom libensemble import logger\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.executors.mpi_executor import MPIExecutor\nfrom libensemble.gen_funcs.persistent_sampling import persistent_uniform as gen_f\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.run_line_check import runline_check_by_worker as sim_f\nfrom libensemble.tests.regression_tests.common import create_node_file\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\n# logger.set_level(\"DEBUG\") # For testing the test\nlogger.set_level(\"INFO\")\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 5 7\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n rounds = 1\n sim_app = \"/path/to/fakeapp.x\"\n comms = libE_specs[\"comms\"]\n\n libE_specs[\"dedicated_mode\"] = True\n libE_specs[\"enforce_worker_core_bounds\"] = True\n\n # To allow visual checking - log file not used in test\n log_file = \"ensemble_mpi_runners_zrw_subnode_uneven_comms_\" + str(comms) + \"_wrks_\" + str(nworkers) + \".log\"\n logger.set_filename(log_file)\n\n # For varying size test - relate node count to nworkers\n n_gens = 1\n nsim_workers = nworkers - n_gens\n\n if nsim_workers % 2 == 0:\n sys.exit(\n \"This test must be run with an odd number of sim workers >= 3 and <= 31. There are {} sim workers.\".format(\n nsim_workers\n )\n )\n\n comms = libE_specs[\"comms\"]\n node_file = \"nodelist_mpi_runners_zrw_subnode_uneven_comms_\" + str(comms) + \"_wrks_\" + str(nworkers)\n nnodes = 2\n\n # Mock up system\n custom_resources = {\n \"cores_on_node\": (16, 64), # Tuple (physical cores, logical cores)\n \"node_file\": node_file,\n } # Name of file containing a node-list\n libE_specs[\"resource_info\"] = custom_resources\n\n if is_manager:\n create_node_file(num_nodes=nnodes, name=node_file)\n\n if comms == \"mpi\":\n libE_specs[\"mpi_comm\"].Barrier()\n\n # Create executor and register sim to it.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3008, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "18d077f0-bd92-406b-9717-07e00c99e2f5": {"__data__": {"id_": "18d077f0-bd92-406b-9717-07e00c99e2f5", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_zrw_subnode_uneven.py", "file_name": "test_mpi_runners_zrw_subnode_uneven.py", "file_type": "text/x-python", "file_size": 6258, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4fd39138-4ea4-44d3-96aa-67dd5027e4de", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_zrw_subnode_uneven.py", "file_name": "test_mpi_runners_zrw_subnode_uneven.py", "file_type": "text/x-python", "file_size": 6258, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "ee807ef0bf5850b47b69b9856ef96821c89745de7d735d2d5a976862abe7ecea", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "dc7f4e1e-9e04-4862-a21d-e7ac3655335b", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_zrw_subnode_uneven.py", "file_name": "test_mpi_runners_zrw_subnode_uneven.py", "file_type": "text/x-python", "file_size": 6258, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "6a8e9eabe27dbbdb0780678e22c04331329b8ebaba0977b8f6be6c3331569102", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "eb8666d8-31db-4344-b9a9-a36951da1cb4", "node_type": "1", "metadata": {}, "hash": "b0605d84897440950a26af8cd747b0aa5c01eed0741539e4048a2d30bd730ddb", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "There are {} sim workers.\".format(\n nsim_workers\n )\n )\n\n comms = libE_specs[\"comms\"]\n node_file = \"nodelist_mpi_runners_zrw_subnode_uneven_comms_\" + str(comms) + \"_wrks_\" + str(nworkers)\n nnodes = 2\n\n # Mock up system\n custom_resources = {\n \"cores_on_node\": (16, 64), # Tuple (physical cores, logical cores)\n \"node_file\": node_file,\n } # Name of file containing a node-list\n libE_specs[\"resource_info\"] = custom_resources\n\n if is_manager:\n create_node_file(num_nodes=nnodes, name=node_file)\n\n if comms == \"mpi\":\n libE_specs[\"mpi_comm\"].Barrier()\n\n # Create executor and register sim to it.\n exctr = MPIExecutor(custom_info={\"mpi_runner\": \"srun\"})\n exctr.register_app(full_path=sim_app, calc_type=\"sim\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"in\": [],\n \"out\": [(\"x\", float, (n,))],\n \"user\": {\n \"initial_batch_size\": 20,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n alloc_specs = {\"alloc_f\": alloc_f}\n exit_criteria = {\"sim_max\": (nsim_workers) * rounds}\n\n test_list_base = [\n {\"testid\": \"base1\"}, # Give no config and no extra_args\n ]\n\n # Example: On 5 workers, runlines should be ...\n # [w1]: Gen only\n # [w2]: srun -w node-1 --ntasks 5 --nodes 1 --ntasks-per-node 5 /path/to/fakeapp.x --testid base1\n # [w3]: srun -w node-1 --ntasks 5 --nodes 1 --ntasks-per-node 5 /path/to/fakeapp.x --testid base1\n # [w4]: srun -w node-1 --ntasks 5 --nodes 1 --ntasks-per-node 5 /path/to/fakeapp.x --testid base1\n # [w5]: srun -w node-2 --ntasks 8 --nodes 1 --ntasks-per-node 8 /path/to/fakeapp.x --testid base1\n # [w6]: srun -w node-2 --ntasks 8 --nodes 1 --ntasks-per-node 8 /path/to/fakeapp.x --testid base1\n\n srun_p1 = \"srun -w \"\n srun_p2 = \" --ntasks \"\n srun_p3 = \" --nodes 1 --ntasks-per-node \"\n srun_p4 = \" --exact /path/to/fakeapp.x --testid base1\"\n\n exp_tasks = []\n exp_srun = []\n\n # Hard coding an example for 2 nodes to avoid replicating general logic in libEnsemble.", "mimetype": "text/plain", "start_char_idx": 2419, "end_char_idx": 4376, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "eb8666d8-31db-4344-b9a9-a36951da1cb4": {"__data__": {"id_": "eb8666d8-31db-4344-b9a9-a36951da1cb4", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_zrw_subnode_uneven.py", "file_name": "test_mpi_runners_zrw_subnode_uneven.py", "file_type": "text/x-python", "file_size": 6258, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4fd39138-4ea4-44d3-96aa-67dd5027e4de", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_zrw_subnode_uneven.py", "file_name": "test_mpi_runners_zrw_subnode_uneven.py", "file_type": "text/x-python", "file_size": 6258, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "ee807ef0bf5850b47b69b9856ef96821c89745de7d735d2d5a976862abe7ecea", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "18d077f0-bd92-406b-9717-07e00c99e2f5", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_zrw_subnode_uneven.py", "file_name": "test_mpi_runners_zrw_subnode_uneven.py", "file_type": "text/x-python", "file_size": 6258, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "ce278f812d7d72e5623d894e0f91d454ce7c026dc5aed7c105fa02657e88913c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "low_wpn = nsim_workers // nnodes\n high_wpn = nsim_workers // nnodes + 1\n\n for i in range(nsim_workers):\n if i < (nsim_workers // nnodes + 1):\n nodename = \"node-1\"\n ntasks = 16 // high_wpn\n else:\n nodename = \"node-2\"\n ntasks = 16 // low_wpn\n exp_tasks.append(ntasks)\n exp_srun.append(srun_p1 + str(nodename) + srun_p2 + str(ntasks) + srun_p3 + str(ntasks) + srun_p4)\n\n test_list = test_list_base\n exp_list = exp_srun\n sim_specs[\"user\"] = {\n \"tests\": test_list,\n \"expect\": exp_list,\n \"persis_gens\": n_gens,\n }\n\n iterations = 2\n for prob_id in range(iterations):\n if prob_id == 0:\n # Uses dynamic scheduler - will find node 2 slots first (as fewer)\n libE_specs[\"num_resource_sets\"] = nworkers - 1 # Any worker can be the gen\n sim_specs[\"user\"][\"offset_for_scheduler\"] = True # Changes expected values\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n else:\n # Uses static scheduler - will find node 1 slots first\n del libE_specs[\"num_resource_sets\"]\n libE_specs[\"zero_resource_workers\"] = [1] # Gen must be worker 1\n sim_specs[\"user\"][\"offset_for_scheduler\"] = False\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n # Run-line asserts are in sim func", "mimetype": "text/plain", "start_char_idx": 4378, "end_char_idx": 5671, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "4ac237ed-668d-4a47-832f-aa9f50b6f065": {"__data__": {"id_": "4ac237ed-668d-4a47-832f-aa9f50b6f065", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_zrw_supernode_uneven.py", "file_name": "test_mpi_runners_zrw_supernode_uneven.py", "file_type": "text/x-python", "file_size": 5002, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "468cd467-295d-490f-84d0-41a6ae05388d", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_zrw_supernode_uneven.py", "file_name": "test_mpi_runners_zrw_supernode_uneven.py", "file_type": "text/x-python", "file_size": 5002, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "2d5e8c99de5e162fdec832ed4b2223a8efe9781ed4911834057ee86242da6661", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a31e9887-127d-4e57-9db5-aedc7c2670e8", "node_type": "1", "metadata": {}, "hash": "7b08a7c0ca989b5fe1ccd51286df8384d1e93758efd2b4530a87ce6f69d69dee", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble testing the MPI Runners command creation with multiple and uneven nodes per worker.\n\nThis test must be run on a number of workers >= 3.\n\nExecute via one of the following commands (e.g. 6 workers - one is zero resource):\n mpiexec -np 7 python test_mpi_runners_zrw_supernode_uneven.py\n python test_mpi_runners_zrw_supernode_uneven.py --nworkers 6\n\"\"\"\n\nimport numpy as np\n\nfrom libensemble import logger\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.executors.mpi_executor import MPIExecutor\nfrom libensemble.gen_funcs.persistent_sampling import persistent_uniform as gen_f\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.run_line_check import runline_check_by_worker as sim_f\nfrom libensemble.tests.regression_tests.common import create_node_file\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\n# logger.set_level(\"DEBUG\") # For testing the test\nlogger.set_level(\"INFO\")\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 4 5 6\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n rounds = 1\n sim_app = \"/path/to/fakeapp.x\"\n comms = libE_specs[\"comms\"]\n\n libE_specs[\"zero_resource_workers\"] = [1]\n libE_specs[\"dedicated_mode\"] = True\n libE_specs[\"enforce_worker_core_bounds\"] = True\n\n # To allow visual checking - log file not used in test\n log_file = \"ensemble_mpi_runners_zrw_supernode_uneven_comms_\" + str(comms) + \"_wrks_\" + str(nworkers) + \".log\"\n logger.set_filename(log_file)\n\n nodes_per_worker = 2.5\n\n # For varying size test - relate node count to nworkers\n in_place = libE_specs[\"zero_resource_workers\"]\n n_gens = len(in_place)\n nsim_workers = nworkers - n_gens\n comms = libE_specs[\"comms\"]\n node_file = \"nodelist_mpi_runners_zrw_supernode_uneven_comms_\" + str(comms) + \"_wrks_\" + str(nworkers)\n nnodes = int(nsim_workers * nodes_per_worker)\n\n # Mock up system\n custom_resources = {\n \"cores_on_node\": (16, 64), # Tuple (physical cores, logical cores)\n \"node_file\": node_file, # Name of file containing a node-list\n }\n libE_specs[\"resource_info\"] = custom_resources\n\n if is_manager:\n create_node_file(num_nodes=nnodes, name=node_file)\n\n if comms == \"mpi\":\n libE_specs[\"mpi_comm\"].Barrier()\n\n # Create executor and register sim to it.\n exctr = MPIExecutor(custom_info={\"mpi_runner\": \"srun\"})\n exctr.register_app(full_path=sim_app, calc_type=\"sim\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"in\": [],\n \"out\": [(\"x\", float, (n,))],\n \"user\": {\n \"initial_batch_size\": 20,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n alloc_specs = {\"alloc_f\": alloc_f}\n persis_info = add_unique_random_streams({}, nworkers + 1)\n exit_criteria = {\"sim_max\": (nsim_workers) * rounds}\n\n # Each worker has either 3 or 2 nodes. Basic test list for portable options\n test_list_base = [\n {\"testid\": \"base1\"}, # Give no config and no extra_args\n ]\n\n # Example: On 3 workers, runlines should be ...\n # (one workers has 3 nodes, the other 2 - does not split 2.5 nodes each).", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3253, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a31e9887-127d-4e57-9db5-aedc7c2670e8": {"__data__": {"id_": "a31e9887-127d-4e57-9db5-aedc7c2670e8", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_zrw_supernode_uneven.py", "file_name": "test_mpi_runners_zrw_supernode_uneven.py", "file_type": "text/x-python", "file_size": 5002, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "468cd467-295d-490f-84d0-41a6ae05388d", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_zrw_supernode_uneven.py", "file_name": "test_mpi_runners_zrw_supernode_uneven.py", "file_type": "text/x-python", "file_size": 5002, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "2d5e8c99de5e162fdec832ed4b2223a8efe9781ed4911834057ee86242da6661", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4ac237ed-668d-4a47-832f-aa9f50b6f065", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_runners_zrw_supernode_uneven.py", "file_name": "test_mpi_runners_zrw_supernode_uneven.py", "file_type": "text/x-python", "file_size": 5002, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "eb115c20dc3d2ac4d01f8e975774e8ffbd5aa4bea30b70fe3458b1b5c6829b33", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Basic test list for portable options\n test_list_base = [\n {\"testid\": \"base1\"}, # Give no config and no extra_args\n ]\n\n # Example: On 3 workers, runlines should be ...\n # (one workers has 3 nodes, the other 2 - does not split 2.5 nodes each).\n # [w1]: Gen only\n # [w2]: srun -w node-1,node-2,node-3 --ntasks 48 --nodes 3 --ntasks-per-node 16 --exact /path/to/fakeapp.x --testid base1\n # [w3]: srun -w node-4,node-5 --ntasks 32 --nodes 2 --ntasks-per-node 16 --exact /path/to/fakeapp.x --testid base1\n\n srun_p1 = \"srun -w \"\n srun_p2 = \" --ntasks \"\n srun_p3 = \" --nodes \"\n srun_p4 = \" --ntasks-per-node 16 --exact /path/to/fakeapp.x --testid base1\"\n\n exp_tasks = []\n exp_srun = []\n\n # Hard coding an example for 2 nodes to avoid replicating general logic in libEnsemble.\n low_npw = nnodes // nsim_workers\n high_npw = nnodes // nsim_workers + 1\n\n nodelist = []\n for i in range(1, nnodes + 1):\n nodelist.append(\"node-\" + str(i))\n\n inode = 0\n for i in range(nsim_workers):\n if i < (nsim_workers // 2):\n npw = high_npw\n else:\n npw = low_npw\n nodename = \",\".join(nodelist[inode : inode + npw])\n inode += npw\n ntasks = 16 * npw\n loc_nodes = npw\n exp_tasks.append(ntasks)\n exp_srun.append(srun_p1 + str(nodename) + srun_p2 + str(ntasks) + srun_p3 + str(loc_nodes) + srun_p4)\n\n test_list = test_list_base\n exp_list = exp_srun\n sim_specs[\"user\"] = {\n \"tests\": test_list,\n \"expect\": exp_list,\n \"persis_gens\": n_gens,\n }\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n # All asserts are in sim func", "mimetype": "text/plain", "start_char_idx": 3012, "end_char_idx": 4574, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d5d066eb-767b-47a0-9738-06dccbf0bd9b": {"__data__": {"id_": "d5d066eb-767b-47a0-9738-06dccbf0bd9b", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_warning.py", "file_name": "test_mpi_warning.py", "file_type": "text/x-python", "file_size": 1691, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "db773bd3-709e-4c14-9500-84886b4af7ef", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_mpi_warning.py", "file_name": "test_mpi_warning.py", "file_type": "text/x-python", "file_size": 1691, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "590049a5dc9b8ec10c2127e598e8b1281d50157a14d81fa4b139959002f9715d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with Latin hypercube sampling and check no warning.\n\nExecute using MPI (e.g. 3 workers):\n mpiexec -np 4 python test_mpi_warning.py\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi\n# TESTSUITE_NPROCS: 4\n\nimport os\nimport time\n\nimport numpy as np\n\nfrom libensemble import Ensemble, logger\nfrom libensemble.gen_funcs.sampling import latin_hypercube_sample as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.sim_funcs.simple_sim import norm_eval as sim_f\nfrom libensemble.specs import ExitCriteria, GenSpecs, SimSpecs\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n log_file = \"ensemble_check_warning.log\"\n logger.set_level(\"MANAGER_WARNING\")\n logger.set_filename(log_file)\n\n sampling = Ensemble()\n sampling.libE_specs.save_every_k_sims = 100\n sampling.sim_specs = SimSpecs(sim_f=sim_f)\n sampling.gen_specs = GenSpecs(\n gen_f=gen_f,\n outputs=[(\"x\", float, 2)],\n user={\n \"gen_batch_size\": 100,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n )\n\n sampling.exit_criteria = ExitCriteria(sim_max=100)\n sampling.add_random_streams()\n\n if sampling.is_manager:\n if os.path.exists(log_file):\n os.remove(log_file)\n\n sampling.run()\n if sampling.is_manager:\n print(\"len:\", len(sampling.H))\n time.sleep(0.2)\n assert os.path.exists(log_file)\n assert os.stat(log_file).st_size == 0, \"Unexpected warning\"", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1542, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "5ee1f7c8-41a4-4fcb-b38b-2fee68dd9d17": {"__data__": {"id_": "5ee1f7c8-41a4-4fcb-b38b-2fee68dd9d17", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_new_field.py", "file_name": "test_new_field.py", "file_type": "text/x-python", "file_size": 1758, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f2a4cbdd-886c-4712-9fb4-82aeac7167e5", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_new_field.py", "file_name": "test_new_field.py", "file_type": "text/x-python", "file_size": 1758, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "cec9874dffa07bf67ef973d59ee8c09b45823aa73ef0bea24886f89f5e24180c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with Latin hypercube sampling on a simple 1D problem\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_1d_sampling.py\n python test_1d_sampling.py --nworkers 3\n python test_1d_sampling.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 2 4\n\nimport numpy as np\n\nfrom libensemble.gen_funcs.sampling import latin_hypercube_sample as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\ndef sim_f(In):\n Out = np.zeros(1, dtype=[(\"f\", float), (\"N\", int)])\n Out[\"f\"] = np.linalg.norm(In)\n Out[\"N\"] = 123\n return Out\n\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"out\": [(\"x\", float, (1,))],\n \"user\": {\n \"gen_batch_size\": 500,\n \"lb\": np.array([-3]),\n \"ub\": np.array([3]),\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1, seed=1234)\n\n exit_criteria = {\"gen_max\": 501}\n\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs)\n\n if is_manager:\n assert len(H) >= 501\n assert \"N\" in H.dtype.names, \"New datatype not added to history\"\n print(\"\\nlibEnsemble with random sampling has generated enough points\")\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1600, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "9371f1cd-30e4-4b48-9fda-ef276bac3dea": {"__data__": {"id_": "9371f1cd-30e4-4b48-9fda-ef276bac3dea", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_optimas_ax.py", "file_name": "test_optimas_ax.py", "file_type": "text/x-python", "file_size": 3159, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "491475cf-cacd-404f-b002-2df7e43d431c", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_optimas_ax.py", "file_name": "test_optimas_ax.py", "file_type": "text/x-python", "file_size": 3159, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "fc315dd828ad189c4cb7bdf69e3872f079ef4f6415cb52ac59bd34a69dd5fc18", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests libEnsemble with Optimas AxGenerators\n\n*****curerntly using same sim as xopt - seeing if just swap out gens*****\n\n*****currently fixing nworkers to batch_size*****\n\nExecute via one of the following commands (e.g. 4 workers):\n mpiexec -np 5 python test_xopt_EI.py\n python test_xopt_EI.py -n 4\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 4 as the generator is on the manager.\n\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 4\n# TESTSUITE_EXTRA: true\n\nimport numpy as np\nfrom gest_api.vocs import VOCS\n\nfrom optimas.core import Task\nfrom optimas.generators import (\n AxSingleFidelityGenerator,\n AxMultiFidelityGenerator,\n AxMultitaskGenerator,\n AxClientGenerator,\n)\n\nfrom libensemble import Ensemble\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.specs import AllocSpecs, ExitCriteria, GenSpecs, LibeSpecs, SimSpecs\n\n# SH TODO - should check constant1 is present\n# Adapted from Xopt/xopt/resources/testing.py\ndef xtest_sim(H, persis_info, sim_specs, _):\n \"\"\"\n Simple sim function that takes x1, x2, constant1 from H and returns y1, c1.\n Logic: y1 = x2, c1 = x1\n \"\"\"\n batch = len(H)\n H_o = np.zeros(batch, dtype=sim_specs[\"out\"])\n\n for i in range(batch):\n x1 = H[\"x1\"][i]\n x2 = H[\"x2\"][i]\n # constant1 is available but not used in the calculation\n\n H_o[\"y1\"][i] = x2\n H_o[\"c1\"][i] = x1\n\n return H_o, persis_info\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n\n n = 2\n batch_size = 4\n\n libE_specs = LibeSpecs(gen_on_manager=True, nworkers=batch_size)\n\n vocs = VOCS(\n variables={\"x1\": [0, 1.0], \"x2\": [0, 10.0],\n \"trial_type\": {\"task_1\", \"task_2\"}\n },\n objectives={\"y1\": \"MINIMIZE\"},\n constraints={\"c1\": [\"GREATER_THAN\", 0.5]},\n constants={\"constant1\": 1.0},\n )\n\n # **TODO first 2 get the sim_id issue (fixed on other branch - but may want to change to not use _id..)\n # gen = AxSingleFidelityGenerator(vocs=vocs)\n # gen = AxMultiFidelityGenerator(vocs=vocs)\n\n task1 = Task(\"task_1\", n_init=2, n_opt=1)\n task2 = Task(\"task_2\", n_init=5, n_opt=3)\n gen = AxMultitaskGenerator(vocs=vocs, hifi_task=task1, lofi_task=task2)\n\n gen_specs = GenSpecs(\n generator=gen,\n batch_size=batch_size,\n vocs=vocs,\n )\n\n sim_specs = SimSpecs(\n sim_f=xtest_sim,\n vocs=vocs,\n )\n\n alloc_specs = AllocSpecs(alloc_f=alloc_f)\n exit_criteria = ExitCriteria(sim_max=20)\n\n workflow = Ensemble(\n libE_specs=libE_specs,\n sim_specs=sim_specs,\n alloc_specs=alloc_specs,\n gen_specs=gen_specs,\n exit_criteria=exit_criteria,\n )\n\n H, _, _ = workflow.run()\n\n # Perform the run\n if workflow.is_manager:\n print(f\"Completed {len(H)} simulations\")\n assert np.array_equal(H[\"y1\"], H[\"x2\"])\n assert np.array_equal(H[\"c1\"], H[\"x1\"])", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2876, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "cdd8d030-838b-43a5-aedb-989e9a835227": {"__data__": {"id_": "cdd8d030-838b-43a5-aedb-989e9a835227", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_optimas_grid_sample.py", "file_name": "test_optimas_grid_sample.py", "file_type": "text/x-python", "file_size": 3187, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "76091345-5fb6-4607-bb62-58dcf248517c", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_optimas_grid_sample.py", "file_name": "test_optimas_grid_sample.py", "file_type": "text/x-python", "file_size": 3187, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "627644d2a7f29ff39184a6a3da92187a76e64716d2223cdf62419524e3d00cba", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests libEnsemble with Optimas GridSamplingGenerator\n\n*****currently fixing nworkers to batch_size*****\n\nFrom Optimas test test_grid_sampling.py\n\nExecute via one of the following commands (e.g. 4 workers):\n mpiexec -np 5 python test_optimas_grid_sample.py\n python test_optimas_grid_sample.py -n 4\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 4 as the generator is on the manager.\n\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 4\n# TESTSUITE_EXTRA: true\n\nimport numpy as np\nfrom gest_api.vocs import VOCS\nfrom optimas.generators import GridSamplingGenerator\n\nfrom libensemble import Ensemble\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.specs import AllocSpecs, ExitCriteria, GenSpecs, LibeSpecs, SimSpecs\n\ndef eval_func(input_params: dict):\n \"\"\"Evaluation function for single-fidelity test\"\"\"\n x0 = input_params[\"x0\"]\n x1 = input_params[\"x1\"]\n result = -(x0 + 10 * np.cos(x0)) * (x1 + 5 * np.cos(x1))\n return {\"f\": result}\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n\n n = 2\n batch_size = 4\n\n libE_specs = LibeSpecs(gen_on_manager=True, nworkers=batch_size)\n\n # Create varying parameters.\n lower_bounds = [-3.0, 2.0]\n upper_bounds = [1.0, 5.0]\n n_steps = [7, 15]\n\n # Set number of evaluations.\n n_evals = np.prod(n_steps)\n\n vocs = VOCS(\n variables={\n \"x0\": [lower_bounds[0], upper_bounds[0]],\n \"x1\": [lower_bounds[1], upper_bounds[1]],\n },\n objectives={\"f\": \"MAXIMIZE\"},\n )\n\n gen = GridSamplingGenerator(vocs=vocs, n_steps=n_steps)\n\n gen_specs = GenSpecs(\n generator=gen,\n batch_size=batch_size,\n vocs=vocs,\n )\n\n sim_specs = SimSpecs(\n simulator=eval_func,\n vocs=vocs,\n )\n\n alloc_specs = AllocSpecs(alloc_f=alloc_f)\n exit_criteria = ExitCriteria(sim_max=n_evals)\n\n workflow = Ensemble(\n libE_specs=libE_specs,\n sim_specs=sim_specs,\n alloc_specs=alloc_specs,\n gen_specs=gen_specs,\n exit_criteria=exit_criteria,\n )\n\n H, _, _ = workflow.run()\n\n # Perform the run\n if workflow.is_manager:\n print(f\"Completed {len(H)} simulations\")\n\n # Get generated points.\n h = H[H[\"sim_ended\"]]\n x0_gen = h[\"x0\"]\n x1_gen = h[\"x1\"]\n\n # Get expected 1D steps along each variable.\n x0_steps = np.linspace(lower_bounds[0], upper_bounds[0], n_steps[0])\n x1_steps = np.linspace(lower_bounds[1], upper_bounds[1], n_steps[1])\n\n # Check that the scan along each variable is as expected.\n np.testing.assert_array_equal(np.unique(x0_gen), x0_steps)\n np.testing.assert_array_equal(np.unique(x1_gen), x1_steps)\n\n # Check that for every x0 step, the expected x1 steps are performed.\n for x0_step in x0_steps:\n x1_in_x0_step = x1_gen[x0_gen == x0_step]\n np.testing.assert_array_equal(x1_in_x0_step, x1_steps)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2869, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "fb4797d5-5ace-4436-b8d6-742656ea6036": {"__data__": {"id_": "fb4797d5-5ace-4436-b8d6-742656ea6036", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_optimas_sssss.py", "file_name": "test_optimas_sssss.py", "file_type": "text/x-python", "file_size": 3629, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "30c534f5-acc9-4a1c-84d7-a820a0cd14bc", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_optimas_sssss.py", "file_name": "test_optimas_sssss.py", "file_type": "text/x-python", "file_size": 3629, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "18666d640f97abd614c29dd161bb112dcacc3a38b81fcea3933921031e907231", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "edaaf53a-53c6-45ce-b835-e2a74d05d226", "node_type": "1", "metadata": {}, "hash": "e3ae8486a6698238c44217e6ecd226caaff8369963ebda25267d917d9ef7b376", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests libEnsemble with Optimas AxGenerators\n\n*****curerntly using same sim as xopt - seeing if just swap out gens*****\n\n*****currently fixing nworkers to batch_size*****\n\nExecute via one of the following commands (e.g. 4 workers):\n mpiexec -np 5 python test_xopt_EI.py\n python test_xopt_EI.py -n 4\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 4 as the generator is on the manager.\n\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 4\n# TESTSUITE_EXTRA: true\n\nimport numpy as np\nfrom gest_api.vocs import VOCS\n\nfrom optimas.core import Task\nfrom optimas.generators import (\n GridSamplingGenerator,\n AxSingleFidelityGenerator,\n AxMultiFidelityGenerator,\n AxMultitaskGenerator,\n AxClientGenerator,\n)\n\nfrom libensemble import Ensemble\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.specs import AllocSpecs, ExitCriteria, GenSpecs, LibeSpecs, SimSpecs\n\n# SH TODO - should check constant1 is present\n# Adapted from Xopt/xopt/resources/testing.py\ndef xtest_sim(H, persis_info, sim_specs, _):\n \"\"\"\n Simple sim function that takes x1, x2, constant1 from H and returns y1, c1.\n Logic: y1 = x2, c1 = x1\n \"\"\"\n batch = len(H)\n H_o = np.zeros(batch, dtype=sim_specs[\"out\"])\n\n for i in range(batch):\n x1 = H[\"x1\"][i]\n x2 = H[\"x2\"][i]\n # constant1 is available but not used in the calculation\n\n H_o[\"y1\"][i] = x2\n H_o[\"c1\"][i] = x1\n\n return H_o, persis_info\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1647, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "edaaf53a-53c6-45ce-b835-e2a74d05d226": {"__data__": {"id_": "edaaf53a-53c6-45ce-b835-e2a74d05d226", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_optimas_sssss.py", "file_name": "test_optimas_sssss.py", "file_type": "text/x-python", "file_size": 3629, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "30c534f5-acc9-4a1c-84d7-a820a0cd14bc", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_optimas_sssss.py", "file_name": "test_optimas_sssss.py", "file_type": "text/x-python", "file_size": 3629, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "18666d640f97abd614c29dd161bb112dcacc3a38b81fcea3933921031e907231", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fb4797d5-5ace-4436-b8d6-742656ea6036", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_optimas_sssss.py", "file_name": "test_optimas_sssss.py", "file_type": "text/x-python", "file_size": 3629, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "0c7efb036bb3ef1e80e41d7f1b6f7944c5a434328f114283d871cfa84d13718a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Logic: y1 = x2, c1 = x1\n \"\"\"\n batch = len(H)\n H_o = np.zeros(batch, dtype=sim_specs[\"out\"])\n\n for i in range(batch):\n x1 = H[\"x1\"][i]\n x2 = H[\"x2\"][i]\n # constant1 is available but not used in the calculation\n\n H_o[\"y1\"][i] = x2\n H_o[\"c1\"][i] = x1\n\n return H_o, persis_info\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n\n n = 2\n batch_size = 4\n\n libE_specs = LibeSpecs(gen_on_manager=True, nworkers=batch_size)\n\n vocs = VOCS(\n variables={\"x1\": [0, 1.0], \"x2\": [0, 10.0],\n \"trial_type\": {\"task_1\", \"task_2\"}\n },\n objectives={\"y1\": \"MINIMIZE\"},\n constraints={\"c1\": [\"GREATER_THAN\", 0.5]},\n constants={\"constant1\": 1.0},\n )\n\n # **TODO first 2 get the sim_id issue (fixed on other branch - but may want to change to not use _id..)\n # gen = AxSingleFidelityGenerator(vocs=vocs)\n # gen = AxMultiFidelityGenerator(vocs=vocs)\n\n task1 = Task(\"task_1\", n_init=2, n_opt=1)\n task2 = Task(\"task_2\", n_init=5, n_opt=3)\n # gen = AxMultitaskGenerator(vocs=vocs, hifi_task=task1, lofi_task=task2)\n\n gen = GridSamplingGenerator(vocs=vocs)\n\n # Create 4 initial points and ingest them\n initial_points = [\n {\"x1\": 0.2, \"x2\": 2.0, \"constant1\": 1.0, \"y1\": 2.0, \"c1\": 0.2},\n {\"x1\": 0.5, \"x2\": 5.0, \"constant1\": 1.0, \"y1\": 5.0, \"c1\": 0.5},\n {\"x1\": 0.7, \"x2\": 7.0, \"constant1\": 1.0, \"y1\": 7.0, \"c1\": 0.7},\n {\"x1\": 0.9, \"x2\": 9.0, \"constant1\": 1.0, \"y1\": 9.0, \"c1\": 0.9},\n ]\n gen.ingest(initial_points)\n\n gen_specs = GenSpecs(\n generator=gen,\n batch_size=batch_size,\n vocs=vocs,\n )\n\n sim_specs = SimSpecs(\n sim_f=xtest_sim,\n vocs=vocs,\n )\n\n alloc_specs = AllocSpecs(alloc_f=alloc_f)\n exit_criteria = ExitCriteria(sim_max=20)\n\n workflow = Ensemble(\n libE_specs=libE_specs,\n sim_specs=sim_specs,\n alloc_specs=alloc_specs,\n gen_specs=gen_specs,\n exit_criteria=exit_criteria,\n )\n\n H, _, _ = workflow.run()\n\n # Perform the run\n if workflow.is_manager:\n print(f\"Completed {len(H)} simulations\")\n assert np.array_equal(H[\"y1\"], H[\"x2\"])\n assert np.array_equal(H[\"c1\"], H[\"x1\"])", "mimetype": "text/plain", "start_char_idx": 1263, "end_char_idx": 3298, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "43589a32-33ae-40f7-ac9c-9cb9a122e49e": {"__data__": {"id_": "43589a32-33ae-40f7-ac9c-9cb9a122e49e", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_dfols.py", "file_name": "test_persistent_aposmm_dfols.py", "file_type": "text/x-python", "file_size": 4753, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "6cf7a400-eb12-4520-aab5-4881c4c0e18f", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_dfols.py", "file_name": "test_persistent_aposmm_dfols.py", "file_type": "text/x-python", "file_size": 4753, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "32f914e177cb1be87bbf02760a75e9262c4798e04ae08b777fca2779a0d4c166", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "48d915bb-2fe4-4ef2-a1bb-e223bc799cd4", "node_type": "1", "metadata": {}, "hash": "daaadacc1e4297a5dfc8a1ee2e2f864d21a6493a1bb48c817113be69d9e58d66", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with APOSMM+DFOLS on the chwirut least-squares problem.\nAll 214 residual calculations for a given point are performed as a single\nsimulation evaluation.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_persistent_aposmm_dfols.py\n python test_persistent_aposmm_dfols.py --nworkers 3\n python test_persistent_aposmm_dfols.py --nworkers 3 --comms tcp\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 2, as one of the three workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: local mpi tcp\n# TESTSUITE_NPROCS: 4\n# TESTSUITE_EXTRA: true\n\nimport multiprocessing\nimport sys\n\nimport numpy as np\n\nimport libensemble.gen_funcs\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.chwirut1 import chwirut_eval as sim_f\n\nlibensemble.gen_funcs.rc.aposmm_optimizers = \"dfols\"\n\nfrom libensemble.alloc_funcs.persistent_aposmm_alloc import persistent_aposmm_alloc as alloc_f\nfrom libensemble.gen_funcs.persistent_aposmm import aposmm as gen_f\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\ndef combine_component(x):\n return np.sum(np.power(x, 2))\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n multiprocessing.set_start_method(\"fork\", force=True)\n\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n # Declare the run parameters/functions\n m = 214\n n = 3\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float), (\"fvec\", float, m)],\n \"user\": {\n \"combine_component_func\": combine_component,\n },\n }\n\n gen_out = [(\"x\", float, n), (\"x_on_cube\", float, n), (\"sim_id\", int), (\"local_min\", bool), (\"local_pt\", bool)]\n\n # lb tries to avoid x[1]=-x[2], which results in division by zero in chwirut.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2067, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "48d915bb-2fe4-4ef2-a1bb-e223bc799cd4": {"__data__": {"id_": "48d915bb-2fe4-4ef2-a1bb-e223bc799cd4", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_dfols.py", "file_name": "test_persistent_aposmm_dfols.py", "file_type": "text/x-python", "file_size": 4753, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "6cf7a400-eb12-4520-aab5-4881c4c0e18f", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_dfols.py", "file_name": "test_persistent_aposmm_dfols.py", "file_type": "text/x-python", "file_size": 4753, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "32f914e177cb1be87bbf02760a75e9262c4798e04ae08b777fca2779a0d4c166", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "43589a32-33ae-40f7-ac9c-9cb9a122e49e", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_dfols.py", "file_name": "test_persistent_aposmm_dfols.py", "file_type": "text/x-python", "file_size": 4753, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "7a12e9e813de6e9d458023918f4abc222c73ed7e3d9fb702cc56a46bc52a360a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "if __name__ == \"__main__\":\n multiprocessing.set_start_method(\"fork\", force=True)\n\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n # Declare the run parameters/functions\n m = 214\n n = 3\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float), (\"fvec\", float, m)],\n \"user\": {\n \"combine_component_func\": combine_component,\n },\n }\n\n gen_out = [(\"x\", float, n), (\"x_on_cube\", float, n), (\"sim_id\", int), (\"local_min\", bool), (\"local_pt\", bool)]\n\n # lb tries to avoid x[1]=-x[2], which results in division by zero in chwirut.\n gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [\"f\", \"fvec\"] + [n[0] for n in gen_out],\n \"out\": gen_out,\n \"user\": {\n \"initial_sample_size\": 100,\n \"localopt_method\": \"dfols\",\n \"components\": m,\n \"dfols_kwargs\": {\n \"do_logging\": False,\n \"rhoend\": 1e-5,\n \"user_params\": {\n \"model.abs_tol\": 1e-10,\n \"model.rel_tol\": 1e-4,\n },\n },\n \"lb\": (-2 - np.pi / 10) * np.ones(n),\n \"ub\": 2 * np.ones(n),\n },\n }\n\n alloc_specs = {\"alloc_f\": alloc_f}\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n # Tell libEnsemble when to stop (stop_val key must be in H)\n exit_criteria = {\n \"sim_max\": 1000,\n \"wallclock_max\": 100,\n \"stop_val\": (\"f\", 3000),\n }\n # end_exit_criteria_rst_tag\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n if is_manager:\n assert persis_info[1].get(\"run_order\"), \"Run_order should have been given back\"\n assert flag == 0\n assert np.min(H[\"f\"][H[\"sim_ended\"]]) <= 3000, \"Didn't find a value below 3000\"\n\n save_libE_output(H, persis_info, __file__, nworkers)\n\n # # Calculating the Jacobian at local_minima (though this information was not used by DFO-LS)\n from libensemble.sim_funcs.chwirut1 import EvaluateFunction, EvaluateJacobian\n\n for i in np.where(H[\"local_min\"])[0]:\n F = EvaluateFunction(H[\"x\"][i])\n J = EvaluateJacobian(H[\"x\"][i])\n # u = gen_specs[\"user\"][\"ub\"] - H[\"x\"][i]\n # l = H[\"x\"][i] - gen_specs[\"user\"][\"lb\"]\n # if np.any(u <= 1e-7) or np.any(l <= 1e-7):\n # grad = -2 * np.dot(J.T, F)\n # assert np.all(grad[u <= 1e-7] >= 0)\n # assert np.all(grad[l <= 1e-7] <= 0)\n\n # if not np.all(grad[np.logical_and(u >= 1e-7, l >= 1e-7)] <= 1e-5):\n # else:\n # d = np.linalg.solve(np.dot(J.T, J), np.dot(J.T, F))\n # assert np.linalg.norm(d) <= 1e-5\n\n if libE_specs[\"comms\"] == \"mpi\":\n # Quickly try a different DFO-LS exit condition\n persis_info = add_unique_random_streams({}, nworkers + 1)\n gen_specs[\"user\"][\"dfols_kwargs\"][\"rhoend\"] = 1e-16\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n if is_manager:\n assert flag == 0", "mimetype": "text/plain", "start_char_idx": 1427, "end_char_idx": 4140, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "b5e25e39-f445-4ac5-a1a3-1acd38aa36e6": {"__data__": {"id_": "b5e25e39-f445-4ac5-a1a3-1acd38aa36e6", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_exception.py", "file_name": "test_persistent_aposmm_exception.py", "file_type": "text/x-python", "file_size": 3104, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "99f430e8-d343-45dc-bebd-937dd8854691", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_exception.py", "file_name": "test_persistent_aposmm_exception.py", "file_type": "text/x-python", "file_size": 3104, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "ace3f276954b2bf45c56fac378710349e5bad08fd775ac6d21d0a295efe68a81", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests the APOSMM generator function's ability to handle exceptions\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_persistent_aposmm_exception.py\n python test_persistent_aposmm_exception.py --nworkers 3\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 2, as one of the three workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: local mpi\n# TESTSUITE_NPROCS: 4\n# TESTSUITE_EXTRA: true\n\nimport multiprocessing\nimport sys\n\nimport numpy as np\n\nimport libensemble.gen_funcs\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.periodic_func import func_wrapper as sim_f\n\nlibensemble.gen_funcs.rc.aposmm_optimizers = \"nlopt\"\nfrom libensemble.alloc_funcs.persistent_aposmm_alloc import persistent_aposmm_alloc as alloc_f\nfrom libensemble.gen_funcs.persistent_aposmm import aposmm as gen_f\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\ndef assertion(passed):\n \"\"\"Raise assertion or MPI Abort\"\"\"\n if libE_specs[\"comms\"] == \"mpi\":\n from mpi4py import MPI\n\n if passed:\n print(\"\\n\\nMPI will be aborted as planned\\n\\n\", flush=True)\n MPI.COMM_WORLD.Abort(0) # Abort with success\n else:\n MPI.COMM_WORLD.Abort(1) # Abort with failure\n else:\n assert passed\n print(\"\\n\\nException received as expected\")\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n multiprocessing.set_start_method(\"fork\", force=True)\n\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_out = [(\"x\", float, n), (\"x_on_cube\", float, n), (\"sim_id\", int), (\"local_min\", bool), (\"local_pt\", bool)]\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [\"f\"] + [n[0] for n in gen_out],\n \"out\": gen_out,\n \"user\": {\n \"initial_sample_size\": 100,\n \"localopt_method\": \"LN_BOBYQA\",\n \"lb\": np.array([0, -np.pi / 2]),\n \"ub\": np.array([2 * np.pi, 3 * np.pi / 2]),\n },\n }\n\n alloc_specs = {\"alloc_f\": alloc_f}\n\n exit_criteria = {\"sim_max\": 1000}\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n libE_specs[\"abort_on_exception\"] = False\n try:\n # Perform the run, which will fail because we want to test exception handling\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n except Exception as e:\n if is_manager:\n if e.args[1].endswith(\"NLopt roundoff-limited\"):\n assertion(True)\n else:\n assertion(False)\n else:\n if is_manager:\n assertion(False)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2772, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "45c1232b-b0c1-47e9-acdf-d60e1c6727d9": {"__data__": {"id_": "45c1232b-b0c1-47e9-acdf-d60e1c6727d9", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_external_localopt.py", "file_name": "test_persistent_aposmm_external_localopt.py", "file_type": "text/x-python", "file_size": 4182, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "544a9bcd-8a5e-4ba2-9cbf-b49db028b96b", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_external_localopt.py", "file_name": "test_persistent_aposmm_external_localopt.py", "file_type": "text/x-python", "file_size": 4182, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "f895d83bf3070084c929d01699298e2e0f2fd85f93a2a91373566af1e649d721", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "316e469f-0fe5-481d-94ca-0a5f5ac6d196", "node_type": "1", "metadata": {}, "hash": "b688b9e9b3a1db8d38753a1b196305a03afc73bd891c40879bc8f047f8dc0a41", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTest the use for APOSMM with an external local optimization method.\nPoints are passed to/from the localopt method using files with run-specific\nhashes. These hashes are currently generated using uuid, which may not be\nthread safe on some systems (e.g., Travis-CI). This was resolved by not using\n'local' communication; we therefore recommend using 'mpi' communication when\nusing persistent_aposmm with an external localopt # method.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_persistent_aposmm_external_localopt.py\n\nWhen running with the above command, the number of concurrent evaluations of\nthe objective function will be 2, as one of the three workers will be the\npersistent generator.\n\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: local mpi tcp\n# TESTSUITE_NPROCS: 4\n# TESTSUITE_OS_SKIP: OSX WIN\n# TESTSUITE_EXTRA: true\n\nimport multiprocessing\nimport shutil # For copying the external_localopt script\nimport sys\n\nimport numpy as np\n\nimport libensemble.gen_funcs\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.six_hump_camel import six_hump_camel as sim_f\n\nlibensemble.gen_funcs.rc.aposmm_optimizers = \"nlopt\"\nfrom time import time\n\nfrom libensemble.alloc_funcs.persistent_aposmm_alloc import persistent_aposmm_alloc as alloc_f\nfrom libensemble.gen_funcs.persistent_aposmm import aposmm as gen_f\nfrom libensemble.tests.regression_tests.support import six_hump_camel_minima as minima\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\nnp.set_printoptions(precision=16)\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n multiprocessing.set_start_method(\"fork\", force=True)\n\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n if is_manager:\n start_time = time()\n\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_out = [\n (\"x\", float, n),\n (\"x_on_cube\", float, n),\n (\"sim_id\", int),\n (\"local_min\", bool),\n (\"local_pt\", bool),\n ]\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [\"f\"] + [n[0] for n in gen_out],\n \"out\": gen_out,\n \"user\": {\n \"initial_sample_size\": 100,\n \"sample_points\": np.round(minima, 1),\n \"localopt_method\": \"external_localopt\",\n \"max_active_runs\": 6,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n shutil.copy(\"./scripts_used_by_reg_tests/call_matlab_octave_script.m\", \"./\")\n shutil.copy(\"./scripts_used_by_reg_tests/wrapper_obj_fun.m\", \"./\")\n\n alloc_specs = {\"alloc_f\": alloc_f}\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n exit_criteria = {\"sim_max\": 500}\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n if is_manager:\n print(\"[Manager]:\", H[np.where(H[\"local_min\"])][\"x\"])\n print(\"[Manager]: Time taken =\", time() - start_time, flush=True)\n\n # Note: This regression test considers only the global minima because it's\n # not possible to pass an initial simplex to fminsearch in Octave/Matlab.\n # As such, localopt runs in APOSMM that are started near 4 of the 6 local\n # minima \"jump out\", even when 'sim_max' is increased. (Matlab's fminsearch\n # has a smaller initial simplex and appears to be less susceptible to\n # this.)\n minima = minima[:2]\n tol = 1e-3\n for m in minima:\n # The minima are known on this test problem.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3562, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "316e469f-0fe5-481d-94ca-0a5f5ac6d196": {"__data__": {"id_": "316e469f-0fe5-481d-94ca-0a5f5ac6d196", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_external_localopt.py", "file_name": "test_persistent_aposmm_external_localopt.py", "file_type": "text/x-python", "file_size": 4182, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "544a9bcd-8a5e-4ba2-9cbf-b49db028b96b", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_external_localopt.py", "file_name": "test_persistent_aposmm_external_localopt.py", "file_type": "text/x-python", "file_size": 4182, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "f895d83bf3070084c929d01699298e2e0f2fd85f93a2a91373566af1e649d721", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "45c1232b-b0c1-47e9-acdf-d60e1c6727d9", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_external_localopt.py", "file_name": "test_persistent_aposmm_external_localopt.py", "file_type": "text/x-python", "file_size": 4182, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "8c7821a10cb37f1a49abe1d5425471c661eb5cd365c388f1e7460238a86380b5", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# As such, localopt runs in APOSMM that are started near 4 of the 6 local\n # minima \"jump out\", even when 'sim_max' is increased. (Matlab's fminsearch\n # has a smaller initial simplex and appears to be less susceptible to\n # this.)\n minima = minima[:2]\n tol = 1e-3\n for m in minima:\n # The minima are known on this test problem.\n # We use their values to test APOSMM has identified all minima\n print(np.min(np.sum((H[H[\"local_min\"]][\"x\"] - m) ** 2, 1)), flush=True)\n assert np.min(np.sum((H[H[\"local_min\"]][\"x\"] - m) ** 2, 1)) < tol\n\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 3234, "end_char_idx": 3821, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "2014b8ff-ddc8-4172-b80e-65de756bf805": {"__data__": {"id_": "2014b8ff-ddc8-4172-b80e-65de756bf805", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_ibcdfo_manifold_sampling.py", "file_name": "test_persistent_aposmm_ibcdfo_manifold_sampling.py", "file_type": "text/x-python", "file_size": 4133, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0b515ea0-71ac-438a-83ab-b450118b7760", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_ibcdfo_manifold_sampling.py", "file_name": "test_persistent_aposmm_ibcdfo_manifold_sampling.py", "file_type": "text/x-python", "file_size": 4133, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "36784796af13e05a989b362e35a7175bc55a4337e84ef73d067441e32681a6b2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d7a04419-cdc6-44e5-8b24-593b5fed18c7", "node_type": "1", "metadata": {}, "hash": "d08292e3f811f29388a5e11d41c5aeeee80714d893ccfc032be0f8f1754b0d16", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with APOSMM+IBCDFO on two test problems. Only a single\noptimization run is being performed for the below setup.\n\nThe first case uses POUNDERS to solve the chwirut least-squares problem. For\nthis case, all chwirut 214 residual calculations for a given point are\nperformed as a single simulation evaluation.\n\nThe second case uses the generalized POUNDERS to minimize normalized beamline\nemittance. The \"beamline simulation\" is a synthetic polynomial test function\nthat takes in 4 variables and returning 3 outputs. These outputs represent\nposition , momentum , and the correlation between them .\n\nThese values are then mapped to the normalized emittance - .\n\nExecute via one of the following commands:\n mpiexec -np 3 python test_persistent_aposmm_ibcdfo_pounders.py\n python test_persistent_aposmm_ibcdfo_pounders.py --nworkers 2\nBoth will run with 1 manager, 1 worker running APOSMM+IBCDFO, and 1 worker\ndoing the simulation evaluations.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: local mpi\n# TESTSUITE_NPROCS: 3\n\nimport multiprocessing\nimport sys\n\nimport numpy as np\n\nimport libensemble.gen_funcs\nfrom libensemble.libE import libE\n\nlibensemble.gen_funcs.rc.aposmm_optimizers = \"ibcdfo_manifold_sampling\"\n\nfrom libensemble.alloc_funcs.persistent_aposmm_alloc import persistent_aposmm_alloc as alloc_f\nfrom libensemble.gen_funcs.persistent_aposmm import aposmm as gen_f\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\ntry:\n from ibcdfo.manifold_sampling import manifold_sampling_primal # noqa: F401\n from ibcdfo.manifold_sampling.h_examples import pw_maximum as hfun\n\nexcept ModuleNotFoundError:\n sys.exit(\"Please 'pip install ibcdfo'\")\n\ntry:\n from minqsw import minqsw # noqa: F401\n\nexcept ModuleNotFoundError:\n sys.exit(\"Ensure https://github.com/POptUS/minq has been cloned and that minq/py/minq5/ is on the PYTHONPATH\")\n\ndef synthetic_beamline_mapping(H, _, sim_specs):\n x = H[\"x\"][0]\n assert len(x) == 4, \"Assuming 4 inputs to this function\"\n y = np.zeros(3) # Synthetic beamline outputs\n y[0] = x[0] ** 2 + 1.0\n y[1] = x[1] ** 2 + 2.0\n y[2] = x[2] * x[3] + 0.5\n\n Out = np.zeros(1, dtype=sim_specs[\"out\"])\n Out[\"fvec\"] = y\n Out[\"f\"] = np.max(y)\n return Out\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2372, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d7a04419-cdc6-44e5-8b24-593b5fed18c7": {"__data__": {"id_": "d7a04419-cdc6-44e5-8b24-593b5fed18c7", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_ibcdfo_manifold_sampling.py", "file_name": "test_persistent_aposmm_ibcdfo_manifold_sampling.py", "file_type": "text/x-python", "file_size": 4133, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0b515ea0-71ac-438a-83ab-b450118b7760", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_ibcdfo_manifold_sampling.py", "file_name": "test_persistent_aposmm_ibcdfo_manifold_sampling.py", "file_type": "text/x-python", "file_size": 4133, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "36784796af13e05a989b362e35a7175bc55a4337e84ef73d067441e32681a6b2", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2014b8ff-ddc8-4172-b80e-65de756bf805", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_ibcdfo_manifold_sampling.py", "file_name": "test_persistent_aposmm_ibcdfo_manifold_sampling.py", "file_type": "text/x-python", "file_size": 4133, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "8818c0a8f920c33f3ba62a451c9204cc1200f0f432bb80fc2b89097b1bdbb919", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "if __name__ == \"__main__\":\n multiprocessing.set_start_method(\"fork\", force=True)\n\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n assert nworkers == 2, \"This test is just for two workers\"\n\n m = 3\n n = 4\n sim_f = synthetic_beamline_mapping\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float), (\"fvec\", float, m)],\n }\n\n gen_out = [\n (\"x\", float, n),\n (\"x_on_cube\", float, n),\n (\"sim_id\", int),\n (\"local_min\", bool),\n (\"local_pt\", bool),\n (\"started_run\", bool),\n ]\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [\"f\", \"fvec\"] + [n[0] for n in gen_out],\n \"out\": gen_out,\n \"user\": {\n \"initial_sample_size\": 1,\n \"stop_after_k_runs\": 1,\n \"max_active_runs\": 1,\n \"sample_points\": np.atleast_2d(0.1 * (np.arange(n) + 1)),\n \"localopt_method\": \"ibcdfo_manifold_sampling\",\n \"run_max_eval\": 100 * (n + 1),\n \"components\": m,\n \"lb\": -1 * np.ones(n),\n \"ub\": np.ones(n),\n },\n }\n\n gen_specs[\"user\"][\"hfun\"] = hfun\n\n alloc_specs = {\"alloc_f\": alloc_f}\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n exit_criteria = {\"sim_max\": 500}\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n if is_manager:\n assert np.min(H[\"f\"]) == 2.0, \"The best is 2\"\n assert persis_info[1].get(\"run_order\"), \"Run_order should have been given back\"\n assert flag == 0\n\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 2373, "end_char_idx": 3764, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "9fd2f7b5-5a6c-48b2-85b6-851be97a7f2b": {"__data__": {"id_": "9fd2f7b5-5a6c-48b2-85b6-851be97a7f2b", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_ibcdfo_pounders.py", "file_name": "test_persistent_aposmm_ibcdfo_pounders.py", "file_type": "text/x-python", "file_size": 4642, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "406fcf46-db33-4767-b912-a3c6927e22ae", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_ibcdfo_pounders.py", "file_name": "test_persistent_aposmm_ibcdfo_pounders.py", "file_type": "text/x-python", "file_size": 4642, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "609509665bc68e97200189b2805ca32d0ac4902d79931747e6577c6aa41ba2e4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b9c86518-6fe7-44ad-a45f-d2be5cdb36e0", "node_type": "1", "metadata": {}, "hash": "8fc5609fd1173e877b1df31642b6dace2a47d7ce31579ca673ec1042fa227a38", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with APOSMM+IBCDFO on two test problems. Only a single\noptimization run is being performed for the below setup.\n\nThe first case uses POUNDERS to solve the chwirut least-squares problem. For\nthis case, all chwirut 214 residual calculations for a given point are\nperformed as a single simulation evaluation.\n\nThe second case uses the generalized POUNDERS to minimize normalized beamline\nemittance. The \"beamline simulation\" is a synthetic polynomial test function\nthat takes in 4 variables and returning 3 outputs. These outputs represent\nposition , momentum , and the correlation between them .\n\nThese values are then mapped to the normalized emittance - .\n\nExecute via one of the following commands:\n mpiexec -np 3 python test_persistent_aposmm_ibcdfo_pounders.py\n python test_persistent_aposmm_ibcdfo_pounders.py --nworkers 2\nBoth will run with 1 manager, 1 worker running APOSMM+IBCDFO, and 1 worker\ndoing the simulation evaluations.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: local mpi\n# TESTSUITE_NPROCS: 3\n\nimport multiprocessing\nimport sys\n\nimport numpy as np\n\nimport libensemble.gen_funcs\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.chwirut1 import chwirut_eval\n\nlibensemble.gen_funcs.rc.aposmm_optimizers = \"ibcdfo_pounders\"\n\nfrom libensemble.alloc_funcs.persistent_aposmm_alloc import persistent_aposmm_alloc as alloc_f\nfrom libensemble.gen_funcs.persistent_aposmm import aposmm as gen_f\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\ntry:\n from ibcdfo.pounders import pounders # noqa: F401\n from ibcdfo.pounders.general_h_funs import emittance_combine, emittance_h\nexcept ModuleNotFoundError:\n sys.exit(\"Please 'pip install ibcdfo'\")\n\ntry:\n from minqsw import minqsw # noqa: F401\n\nexcept ModuleNotFoundError:\n sys.exit(\"Ensure https://github.com/POptUS/minq has been cloned and that minq/py/minq5/ is on the PYTHONPATH\")\n\ndef sum_squared(x):\n return np.sum(np.power(x, 2))\n\ndef synthetic_beamline_mapping(H, _, sim_specs):\n x = H[\"x\"][0]\n assert len(x) == 4, \"Assuming 4 inputs to this function\"\n y = np.zeros(3) # Synthetic beamline outputs\n y[0] = x[0] ** 2 + 1.0\n y[1] = x[1] ** 2 + 2.0\n y[2] = x[2] * x[3] + 0.5\n\n Out = np.zeros(1, dtype=sim_specs[\"out\"])\n Out[\"fvec\"] = y\n Out[\"f\"] = y[0] * y[1] - y[2] ** 2\n return Out\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2466, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "b9c86518-6fe7-44ad-a45f-d2be5cdb36e0": {"__data__": {"id_": "b9c86518-6fe7-44ad-a45f-d2be5cdb36e0", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_ibcdfo_pounders.py", "file_name": "test_persistent_aposmm_ibcdfo_pounders.py", "file_type": "text/x-python", "file_size": 4642, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "406fcf46-db33-4767-b912-a3c6927e22ae", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_ibcdfo_pounders.py", "file_name": "test_persistent_aposmm_ibcdfo_pounders.py", "file_type": "text/x-python", "file_size": 4642, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "609509665bc68e97200189b2805ca32d0ac4902d79931747e6577c6aa41ba2e4", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9fd2f7b5-5a6c-48b2-85b6-851be97a7f2b", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_ibcdfo_pounders.py", "file_name": "test_persistent_aposmm_ibcdfo_pounders.py", "file_type": "text/x-python", "file_size": 4642, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "222e09beaa360f4788aa37169f179c974cea69db419fe3e8cde168549d0fbd58", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "if __name__ == \"__main__\":\n multiprocessing.set_start_method(\"fork\", force=True)\n\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n assert nworkers == 2, \"This test is just for two workers\"\n\n for inst in range(2):\n if inst == 0:\n # Declare the run parameters/functions\n m = 214\n n = 3\n sim_f = chwirut_eval\n elif inst == 1:\n m = 3\n n = 4\n sim_f = synthetic_beamline_mapping\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float), (\"fvec\", float, m)],\n }\n\n gen_out = [\n (\"x\", float, n),\n (\"x_on_cube\", float, n),\n (\"sim_id\", int),\n (\"local_min\", bool),\n (\"local_pt\", bool),\n (\"started_run\", bool),\n ]\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [\"f\", \"fvec\"] + [n[0] for n in gen_out],\n \"out\": gen_out,\n \"user\": {\n \"initial_sample_size\": 1,\n \"stop_after_k_runs\": 1,\n \"max_active_runs\": 1,\n \"sample_points\": np.atleast_2d(0.1 * (np.arange(n) + 1)),\n \"localopt_method\": \"ibcdfo_pounders\",\n \"run_max_eval\": 100 * (n + 1),\n \"components\": m,\n \"lb\": -1 * np.ones(n),\n \"ub\": np.ones(n),\n },\n }\n\n if inst == 1:\n gen_specs[\"user\"][\"hfun\"] = emittance_h\n gen_specs[\"user\"][\"combinemodels\"] = emittance_combine\n\n alloc_specs = {\"alloc_f\": alloc_f}\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n exit_criteria = {\"sim_max\": 500}\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n if is_manager:\n assert persis_info[1].get(\"run_order\"), \"Run_order should have been given back\"\n assert flag == 0\n\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 2467, "end_char_idx": 4013, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f0d042f2-760e-447b-b06a-cefb635d4960": {"__data__": {"id_": "f0d042f2-760e-447b-b06a-cefb635d4960", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_ibcdfo_pounders_jax.py", "file_name": "test_persistent_aposmm_ibcdfo_pounders_jax.py", "file_type": "text/x-python", "file_size": 4216, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7503e79c-cef9-4179-b511-1fb8b4d8571e", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_ibcdfo_pounders_jax.py", "file_name": "test_persistent_aposmm_ibcdfo_pounders_jax.py", "file_type": "text/x-python", "file_size": 4216, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "f09deaabdb5e3cdee5ad4d3c87415cca82f5ee912e94e20ce1df14ac98a63a32", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "39d14ea1-57ea-420a-8f6d-2bcde4861c3d", "node_type": "1", "metadata": {}, "hash": "6e39688bd894bcb79fd0c466cc43c17020deb0d4dc9a585c7b5131170819cb00", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with APOSMM+IBCDFO on two test problems. Only a single\noptimization run is being performed for the below setup.\n\nThe first case uses POUNDERS to solve the chwirut least-squares problem. For\nthis case, all chwirut 214 residual calculations for a given point are\nperformed as a single simulation evaluation.\n\nThe second case uses the generalized POUNDERS to minimize normalized beamline\nemittance. The \"beamline simulation\" is a synthetic polynomial test function\nthat takes in 4 variables and returning 3 outputs. These outputs represent\nposition , momentum , and the correlation between them .\n\nThese values are then mapped to the normalized emittance - .\n\nExecute via one of the following commands:\n mpiexec -np 3 python test_persistent_aposmm_ibcdfo_pounders.py\n python test_persistent_aposmm_ibcdfo_pounders.py --nworkers 2\nBoth will run with 1 manager, 1 worker running APOSMM+IBCDFO, and 1 worker\ndoing the simulation evaluations.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: local mpi\n# TESTSUITE_NPROCS: 3\n\nimport multiprocessing\nimport sys\n\nimport numpy as np\n\nimport libensemble.gen_funcs\nfrom libensemble.libE import libE\n\nlibensemble.gen_funcs.rc.aposmm_optimizers = \"ibcdfo_pounders\"\n\nfrom libensemble.alloc_funcs.persistent_aposmm_alloc import persistent_aposmm_alloc as alloc_f\nfrom libensemble.gen_funcs.persistent_aposmm import aposmm as gen_f\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\ntry:\n from ibcdfo.pounders import pounders # noqa: F401\n from declare_hfun_and_combine_model_with_jax import hfun, combinemodels_jax\n\nexcept ModuleNotFoundError:\n sys.exit(\"Please 'pip install ibcdfo'\")\n\ntry:\n from minqsw import minqsw # noqa: F401\n\nexcept ModuleNotFoundError:\n sys.exit(\"Ensure https://github.com/POptUS/minq has been cloned and that minq/py/minq5/ is on the PYTHONPATH\")\n\ndef sum_squared(x):\n return np.sum(np.power(x, 2))\n\ndef synthetic_beamline_mapping(H, _, sim_specs):\n x = H[\"x\"][0]\n assert len(x) == 4, \"Assuming 4 inputs to this function\"\n y = np.zeros(3) # Synthetic beamline outputs\n y[0] = x[0] ** 2 + 1.0\n y[1] = x[1] ** 2 + 2.0\n y[2] = x[2] * x[3] + 0.5\n\n Out = np.zeros(1, dtype=sim_specs[\"out\"])\n Out[\"fvec\"] = y\n Out[\"f\"] = y[0] * y[1] - y[2] ** 2\n return Out\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2413, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "39d14ea1-57ea-420a-8f6d-2bcde4861c3d": {"__data__": {"id_": "39d14ea1-57ea-420a-8f6d-2bcde4861c3d", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_ibcdfo_pounders_jax.py", "file_name": "test_persistent_aposmm_ibcdfo_pounders_jax.py", "file_type": "text/x-python", "file_size": 4216, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7503e79c-cef9-4179-b511-1fb8b4d8571e", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_ibcdfo_pounders_jax.py", "file_name": "test_persistent_aposmm_ibcdfo_pounders_jax.py", "file_type": "text/x-python", "file_size": 4216, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "f09deaabdb5e3cdee5ad4d3c87415cca82f5ee912e94e20ce1df14ac98a63a32", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "f0d042f2-760e-447b-b06a-cefb635d4960", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_ibcdfo_pounders_jax.py", "file_name": "test_persistent_aposmm_ibcdfo_pounders_jax.py", "file_type": "text/x-python", "file_size": 4216, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "c2b48921dc6e46aa90109a0bab8bc3a07d2eac0b807d9e780c895529f80e7f94", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "if __name__ == \"__main__\":\n multiprocessing.set_start_method(\"fork\", force=True)\n\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n assert nworkers == 2, \"This test is just for two workers\"\n\n m = 3\n n = 4\n sim_f = synthetic_beamline_mapping\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float), (\"fvec\", float, m)],\n }\n\n gen_out = [\n (\"x\", float, n),\n (\"x_on_cube\", float, n),\n (\"sim_id\", int),\n (\"local_min\", bool),\n (\"local_pt\", bool),\n (\"started_run\", bool),\n ]\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [\"f\", \"fvec\"] + [n[0] for n in gen_out],\n \"out\": gen_out,\n \"user\": {\n \"initial_sample_size\": 1,\n \"stop_after_k_runs\": 1,\n \"max_active_runs\": 1,\n \"sample_points\": np.atleast_2d(0.1 * (np.arange(n) + 1)),\n \"localopt_method\": \"ibcdfo_pounders\",\n \"run_max_eval\": 100 * (n + 1),\n \"components\": m,\n \"lb\": -1 * np.ones(n),\n \"ub\": np.ones(n),\n },\n }\n\n gen_specs[\"user\"][\"hfun\"] = hfun\n gen_specs[\"user\"][\"combinemodels\"] = combinemodels_jax\n\n alloc_specs = {\"alloc_f\": alloc_f}\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n exit_criteria = {\"sim_max\": 500}\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n if is_manager:\n print(H[[\"x\", \"f\", \"local_min\"]])\n assert persis_info[1].get(\"run_order\"), \"Run_order should have been given back\"\n assert flag == 0\n\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 2414, "end_char_idx": 3840, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "dd7eee9f-b723-492d-8523-537c6fdac5e4": {"__data__": {"id_": "dd7eee9f-b723-492d-8523-537c6fdac5e4", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_nlopt.py", "file_name": "test_persistent_aposmm_nlopt.py", "file_type": "text/x-python", "file_size": 3306, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2ef85a1e-715f-4d23-8c8f-70d92dfa1f75", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_nlopt.py", "file_name": "test_persistent_aposmm_nlopt.py", "file_type": "text/x-python", "file_size": 3306, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "e1f1f49fbcdccab87c465bc6d79b72525a43adfdffaed893ecb74b44e1f41d83", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with APOSMM with the NLopt local optimizer.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_persistent_aposmm_nlopt.py\n python test_persistent_aposmm_nlopt.py --nworkers 3\n python test_persistent_aposmm_nlopt.py --nworkers 3 --comms tcp\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 2, as one of the three workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: local mpi tcp\n# TESTSUITE_NPROCS: 3\n\nimport sys\nfrom math import gamma, pi, sqrt\n\nimport numpy as np\n\nimport libensemble.gen_funcs\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.six_hump_camel import six_hump_camel as sim_f\n\nlibensemble.gen_funcs.rc.aposmm_optimizers = \"nlopt\"\nfrom time import time\n\nfrom libensemble.alloc_funcs.persistent_aposmm_alloc import persistent_aposmm_alloc as alloc_f\nfrom libensemble.gen_funcs.persistent_aposmm import aposmm as gen_f\nfrom libensemble.tests.regression_tests.support import six_hump_camel_minima as minima\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n if is_manager:\n start_time = time()\n\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_out = [\n (\"x\", float, n),\n (\"x_on_cube\", float, n),\n (\"sim_id\", int),\n (\"local_min\", bool),\n (\"local_pt\", bool),\n ]\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [\"f\"] + [n[0] for n in gen_out],\n \"out\": gen_out,\n \"user\": {\n \"initial_sample_size\": 100,\n \"sample_points\": np.round(minima, 1),\n \"localopt_method\": \"LN_BOBYQA\",\n \"rk_const\": 0.5 * ((gamma(1 + (n / 2)) * 5) ** (1 / n)) / sqrt(pi),\n \"xtol_abs\": 1e-6,\n \"ftol_abs\": 1e-6,\n \"dist_to_bound_multiple\": 0.5,\n \"max_active_runs\": 6,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n alloc_specs = {\"alloc_f\": alloc_f}\n\n persis_info = add_unique_random_streams({}, nworkers + 1, seed=4321)\n\n exit_criteria = {\"sim_max\": 2000}\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n if is_manager:\n print(\"[Manager]:\", H[np.where(H[\"local_min\"])][\"x\"])\n print(\"[Manager]: Time taken =\", time() - start_time, flush=True)\n\n tol = 1e-5\n for m in minima:\n # The minima are known on this test problem.\n # We use their values to test APOSMM has identified all minima\n print(np.min(np.sum((H[H[\"local_min\"]][\"x\"] - m) ** 2, 1)), flush=True)\n assert np.min(np.sum((H[H[\"local_min\"]][\"x\"] - m) ** 2, 1)) < tol\n\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2957, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f7c0cf8a-5f3b-4bf5-b7e7-1ce2c9898cee": {"__data__": {"id_": "f7c0cf8a-5f3b-4bf5-b7e7-1ce2c9898cee", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_periodic.py", "file_name": "test_persistent_aposmm_periodic.py", "file_type": "text/x-python", "file_size": 3590, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7d6a38b7-69e7-406f-a22c-c7a8ca327060", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_periodic.py", "file_name": "test_persistent_aposmm_periodic.py", "file_type": "text/x-python", "file_size": 3590, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "f309780f3624cbebd4985c5b9be707401de35653f481ab5d23fbf4dc4277fcf0", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests the 'periodic' domain use case for APOSMM with both NLopt and SciPy\nlocal optimization methods.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_persistent_aposmm_periodic.py\n python test_persistent_aposmm_periodic.py --nworkers 3\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 2, as one of the three workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: local mpi\n# TESTSUITE_NPROCS: 4\n# TESTSUITE_EXTRA: true\n\nimport multiprocessing\nimport sys\n\nimport numpy as np\n\nimport libensemble.gen_funcs\n\nlibensemble.gen_funcs.rc.aposmm_optimizers = [\"nlopt\", \"scipy\"]\nfrom libensemble.alloc_funcs.persistent_aposmm_alloc import persistent_aposmm_alloc as alloc_f\nfrom libensemble.gen_funcs.persistent_aposmm import aposmm as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.periodic_func import func_wrapper as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n multiprocessing.set_start_method(\"fork\", force=True)\n\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_out = [\n (\"x\", float, n),\n (\"x_on_cube\", float, n),\n (\"sim_id\", int),\n (\"local_min\", bool),\n (\"local_pt\", bool),\n ]\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [\"f\"] + [n[0] for n in gen_out],\n \"out\": gen_out,\n \"user\": {\n \"initial_sample_size\": 100,\n \"localopt_method\": \"LN_BOBYQA\",\n \"xtol_abs\": 1e-8,\n \"ftol_abs\": 1e-8,\n \"lb\": np.array([0, -np.pi / 2]),\n \"ub\": np.array([2 * np.pi, 3 * np.pi / 2]),\n \"periodic\": True,\n \"print\": True,\n },\n }\n\n alloc_specs = {\"alloc_f\": alloc_f}\n\n exit_criteria = {\"sim_max\": 1000}\n\n for run in range(2):\n if run == 1:\n gen_specs[\"user\"][\"localopt_method\"] = \"scipy_COBYLA\"\n gen_specs[\"user\"][\"opt_return_codes\"] = [1]\n gen_specs[\"user\"].pop(\"xtol_abs\")\n gen_specs[\"user\"].pop(\"ftol_abs\")\n gen_specs[\"user\"][\"scipy_kwargs\"] = {\"tol\": 1e-8}\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n if is_manager:\n assert persis_info[1].get(\"run_order\"), \"Run_order should have been given back\"\n min_ids = np.where(H[\"local_min\"])\n\n # The minima are known on this test problem. If the above [lb, ub] domain is\n # shifted/scaled to [0,1]^n, they all have value [0.25, 0.75] or [0.75, 0.25]\n minima = np.array([[0.25, 0.75], [0.75, 0.25]])\n tol = 2e-4\n\n for x in H[\"x_on_cube\"][min_ids]:\n print(x)\n print(np.linalg.norm(x - minima[0]))\n print(np.linalg.norm(x - minima[1]), flush=True)\n\n for x in H[\"x_on_cube\"][min_ids]:\n assert np.linalg.norm(x - minima[0]) < tol or np.linalg.norm(x - minima[1]) < tol", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3122, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "3ce6bc0f-e662-4392-8948-cfd488ad5eec": {"__data__": {"id_": "3ce6bc0f-e662-4392-8948-cfd488ad5eec", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_pounders.py", "file_name": "test_persistent_aposmm_pounders.py", "file_type": "text/x-python", "file_size": 4026, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7e94064c-aec7-408d-ae5d-c8f2d92a44af", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_pounders.py", "file_name": "test_persistent_aposmm_pounders.py", "file_type": "text/x-python", "file_size": 4026, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "8c040f4327dc26df79a716fc78a19809a20d07dad39be63aa1072f8075744543", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fddb44a6-e48d-482a-b664-7726fdf0b5fa", "node_type": "1", "metadata": {}, "hash": "e7a1c43e8f49ea24cd82bb83e85df4332eb558ba034c8c13f8b6e88e041bed4e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with APOSMM+POUNDERS on the chwirut least squares problem.\nAll 214 residual calculations for a given point are performed as a single\nsimulation evaluation.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_persistent_aposmm_pounders.py\n python test_persistent_aposmm_pounders.py --nworkers 3\n python test_persistent_aposmm_pounders.py --nworkers 3 --comms tcp\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 2, as one of the three workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: local mpi tcp\n# TESTSUITE_NPROCS: 4\n# TESTSUITE_EXTRA: true\n\nimport multiprocessing\nimport sys\nfrom math import ceil, gamma, pi, sqrt\n\nimport numpy as np\n\nimport libensemble.gen_funcs\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.chwirut1 import chwirut_eval as sim_f\n\nlibensemble.gen_funcs.rc.aposmm_optimizers = \"petsc\"\nfrom libensemble.alloc_funcs.persistent_aposmm_alloc import persistent_aposmm_alloc as alloc_f\nfrom libensemble.gen_funcs.persistent_aposmm import aposmm as gen_f\nfrom libensemble.gen_funcs.sampling import lhs_sample\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\ndef combine_component(x):\n return np.sum(np.power(x, 2))\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n multiprocessing.set_start_method(\"fork\", force=True)\n\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n # Declare the run parameters/functions\n m = 214\n n = 3\n budget = 10\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float), (\"fvec\", float, m)],\n \"user\": {\n \"combine_component_func\": combine_component,\n },\n }\n\n gen_out = [\n (\"x\", float, n),\n (\"x_on_cube\", float, n),\n (\"sim_id\", int),\n (\"local_min\", bool),\n (\"local_pt\", bool),\n ]\n\n # lb tries to avoid x[1]=-x[2], which results in division by zero in chwirut.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2193, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "fddb44a6-e48d-482a-b664-7726fdf0b5fa": {"__data__": {"id_": "fddb44a6-e48d-482a-b664-7726fdf0b5fa", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_pounders.py", "file_name": "test_persistent_aposmm_pounders.py", "file_type": "text/x-python", "file_size": 4026, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7e94064c-aec7-408d-ae5d-c8f2d92a44af", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_pounders.py", "file_name": "test_persistent_aposmm_pounders.py", "file_type": "text/x-python", "file_size": 4026, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "8c040f4327dc26df79a716fc78a19809a20d07dad39be63aa1072f8075744543", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3ce6bc0f-e662-4392-8948-cfd488ad5eec", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_pounders.py", "file_name": "test_persistent_aposmm_pounders.py", "file_type": "text/x-python", "file_size": 4026, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "da5ae39575132957ad2d75364c67f380fb507d2c6cbc4bd7cf88d216dbbe3976", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "if __name__ == \"__main__\":\n multiprocessing.set_start_method(\"fork\", force=True)\n\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n # Declare the run parameters/functions\n m = 214\n n = 3\n budget = 10\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float), (\"fvec\", float, m)],\n \"user\": {\n \"combine_component_func\": combine_component,\n },\n }\n\n gen_out = [\n (\"x\", float, n),\n (\"x_on_cube\", float, n),\n (\"sim_id\", int),\n (\"local_min\", bool),\n (\"local_pt\", bool),\n ]\n\n # lb tries to avoid x[1]=-x[2], which results in division by zero in chwirut.\n lb = (-2 - np.pi / 10) * np.ones(n)\n ub = 2 * np.ones(n)\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [\"f\", \"fvec\"] + [n[0] for n in gen_out],\n \"out\": gen_out,\n \"user\": {\n \"initial_sample_size\": 100,\n \"localopt_method\": \"pounders\",\n \"rk_const\": 0.5 * ((gamma(1 + (n / 2)) * 5) ** (1 / n)) / sqrt(pi),\n \"grtol\": 1e-6,\n \"gatol\": 1e-6,\n \"dist_to_bound_multiple\": 0.5,\n \"lhs_divisions\": 100,\n \"components\": m,\n \"lb\": lb,\n \"ub\": ub,\n },\n }\n\n alloc_specs = {\"alloc_f\": alloc_f, \"user\": {\"batch_mode\": True, \"num_active_gens\": 1}}\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n exit_criteria = {\"sim_max\": 500}\n\n sample_points = np.zeros((0, n))\n rand_stream = np.random.default_rng(0)\n for i in range(ceil(exit_criteria[\"sim_max\"] / gen_specs[\"user\"][\"lhs_divisions\"])):\n sample_points = np.append(sample_points, lhs_sample(n, gen_specs[\"user\"][\"lhs_divisions\"], rand_stream), axis=0)\n\n gen_specs[\"user\"][\"sample_points\"] = sample_points * (ub - lb) + lb\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n if is_manager:\n assert flag == 0\n assert len(H) >= budget\n\n save_libE_output(H, persis_info, __file__, nworkers)\n # # Calculating the Jacobian at the best point (though this information was not used by pounders)\n # from libensemble.sim_funcs.chwirut1 import EvaluateJacobian\n # J = EvaluateJacobian(H['x'][np.argmin(H['f'])])\n # assert np.linalg.norm(J) < 2000", "mimetype": "text/plain", "start_char_idx": 1531, "end_char_idx": 3647, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a004d163-293b-4a55-baff-8db49555f9fd": {"__data__": {"id_": "a004d163-293b-4a55-baff-8db49555f9fd", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_scipy.py", "file_name": "test_persistent_aposmm_scipy.py", "file_type": "text/x-python", "file_size": 4697, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8c966c86-54e5-447d-b0b4-a2a8b64cce4b", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_scipy.py", "file_name": "test_persistent_aposmm_scipy.py", "file_type": "text/x-python", "file_size": 4697, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "a950e843560e5e35359ee183306f4b04edfa5134b0e9be40e98e17dc74887f72", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b67ce8a8-0bdc-4258-9642-d0595281c788", "node_type": "1", "metadata": {}, "hash": "cffb4d95d1d7d31f731a600bb35bd3a90ce4e97d63578f2104875f990ca2228a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with APOSMM and SciPy local optimization routines.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_persistent_aposmm_scipy.py\n python test_persistent_aposmm_scipy.py --nworkers 3\n python test_persistent_aposmm_scipy.py --nworkers 3 --comms tcp\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 2, as one of the three workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 4\n# TESTSUITE_EXTRA: true\n\nimport multiprocessing\nimport sys\n\nimport numpy as np\n\nimport libensemble.gen_funcs\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.six_hump_camel import six_hump_camel as sim_f\n\nlibensemble.gen_funcs.rc.aposmm_optimizers = \"scipy\"\nfrom time import time\n\nfrom libensemble.alloc_funcs.persistent_aposmm_alloc import persistent_aposmm_alloc as alloc_f\nfrom libensemble.gen_funcs.persistent_aposmm import aposmm as gen_f\nfrom libensemble.tests.regression_tests.support import six_hump_camel_minima as minima\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n multiprocessing.set_start_method(\"fork\", force=True)\n\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n if is_manager:\n start_time = time()\n\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_out = [\n (\"x\", float, n),\n (\"x_on_cube\", float, n),\n (\"sim_id\", int),\n (\"local_min\", bool),\n (\"local_pt\", bool),\n ]\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [\"f\"] + [n[0] for n in gen_out],\n \"out\": gen_out,\n \"user\": {\n \"initial_sample_size\": 100,\n \"sample_points\": np.round(minima, 1),\n \"localopt_method\": \"scipy_Nelder-Mead\",\n \"opt_return_codes\": [0],\n \"nu\": 1e-8,\n \"mu\": 1e-8,\n \"dist_to_bound_multiple\": 0.01,\n \"max_active_runs\": 6,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n alloc_specs = {\"alloc_f\": alloc_f}\n\n exit_criteria = {\"sim_max\": 1000}\n\n for run in range(2):\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n if run == 1:\n gen_specs[\"user\"][\"localopt_method\"] = \"scipy_BFGS\"\n gen_specs[\"user\"][\"opt_return_codes\"] = [0]\n gen_specs[\"persis_in\"].append(\"grad\")\n sim_specs[\"out\"] = [(\"f\", float), (\"grad\", float, n)]\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n if is_manager:\n print(\"[Manager]:\", H[np.where(H[\"local_min\"])][\"x\"])\n print(\"[Manager]: Time taken =\", time() - start_time, flush=True)\n\n tol = 1e-3\n min_found = 0\n for m in minima:\n # The minima are known on this test problem.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2957, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "b67ce8a8-0bdc-4258-9642-d0595281c788": {"__data__": {"id_": "b67ce8a8-0bdc-4258-9642-d0595281c788", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_scipy.py", "file_name": "test_persistent_aposmm_scipy.py", "file_type": "text/x-python", "file_size": 4697, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8c966c86-54e5-447d-b0b4-a2a8b64cce4b", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_scipy.py", "file_name": "test_persistent_aposmm_scipy.py", "file_type": "text/x-python", "file_size": 4697, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "a950e843560e5e35359ee183306f4b04edfa5134b0e9be40e98e17dc74887f72", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a004d163-293b-4a55-baff-8db49555f9fd", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_scipy.py", "file_name": "test_persistent_aposmm_scipy.py", "file_type": "text/x-python", "file_size": 4697, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "1e17699a67ea6633b4ee768ee10c7f31129edc285a0d039d03ba18b759ea0730", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# We use their values to test APOSMM has identified all minima\n print(np.min(np.sum((H[H[\"local_min\"]][\"x\"] - m) ** 2, 1)), flush=True)\n if np.min(np.sum((H[H[\"local_min\"]][\"x\"] - m) ** 2, 1)) < tol:\n min_found += 1\n assert min_found >= 2, f\"Found {min_found} minima\"\n\n save_libE_output(H, persis_info, __file__, nworkers)\n\n # Now let's run on the same problem with a really large n (but we won't test\n # convergence to all local min). Note that sim_f uses only entries x[0:2]\n n = 400\n persis_info = add_unique_random_streams({}, nworkers + 1)\n gen_specs[\"out\"][0:2] = [(\"x\", float, n), (\"x_on_cube\", float, n)]\n gen_specs[\"user\"][\"lb\"] = np.zeros(n)\n gen_specs[\"user\"][\"ub\"] = np.ones(n)\n gen_specs[\"user\"][\"lb\"][:2] = [-3, -2]\n gen_specs[\"user\"][\"ub\"][:2] = [3, 2]\n gen_specs[\"user\"][\"rk_const\"] = 4.90247\n gen_specs[\"user\"].pop(\"sample_points\")\n gen_specs[\"user\"][\"localopt_method\"] = \"scipy_Nelder-Mead\"\n sim_specs[\"out\"] = [(\"f\", float)]\n gen_specs[\"persis_in\"].remove(\"grad\")\n\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n if is_manager:\n assert np.sum(H[\"sim_ended\"]) >= exit_criteria[\"sim_max\"], \"Run didn't finish\"", "mimetype": "text/plain", "start_char_idx": 2959, "end_char_idx": 4143, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "02541506-4a99-494a-98a3-c7e83b0a3a2a": {"__data__": {"id_": "02541506-4a99-494a-98a3-c7e83b0a3a2a", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_tao_blmvm.py", "file_name": "test_persistent_aposmm_tao_blmvm.py", "file_type": "text/x-python", "file_size": 3432, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d39f55b8-96ca-477b-9cbc-f54d5bc63f6f", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_tao_blmvm.py", "file_name": "test_persistent_aposmm_tao_blmvm.py", "file_type": "text/x-python", "file_size": 3432, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "80b8ccbb9d05e7876f6243eaf6fd2cea6fe06c69418370e8262dcc974b5612ad", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with APOSMM with a PETSc/TAO local optimizer.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_persistent_aposmm_tao_blmvm.py\n python test_persistent_aposmm_tao_blmvm.py --nworkers 3\n python test_persistent_aposmm_tao_blmvm.py --nworkers 3 --comms tcp\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 2, as one of the three workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: local mpi tcp\n# TESTSUITE_NPROCS: 4\n# TESTSUITE_EXTRA: true\n\nimport multiprocessing\nimport sys\nfrom math import gamma, pi, sqrt\n\nimport numpy as np\n\nimport libensemble.gen_funcs\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.six_hump_camel import six_hump_camel as sim_f\n\nlibensemble.gen_funcs.rc.aposmm_optimizers = \"petsc\"\nfrom time import time\n\nfrom libensemble.alloc_funcs.persistent_aposmm_alloc import persistent_aposmm_alloc as alloc_f\nfrom libensemble.gen_funcs.persistent_aposmm import aposmm as gen_f\nfrom libensemble.tests.regression_tests.support import six_hump_camel_minima as minima\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n multiprocessing.set_start_method(\"fork\", force=True)\n\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n if is_manager:\n start_time = time()\n\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float), (\"grad\", float, n)],\n }\n\n gen_out = [\n (\"x\", float, n),\n (\"x_on_cube\", float, n),\n (\"sim_id\", int),\n (\"local_min\", bool),\n (\"local_pt\", bool),\n ]\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [\"f\", \"grad\"] + [n[0] for n in gen_out],\n \"out\": gen_out,\n \"user\": {\n \"initial_sample_size\": 100,\n \"sample_points\": np.round(minima, 1),\n \"localopt_method\": \"blmvm\",\n \"rk_const\": 0.5 * ((gamma(1 + (n / 2)) * 5) ** (1 / n)) / sqrt(pi),\n \"grtol\": 1e-4,\n \"gatol\": 1e-4,\n \"dist_to_bound_multiple\": 0.5,\n \"max_active_runs\": 6,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n alloc_specs = {\"alloc_f\": alloc_f}\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n exit_criteria = {\"sim_max\": 1000}\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n if is_manager:\n print(\"[Manager]:\", H[np.where(H[\"local_min\"])][\"x\"])\n print(\"[Manager]: Time taken =\", time() - start_time, flush=True)\n\n tol = 1e-5\n for m in minima:\n # The minima are known on this test problem.\n # We use their values to test APOSMM has identified all minima\n print(np.min(np.sum((H[H[\"local_min\"]][\"x\"] - m) ** 2, 1)), flush=True)\n assert np.min(np.sum((H[H[\"local_min\"]][\"x\"] - m) ** 2, 1)) < tol\n\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3080, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "8c533a7f-76af-45ee-81ae-3fd35fcf0891": {"__data__": {"id_": "8c533a7f-76af-45ee-81ae-3fd35fcf0891", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_tao_nm.py", "file_name": "test_persistent_aposmm_tao_nm.py", "file_type": "text/x-python", "file_size": 3037, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "74b4bc8a-f7ce-435f-b186-c2aed0db5857", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_tao_nm.py", "file_name": "test_persistent_aposmm_tao_nm.py", "file_type": "text/x-python", "file_size": 3037, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "e80b5d8412ea55776572dabd887ba2bb15823a7333be0a2649087790ce388f25", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with APOSMM with a PETSc/TAO local optimizer.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_persistent_aposmm_tao_nm.py\n python test_persistent_aposmm_tao_nm.py --nworkers 3\n python test_persistent_aposmm_tao_nm.py --nworkers 3 --comms tcp\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 2, as one of the three workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: local mpi tcp\n# TESTSUITE_NPROCS: 4\n# TESTSUITE_EXTRA: true\n\nimport multiprocessing\nimport sys\n\nimport numpy as np\n\nimport libensemble.gen_funcs\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.six_hump_camel import six_hump_camel as sim_f\n\nlibensemble.gen_funcs.rc.aposmm_optimizers = \"petsc\"\nfrom libensemble.alloc_funcs.persistent_aposmm_alloc import persistent_aposmm_alloc as alloc_f\nfrom libensemble.gen_funcs.persistent_aposmm import aposmm as gen_f\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n multiprocessing.set_start_method(\"fork\", force=True)\n\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float), (\"grad\", float, n)],\n }\n\n gen_out = [\n (\"x\", float, n),\n (\"x_on_cube\", float, n),\n (\"sim_id\", int),\n (\"local_min\", bool),\n (\"local_pt\", bool),\n ]\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [\"f\", \"grad\"] + [n[0] for n in gen_out],\n \"out\": gen_out,\n \"user\": {\n \"initial_sample_size\": 100,\n \"localopt_method\": \"nm\",\n \"lb\": np.array([-3, -2]), # This is only for sampling. TAO_NM doesn't honor constraints.\n \"ub\": np.array([3, 2]),\n },\n }\n\n alloc_specs = {\"alloc_f\": alloc_f}\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n exit_criteria = {\"sim_max\": 1000}\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n if is_manager:\n print(\"[Manager]:\", H[np.where(H[\"local_min\"])][\"x\"])\n assert np.sum(~H[\"local_pt\"]) > 100, \"Had to do at least 100 sample points\"\n assert np.sum(H[\"local_pt\"]) > 100, \"Why didn't at least 100 local points occur?\"\n\n if libE_specs[\"comms\"] == \"mpi\":\n persis_info = add_unique_random_streams({}, nworkers + 1)\n gen_specs[\"user\"][\"run_max_eval\"] = 10 * (n + 1)\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n if is_manager:\n assert flag == 0", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2776, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "3ba3c880-de86-44f2-ab17-e592c88bd91a": {"__data__": {"id_": "3ba3c880-de86-44f2-ab17-e592c88bd91a", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_timeout.py", "file_name": "test_persistent_aposmm_timeout.py", "file_type": "text/x-python", "file_size": 2976, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a162b09d-f580-40b3-b292-793ad8c72ca7", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_timeout.py", "file_name": "test_persistent_aposmm_timeout.py", "file_type": "text/x-python", "file_size": 2976, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "5eae0bc8a0176e88589efa9699f27ab39fbc70bfab02e0cd8258472e374040b0", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTest the APOSMM generator function's capabilities to properly exit when a\ntimeout has occurred.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_persistent_aposmm_timeout.py\n python test_persistent_aposmm_timeout.py --nworkers 3\n python test_persistent_aposmm_timeout.py --nworkers 3 --comms tcp\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 2, as one of the three workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: local mpi tcp\n# TESTSUITE_NPROCS: 4\n# TESTSUITE_EXTRA: true\n\nimport multiprocessing\nimport sys\n\nimport numpy as np\n\nimport libensemble.gen_funcs\n\nlibensemble.gen_funcs.rc.aposmm_optimizers = \"nlopt\"\n\nfrom libensemble.alloc_funcs.persistent_aposmm_alloc import persistent_aposmm_alloc as alloc_f\nfrom libensemble.gen_funcs.persistent_aposmm import aposmm as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.periodic_func import func_wrapper as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n multiprocessing.set_start_method(\"fork\", force=True)\n\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_out = [\n (\"x\", float, n),\n (\"x_on_cube\", float, n),\n (\"sim_id\", int),\n (\"local_min\", bool),\n (\"local_pt\", bool),\n ]\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [\"f\"] + [n[0] for n in gen_out],\n \"out\": gen_out,\n \"user\": {\n \"initial_sample_size\": 100,\n \"localopt_method\": \"LN_BOBYQA\",\n \"xtol_abs\": 1e-8,\n \"ftol_abs\": 1e-8,\n \"run_max_eval\": 30,\n \"lb\": np.array([0, -np.pi / 2]),\n \"ub\": np.array([2 * np.pi, 3 * np.pi / 2]),\n \"periodic\": True,\n \"print\": True,\n },\n }\n\n alloc_specs = {\"alloc_f\": alloc_f}\n\n # Setting a very high sim_max value and a short wallclock_max so timeout will occur\n exit_criteria = {\"sim_max\": 50000, \"wallclock_max\": 5}\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n if is_manager:\n assert flag == 2, \"Test should have timed out\"\n assert persis_info[1].get(\"run_order\"), \"Run_order should have been given back\"\n min_ids = np.where(H[\"local_min\"])\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2693, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "5c548ec4-f17b-48b4-94b4-f97c5b97d91e": {"__data__": {"id_": "5c548ec4-f17b-48b4-94b4-f97c5b97d91e", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_with_grad.py", "file_name": "test_persistent_aposmm_with_grad.py", "file_type": "text/x-python", "file_size": 4982, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e4387adf-cb25-4f48-b60f-e24520778c00", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_with_grad.py", "file_name": "test_persistent_aposmm_with_grad.py", "file_type": "text/x-python", "file_size": 4982, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "bd06beeace34966abab0914c69c5e7bcc3c191fdb03a437112bc9f4784bd4b1e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "02de5731-7a2c-434d-aeb4-2ed317cf2705", "node_type": "1", "metadata": {}, "hash": "aac48fc08e6d6f0802e2628c2e31ff0a153a5dff0bbc92c498a03398c213c9a8", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with APOSMM with an NLopt local optimizer that uses gradient\ninformation from the sim_f\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_persistent_aposmm_with_grad.py\n python test_persistent_aposmm_with_grad.py --nworkers 3\n python test_persistent_aposmm_with_grad.py --nworkers 3 --comms tcp\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 2, as one of the three workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: local mpi tcp\n# TESTSUITE_NPROCS: 4\n# TESTSUITE_EXTRA: true\n\nimport multiprocessing\nimport sys\nfrom math import gamma, pi, sqrt\n\nimport numpy as np\n\nimport libensemble.gen_funcs\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.six_hump_camel import six_hump_camel as sim_f\nfrom libensemble.sim_funcs.six_hump_camel import six_hump_camel_func, six_hump_camel_grad\n\nlibensemble.gen_funcs.rc.aposmm_optimizers = \"nlopt\"\nfrom time import time\n\nfrom libensemble.alloc_funcs.persistent_aposmm_alloc import persistent_aposmm_alloc as alloc_f\nfrom libensemble.gen_funcs.persistent_aposmm import aposmm as gen_f\nfrom libensemble.tests.regression_tests.support import six_hump_camel_minima as minima\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1555, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "02de5731-7a2c-434d-aeb4-2ed317cf2705": {"__data__": {"id_": "02de5731-7a2c-434d-aeb4-2ed317cf2705", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_with_grad.py", "file_name": "test_persistent_aposmm_with_grad.py", "file_type": "text/x-python", "file_size": 4982, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e4387adf-cb25-4f48-b60f-e24520778c00", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_with_grad.py", "file_name": "test_persistent_aposmm_with_grad.py", "file_type": "text/x-python", "file_size": 4982, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "bd06beeace34966abab0914c69c5e7bcc3c191fdb03a437112bc9f4784bd4b1e", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5c548ec4-f17b-48b4-94b4-f97c5b97d91e", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_aposmm_with_grad.py", "file_name": "test_persistent_aposmm_with_grad.py", "file_type": "text/x-python", "file_size": 4982, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "31b50b0f5ff33da5de3f8d259d0c04acae5a67ec28b8e00b0a0d2a4378f4d80d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "if __name__ == \"__main__\":\n multiprocessing.set_start_method(\"fork\", force=True)\n\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n if is_manager:\n start_time = time()\n\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float), (\"grad\", float, n)],\n }\n\n gen_out = [\n (\"x\", float, n),\n (\"x_on_cube\", float, n),\n (\"sim_id\", int),\n (\"local_min\", bool),\n (\"local_pt\", bool),\n ]\n\n gen_in = [\"x\", \"f\", \"grad\", \"local_pt\", \"sim_id\", \"sim_ended\", \"x_on_cube\", \"local_min\"]\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"in\": gen_in,\n \"persis_in\": gen_in,\n \"out\": gen_out,\n \"user\": {\n \"initial_sample_size\": 0, # Don't need to do evaluations because the sampling already done below\n \"localopt_method\": \"LD_MMA\",\n \"rk_const\": 0.5 * ((gamma(1 + (n / 2)) * 5) ** (1 / n)) / sqrt(pi),\n \"stop_after_k_minima\": 15,\n \"xtol_rel\": 1e-6,\n \"ftol_rel\": 1e-6,\n \"max_active_runs\": 6,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n alloc_specs = {\"alloc_f\": alloc_f}\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n exit_criteria = {\"sim_max\": 1000}\n\n # Load in \"already completed\" set of 'x','f','grad' values to give to libE/persistent_aposmm\n sample_size = len(minima)\n\n H0_dtype = [\n (\"x\", float, n),\n (\"grad\", float, n),\n (\"sim_id\", int),\n (\"x_on_cube\", float, n),\n (\"sim_ended\", bool),\n (\"f\", float),\n (\"gen_informed\", bool),\n (\"sim_started\", bool),\n ]\n H0 = np.zeros(sample_size, dtype=H0_dtype)\n\n # Two points in the following sample have the same best function value, which\n # tests the corner case for some APOSMM logic\n H0[\"x\"] = np.round(minima, 1)\n H0[\"x_on_cube\"] = (H0[\"x\"] - gen_specs[\"user\"][\"lb\"]) / (gen_specs[\"user\"][\"ub\"] - gen_specs[\"user\"][\"lb\"])\n H0[\"sim_id\"] = range(sample_size)\n H0[[\"sim_started\", \"gen_informed\", \"sim_ended\"]] = True\n\n for i in range(sample_size):\n H0[\"f\"][i] = six_hump_camel_func(H0[\"x\"][i])\n H0[\"grad\"][i] = six_hump_camel_grad(H0[\"x\"][i])\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs, H0=H0)\n\n if is_manager:\n assert persis_info[1].get(\"run_order\"), \"Run_order should have been given back\"\n assert (\n len(persis_info[1][\"run_order\"]) >= gen_specs[\"user\"][\"stop_after_k_minima\"]\n ), \"This test should have many runs started.\"\n assert len(H) < exit_criteria[\"sim_max\"], \"Test should have stopped early due to 'stop_after_k_minima'\"\n\n print(\"[Manager]:\", H[np.where(H[\"local_min\"])][\"x\"])\n print(\"[Manager]: Time taken =\", time() - start_time, flush=True)\n\n tol = 1e-5\n for m in minima:\n # The minima are known on this test problem.\n # We use their values to test APOSMM has identified all minima\n print(np.min(np.sum((H[H[\"local_min\"]][\"x\"] - m) ** 2, 1)), flush=True)\n assert np.min(np.sum((H[H[\"local_min\"]][\"x\"] - m) ** 2, 1)) < tol\n\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 1556, "end_char_idx": 4485, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a82ec975-f243-40cb-9e2f-2c8b5eba507e": {"__data__": {"id_": "a82ec975-f243-40cb-9e2f-2c8b5eba507e", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_fd_param_finder.py", "file_name": "test_persistent_fd_param_finder.py", "file_type": "text/x-python", "file_size": 2771, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "665ac598-5466-4707-9e24-bd5049e8c91b", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_fd_param_finder.py", "file_name": "test_persistent_fd_param_finder.py", "file_type": "text/x-python", "file_size": 2771, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "740e9dee64937d6b8e2ff1972e27354f5319d83cd0cf8ac477b6d5fffd5fc7db", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with the fd_param_finder persistent gen_f, which finds an\nappropriate finite-difference parameter for the sim_f mapping from R^n to R^p\naround the point x.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_persistent_fd_param_finder.py\n\nWhen running with the above command, the number of concurrent evaluations of\nthe objective function will be 2, as one of the three workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi\n# TESTSUITE_NPROCS: 4\n# TESTSUITE_OS_SKIP: OSX\n# TESTSUITE_EXTRA: true\n\nimport shutil # For ECnoise.m\n\nimport numpy as np\n\nfrom libensemble import Ensemble\nfrom libensemble.alloc_funcs.start_fd_persistent import finite_diff_alloc as alloc_f\nfrom libensemble.gen_funcs.persistent_fd_param_finder import fd_param_finder as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.sim_funcs.noisy_vector_mapping import func_wrapper as sim_f\nfrom libensemble.sim_funcs.noisy_vector_mapping import noisy_function\nfrom libensemble.specs import AllocSpecs, ExitCriteria, GenSpecs, SimSpecs\nfrom libensemble.tools import add_unique_random_streams\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n x0 = np.array([1.23, 4.56]) # point about which we are calculating finite difference parameters\n f0 = noisy_function(x0)\n n = len(x0)\n p = len(f0)\n\n fd_test = Ensemble(\n parse_args=True,\n sim_specs=SimSpecs(\n sim_f=sim_f,\n inputs=[\"x\", \"f_ind\"],\n out=[(\"f_val\", float)],\n ),\n gen_specs=GenSpecs(\n gen_f=gen_f,\n persis_in=[\"x\", \"f_val\", \"n_ind\", \"f_ind\", \"x_ind\", \"sim_id\"],\n out=[(\"x\", float, (n,)), (\"n_ind\", int), (\"f_ind\", int), (\"x_ind\", int)],\n user={\n \"x0\": x0,\n \"f0\": f0,\n \"nf\": 10,\n \"p\": p,\n \"n\": n,\n \"noise_h_mat\": np.multiply(np.logspace(-16, -1, p), np.ones((n, p))),\n \"maxnoiseits\": 3,\n },\n ),\n alloc_specs=AllocSpecs(alloc_f=alloc_f),\n exit_criteria=ExitCriteria(gen_max=1000),\n )\n fd_test.persis_info = add_unique_random_streams({}, fd_test.nworkers + 1)\n\n shutil.copy(\"./scripts_used_by_reg_tests/ECnoise.m\", \"./\")\n\n H, persis_info, _ = fd_test.run()\n\n if fd_test.is_manager:\n assert len(H) < fd_test.exit_criteria.gen_max, \"Problem didn't stop early, which should have been the case.\"\n assert np.all(persis_info[1][\"Fnoise\"] > 0), \"gen_f didn't find noise for all F_i components.\"\n\n fd_test.save_output(__file__)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2473, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "09a25642-a408-4fdb-b047-1d668e98601a": {"__data__": {"id_": "09a25642-a408-4fdb-b047-1d668e98601a", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_gp_multitask_ax.py", "file_name": "test_persistent_gp_multitask_ax.py", "file_type": "text/x-python", "file_size": 4145, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b9c16011-d34d-4e77-a437-96473c5acb77", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_gp_multitask_ax.py", "file_name": "test_persistent_gp_multitask_ax.py", "file_type": "text/x-python", "file_size": 4145, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "b7a38f15ae181edf1b0e97417655a1fb56d987f5b6fd6d2bb89ee759e2f03c38", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a003eea8-2eed-4ee9-b2e6-74364c72b6d2", "node_type": "1", "metadata": {}, "hash": "97b6a4ddf0be4c2a045216ee4b5769679d6c464ec878e5a609ed62b01e05af8c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nExample of multi-fidelity optimization using a persistent GP gen_func (calling\nAx).\n\nThis test uses the gen_on_manager option (persistent generator runs on\na thread). Therefore nworkers is the number of simulation workers.\n\nExecute via one of the following commands:\n mpiexec -np 4 python test_persistent_gp_multitask_ax.py\n python test_persistent_gp_multitask_ax.py --nworkers 3\n python test_persistent_gp_multitask_ax.py --nworkers 3 --comms tcp\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 3.\n\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: local mpi\n# TESTSUITE_NPROCS: 4\n# TESTSUITE_EXTRA: true\n# TESTSUITE_OS_SKIP: OSX\n\nimport warnings\n\nimport numpy as np\n\nfrom libensemble import logger\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens\nfrom libensemble.libE import libE\nfrom libensemble.message_numbers import WORKER_DONE\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\n# Ax uses a deprecated warn command.\nwarnings.filterwarnings(\"ignore\", category=UserWarning)\nwarnings.filterwarnings(\"ignore\", category=DeprecationWarning)\nwarnings.filterwarnings(\"ignore\", category=FutureWarning)\n\nfrom libensemble.gen_funcs.persistent_ax_multitask import persistent_gp_mt_ax_gen_f\n\ndef run_simulation(H, persis_info, sim_specs, libE_info):\n # Extract input parameters\n values = list(H[\"x\"][0])\n x0 = values[0]\n x1 = values[1]\n # Extract fidelity parameter\n task = H[\"task\"][0]\n if task == \"expensive_model\":\n z = 8\n elif task == \"cheap_model\":\n z = 1\n print(\"in sim\", task)\n\n libE_output = np.zeros(1, dtype=sim_specs[\"out\"])\n calc_status = WORKER_DONE\n\n # Function that depends on the resolution parameter\n libE_output[\"f\"] = -(x0 + 10 * np.cos(x0 + 0.1 * z)) * (x1 + 5 * np.cos(x1 - 0.2 * z))\n\n return libE_output, persis_info, calc_status\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n libE_specs[\"gen_on_manager\"] = True\n\n mt_params = {\n \"name_hifi\": \"expensive_model\",\n \"name_lofi\": \"cheap_model\",\n \"n_init_hifi\": 4,\n \"n_init_lofi\": 4,\n \"n_opt_hifi\": 2,\n \"n_opt_lofi\": 4,\n }\n\n sim_specs = {\n \"sim_f\": run_simulation,\n \"in\": [\"x\", \"task\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = {\n # Generator function. Will randomly generate new sim inputs 'x'.\n \"gen_f\": persistent_gp_mt_ax_gen_f,\n # Generator input. This is a RNG, no need for inputs.\n \"in\": [\"sim_id\", \"x\", \"f\", \"task\"],\n \"persis_in\": [\"sim_id\", \"x\", \"f\", \"task\"],\n \"out\": [\n # parameters to input into the simulation.\n (\"x\", float, (2,)),\n (\"task\", str, max([len(mt_params[\"name_hifi\"]), len(mt_params[\"name_lofi\"])])),\n (\"resource_sets\", int),\n ],\n \"user\": {\n \"range\": [1, 8],\n # Total max number of sims running concurrently.\n \"gen_batch_size\": nworkers - 1,\n # Lower bound for the n parameters.\n \"lb\": np.array([0, 0]),\n # Upper bound for the n parameters.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3037, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a003eea8-2eed-4ee9-b2e6-74364c72b6d2": {"__data__": {"id_": "a003eea8-2eed-4ee9-b2e6-74364c72b6d2", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_gp_multitask_ax.py", "file_name": "test_persistent_gp_multitask_ax.py", "file_type": "text/x-python", "file_size": 4145, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b9c16011-d34d-4e77-a437-96473c5acb77", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_gp_multitask_ax.py", "file_name": "test_persistent_gp_multitask_ax.py", "file_type": "text/x-python", "file_size": 4145, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "b7a38f15ae181edf1b0e97417655a1fb56d987f5b6fd6d2bb89ee759e2f03c38", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "09a25642-a408-4fdb-b047-1d668e98601a", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_gp_multitask_ax.py", "file_name": "test_persistent_gp_multitask_ax.py", "file_type": "text/x-python", "file_size": 4145, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "c777e3cbfd6fe68970e062927d66d12583f0de666f16d484f7d8da706a52da35", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Will randomly generate new sim inputs 'x'.\n \"gen_f\": persistent_gp_mt_ax_gen_f,\n # Generator input. This is a RNG, no need for inputs.\n \"in\": [\"sim_id\", \"x\", \"f\", \"task\"],\n \"persis_in\": [\"sim_id\", \"x\", \"f\", \"task\"],\n \"out\": [\n # parameters to input into the simulation.\n (\"x\", float, (2,)),\n (\"task\", str, max([len(mt_params[\"name_hifi\"]), len(mt_params[\"name_lofi\"])])),\n (\"resource_sets\", int),\n ],\n \"user\": {\n \"range\": [1, 8],\n # Total max number of sims running concurrently.\n \"gen_batch_size\": nworkers - 1,\n # Lower bound for the n parameters.\n \"lb\": np.array([0, 0]),\n # Upper bound for the n parameters.\n \"ub\": np.array([15, 15]),\n },\n }\n gen_specs[\"user\"] = {**gen_specs[\"user\"], **mt_params}\n\n alloc_specs = {\n \"alloc_f\": only_persistent_gens,\n \"user\": {\"async_return\": False},\n }\n\n # libE logger\n logger.set_level(\"INFO\")\n\n # Exit criteria\n exit_criteria = {\"sim_max\": 20} # Exit after running sim_max simulations\n\n # Create a different random number stream for each worker and the manager\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n # Run LibEnsemble, and store results in history array H\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n # Save results to numpy file\n if is_manager:\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 2426, "end_char_idx": 3748, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "3e54f82b-7ec1-44b2-97c1-066cdd2efc4a": {"__data__": {"id_": "3e54f82b-7ec1-44b2-97c1-066cdd2efc4a", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_sampling_CUDA_variable_resources.py", "file_name": "test_persistent_sampling_CUDA_variable_resources.py", "file_type": "text/x-python", "file_size": 3372, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f580794c-abbb-4ca4-89e9-673213eda821", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_sampling_CUDA_variable_resources.py", "file_name": "test_persistent_sampling_CUDA_variable_resources.py", "file_type": "text/x-python", "file_size": 3372, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "5a6c7858ab42399d33bdd73cdf0b43a1afae474aef1c78e3039fa20e735460b6", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests CUDA variable resource detection in libEnsemble\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_persistent_sampling_CUDA_variable_resources.py\n\nWhen running with the above command, the number of concurrent evaluations of\nthe objective function will be 2, as one of the three workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 4\n\nimport sys\n\nimport numpy as np\n\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.executors.mpi_executor import MPIExecutor\nfrom libensemble.gen_funcs.persistent_sampling_var_resources import uniform_sample as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs import six_hump_camel\nfrom libensemble.sim_funcs.var_resources import CUDA_variable_resources as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n # The persistent gen does not need resources\n\n libE_specs[\"num_resource_sets\"] = nworkers - 1 # Any worker can be the gen\n\n # libE_specs[\"zero_resource_workers\"] = [1] # If first worker must be gen, use this instead\n\n libE_specs[\"sim_dirs_make\"] = True\n libE_specs[\"workflow_dir_path\"] = \"./ensemble_CUDA/workflow_\" + libE_specs[\"comms\"] + \"_w\" + str(nworkers) + \"_N\"\n libE_specs[\"sim_dir_copy_files\"] = [\".gitignore\"]\n libE_specs[\"reuse_output_dir\"] = True\n\n if libE_specs[\"comms\"] == \"tcp\":\n sys.exit(\"This test only runs with MPI or local -- aborting...\")\n\n # Get paths for applications to run\n six_hump_camel_app = six_hump_camel.__file__\n exctr = MPIExecutor()\n exctr.register_app(full_path=six_hump_camel_app, app_name=\"six_hump_camel\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n \"user\": {},\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [\"f\", \"x\", \"sim_id\"],\n \"out\": [(\"resource_sets\", int), (\"x\", float, n)],\n \"user\": {\n \"initial_batch_size\": nworkers - 1,\n \"max_resource_sets\": nworkers - 1, # Any sim created can req. 1 worker up to all.\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n alloc_specs = {\n \"alloc_f\": alloc_f,\n \"user\": {\n \"give_all_with_same_priority\": False,\n \"async_return\": True,\n },\n }\n\n libE_specs[\"scheduler_opts\"] = {\"match_slots\": True}\n persis_info = add_unique_random_streams({}, nworkers + 1)\n exit_criteria = {\"sim_max\": 40, \"wallclock_max\": 300}\n\n # Perform the run\n\n for i in range(2):\n persis_info = add_unique_random_streams({}, nworkers + 1)\n libE_specs[\"workflow_dir_path\"] = libE_specs[\"workflow_dir_path\"][:-1] + str(i)\n H, persis_info, flag = libE(\n sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs, alloc_specs=alloc_specs\n )\n\n if is_manager:\n assert flag == 0\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3078, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "7d7e9ac2-a0b8-41f0-a928-3ddc9a63ce63": {"__data__": {"id_": "7d7e9ac2-a0b8-41f0-a928-3ddc9a63ce63", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_sim_uniform_sampling.py", "file_name": "test_persistent_sim_uniform_sampling.py", "file_type": "text/x-python", "file_size": 2910, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9f08513a-0e1b-4193-b57b-f6904f363f04", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_sim_uniform_sampling.py", "file_name": "test_persistent_sim_uniform_sampling.py", "file_type": "text/x-python", "file_size": 2910, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "fb32120be18b40cd11dd6b2311de120e418de14143564eb005ed67f9771baf6b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble on the 6-hump camel problem. Documented here:\n https://www.sfu.ca/~ssurjano/camel6.html\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_persistent_sim_uniform_sampling.py\n python test_persistent_sim_uniform_sampling.py --nworkers 3\n python test_persistent_sim_uniform_sampling.py --nworkers 3 --comms tcp\n\nWhen running with the above command, the number of concurrent evaluations of\nthe objective function will be 2, as one of the three workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local tcp\n# TESTSUITE_NPROCS: 3 4\n# TESTSUITE_OS_SKIP: WIN\n\nimport sys\n\nimport numpy as np\n\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.gen_funcs.persistent_sampling import persistent_uniform as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.six_hump_camel import persistent_six_hump_camel as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\n# from libensemble import logger\n# logger.set_level(\"DEBUG\")\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n libE_specs[\"num_resource_sets\"] = nworkers - 1 # Only matters if sims use resources.\n\n # Only used to test returning/overwriting a point at the end of the persistent sim.\n libE_specs[\"use_persis_return_sim\"] = True\n\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n n = 2\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"user\": {\"replace_final_fields\": True},\n \"out\": [(\"f\", float), (\"grad\", float, n)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"in\": [],\n \"persis_in\": [\"sim_id\", \"f\", \"grad\"],\n \"out\": [(\"x\", float, (n,))],\n \"user\": {\n \"initial_batch_size\": 5,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n alloc_specs = {\"alloc_f\": alloc_f, \"user\": {\"alt_type\": True}}\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n exit_criteria = {\"sim_max\": 40, \"wallclock_max\": 300}\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n if is_manager:\n assert len(np.unique(H[\"gen_ended_time\"])) == 8\n assert not any((H[\"f\"] == 0))\n # Should overwrite the last value (in fact last (nworker-1) values) with f(1,1) = 3.23333333\n assert not np.isclose(H[\"f\"][0], 3.23333333)\n assert np.isclose(H[\"f\"][-1], 3.23333333)\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2700, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "3bfb668a-4b06-4050-8034-434434015c67": {"__data__": {"id_": "3bfb668a-4b06-4050-8034-434434015c67", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_surmise_calib.py", "file_name": "test_persistent_surmise_calib.py", "file_type": "text/x-python", "file_size": 4596, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "775f29f0-7101-479c-9afd-591bc3345bb6", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_surmise_calib.py", "file_name": "test_persistent_surmise_calib.py", "file_type": "text/x-python", "file_size": 4596, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "4c271ce4d8cd0fc8079ba599a93e0a33b637bbc185f5e6b00de388f0fac91eec", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f38a1c0c-95a1-4dab-b2b9-4f1b708c2be1", "node_type": "1", "metadata": {}, "hash": "b0d541c71c702930d0afaa74c70f36fd43a7fe3285b454296edbbf28e1d16516", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with Surmise calibration test.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_persistent_surmise_calib.py\n python test_persistent_surmise_calib.py --nworkers 3\n python test_persistent_surmise_calib.py --nworkers 3 --comms tcp\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 2, as one of the three workers will be the\npersistent generator.\n\nThis test uses the Surmise package to perform a Borehole Calibration with\nselective simulation cancellation. Initial observations are modeled using\na theta at the center of a unit hypercube. The initial function values for\nthese are run first. As the model is updated, the generator selects previously\nissued evaluations to cancel.\n\nSee more information, see tutorial:\n\"Borehole Calibration with Selective Simulation Cancellation\"\nin the libEnsemble documentation.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local tcp\n# TESTSUITE_NPROCS: 3 4\n# TESTSUITE_EXTRA: true\n# TESTSUITE_OS_SKIP: OSX\n\n# Requires:\n# Install Surmise package\n\nimport numpy as np\n\nfrom libensemble import Ensemble\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.gen_funcs.persistent_surmise_calib import surmise_calib as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.sim_funcs.surmise_test_function import borehole as sim_f\nfrom libensemble.sim_funcs.surmise_test_function import tstd2theta\nfrom libensemble.specs import AllocSpecs, ExitCriteria, GenSpecs, SimSpecs\nfrom libensemble.tools import add_unique_random_streams\n\nif __name__ == \"__main__\":\n n_init_thetas = 15 # Initial batch of thetas\n n_x = 25 # No. of x values\n nparams = 4 # No. of theta params\n ndims = 3 # No. of x coordinates.\n max_add_thetas = 50 # Max no. of thetas added for evaluation\n step_add_theta = 10 # No. of thetas to generate per step, before emulator is rebuilt\n n_explore_theta = 200 # No. of thetas to explore while selecting the next theta\n obsvar = 10 ** (-1) # Constant for generating noise in obs\n\n # Batch mode until after init_sample_size (add one theta to batch for observations)\n init_sample_size = (n_init_thetas + 1) * n_x\n\n # Stop after max_emul_runs runs of the emulator\n max_evals = init_sample_size + max_add_thetas * n_x\n\n gen_out = [\n (\"x\", float, ndims),\n (\"thetas\", float, nparams),\n (\"priority\", int),\n (\"obs\", float, n_x),\n (\"obsvar\", float, n_x),\n ]\n\n test = Ensemble(\n parse_args=True,\n sim_specs=SimSpecs(\n sim_f=sim_f,\n inputs=[\"x\", \"thetas\"],\n out=[(\"f\", float)],\n user={\"num_obs\": n_x},\n ),\n gen_specs=GenSpecs(\n gen_f=gen_f,\n persis_in=[o[0] for o in gen_out] + [\"f\", \"sim_ended\", \"sim_id\"],\n out=gen_out,\n user={\n \"n_init_thetas\": n_init_thetas, # No. of thetas in initial batch\n \"num_x_vals\": n_x, # No. of x points to create\n \"step_add_theta\": step_add_theta, # No. of thetas to generate per step\n \"n_explore_theta\": n_explore_theta, # No. of thetas to explore each step\n \"obsvar\": obsvar, # Variance for generating noise in obs\n \"init_sample_size\": init_sample_size, # Initial batch size inc.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3164, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f38a1c0c-95a1-4dab-b2b9-4f1b708c2be1": {"__data__": {"id_": "f38a1c0c-95a1-4dab-b2b9-4f1b708c2be1", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_surmise_calib.py", "file_name": "test_persistent_surmise_calib.py", "file_type": "text/x-python", "file_size": 4596, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "775f29f0-7101-479c-9afd-591bc3345bb6", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_surmise_calib.py", "file_name": "test_persistent_surmise_calib.py", "file_type": "text/x-python", "file_size": 4596, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "4c271ce4d8cd0fc8079ba599a93e0a33b637bbc185f5e6b00de388f0fac91eec", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "3bfb668a-4b06-4050-8034-434434015c67", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_surmise_calib.py", "file_name": "test_persistent_surmise_calib.py", "file_type": "text/x-python", "file_size": 4596, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "7ad33e0dee58183bc2715478e6f39df153eaa3ffa4714a635665ea8a6166bed6", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "of thetas in initial batch\n \"num_x_vals\": n_x, # No. of x points to create\n \"step_add_theta\": step_add_theta, # No. of thetas to generate per step\n \"n_explore_theta\": n_explore_theta, # No. of thetas to explore each step\n \"obsvar\": obsvar, # Variance for generating noise in obs\n \"init_sample_size\": init_sample_size, # Initial batch size inc. observations\n \"priorloc\": 1, # Prior location in the unit cube\n \"priorscale\": 0.5, # Standard deviation of prior\n },\n ),\n alloc_specs=AllocSpecs(\n alloc_f=alloc_f,\n user={\n \"init_sample_size\": init_sample_size,\n \"async_return\": True, # True = Return results to gen as they come in (after sample)\n \"active_recv_gen\": True, # Persistent gen can handle irregular communications\n },\n ),\n exit_criteria=ExitCriteria(sim_max=max_evals),\n )\n\n test.persis_info = add_unique_random_streams({}, test.nworkers + 1)\n\n # Perform the run\n H, _, _ = test.run()\n\n if test.is_manager:\n print(\"Cancelled sims\", H[\"sim_id\"][H[\"cancel_requested\"]])\n sims_done = np.count_nonzero(H[\"sim_ended\"])\n test.save_output(__file__)\n assert sims_done == max_evals, f\"No. of completed simulations should be {max_evals}. Is {sims_done}\"\n\n # The following line is only to cover parts of tstd2theta\n tstd2theta(H[0][\"thetas\"].squeeze(), hard=False)", "mimetype": "text/plain", "start_char_idx": 2821, "end_char_idx": 4079, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ff6c8fdb-c5c2-48aa-848e-1a572b441406": {"__data__": {"id_": "ff6c8fdb-c5c2-48aa-848e-1a572b441406", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_surmise_killsims.py", "file_name": "test_persistent_surmise_killsims.py", "file_type": "text/x-python", "file_size": 5687, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "048602cb-ddec-4f30-b471-cc09981f9ec2", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_surmise_killsims.py", "file_name": "test_persistent_surmise_killsims.py", "file_type": "text/x-python", "file_size": 5687, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "b7a107b6aabc6234b9c40e5dd6e0b18a8dde85b44ffff5cdd6e8a6bb9137bab8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "af811acf-bf49-4ceb-8efa-de49a8b12b3b", "node_type": "1", "metadata": {}, "hash": "c6d963e2c16e5b5db591a62b6396511f609bcc0db31cf127f6a146ce1519fb6a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests libEnsemble's capability to kill/cancel simulations that are in progress.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_persistent_surmise_killsims.py\n python test_persistent_surmise_killsims.py --nworkers 3\n python test_persistent_surmise_killsims.py --nworkers 3 --comms tcp\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 2, as one of the three workers will be the\npersistent generator.\n\nThis test is a smaller variant of test_persistent_surmise_calib.py, but which\nsubprocesses a compiled version of the borehole simulation. A delay is\nadded to simulations after the initial batch, so that the killing of running\nsimulations can be tested. This will only affect simulations that have already\nbeen issued to a worker when the cancel request is registesred by the manager.\n\nSee more information, see tutorial:\n\"Borehole Calibration with Selective Simulation Cancellation\"\nin the libEnsemble documentation.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local tcp\n# TESTSUITE_NPROCS: 3 4\n# TESTSUITE_EXTRA: true\n# TESTSUITE_OS_SKIP: OSX\n\n# Requires:\n# Install Surmise package\n\nimport os\n\nimport numpy as np\n\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.executors.executor import Executor\nfrom libensemble.gen_funcs.persistent_surmise_calib import surmise_calib as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.borehole_kills import borehole as sim_f\nfrom libensemble.tests.regression_tests.common import build_borehole # current location\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\n# from libensemble import logger\n# logger.set_level(\"DEBUG\") # To get debug logging in ensemble.log\n\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n n_init_thetas = 15 # Initial batch of thetas\n n_x = 5 # No. of x values\n nparams = 4 # No. of theta params\n ndims = 3 # No. of x coordinates.\n max_add_thetas = 20 # Max no. of thetas added for evaluation\n step_add_theta = 10 # No. of thetas to generate per step, before emulator is rebuilt\n n_explore_theta = 200 # No.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2308, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "af811acf-bf49-4ceb-8efa-de49a8b12b3b": {"__data__": {"id_": "af811acf-bf49-4ceb-8efa-de49a8b12b3b", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_surmise_killsims.py", "file_name": "test_persistent_surmise_killsims.py", "file_type": "text/x-python", "file_size": 5687, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "048602cb-ddec-4f30-b471-cc09981f9ec2", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_surmise_killsims.py", "file_name": "test_persistent_surmise_killsims.py", "file_type": "text/x-python", "file_size": 5687, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "b7a107b6aabc6234b9c40e5dd6e0b18a8dde85b44ffff5cdd6e8a6bb9137bab8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ff6c8fdb-c5c2-48aa-848e-1a572b441406", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_surmise_killsims.py", "file_name": "test_persistent_surmise_killsims.py", "file_type": "text/x-python", "file_size": 5687, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "74dfd5f98de32933caa329b58b6bac6799acb72f8cf192d433de43e8f05f8185", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "of x values\n nparams = 4 # No. of theta params\n ndims = 3 # No. of x coordinates.\n max_add_thetas = 20 # Max no. of thetas added for evaluation\n step_add_theta = 10 # No. of thetas to generate per step, before emulator is rebuilt\n n_explore_theta = 200 # No. of thetas to explore while selecting the next theta\n obsvar = 10 ** (-1) # Constant for generating noise in obs\n\n # Batch mode until after init_sample_size (add one theta to batch for observations)\n init_sample_size = (n_init_thetas + 1) * n_x\n\n # Stop after max_emul_runs runs of the emulator\n max_evals = init_sample_size + max_add_thetas * n_x\n\n sim_app = os.path.join(os.getcwd(), \"borehole.x\")\n if not os.path.isfile(sim_app):\n build_borehole()\n\n exctr = Executor() # Run serial sub-process in place\n exctr.register_app(full_path=sim_app, app_name=\"borehole\")\n\n # Subprocess variant creates input and output files for each sim\n libE_specs[\"sim_dirs_make\"] = True # To keep all - make sim dirs\n libE_specs[\"kill_canceled_sims\"] = True\n\n # Rename ensemble dir for non-interference with other regression tests\n en_suffix = str(nworkers) + \"_\" + libE_specs.get(\"comms\")\n libE_specs[\"ensemble_dir_path\"] = \"ensemble_calib_kills_w\" + en_suffix\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\", \"thetas\"],\n \"out\": [\n (\"f\", float),\n (\"sim_killed\", bool), # \"sim_killed\" is used only for display at the end of this test\n ],\n \"user\": {\n \"num_obs\": n_x,\n \"init_sample_size\": init_sample_size,\n },\n }\n\n gen_out = [\n (\"x\", float, ndims),\n (\"thetas\", float, nparams),\n (\"priority\", int),\n (\"obs\", float, n_x),\n (\"obsvar\", float, n_x),\n ]\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [o[0] for o in gen_out] + [\"f\", \"sim_ended\", \"sim_id\"],\n \"out\": gen_out,\n \"user\": {\n \"n_init_thetas\": n_init_thetas, # Num thetas in initial batch\n \"num_x_vals\": n_x, # Num x points to create\n \"step_add_theta\": step_add_theta, # No. of thetas to generate per step\n \"n_explore_theta\": n_explore_theta, # No. of thetas to explore each step\n \"obsvar\": obsvar, # Variance for generating noise in obs\n \"init_sample_size\": init_sample_size, # Initial batch size inc. observations\n \"priorloc\": 1, # Prior location in the unit cube.\n \"priorscale\": 0.2, # Standard deviation of prior\n },\n }\n\n alloc_specs = {\n \"alloc_f\": alloc_f,\n \"user\": {\n \"init_sample_size\": init_sample_size,\n \"async_return\": True, # True = Return results to gen as they come in (after sample)\n \"active_recv_gen\": True, # Persistent gen can handle irregular communications\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n exit_criteria = {\"sim_max\": max_evals}\n\n # Perform the run\n H, persis_info, flag = libE(\n sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs=alloc_specs, libE_specs=libE_specs\n )\n\n if is_manager:\n print(\"Cancelled sims\", H[\"sim_id\"][H[\"cancel_requested\"]])\n print(\"Kills sent by manager to running simulations\", H[\"sim_id\"][H[\"kill_sent\"]])\n print(\"Killed sims\", H[\"sim_id\"][H[\"sim_killed\"]])\n sims_done = np.count_nonzero(H[\"sim_ended\"])\n save_libE_output(H, persis_info, __file__, nworkers)\n assert sims_done == max_evals, f\"Num of completed simulations should be {max_evals}. Is {sims_done}\"", "mimetype": "text/plain", "start_char_idx": 2050, "end_char_idx": 5189, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "eaa1c089-62c9-4e6c-aabe-e8bd7e9cd0ca": {"__data__": {"id_": "eaa1c089-62c9-4e6c-aabe-e8bd7e9cd0ca", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_tasmanian.py", "file_name": "test_persistent_tasmanian.py", "file_type": "text/x-python", "file_size": 5906, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "870ea4f0-681b-496e-97b8-12f1978dafff", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_tasmanian.py", "file_name": "test_persistent_tasmanian.py", "file_type": "text/x-python", "file_size": 5906, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "3d17ed4ccfe85d0be00d214965304855df8e7c9be1205fd3d1a5c89a29238550", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "980d6210-126f-4bba-ad8f-2b5f8a6dd35e", "node_type": "1", "metadata": {}, "hash": "60f48fbc699ebb31518e241bb9165e0f0943fc98bf23bb87035d669352587767", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests the batch-mode of the Tasmanian generator function.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_persistent_tasmanian.py\n python test_persistent_tasmanian.py --nworkers 3\n python test_persistent_tasmanian.py --nworkers 3 --comms tcp\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 2, as one of the three workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: local\n# TESTSUITE_NPROCS: 4\n# TESTSUITE_OS_SKIP: OSX\n# TESTSUITE_EXTRA: true\n\nimport sys\nfrom time import time\n\nimport numpy as np\n\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.gen_funcs.persistent_tasmanian import sparse_grid_batched as gen_f_batched\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.six_hump_camel import six_hump_camel as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\ndef tasmanian_init_global():\n # Note: if Tasmanian has been compiled with OpenMP support (i.e., the usual way)\n # libEnsemble calls cannot be made after the `import Tasmanian` clause\n # there is a conflict between the OpenMP environment and Python threading\n # thus Tasmanian has to be imported inside the `tasmanian_init` method\n import Tasmanian\n\n grid = Tasmanian.makeGlobalGrid(num_dimensions, 1, 6, \"iptotal\", \"clenshaw-curtis\")\n grid.setDomainTransform(np.array([[-5.0, 5.0], [-2.0, 2.0]]))\n return grid\n\ndef tasmanian_init_localp():\n import Tasmanian\n\n grid = Tasmanian.makeLocalPolynomialGrid(num_dimensions, 1, 3)\n grid.setDomainTransform(np.array([[-5.0, 5.0], [-2.0, 2.0]]))\n return grid\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n if is_manager:\n start_time = time()\n\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n num_dimensions = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f_batched,\n \"persis_in\": [\"x\", \"f\", \"sim_id\"],\n \"out\": [(\"x\", float, num_dimensions)],\n }\n\n alloc_specs = {\"alloc_f\": alloc_f}\n\n grid_files = []\n\n for run in range(3):\n # testing two cases, static construction without refinement\n # and refinement until 100 points have been computed\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n # set the stopping criteria\n if run != 1:\n # note that using 'setAnisotropicRefinement' without 'gen_max' will create an infinite loop\n # other stopping criteria could be used with 'setSurplusRefinement' or no refinement\n exit_criteria = {\"wallclock_max\": 10}\n elif run == 1:\n exit_criteria = {\"gen_max\": 100} # This will test persistent_tasmanian stopping early.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2957, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "980d6210-126f-4bba-ad8f-2b5f8a6dd35e": {"__data__": {"id_": "980d6210-126f-4bba-ad8f-2b5f8a6dd35e", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_tasmanian.py", "file_name": "test_persistent_tasmanian.py", "file_type": "text/x-python", "file_size": 5906, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "870ea4f0-681b-496e-97b8-12f1978dafff", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_tasmanian.py", "file_name": "test_persistent_tasmanian.py", "file_type": "text/x-python", "file_size": 5906, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "3d17ed4ccfe85d0be00d214965304855df8e7c9be1205fd3d1a5c89a29238550", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "eaa1c089-62c9-4e6c-aabe-e8bd7e9cd0ca", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_tasmanian.py", "file_name": "test_persistent_tasmanian.py", "file_type": "text/x-python", "file_size": 5906, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "70f63ae2162b15de824645efc831657e606d1a10c640ece20de81ca27b44e077", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# tasmanian_init has to be a method that returns an initialized TasmanianSparseGrid object\n # tasmanian_checkpoint_file will be overwritten between each step of the iterative refinement\n # the final grid will also be stored in the file\n gen_specs[\"user\"] = {\n \"tasmanian_init\": tasmanian_init_global if run < 2 else tasmanian_init_localp,\n \"tasmanian_checkpoint_file\": f\"tasmanian{run}.grid\",\n }\n\n # setup the refinement criteria\n if run == 0:\n gen_specs[\"user\"][\"refinement\"] = \"none\"\n\n if run == 1:\n # See Tasmanian manual: https://ornl.github.io/TASMANIAN/stable/classTasGrid_1_1TasmanianSparseGrid.html\n gen_specs[\"user\"][\"refinement\"] = \"setAnisotropicRefinement\"\n gen_specs[\"user\"][\"sType\"] = \"iptotal\"\n gen_specs[\"user\"][\"iMinGrowth\"] = 10\n gen_specs[\"user\"][\"iOutput\"] = 0\n\n if run == 2:\n gen_specs[\"user\"][\"refinement\"] = \"setSurplusRefinement\"\n gen_specs[\"user\"][\"fTolerance\"] = 1.0e-2\n gen_specs[\"user\"][\"sCriteria\"] = \"classic\"\n gen_specs[\"user\"][\"iOutput\"] = 0\n\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n if is_manager:\n grid_files.append(gen_specs[\"user\"][\"tasmanian_checkpoint_file\"])\n\n if run == 0:\n print(\"[Manager]: Time taken =\", time() - start_time, flush=True)\n\n save_libE_output(H, persis_info, __file__, nworkers)\n\n if is_manager:\n # run sanity check on the computed results\n # using the checkpoint file to read the grids from the filesystem\n # Note: cannot make any more libEnsemble calls after importing Tasmanian,\n # see the earlier note in tasmanian_init_global()\n import Tasmanian\n\n assert len(grid_files) == 3, \"Failed to generate three Tasmanian grid files\"\n\n for run in range(len(grid_files)):\n grid = Tasmanian.SparseGrid()\n grid.read(grid_files[run])\n if run == 0:\n assert grid.getNumNeeded() == 0, \"Failed to leave no points needing data\"\n assert grid.getNumLoaded() == 49, \"Failed to load all points\"\n\n if run == 1:\n assert grid.getNumNeeded() == 0, \"Failed to stop after completing the refinement iteration\"\n assert grid.getNumLoaded() == 89, \"Failed to load all points\"\n\n if run == 2:\n assert grid.getNumNeeded() == 0, \"Failed to stop after completing the refinement iteration\"\n assert grid.getNumLoaded() == 93, \"Failed to load all points\"", "mimetype": "text/plain", "start_char_idx": 2960, "end_char_idx": 5200, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "4a78ef6c-4b4f-4ff5-a9cc-93fb7138a5cc": {"__data__": {"id_": "4a78ef6c-4b4f-4ff5-a9cc-93fb7138a5cc", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_tasmanian_async.py", "file_name": "test_persistent_tasmanian_async.py", "file_type": "text/x-python", "file_size": 3909, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ecda5cdb-5732-4ee4-92af-e8ac2607b766", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_tasmanian_async.py", "file_name": "test_persistent_tasmanian_async.py", "file_type": "text/x-python", "file_size": 3909, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "c1ec2ed3872c1f107009f9d3ed99f7bcdcee3a12b84a0ffe8893aa3dd6716317", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "cfb5b230-880f-45f0-8a11-f32efb5bd714", "node_type": "1", "metadata": {}, "hash": "12dfffa72a8506f5220bfa0bac5883712d50def0097f8ed3b1f2a80e92efee0f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests the async-mode of the Tasmanian generator function.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_persistent_tasmanian_async.py\n python test_persistent_tasmanian_async.py --nworkers 3\n python test_persistent_tasmanian_async.py --nworkers 3 --comms tcp\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 2, as one of the three workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: local\n# TESTSUITE_NPROCS: 4\n# TESTSUITE_OS_SKIP: OSX\n# TESTSUITE_EXTRA: true\n\nimport itertools\nimport sys\nfrom time import time\n\nimport numpy as np\n\nfrom libensemble.gen_funcs.persistent_tasmanian import get_sparse_grid_specs\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.six_hump_camel import six_hump_camel_func\nfrom libensemble.tools import parse_args\n\n# Define some grid initializers.\ndef tasmanian_init_global():\n # Note: if Tasmanian has been compiled with OpenMP support (i.e., the usual way)\n # libEnsemble calls cannot be made after the `import Tasmanian` clause\n # there is a conflict between the OpenMP environment and Python threading\n # thus Tasmanian has to be imported inside the `tasmanian_init` method\n import Tasmanian\n\n grid = Tasmanian.makeGlobalGrid(2, 1, 6, \"iptotal\", \"clenshaw-curtis\")\n grid.setDomainTransform(np.array([[-5.0, 5.0], [-2.0, 2.0]]))\n return grid\n\ndef tasmanian_init_localp():\n import Tasmanian\n\n grid = Tasmanian.makeLocalPolynomialGrid(2, 1, 3)\n grid.setDomainTransform(np.array([[-5.0, 5.0], [-2.0, 2.0]]))\n return grid\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n # Get node info.\n nworkers, is_manager, libE_specs, _ = parse_args()\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n # Create an async simulator function (must return 'x' and 'f').\n def sim_f(H, persis_info, sim_specs, _):\n batch = len(H[\"x\"])\n H0 = np.zeros(batch, dtype=sim_specs[\"out\"])\n H0[\"x\"] = H[\"x\"]\n for i, x in enumerate(H[\"x\"]):\n H0[\"f\"][i] = six_hump_camel_func(x)\n return H0, persis_info\n\n # Set up test parameters.\n user_specs_arr = []\n user_specs_arr.append(\n {\n \"refinement\": \"getCandidateConstructionPoints\",\n \"tasmanian_init\": lambda: tasmanian_init_global(),\n \"sType\": \"iptotal\",\n \"liAnisotropicWeightsOrOutput\": -1,\n }\n )\n user_specs_arr.append(\n {\n \"refinement\": \"getCandidateConstructionPointsSurplus\",\n \"tasmanian_init\": lambda: tasmanian_init_localp(),\n \"fTolerance\": 1.0e-2,\n \"sRefinementType\": \"classic\",\n }\n )\n exit_criteria_arr = []\n exit_criteria_arr.append({\"wallclock_max\": 3})\n exit_criteria_arr.append({\"gen_max\": 100})\n\n run_num = 0\n # Test over all possible parameter combinations.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2894, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "cfb5b230-880f-45f0-8a11-f32efb5bd714": {"__data__": {"id_": "cfb5b230-880f-45f0-8a11-f32efb5bd714", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_tasmanian_async.py", "file_name": "test_persistent_tasmanian_async.py", "file_type": "text/x-python", "file_size": 3909, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ecda5cdb-5732-4ee4-92af-e8ac2607b766", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_tasmanian_async.py", "file_name": "test_persistent_tasmanian_async.py", "file_type": "text/x-python", "file_size": 3909, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "c1ec2ed3872c1f107009f9d3ed99f7bcdcee3a12b84a0ffe8893aa3dd6716317", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4a78ef6c-4b4f-4ff5-a9cc-93fb7138a5cc", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_tasmanian_async.py", "file_name": "test_persistent_tasmanian_async.py", "file_type": "text/x-python", "file_size": 3909, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "44419bc039771bea86c69902c7d817853163153a4b9d9e55c8b43bdcfa76f2af", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "user_specs_arr = []\n user_specs_arr.append(\n {\n \"refinement\": \"getCandidateConstructionPoints\",\n \"tasmanian_init\": lambda: tasmanian_init_global(),\n \"sType\": \"iptotal\",\n \"liAnisotropicWeightsOrOutput\": -1,\n }\n )\n user_specs_arr.append(\n {\n \"refinement\": \"getCandidateConstructionPointsSurplus\",\n \"tasmanian_init\": lambda: tasmanian_init_localp(),\n \"fTolerance\": 1.0e-2,\n \"sRefinementType\": \"classic\",\n }\n )\n exit_criteria_arr = []\n exit_criteria_arr.append({\"wallclock_max\": 3})\n exit_criteria_arr.append({\"gen_max\": 100})\n\n run_num = 0\n # Test over all possible parameter combinations.\n for user_specs, exit_criteria in itertools.product(user_specs_arr, exit_criteria_arr):\n sim_specs, gen_specs, alloc_specs, persis_info = get_sparse_grid_specs(user_specs, sim_f, 2, mode=\"async\")\n\n if run_num == 0:\n gen_specs[\"user\"][\"tasmanian_checkpoint_file\"] = \"tasmanian.grid\"\n run_num += 1\n\n if is_manager:\n print(f\"[Manager]: user_specs = {user_specs}\")\n print(f\"[Manager]: exit_criteria = {exit_criteria}\")\n start_time = time()\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n if is_manager:\n print(\"[Manager]: Time taken = \", time() - start_time, \"\\n\", flush=True)", "mimetype": "text/plain", "start_char_idx": 2308, "end_char_idx": 3524, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "b4b5bf85-b9ea-4cf8-af77-2902472d7d48": {"__data__": {"id_": "b4b5bf85-b9ea-4cf8-af77-2902472d7d48", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_uniform_gen_decides_stop.py", "file_name": "test_persistent_uniform_gen_decides_stop.py", "file_type": "text/x-python", "file_size": 3532, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "6d2c5dfa-f164-4120-b57d-716a0c2cd099", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_uniform_gen_decides_stop.py", "file_name": "test_persistent_uniform_gen_decides_stop.py", "file_type": "text/x-python", "file_size": 3532, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "b57111b79101ef70039e102303f5a5b0df731bcf96c669aa818a07ab84500bac", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTest the libEnsemble capability to honor a generator function's request to\nstop a run.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 5 python test_persistent_uniform_gen_decides_stop.py\n python test_persistent_uniform_gen_decides_stop.py --nworkers 4\n python test_persistent_uniform_gen_decides_stop.py --nworkers 4 --comms tcp\n\nThe number of concurrent evaluations of the objective function with 2 gens will be 2:\n5 - 1 manager - 2 persistent gens = 2.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 5 7\n# TESTSUITE_OS_SKIP: WIN\n\nimport sys\n\nimport numpy as np\n\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.gen_funcs.persistent_sampling import persistent_request_shutdown as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.branin.branin_obj import call_branin as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n for ngens in range(1, 3):\n n = 2\n init_batch_size = nworkers - ngens\n\n if ngens >= nworkers:\n sys.exit(\"The number of generators must be less than the number of workers -- aborting...\")\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n \"user\": {\"uniform_random_pause_ub\": 0.5},\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [\"f\", \"x\", \"sim_id\"],\n \"out\": [(\"x\", float, (n,))],\n \"user\": {\n \"initial_batch_size\": init_batch_size,\n \"shutdown_limit\": 10, # Iterations on a gen before it triggers a shutdown.\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n alloc_specs = {\n \"alloc_f\": alloc_f,\n \"user\": {\n \"async_return\": True,\n \"num_active_gens\": ngens,\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n exit_criteria = {\"gen_max\": 50, \"wallclock_max\": 300}\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n if is_manager:\n [ended_times, counts] = np.unique(H[\"gen_ended_time\"], return_counts=True)\n print(\"Num. points in each gen iteration:\", counts)\n assert (\n counts[0] == init_batch_size\n ), \"The first gen_ended_time should be common among initial_batch_size number of points\"\n assert (\n sum(counts == init_batch_size) >= ngens\n ), \"The initial batch of each gen should be common among initial_batch_size number of points\"\n assert len(counts) > 1, \"All gen_ended_times are the same; they should be different for the async case\"\n\n gen_workers = np.unique(H[\"gen_worker\"])\n print(\"Generators that issued points\", gen_workers)\n assert (\n len(gen_workers) == ngens\n ), f\"The number of gens used {len(gen_workers)} does not match num_active_gens {ngens}\"\n\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3010, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "05834eeb-29df-407f-8105-9aed1fe03ae4": {"__data__": {"id_": "05834eeb-29df-407f-8105-9aed1fe03ae4", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_uniform_sampling.py", "file_name": "test_persistent_uniform_sampling.py", "file_type": "text/x-python", "file_size": 3569, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "446ee1b5-41a1-4824-aaab-eeff3cfa4664", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_uniform_sampling.py", "file_name": "test_persistent_uniform_sampling.py", "file_type": "text/x-python", "file_size": 3569, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "341140f056c99c45f106ac8824641f144c43f8d62b2bfd9e77602abec452ed75", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests libEnsemble with a simple persistent uniform sampling generator\nfunction.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_persistent_uniform_sampling.py\n python test_persistent_uniform_sampling.py --nworkers 3\n python test_persistent_uniform_sampling.py --nworkers 3 --comms tcp\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 2, as one of the three workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 3 4\n\nimport sys\n\nimport numpy as np\n\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.gen_funcs.persistent_sampling import batched_history_matching as gen_f2\nfrom libensemble.gen_funcs.persistent_sampling import persistent_uniform as gen_f1\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.rosenbrock import rosenbrock_eval as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n n = 2\n batch = 20\n num_batches = 10\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float), (\"grad\", float, n)],\n }\n\n gen_specs = {\n \"persis_in\": [\"x\", \"f\", \"grad\", \"sim_id\"],\n \"out\": [(\"x\", float, (n,))],\n \"user\": {\n \"initial_batch_size\": batch,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n alloc_specs = {\"alloc_f\": alloc_f}\n\n exit_criteria = {\"gen_max\": num_batches * batch, \"wallclock_max\": 300}\n\n libE_specs[\"kill_canceled_sims\"] = False\n\n for run in range(5):\n persis_info = add_unique_random_streams({}, nworkers + 1)\n for i in persis_info:\n persis_info[i][\"get_grad\"] = True\n\n if run == 0:\n gen_specs[\"gen_f\"] = gen_f1\n elif run == 1:\n gen_specs[\"gen_f\"] = gen_f2\n gen_specs[\"user\"][\"num_best_vals\"] = 5\n elif run == 2:\n m = 8\n for i in persis_info:\n persis_info[i][\"const\"] = 500\n\n gen_specs[\"gen_f\"] = gen_f1\n gen_specs[\"persis_in\"] = [\"x\", \"f_i\", \"gradf_i\", \"sim_id\"]\n gen_specs[\"out\"] = [(\"x\", float, (2 * m,)), (\"obj_component\", int)]\n gen_specs[\"user\"][\"num_components\"] = m\n gen_specs[\"user\"][\"lb\"] = np.arange(-2 * m - 1, -1)\n gen_specs[\"user\"][\"ub\"] = np.arange(2 * m + 1, 1, -1)\n sim_specs[\"out\"] = [(\"f_i\", float), (\"gradf_i\", float, 2 * m)]\n sim_specs[\"in\"] = [\"x\", \"obj_component\"]\n # sim_specs[\"out\"] = [(\"f\", float), (\"grad\", float, n)]\n elif run == 3:\n libE_specs[\"gen_on_manager\"] = True\n elif run == 4:\n libE_specs[\"gen_on_manager\"] = False\n libE_specs[\"gen_workers\"] = [2]\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n if is_manager:\n assert len(np.unique(H[\"gen_ended_time\"])) == num_batches\n\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3129, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "31f173b0-3a0e-4c8d-83b2-4bf6cb1258b3": {"__data__": {"id_": "31f173b0-3a0e-4c8d-83b2-4bf6cb1258b3", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_uniform_sampling_async.py", "file_name": "test_persistent_uniform_sampling_async.py", "file_type": "text/x-python", "file_size": 2740, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3ec0dbea-ce3d-4408-a0b0-56812611015b", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_uniform_sampling_async.py", "file_name": "test_persistent_uniform_sampling_async.py", "file_type": "text/x-python", "file_size": 2740, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "54fe90fffcbc25e8f09e15b3fe74430e4575d6cf55efab8e2dccdb5aae6f81b8", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests libEnsemble's generator function requesting/receiving sim_f evaluations\nasynchronously\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_persistent_uniform_sampling_async.py\n python test_persistent_uniform_sampling_async.py --nworkers 3\n python test_persistent_uniform_sampling_async.py --nworkers 3 --comms tcp\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 2, as one of the three workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local tcp\n# TESTSUITE_NPROCS: 4\n\nimport sys\n\nimport numpy as np\n\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.gen_funcs.persistent_sampling import persistent_uniform as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.branin.branin_obj import call_branin as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n \"user\": {\"uniform_random_pause_ub\": 0.5},\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [\"f\", \"x\", \"sim_id\"],\n \"out\": [(\"x\", float, (n,))],\n \"user\": {\n \"initial_batch_size\": nworkers, # Ensure > 1 alloc to send all sims\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n alloc_specs = {\n \"alloc_f\": alloc_f,\n \"user\": {\"async_return\": True},\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n exit_criteria = {\"gen_max\": 100, \"wallclock_max\": 300}\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n if is_manager:\n [_, counts] = np.unique(H[\"gen_ended_time\"], return_counts=True)\n print(\"Num. points in each gen iteration:\", counts)\n assert (\n counts[0] == nworkers\n ), \"The first gen_ended_time should be common among initial_batch_size number of points\"\n assert (\n len(np.unique(counts)) > 1\n ), \"All gen_ended_times are the same; they should be different for the async case\"\n\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2502, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "9d7a7966-7f05-4308-86a9-1d4bb63ca0b4": {"__data__": {"id_": "9d7a7966-7f05-4308-86a9-1d4bb63ca0b4", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_uniform_sampling_cancel.py", "file_name": "test_persistent_uniform_sampling_cancel.py", "file_type": "text/x-python", "file_size": 2561, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b1b855bc-3666-4e4f-8c49-c96bf3872b0f", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_uniform_sampling_cancel.py", "file_name": "test_persistent_uniform_sampling_cancel.py", "file_type": "text/x-python", "file_size": 2561, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "422a0578b9fa10128f0ed4bb7b309e4d3f0cfa5c59de1fd37fbd071bed6f7fc5", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests libEnsemble with a simple persistent uniform sampling generator\nfunction.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_persistent_uniform_sampling_cancel.py\n python test_persistent_uniform_sampling_cancel.py --nworkers 3\n python test_persistent_uniform_sampling_cancel.py --nworkers 3 --comms tcp\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 2, as one of the three workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 3 4\n\nimport sys\n\nimport numpy as np\n\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.gen_funcs.persistent_sampling import persistent_uniform_with_cancellations as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.rosenbrock import rosenbrock_eval as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n n = 2\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float), (\"grad\", float, n)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [\"x\", \"f\", \"grad\", \"sim_id\"],\n \"out\": [(\"x\", float, (n,))],\n \"user\": {\n \"initial_batch_size\": 100,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n alloc_specs = {\n \"alloc_f\": alloc_f,\n \"user\": {\"async_return\": True},\n }\n\n exit_criteria = {\"gen_max\": 150, \"wallclock_max\": 300}\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n if is_manager:\n # For reproducible test, only tests if cancel requested on points - not whether got evaluated\n assert np.all(H[\"cancel_requested\"][:49] == False), \"Values cancelled which should not be\" # noqa: E712\n assert np.all(H[\"cancel_requested\"][50:100]), \"Values not cancelled which should be\"\n\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2373, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "263fdc84-5f98-49cf-a097-2c54524946d1": {"__data__": {"id_": "263fdc84-5f98-49cf-a097-2c54524946d1", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_uniform_sampling_nonblocking.py", "file_name": "test_persistent_uniform_sampling_nonblocking.py", "file_type": "text/x-python", "file_size": 2415, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3ac286c8-4ce0-49fe-98dd-d58129d8c740", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_uniform_sampling_nonblocking.py", "file_name": "test_persistent_uniform_sampling_nonblocking.py", "file_type": "text/x-python", "file_size": 2415, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "53dffd51d3d4b7375948e75a03f480c401673027ab61a39159de705e83da5715", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests libEnsemble with a simple persistent uniform sampling generator\nfunction.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_persistent_uniform_sampling_nonblocking.py\n python test_persistent_uniform_sampling_nonblocking.py --nworkers 3\n python test_persistent_uniform_sampling_nonblocking.py --nworkers 3 --comms tcp\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 2, as one of the three workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local tcp\n# TESTSUITE_NPROCS: 3 4\n\nimport sys\n\nimport numpy as np\n\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.gen_funcs.persistent_sampling import uniform_nonblocking as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.rosenbrock import rosenbrock_eval as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float), (\"grad\", float, n)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [\"x\", \"f\", \"grad\", \"sim_id\"],\n \"out\": [(\"x\", float, (n,))],\n \"user\": {\n \"initial_batch_size\": 20,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n alloc_specs = {\"alloc_f\": alloc_f}\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n for i in persis_info:\n persis_info[i][\"get_grad\"] = True\n\n exit_criteria = {\"gen_max\": 40, \"wallclock_max\": 300}\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n if is_manager:\n assert len(np.unique(H[\"gen_ended_time\"])) == 2\n save_libE_output(H, persis_info, __file__, nworkers)\n\n assert persis_info[1][\"spin_count\"] > 0, \"This should have been a nonblocking receive\"", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2242, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "b89cee99-3e0d-4e13-ad1e-68037e31f063": {"__data__": {"id_": "b89cee99-3e0d-4e13-ad1e-68037e31f063", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_uniform_sampling_running_mean.py", "file_name": "test_persistent_uniform_sampling_running_mean.py", "file_type": "text/x-python", "file_size": 3109, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ceae4b80-7daf-4cd8-877d-8c02698cc7ad", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_persistent_uniform_sampling_running_mean.py", "file_name": "test_persistent_uniform_sampling_running_mean.py", "file_type": "text/x-python", "file_size": 3109, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "fe797a8de55c509e87c7cd194e99de8795162fb8074d6a52812d633d2688854a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests the ability of libEnsemble to\n - give back history entries from the a shutting-down persistent gen\n\nExecute via one of the following commands (e.g., 3 workers):\n mpiexec -np 4 python test_persistent_uniform_sampling_adv.py\n python test_persistent_uniform_sampling_running_mean.py --nworkers 3\n python test_persistent_uniform_sampling_running_mean.py --nworkers 3 --comms tcp\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 2, as one of the three workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 3 4\n\nimport sys\n\nimport numpy as np\n\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.gen_funcs.persistent_sampling import persistent_uniform_final_update as gen_f\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.six_hump_camel import six_hump_camel_simple as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n libE_specs[\"use_persis_return_gen\"] = True\n\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n n = 3\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [\"f\", \"x\", \"corner_id\", \"sim_id\"],\n \"out\": [\n (\"sim_id\", int),\n (\"corner_id\", int),\n (\"x\", float, (n,)),\n ], # expect (\"f_est\", float) from gen - test ability for gen to send back \"unexpected\" field.\n \"user\": {\n \"initial_batch_size\": 20,\n \"lb\": np.array([-3, -2, -1]),\n \"ub\": np.array([3, 2, 1]),\n },\n }\n\n alloc_specs = {\"alloc_f\": alloc_f}\n\n sim_max = 120\n exit_criteria = {\"sim_max\": sim_max}\n libE_specs[\"final_gen_send\"] = True\n libE_specs[\"save_every_k_sims\"] = 2\n\n for run in range(2):\n if run == 2:\n sim_specs[\"user\"] = {\n \"rand\": True,\n \"pause_time\": 1e-4,\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n if is_manager:\n # Check that last saved history agrees with returned history.\n H_saved = np.load(f\"libE_history_after_sim_{sim_max}.npy\")\n for name in H.dtype.names:\n np.testing.assert_array_equal(H_saved[name], H[name])\n\n assert np.all(H[\"f_est\"][0:sim_max] != 0), \"The persistent gen should have set these at shutdown\"\n assert np.all(H[\"gen_informed\"][0:sim_max]), \"Need to mark the gen having been informed.\"\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2762, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "0c405ffa-d681-498d-b35c-4f02c66ff6e2": {"__data__": {"id_": "0c405ffa-d681-498d-b35c-4f02c66ff6e2", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_proxystore_integration.py", "file_name": "test_proxystore_integration.py", "file_type": "text/x-python", "file_size": 2945, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f72cad56-6413-4c2e-8898-c3f0f905c62b", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_proxystore_integration.py", "file_name": "test_proxystore_integration.py", "file_type": "text/x-python", "file_size": 2945, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "ac4f6cb4d06555cc1c93899b68acc5e05855e60be710c27425474347880f9338", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTest libEnsemble's capability to use no gen_f and instead coordinates the\nevaluation of an existing set of points.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_evaluate_existing_sample.py\n python test_evaluate_existing_sample.py --nworkers 3\n python test_evaluate_existing_sample.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: local mpi\n# TESTSUITE_NPROCS: 4\n# TESTSUITE_OS_SKIP: OSX WIN\n# TESTSUITE_EXTRA: true\n\nfrom pathlib import Path\n\nimport numpy as np\n\n# Import libEnsemble items for this test\nfrom libensemble import Ensemble\nfrom libensemble.alloc_funcs.give_pregenerated_work import give_pregenerated_sim_work as alloc_f\nfrom libensemble.sim_funcs.borehole import gen_borehole_input\nfrom libensemble.specs import AllocSpecs, ExitCriteria, SimSpecs, input_fields, output_data\n\ndef insert_proxy(H0):\n from proxystore.connectors.redis import RedisConnector\n from proxystore.store import Store, get_store\n\n store = Store(\n \"my-store\",\n RedisConnector(hostname=\"localhost\", port=6379),\n register=True,\n )\n\n store = get_store(\"my-store\")\n picture = Path(\"libE_logo.png\").absolute().read_bytes()\n proxy = store.proxy(picture)\n for i in range(len(H0)):\n H0[i][\"proxy\"] = proxy\n\ndef check_H(H):\n from proxystore.proxy import Proxy\n\n assert all([isinstance(H[i][\"proxy\"], Proxy) for i in range(len(H))])\n\n@input_fields([\"x\", \"proxy\"])\n@output_data([(\"f\", float)])\ndef one_d_example(x, persis_info, sim_specs, info):\n\n H_o = np.zeros(1, dtype=sim_specs[\"out\"])\n H_o[\"f\"] = np.linalg.norm(x[\"x\"])\n picture = bytes(x[\"proxy\"][0])\n\n sim_id = info[\"H_rows\"][0]\n worker_id = info[\"workerID\"]\n\n Path(f\"logo_id{sim_id}_worker{worker_id}.png\").write_bytes(picture)\n\n return H_o, persis_info\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n\n n_samp = 4\n H0 = np.zeros(n_samp, dtype=[(\"x\", float, 8), (\"sim_id\", int), (\"sim_started\", bool), (\"proxy\", object)])\n np.random.seed(0)\n H0[\"x\"] = gen_borehole_input(n_samp)\n H0[\"sim_id\"] = range(n_samp)\n H0[\"sim_started\"] = False\n insert_proxy(H0)\n\n sampling = Ensemble(parse_args=True)\n sampling.H0 = H0\n sampling.sim_specs = SimSpecs(sim_f=one_d_example)\n sampling.alloc_specs = AllocSpecs(alloc_f=alloc_f)\n sampling.exit_criteria = ExitCriteria(sim_max=len(H0))\n sampling.run()\n\n if sampling.is_manager:\n assert len(sampling.H) == len(H0)\n assert np.array_equal(H0[\"x\"], sampling.H[\"x\"])\n assert np.all(sampling.H[\"sim_ended\"])\n check_H(sampling.H)\n print(\"\\nlibEnsemble correctly didn't add anything to initial sample\")\n sampling.save_output(__file__)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2771, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "4f25f3ab-8d02-41bb-a31d-5377a3f411ff": {"__data__": {"id_": "4f25f3ab-8d02-41bb-a31d-5377a3f411ff", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_runlines_adaptive_workers.py", "file_name": "test_runlines_adaptive_workers.py", "file_type": "text/x-python", "file_size": 3338, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e3668ca4-053e-471f-a3bb-ffa1f6af5e1f", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_runlines_adaptive_workers.py", "file_name": "test_runlines_adaptive_workers.py", "file_type": "text/x-python", "file_size": 3338, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "eb66224efd9d85dabf377e1398774c9c3eb8bbaa9e3e13451adf01af4ba2296e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble run-lines for adaptive workers in non-persistent case.\n\nDefault setup is designed to run on 4*N workers - to modify, change total_nodes.\n\nExecute via one of the following commands (e.g. 8 workers):\n mpiexec -np 9 python test_runlines_adaptive_workers.py\n\nThis is a dry run test, mocking up the nodes available. To test the run-lines\nrequires running a fixed, rather than random number of resource sets for a given sim_id.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 5\n\nimport numpy as np\n\nfrom libensemble.alloc_funcs.give_sim_work_first import give_sim_work_first\nfrom libensemble.executors.mpi_executor import MPIExecutor\nfrom libensemble.gen_funcs.sampling import uniform_random_sample_with_var_priorities_and_resources as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs import helloworld\nfrom libensemble.sim_funcs.var_resources import multi_points_with_variable_resources as sim_f\nfrom libensemble.tests.regression_tests.common import create_node_file\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\nnworkers, is_manager, libE_specs, _ = parse_args()\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n # For varying size test - relate node count to nworkers\n total_nodes = nworkers // 4 # 4 workers per node - run on 4N workers\n\n sim_app = helloworld.__file__\n exctr = MPIExecutor()\n exctr.register_app(full_path=sim_app, app_name=\"helloworld\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n # 'in': ['x', 'resource_sets'], # Dont need if letting it just use all resources available\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n \"user\": {\"dry_run\": True},\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"in\": [\"sim_id\"],\n \"out\": [(\"priority\", float), (\"resource_sets\", int), (\"x\", float, n), (\"x_on_cube\", float, n)],\n \"user\": {\n \"initial_batch_size\": 5,\n \"max_resource_sets\": 4,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n alloc_specs = {\n \"alloc_f\": give_sim_work_first,\n \"user\": {\n \"batch_mode\": False,\n \"give_all_with_same_priority\": True,\n \"num_active_gens\": 1,\n },\n }\n\n comms = libE_specs[\"comms\"]\n node_file = \"nodelist_adaptive_workers_comms_\" + str(comms) + \"_wrks_\" + str(nworkers)\n if is_manager:\n create_node_file(num_nodes=total_nodes, name=node_file)\n\n if comms == \"mpi\":\n libE_specs[\"mpi_comm\"].Barrier()\n\n # Mock up system\n libE_specs[\"resource_info\"] = {\n \"cores_on_node\": (16, 64), # Tuple (physical cores, logical cores)\n \"node_file\": node_file,\n } # Name of file containing a node-list\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n exit_criteria = {\"sim_max\": 40, \"wallclock_max\": 300}\n\n # Perform the run\n H, persis_info, flag = libE(\n sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs, alloc_specs=alloc_specs\n )\n\n if is_manager:\n assert flag == 0\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3040, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ffcec956-b1ca-41f3-99c1-6177d12ee7cc": {"__data__": {"id_": "ffcec956-b1ca-41f3-99c1-6177d12ee7cc", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_runlines_adaptive_workers_persistent.py", "file_name": "test_runlines_adaptive_workers_persistent.py", "file_type": "text/x-python", "file_size": 3516, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "60ee18d2-19e3-4536-9977-864582938dc9", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_runlines_adaptive_workers_persistent.py", "file_name": "test_runlines_adaptive_workers_persistent.py", "file_type": "text/x-python", "file_size": 3516, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "c40d2ff6d642e60a002febb0754ff188d2f887a53a8dc69fdb63f39be1ee6fdb", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble run-lines for adaptive workers with persistent gen.\n\nDefault setup is designed to run on 4*N + 1 workers - to modify, change total_nodes.\nwhere one worker is a zero-resource persistent gen.\n\nExecute via one of the following commands (e.g. 9 workers):\n mpiexec -np 10 python test_runlines_adaptive_workers_persistent.py\n\nThis is a dry run test, mocking up the nodes available. To test the run-lines\nrequires running a fixed, rather than random number of resource sets for a given sim_id.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 10\n\nimport numpy as np\n\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.executors.mpi_executor import MPIExecutor\nfrom libensemble.gen_funcs.persistent_sampling_var_resources import uniform_sample_with_var_priorities as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs import helloworld\nfrom libensemble.sim_funcs.var_resources import multi_points_with_variable_resources as sim_f\nfrom libensemble.tests.regression_tests.common import create_node_file\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\n# from libensemble.gen_funcs.persistent_sampling import persistent_uniform as gen_f\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n num_gens = 1\n libE_specs[\"num_resource_sets\"] = nworkers - num_gens # Any worker can be the gen\n\n total_nodes = (nworkers - num_gens) // 4 # 4 resourced workers per node.\n\n if total_nodes == 1:\n max_rsets = 4 # Up to one node\n else:\n max_rsets = 6 # Will expand to 2 full nodes\n\n sim_app = helloworld.__file__\n exctr = MPIExecutor()\n exctr.register_app(full_path=sim_app, app_name=\"helloworld\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n \"user\": {\"dry_run\": True},\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [\"x\", \"f\", \"sim_id\"],\n \"out\": [(\"priority\", float), (\"resource_sets\", int), (\"x\", float, n), (\"x_on_cube\", float, n)],\n \"user\": {\n \"initial_batch_size\": nworkers - 1,\n \"max_resource_sets\": max_rsets,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n alloc_specs = {\n \"alloc_f\": alloc_f,\n \"user\": {\"give_all_with_same_priority\": False},\n }\n\n comms = libE_specs[\"comms\"]\n node_file = \"nodelist_adaptive_workers_persistent_comms_\" + str(comms) + \"_wrks_\" + str(nworkers)\n if is_manager:\n create_node_file(num_nodes=total_nodes, name=node_file)\n\n if comms == \"mpi\":\n libE_specs[\"mpi_comm\"].Barrier()\n\n libE_specs[\"resource_info\"] = {\n \"cores_on_node\": (16, 64), # Tuple (physical cores, logical cores)\n \"node_file\": node_file,\n } # Name of file containing a node-list\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n exit_criteria = {\"sim_max\": 40, \"wallclock_max\": 300}\n\n # Perform the run\n H, persis_info, flag = libE(\n sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs, alloc_specs=alloc_specs\n )\n\n if is_manager:\n assert flag == 0\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3238, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "86e7aa78-01b3-4343-9d7d-966632cae590": {"__data__": {"id_": "86e7aa78-01b3-4343-9d7d-966632cae590", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_runlines_adaptive_workers_persistent_oversubscribe_rsets.py", "file_name": "test_runlines_adaptive_workers_persistent_oversubscribe_rsets.py", "file_type": "text/x-python", "file_size": 3736, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5480894d-6e80-49eb-88b0-fe798660cb6d", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_runlines_adaptive_workers_persistent_oversubscribe_rsets.py", "file_name": "test_runlines_adaptive_workers_persistent_oversubscribe_rsets.py", "file_type": "text/x-python", "file_size": 3736, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "d4f42e4dcf59a81747883ae5fd0815a0068677d3a1874b55b7ecd1e82cce5bf1", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble run-lines for adaptive workers with persistent gen.\n\nDefault setup is designed to run on 2*N + 1 workers - to modify, change total_nodes.\nwhere one worker is a zero-resource persistent gen.\n\nExecute via one of the following commands (e.g. 5 workers):\n mpiexec -np 6 python test_runlines_adaptive_workers_persistent_oversubscribe_rsets.py\n\nThis is a dry run test, mocking up the nodes available. To test the run-lines\nrequires running a fixed, rather than random number of resource sets for a given sim_id.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 6\n\nimport numpy as np\n\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.executors.mpi_executor import MPIExecutor\nfrom libensemble.gen_funcs.persistent_sampling_var_resources import uniform_sample_with_var_priorities as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs import helloworld\nfrom libensemble.sim_funcs.var_resources import multi_points_with_variable_resources as sim_f\nfrom libensemble.tests.regression_tests.common import create_node_file\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n nsim_workers = nworkers - 1\n\n libE_specs[\"zero_resource_workers\"] = [1]\n rsets = nsim_workers * 2\n libE_specs[\"num_resource_sets\"] = rsets\n\n num_gens = len(libE_specs[\"zero_resource_workers\"])\n total_nodes = (nworkers - num_gens) // 2 # 2 resourced workers per node.\n\n print(f\"sim_workers: {nsim_workers}. rsets: {rsets}. Nodes: {total_nodes}\", flush=True)\n\n if total_nodes == 1:\n max_rsets = 4 # Up to one node\n else:\n max_rsets = 6 # Will expand to 2 full nodes\n\n sim_app = helloworld.__file__\n exctr = MPIExecutor()\n exctr.register_app(full_path=sim_app, app_name=\"helloworld\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n \"user\": {\"dry_run\": True},\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [\"f\", \"x\", \"sim_id\"],\n \"out\": [(\"priority\", float), (\"resource_sets\", int), (\"x\", float, n), (\"x_on_cube\", float, n)],\n \"user\": {\n \"initial_batch_size\": nworkers - 1,\n \"max_resource_sets\": max_rsets,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n alloc_specs = {\n \"alloc_f\": alloc_f,\n \"user\": {\"give_all_with_same_priority\": False},\n }\n\n # comms = libE_specs[\"disable_resource_manager\"] = True # SH TCP testing\n\n comms = libE_specs[\"comms\"]\n node_file = \"nodelist_adaptive_workers_persistent_ovsub_rsets_comms_\" + str(comms) + \"_wrks_\" + str(nworkers)\n if is_manager:\n create_node_file(num_nodes=total_nodes, name=node_file)\n\n if comms == \"mpi\":\n libE_specs[\"mpi_comm\"].Barrier()\n\n libE_specs[\"resource_info\"] = {\n \"cores_on_node\": (16, 64), # Tuple (physical cores, logical cores)\n \"node_file\": node_file,\n } # Name of file containing a node-list\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n exit_criteria = {\"sim_max\": 40, \"wallclock_max\": 300}\n\n # Perform the run\n H, persis_info, flag = libE(\n sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs, alloc_specs=alloc_specs\n )\n\n if is_manager:\n assert flag == 0\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3443, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "df165ad3-9079-4d67-8311-f5e27aff7e43": {"__data__": {"id_": "df165ad3-9079-4d67-8311-f5e27aff7e43", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_sim_dirs_per_calc.py", "file_name": "test_sim_dirs_per_calc.py", "file_type": "text/x-python", "file_size": 3253, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3c7512be-1f6b-406c-9bf9-e11b5aeec80e", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_sim_dirs_per_calc.py", "file_name": "test_sim_dirs_per_calc.py", "file_type": "text/x-python", "file_size": 3253, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "a8fa21db63edef3f0f8de9c8ea2a335a375ec192c79c03201c0df2a99d65cb64", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with uniform random sampling and writes results into sim\ndirs. This tests per-calculation sim_dir capabilities\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_sim_dirs_per_calc.py\n python test_sim_dirs_per_calc.py --nworkers 3\n python test_sim_dirs_per_calc.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local tcp\n# TESTSUITE_NPROCS: 2 4\n\nimport os\n\nimport numpy as np\n\nfrom libensemble.gen_funcs.sampling import uniform_random_sample as gen_f\nfrom libensemble.libE import libE\nfrom libensemble.tests.regression_tests.support import write_sim_func as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\nnworkers, is_manager, libE_specs, _ = parse_args()\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n sim_input_dir = \"./sim_input_dir\"\n dir_to_copy = sim_input_dir + \"/copy_this\"\n dir_to_symlink = sim_input_dir + \"/symlink_this\"\n c_ensemble = \"./ensemble_calcdirs_w\" + str(nworkers) + \"_\" + libE_specs.get(\"comms\")\n print(\"creating ensemble dir: \", c_ensemble, flush=True)\n\n for dir in [sim_input_dir, dir_to_copy, dir_to_symlink]:\n if not os.path.isdir(dir):\n os.makedirs(dir, exist_ok=True)\n\n libE_specs[\"sim_dirs_make\"] = True\n libE_specs[\"ensemble_dir_path\"] = c_ensemble\n libE_specs[\"use_worker_dirs\"] = False\n libE_specs[\"sim_dir_copy_files\"] = [dir_to_copy]\n libE_specs[\"sim_dir_symlink_files\"] = [dir_to_symlink]\n libE_specs[\"ensemble_copy_back\"] = True\n libE_specs[\"reuse_output_dir\"] = True\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"out\": [(\"x\", float, (1,))],\n \"user\": {\n \"gen_batch_size\": 20,\n \"lb\": np.array([-3]),\n \"ub\": np.array([3]),\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n exit_criteria = {\"sim_max\": 21}\n\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs)\n\n if is_manager:\n assert os.path.isdir(c_ensemble), f\"Ensemble directory {c_ensemble} not created.\"\n dir_sum = sum([\"sim\" in i for i in os.listdir(c_ensemble)])\n assert (\n dir_sum == exit_criteria[\"sim_max\"]\n ), f\"Number of sim directories ({dir_sum}) does not match sim_max ({exit_criteria['sim_max']}).\"\n\n input_copied = []\n\n for base, files, _ in os.walk(c_ensemble):\n basedir = base.split(\"/\")[-1]\n if basedir.startswith(\"sim\"):\n input_copied.append(\n all(\n [\n os.path.basename(j) in files\n for j in libE_specs[\"sim_dir_copy_files\"] + libE_specs[\"sim_dir_symlink_files\"]\n ]\n )\n )\n\n assert all(input_copied), \"Exact input files not copied or symlinked to each calculation directory\"", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2833, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "2e30ef76-e8fb-4db0-a9f7-15eaa39e4bb9": {"__data__": {"id_": "2e30ef76-e8fb-4db0-a9f7-15eaa39e4bb9", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_sim_dirs_per_worker.py", "file_name": "test_sim_dirs_per_worker.py", "file_type": "text/x-python", "file_size": 3476, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f333752f-738e-4d88-b916-7157a5d301b6", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_sim_dirs_per_worker.py", "file_name": "test_sim_dirs_per_worker.py", "file_type": "text/x-python", "file_size": 3476, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "24c75f239237c8a7d290f9ac779b03f3790a627df8d1c677b87db4bfc8f99712", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with uniform random sampling and writes results into sim dirs.\nThis tests per-worker or per-calculation sim_input_dir copying capabilities\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_sim_dirs_per_worker.py\n python test_sim_dirs_per_worker.py --nworkers 3\n python test_sim_dirs_per_worker.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local tcp\n# TESTSUITE_NPROCS: 2 4\n\nimport os\n\nimport numpy as np\n\nfrom libensemble.gen_funcs.sampling import uniform_random_sample as gen_f\nfrom libensemble.libE import libE\nfrom libensemble.tests.regression_tests.support import write_sim_func as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\nnworkers, is_manager, libE_specs, _ = parse_args()\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n sim_input_dir = \"./sim_input_dir\"\n dir_to_copy = sim_input_dir + \"/copy_this\"\n dir_to_symlink = sim_input_dir + \"/symlink_this\"\n w_ensemble = \"./ensemble_workdirs_w\" + str(nworkers) + \"_\" + libE_specs.get(\"comms\")\n print(\"creating ensemble dir: \", w_ensemble, flush=True)\n\n for dir in [sim_input_dir, dir_to_copy, dir_to_symlink]:\n if not os.path.isdir(dir):\n os.makedirs(dir, exist_ok=True)\n\n libE_specs[\"sim_dirs_make\"] = True\n libE_specs[\"ensemble_dir_path\"] = w_ensemble\n libE_specs[\"use_worker_dirs\"] = True\n libE_specs[\"sim_dir_copy_files\"] = [dir_to_copy]\n libE_specs[\"sim_dir_symlink_files\"] = [dir_to_symlink]\n libE_specs[\"ensemble_copy_back\"] = True\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"out\": [(\"x\", float, (1,))],\n \"user\": {\n \"gen_batch_size\": 20,\n \"lb\": np.array([-3]),\n \"ub\": np.array([3]),\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n exit_criteria = {\"sim_max\": 21}\n\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs)\n\n if is_manager:\n assert os.path.isdir(w_ensemble), f\"Ensemble directory {w_ensemble} not created.\"\n worker_dir_sum = sum([\"worker\" in i for i in os.listdir(w_ensemble)])\n assert worker_dir_sum == nworkers, \"Number of worker dirs ({}) does not match nworkers ({}).\".format(\n worker_dir_sum, nworkers\n )\n\n input_copied = []\n sim_dir_sum = 0\n\n for base, files, _ in os.walk(w_ensemble):\n basedir = base.split(\"/\")[-1]\n if basedir.startswith(\"sim\"):\n sim_dir_sum += 1\n input_copied.append(\n all(\n [\n os.path.basename(j) in files\n for j in libE_specs[\"sim_dir_copy_files\"] + libE_specs[\"sim_dir_symlink_files\"]\n ]\n )\n )\n\n assert (\n sim_dir_sum == exit_criteria[\"sim_max\"]\n ), f\"Number of sim directories ({sim_dir_sum}) does not match sim_max ({exit_criteria['sim_max']}).\"\n assert all(input_copied), \"Exact input files not copied or symlinked to each calculation directory\"", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3012, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d1c3d297-03c2-4152-af30-66f535d89a24": {"__data__": {"id_": "d1c3d297-03c2-4152-af30-66f535d89a24", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_sim_dirs_with_exception.py", "file_name": "test_sim_dirs_with_exception.py", "file_type": "text/x-python", "file_size": 2153, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cd47cd9e-33db-4f93-ae53-5018c44f5c7d", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_sim_dirs_with_exception.py", "file_name": "test_sim_dirs_with_exception.py", "file_type": "text/x-python", "file_size": 2153, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "218cfb62359bc0079ca97c8d2741825f47838cb381033adc0ab9c028443e0ba6", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with uniform random sampling and writes results into sim dirs.\nThis tests when an exception occurs in sim_dir capabilities.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_sim_dirs_with_exception.py\n python test_sim_dirs_with_exception.py --nworkers 3\n python test_sim_dirs_with_exception.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local tcp\n# TESTSUITE_NPROCS: 2 4\n\nimport os\n\nimport numpy as np\n\nfrom libensemble.gen_funcs.sampling import uniform_random_sample as gen_f\nfrom libensemble.libE import libE\nfrom libensemble.manager import LoggedException\nfrom libensemble.tests.regression_tests.support import write_sim_func as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\nnworkers, is_manager, libE_specs, _ = parse_args()\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n e_ensemble = \"./ensemble_ex_w\" + str(nworkers) + \"_\" + libE_specs.get(\"comms\")\n\n if not os.path.isdir(e_ensemble):\n os.makedirs(os.path.join(e_ensemble, \"sim0\"), exist_ok=True)\n\n libE_specs[\"sim_dirs_make\"] = True\n libE_specs[\"ensemble_dir_path\"] = e_ensemble\n libE_specs[\"abort_on_exception\"] = False\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"out\": [(\"x\", float, (1,))],\n \"user\": {\n \"gen_batch_size\": 20,\n \"lb\": np.array([-3]),\n \"ub\": np.array([3]),\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n exit_criteria = {\"sim_max\": 21}\n\n return_flag = 1\n try:\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs)\n except LoggedException as e:\n print(f\"Caught deliberate exception: {e}\")\n return_flag = 0\n\n if is_manager:\n assert return_flag == 0", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1984, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d279b3fc-60a4-48a5-9e51-6d9b516df0e6": {"__data__": {"id_": "d279b3fc-60a4-48a5-9e51-6d9b516df0e6", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_sim_dirs_with_gen_dirs.py", "file_name": "test_sim_dirs_with_gen_dirs.py", "file_type": "text/x-python", "file_size": 4029, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3c0e55b9-fe43-4b89-9418-c5a488cd5b66", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_sim_dirs_with_gen_dirs.py", "file_name": "test_sim_dirs_with_gen_dirs.py", "file_type": "text/x-python", "file_size": 4029, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "4cb94e2e4f0aef0ea4feb8ea0760dd71fd3dd1b023d7b0b79563dfe7b427693c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bb4f81b4-eaa9-4367-a407-54da1590a8e4", "node_type": "1", "metadata": {}, "hash": "98502f6a7345c94e55073f9484d00b77111a69621f8d9a7c39a86c5bfd833699", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with uniform random sampling and writes results into sim/gen dirs.\nThis tests per-calculation gen_dir capabilities\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_sim_dirs_with_gen_dirs.py\n python test_sim_dirs_with_gen_dirs.py --nworkers 3\n python test_sim_dirs_with_gen_dirs.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local tcp\n# TESTSUITE_NPROCS: 2 4\n\nimport os\n\nimport numpy as np\n\nfrom libensemble.libE import libE\nfrom libensemble.tests.regression_tests.support import write_sim_func as sim_f\nfrom libensemble.tests.regression_tests.support import write_uniform_gen_func as gen_f\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\nnworkers, is_manager, libE_specs, _ = parse_args()\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n sim_input_dir = \"./sim_input_dir\"\n dir_to_copy_sim = sim_input_dir + \"/copy_this_sim\"\n dir_to_symlink_sim = sim_input_dir + \"/symlink_this_sim\"\n\n gen_input_dir = \"./gen_input_dir\"\n dir_to_copy_gen = gen_input_dir + \"/copy_this_gen\"\n dir_to_symlink_gen = gen_input_dir + \"/symlink_this_gen\"\n\n c_ensemble = \"./ensemble_combined_calcdirs_w\" + str(nworkers) + \"_\" + libE_specs.get(\"comms\")\n print(\"creating ensemble dir: \", c_ensemble, flush=True)\n\n for dir in [sim_input_dir, dir_to_copy_sim, dir_to_symlink_sim, gen_input_dir, dir_to_copy_gen, dir_to_symlink_gen]:\n if not os.path.isdir(dir):\n os.makedirs(dir, exist_ok=True)\n\n libE_specs[\"sim_dirs_make\"] = True\n libE_specs[\"gen_dirs_make\"] = True\n\n libE_specs[\"ensemble_dir_path\"] = c_ensemble\n libE_specs[\"use_worker_dirs\"] = False\n\n libE_specs[\"sim_dir_copy_files\"] = [dir_to_copy_sim]\n libE_specs[\"sim_dir_symlink_files\"] = [dir_to_symlink_sim]\n\n libE_specs[\"gen_dir_copy_files\"] = [dir_to_copy_gen]\n libE_specs[\"gen_dir_symlink_files\"] = [dir_to_symlink_gen]\n\n libE_specs[\"ensemble_copy_back\"] = True\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"out\": [(\"x\", float, (1,))],\n \"user\": {\n \"gen_batch_size\": 20,\n \"lb\": np.array([-3]),\n \"ub\": np.array([3]),\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n exit_criteria = {\"sim_max\": 20}\n\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs)\n\n def check_copied(type):\n input_copied = []\n for base, files, _ in os.walk(c_ensemble):\n basedir = base.split(\"/\")[-1]\n if basedir.startswith(type):\n input_copied.append(\n all(\n [\n os.path.basename(j) in files\n for j in libE_specs[type + \"_dir_copy_files\"] + libE_specs[type + \"_dir_symlink_files\"]\n ]\n )\n )\n\n assert all(input_copied), f\"All input files not copied or symlinked to each {type} calc dir\"\n\n if is_manager:\n assert os.path.isdir(c_ensemble), f\"Ensemble directory {c_ensemble} not created.\"\n sim_dir_sum = sum([\"sim\" in i for i in os.listdir(c_ensemble)])\n assert (\n sim_dir_sum == exit_criteria[\"sim_max\"]\n ), f\"Number of sim directories ({sim_dir_sum}) does not match sim_max ({exit_criteria['sim_max']}).\"\n\n assert any([\"gen\" in i for i in os.listdir(c_ensemble)]), \"No gen directories created.\"", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3346, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "bb4f81b4-eaa9-4367-a407-54da1590a8e4": {"__data__": {"id_": "bb4f81b4-eaa9-4367-a407-54da1590a8e4", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_sim_dirs_with_gen_dirs.py", "file_name": "test_sim_dirs_with_gen_dirs.py", "file_type": "text/x-python", "file_size": 4029, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3c0e55b9-fe43-4b89-9418-c5a488cd5b66", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_sim_dirs_with_gen_dirs.py", "file_name": "test_sim_dirs_with_gen_dirs.py", "file_type": "text/x-python", "file_size": 4029, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "4cb94e2e4f0aef0ea4feb8ea0760dd71fd3dd1b023d7b0b79563dfe7b427693c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d279b3fc-60a4-48a5-9e51-6d9b516df0e6", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_sim_dirs_with_gen_dirs.py", "file_name": "test_sim_dirs_with_gen_dirs.py", "file_type": "text/x-python", "file_size": 4029, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "fa4c3d8f1bbaa27182ce6ba2759af665df4d94cbccbb819164213c76476c9e5e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "sim_dir_sum = sum([\"sim\" in i for i in os.listdir(c_ensemble)])\n assert (\n sim_dir_sum == exit_criteria[\"sim_max\"]\n ), f\"Number of sim directories ({sim_dir_sum}) does not match sim_max ({exit_criteria['sim_max']}).\"\n\n assert any([\"gen\" in i for i in os.listdir(c_ensemble)]), \"No gen directories created.\"\n\n check_copied(\"sim\")\n check_copied(\"gen\")\n\n assert all(\n [i in os.listdir(c_ensemble) for i in os.listdir(c_ensemble + \"_back\")]\n ), \"Copyback dir doesn't contain the same contents as ensemble dir\"", "mimetype": "text/plain", "start_char_idx": 3040, "end_char_idx": 3545, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f61a5c84-0fcf-45f9-9fee-57c05d2ae939": {"__data__": {"id_": "f61a5c84-0fcf-45f9-9fee-57c05d2ae939", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_sim_input_dir_option.py", "file_name": "test_sim_input_dir_option.py", "file_type": "text/x-python", "file_size": 2390, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "84effbcb-2edf-4a5b-bc2d-c161061bc392", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_sim_input_dir_option.py", "file_name": "test_sim_input_dir_option.py", "file_type": "text/x-python", "file_size": 2390, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "15d3d1f6695f6de141d5e8fef2b5d8d9c658bf214f1979b8862a2fd2736d998c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with uniform random sampling and writes results into sim dirs.\nTests sim_input_dir capabilities\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_sim_input_dir_option.py\n python test_sim_input_dir_option.py --nworkers 3\n python test_sim_input_dir_option.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local tcp\n# TESTSUITE_NPROCS: 2 4\n\nimport os\n\nimport numpy as np\n\nfrom libensemble.gen_funcs.sampling import uniform_random_sample as gen_f\nfrom libensemble.libE import libE\nfrom libensemble.tests.regression_tests.support import write_sim_func as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\nnworkers, is_manager, libE_specs, _ = parse_args()\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n sim_input_dir = \"./sim_input_dir\"\n dir_to_copy = sim_input_dir + \"/copy_this\"\n o_ensemble = \"./ensemble_inputdir_w\" + str(nworkers) + \"_\" + libE_specs.get(\"comms\")\n\n for dir in [sim_input_dir, dir_to_copy]:\n if not os.path.isdir(dir):\n os.makedirs(dir, exist_ok=True)\n\n libE_specs[\"sim_input_dir\"] = sim_input_dir\n libE_specs[\"ensemble_dir_path\"] = o_ensemble\n libE_specs[\"sim_dir_symlink_files\"] = [\"./test_sim_input_dir_option.py\"] # to cover FileExistsError catch\n libE_specs[\"ensemble_copy_back\"] = True\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"out\": [(\"x\", float, (1,))],\n \"user\": {\n \"gen_batch_size\": 20,\n \"lb\": np.array([-3]),\n \"ub\": np.array([3]),\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n exit_criteria = {\"sim_max\": 21}\n\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs)\n\n if is_manager:\n assert os.path.isdir(o_ensemble), f\"Ensemble directory {o_ensemble} not created.\"\n assert all(\n [(\"copy_this\" in os.listdir(os.path.join(o_ensemble, i))) for i in os.listdir(o_ensemble)]\n ), \"Sim input dir not copied to each sim dir.\"", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2202, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "1ac22cd0-f8b7-4cc6-a5b5-6d709c0a397d": {"__data__": {"id_": "1ac22cd0-f8b7-4cc6-a5b5-6d709c0a397d", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_stats_output.py", "file_name": "test_stats_output.py", "file_type": "text/x-python", "file_size": 4268, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1eb6961e-2b91-4675-8509-c5d0c6c61295", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_stats_output.py", "file_name": "test_stats_output.py", "file_type": "text/x-python", "file_size": 4268, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "df49fb2bbdbe7b2627a62c0755b427837f7388d31d5efa6ccb072200663484ea", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e65a4448-0f05-4ba7-9ef5-53b1258e7d0d", "node_type": "1", "metadata": {}, "hash": "59a9af49f36e3c39fcddcf6be72e8994efeca0817e010ef05faeb13d41330cdc", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble doing uniform sampling with multiple tasks per simulation and\nvarying amount of resources, and then checks structure of the libE_stats.txt file.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_stats_output.py\n python test_stats_output.py --nworkers 3\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\nNote: This test contains multiple iterations to test different libE_stats outputs.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 2 4\n\nimport sys\nimport warnings\n\nimport numpy as np\n\nfrom libensemble.alloc_funcs.give_sim_work_first import give_sim_work_first\nfrom libensemble.executors.mpi_executor import MPIExecutor\nfrom libensemble.gen_funcs.sampling import uniform_random_sample_with_variable_resources as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs import helloworld, six_hump_camel\nfrom libensemble.sim_funcs.var_resources import multi_points_with_variable_resources as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\nwarnings.filterwarnings(\"ignore\", category=DeprecationWarning)\nfrom check_libE_stats import check_libE_stats\n\n# from libensemble.gen_funcs.sampling import uniform_random_sample_with_var_priorities_and_resources as gen_f\n\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n libE_specs[\"sim_dirs_make\"] = True\n\n if libE_specs[\"comms\"] == \"tcp\":\n sys.exit(\"This test only runs with MPI or local -- aborting...\")\n\n # Get paths for applications to run\n hello_world_app = helloworld.__file__\n six_hump_camel_app = six_hump_camel.__file__\n\n # Sim can run either helloworld or six_hump_camel\n exctr = MPIExecutor()\n exctr.register_app(full_path=hello_world_app, app_name=\"helloworld\")\n exctr.register_app(full_path=six_hump_camel_app, app_name=\"six_hump_camel\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n \"user\": {\"app\": \"helloworld\"}, # helloworld or six_hump_camel\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"in\": [\"sim_id\"],\n \"out\": [\n (\"priority\", float),\n (\"resource_sets\", int), # Set in gen func, resourced by alloc func.\n (\"x\", float, n),\n (\"x_on_cube\", float, n),\n ],\n \"user\": {\n \"gen_batch_size\": 5,\n \"max_resource_sets\": nworkers,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n alloc_specs = {\n \"alloc_f\": give_sim_work_first,\n \"user\": {\n \"batch_mode\": False,\n \"give_all_with_same_priority\": True,\n \"num_active_gens\": 1,\n \"async_return\": True,\n },\n }\n\n # This can improve scheduling when tasks may run across multiple nodes\n libE_specs[\"scheduler_opts\"] = {\"match_slots\": False}\n\n exit_criteria = {\"sim_max\": 40, \"wallclock_max\": 300}\n\n iterations = 2\n\n # Note that libE_stats.txt output will be appended across libE calls.\n for prob_id in range(iterations):\n sim_specs[\"user\"][\"app\"] = \"six_hump_camel\"\n\n libE_specs[\"ensemble_dir_path\"] = (\n \"./ensemble_test_stats\" + str(nworkers) + \"_\" + libE_specs.get(\"comms\") + \"_\" + str(prob_id)\n )\n\n if prob_id == 0:\n libE_specs[\"stats_fmt\"] = {\"task_timing\": True} # This adds total time for each task.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3197, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "e65a4448-0f05-4ba7-9ef5-53b1258e7d0d": {"__data__": {"id_": "e65a4448-0f05-4ba7-9ef5-53b1258e7d0d", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_stats_output.py", "file_name": "test_stats_output.py", "file_type": "text/x-python", "file_size": 4268, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1eb6961e-2b91-4675-8509-c5d0c6c61295", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_stats_output.py", "file_name": "test_stats_output.py", "file_type": "text/x-python", "file_size": 4268, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "df49fb2bbdbe7b2627a62c0755b427837f7388d31d5efa6ccb072200663484ea", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1ac22cd0-f8b7-4cc6-a5b5-6d709c0a397d", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_stats_output.py", "file_name": "test_stats_output.py", "file_type": "text/x-python", "file_size": 4268, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "1265cf114eb5ea7a5f18b782d565a57cc6f8e38f4dfd374c81916a8d3e4b1c68", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "for prob_id in range(iterations):\n sim_specs[\"user\"][\"app\"] = \"six_hump_camel\"\n\n libE_specs[\"ensemble_dir_path\"] = (\n \"./ensemble_test_stats\" + str(nworkers) + \"_\" + libE_specs.get(\"comms\") + \"_\" + str(prob_id)\n )\n\n if prob_id == 0:\n libE_specs[\"stats_fmt\"] = {\"task_timing\": True} # This adds total time for each task.\n check_task_datetime = False\n\n if prob_id == 1:\n # task_datetime: Include task_timing and start/end times for each task\n libE_specs[\"stats_fmt\"] = {\"task_datetime\": True, \"show_resource_sets\": True}\n check_task_datetime = True\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n # Perform the run\n H, persis_info, flag = libE(\n sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs, alloc_specs=alloc_specs\n )\n\n if is_manager:\n assert flag == 0\n check_libE_stats(task_datetime=check_task_datetime)\n\n # save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 2878, "end_char_idx": 3780, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "e410a735-d39b-479c-b86e-80845b217967": {"__data__": {"id_": "e410a735-d39b-479c-b86e-80845b217967", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_uniform_sampling.py", "file_name": "test_uniform_sampling.py", "file_type": "text/x-python", "file_size": 3172, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3f2422da-824a-479b-b610-9803a43733f2", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_uniform_sampling.py", "file_name": "test_uniform_sampling.py", "file_type": "text/x-python", "file_size": 3172, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "27a004fc119ffc9b7a5ca89d137a501f58f00ae5db12c79a23828a4061fac592", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with a non-persistent generator performing uniform random\nsampling.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_uniform_sampling.py\n python test_uniform_sampling.py --nworkers 3\n python test_uniform_sampling.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local tcp\n# TESTSUITE_NPROCS: 2 4\n\nimport datetime\nimport os\n\nimport numpy as np\n\nfrom libensemble.gen_funcs.sampling import uniform_random_sample\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.mock_sim import mock_sim\nfrom libensemble.sim_funcs.six_hump_camel import six_hump_camel\nfrom libensemble.tests.regression_tests.common import read_generated_file\nfrom libensemble.tests.regression_tests.support import six_hump_camel_minima as minima\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n libE_specs[\"save_every_k_sims\"] = 400\n libE_specs[\"save_every_k_gens\"] = 300\n libE_specs[\"save_H_with_date\"] = True\n libE_specs[\"H_file_prefix\"] = \"TESTING\"\n\n sim_specs = {\n \"sim_f\": six_hump_camel, # Function whose output is being minimized\n \"in\": [\"x\"], # Keys to be given to sim_f\n \"out\": [(\"f\", float)], # Name of the outputs from sim_f\n }\n # end_sim_specs_rst_tag\n\n gen_specs = {\n \"gen_f\": uniform_random_sample, # Function generating sim_f input\n \"out\": [(\"x\", float, (2,))], # Tell libE gen_f output, type, size\n \"user\": {\n \"gen_batch_size\": 500, # Used by this specific gen_f\n \"lb\": np.array([-3, -2]), # Used by this specific gen_f\n \"ub\": np.array([3, 2]), # Used by this specific gen_f\n },\n }\n # end_gen_specs_rst_tag\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n exit_criteria = {\"gen_max\": 501, \"wallclock_max\": 300}\n\n for run in range(2):\n if run == 1:\n # Test running a mock sim using previous history file\n sim_specs[\"sim_f\"] = mock_sim\n hfile = read_generated_file(\"TESTING_*_after_gen_1000.npy\")\n sim_specs[\"user\"] = {\"history_file\": hfile}\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs)\n\n if is_manager:\n assert flag == 0\n\n tol = 0.1\n for m in minima:\n assert np.min(np.sum((H[\"x\"] - m) ** 2, 1)) < tol\n\n npy_files = [i for i in os.listdir(os.path.dirname(__file__)) if i.endswith(\".npy\")]\n date = str(datetime.datetime.today()).split(\" \")[0]\n assert any([i.startswith(\"TESTING_\") for i in npy_files])\n assert any([date in i for i in npy_files])\n\n print(\"\\nlibEnsemble found the 6 minima within a tolerance \" + str(tol))", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2858, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "26dc7d64-daa3-468b-8d2f-bb9566711cc4": {"__data__": {"id_": "26dc7d64-daa3-468b-8d2f-bb9566711cc4", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_uniform_sampling_cancel.py", "file_name": "test_uniform_sampling_cancel.py", "file_type": "text/x-python", "file_size": 5467, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3acaa686-7970-4101-8bd2-8a6ac9eb9f39", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_uniform_sampling_cancel.py", "file_name": "test_uniform_sampling_cancel.py", "file_type": "text/x-python", "file_size": 5467, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "abe4a30a0fdcf9a9c3e29e7ffbbca49a8b3d7ca6f53f380cac9408bad7593910", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fcd85a06-bd88-4cdb-9bda-eb01a8bd2907", "node_type": "1", "metadata": {}, "hash": "96b627e9a4b75216977f2b0bba547aaa1f28e9cc059cadd4fb209d9a9e37c64f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests libEnsemble with a uniform sample that is also requesting cancellation of\nsome points.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_uniform_sampling_cancel.py\n python test_uniform_sampling_cancel.py --nworkers 3\n python test_uniform_sampling_cancel.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\nTests sampling with cancellations.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 2 4\n\nimport gc\n\nimport numpy as np\n\nfrom libensemble.alloc_funcs.fast_alloc import give_sim_work_first as fast_gswf\nfrom libensemble.alloc_funcs.give_pregenerated_work import give_pregenerated_sim_work\nfrom libensemble.alloc_funcs.give_sim_work_first import give_sim_work_first as gswf\nfrom libensemble.alloc_funcs.only_one_gen_alloc import ensure_one_active_gen\nfrom libensemble.gen_funcs.sampling import uniform_random_sample_cancel\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.six_hump_camel import six_hump_camel\nfrom libensemble.tests.regression_tests.support import six_hump_camel_minima as minima\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\ndef create_H0(persis_info, gen_specs, sim_max):\n \"\"\"Create an H0 for give_pregenerated_sim_work\"\"\"\n # Manually creating H0\n ub = gen_specs[\"user\"][\"ub\"]\n lb = gen_specs[\"user\"][\"lb\"]\n n = len(lb)\n b = sim_max\n\n H0 = np.zeros(b, dtype=[(\"x\", float, 2), (\"sim_id\", int), (\"sim_started\", bool), (\"cancel_requested\", bool)])\n H0[\"x\"] = persis_info[0][\"rand_stream\"].uniform(lb, ub, (b, n))\n H0[\"sim_id\"] = range(b)\n H0[\"sim_started\"] = False\n for i in range(b):\n if i % 10 == 0:\n H0[i][\"cancel_requested\"] = True\n\n # Using uniform_random_sample_cancel call - need to adjust some gen_specs though\n # gen_specs[\"out\"].append((\"sim_id\", int))\n # gen_specs[\"out\"].append((\"sim_started\", bool))\n # gen_specs[\"user\"][\"gen_batch_size\"] = sim_max\n # H0, persis_info[0] = uniform_random_sample_cancel({}, persis_info[0], gen_specs, {})\n # H0[\"sim_id\"] = range(gen_specs[\"user\"][\"gen_batch_size\"])\n # H0[\"sim_started\"] = False\n return H0\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n sim_specs = {\n \"sim_f\": six_hump_camel, # Function whose output is being minimized\n \"in\": [\"x\"], # Keys to be given to sim_f\n \"out\": [(\"f\", float)], # Name of the outputs from sim_f\n }\n # end_sim_specs_rst_tag\n\n # Note that it is unusual to specify cancel_requested as gen_specs[\"out\"]. It is here\n # so that cancellations are combined with regular generator outputs for testing purposes.\n # For a typical use case see test_persistent_surmise_calib.py.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2860, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "fcd85a06-bd88-4cdb-9bda-eb01a8bd2907": {"__data__": {"id_": "fcd85a06-bd88-4cdb-9bda-eb01a8bd2907", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_uniform_sampling_cancel.py", "file_name": "test_uniform_sampling_cancel.py", "file_type": "text/x-python", "file_size": 5467, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3acaa686-7970-4101-8bd2-8a6ac9eb9f39", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_uniform_sampling_cancel.py", "file_name": "test_uniform_sampling_cancel.py", "file_type": "text/x-python", "file_size": 5467, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "abe4a30a0fdcf9a9c3e29e7ffbbca49a8b3d7ca6f53f380cac9408bad7593910", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "26dc7d64-daa3-468b-8d2f-bb9566711cc4", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_uniform_sampling_cancel.py", "file_name": "test_uniform_sampling_cancel.py", "file_type": "text/x-python", "file_size": 5467, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "753d8a16768efdeb756c510eae1e20d174a43d3e737d057ddd9acb42713ca610", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "if __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n sim_specs = {\n \"sim_f\": six_hump_camel, # Function whose output is being minimized\n \"in\": [\"x\"], # Keys to be given to sim_f\n \"out\": [(\"f\", float)], # Name of the outputs from sim_f\n }\n # end_sim_specs_rst_tag\n\n # Note that it is unusual to specify cancel_requested as gen_specs[\"out\"]. It is here\n # so that cancellations are combined with regular generator outputs for testing purposes.\n # For a typical use case see test_persistent_surmise_calib.py.\n gen_specs = {\n \"gen_f\": uniform_random_sample_cancel, # Function generating sim_f input\n \"out\": [(\"x\", float, (2,)), (\"cancel_requested\", bool)],\n \"user\": {\n \"gen_batch_size\": 50, # Used by this specific gen_f\n \"lb\": np.array([-3, -2]), # Used by this specific gen_f\n \"ub\": np.array([3, 2]), # Used by this specific gen_f\n },\n }\n # end_gen_specs_rst_tag\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n sim_max = 500\n exit_criteria = {\"sim_max\": sim_max, \"wallclock_max\": 300}\n\n a_spec_1 = {\n \"alloc_f\": gswf,\n \"user\": {\n \"batch_mode\": True,\n \"num_active_gens\": 1,\n },\n }\n\n a_spec_2 = {\n \"alloc_f\": gswf,\n \"user\": {\n \"batch_mode\": True,\n \"num_active_gens\": 2,\n },\n }\n\n a_spec_3 = {\n \"alloc_f\": fast_gswf,\n \"user\": {},\n }\n\n a_spec_4 = {\n \"alloc_f\": ensure_one_active_gen,\n \"user\": {},\n }\n\n a_spec_5 = {\n \"alloc_f\": give_pregenerated_sim_work,\n \"user\": {},\n }\n\n allocs = {1: a_spec_1, 2: a_spec_2, 3: a_spec_3, 4: a_spec_4, 5: a_spec_5}\n\n if is_manager:\n print(\"Testing cancellations with non-persistent gen functions\")\n\n for testnum in range(1, 6):\n alloc_specs = allocs[testnum]\n if is_manager:\n print(\"\\nRunning with alloc specs\", alloc_specs, flush=True)\n\n if alloc_specs[\"alloc_f\"] == give_pregenerated_sim_work:\n H0 = create_H0(persis_info, gen_specs, sim_max)\n else:\n H0 = None\n\n # Reset for those that use them\n persis_info[\"next_to_give\"] = 0\n persis_info[\"total_gen_calls\"] = 0 # 1\n\n # Perform the run - do not overwrite persis_info\n H, persis_out, flag = libE(\n sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs=libE_specs, H0=H0\n )\n\n if is_manager:\n assert flag == 0\n assert np.all(H[\"cancel_requested\"][::10]), \"Some values should be cancelled but are not\"\n assert np.all(~H[\"sim_started\"][::10]), \"Some values are given that should not have been\"\n tol = 0.1\n for m in minima:\n assert np.min(np.sum((H[\"x\"] - m) ** 2, 1)) < tol\n\n print(\"libEnsemble found the 6 minima within a tolerance \" + str(tol))\n del H\n gc.collect() # Clean up memory space.", "mimetype": "text/plain", "start_char_idx": 2327, "end_char_idx": 4855, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "b2e5283f-a558-4cd2-8dd7-89a8425d0d3d": {"__data__": {"id_": "b2e5283f-a558-4cd2-8dd7-89a8425d0d3d", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_uniform_sampling_one_residual_at_a_time.py", "file_name": "test_uniform_sampling_one_residual_at_a_time.py", "file_type": "text/x-python", "file_size": 4121, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d9e1d4a0-ef4a-4530-b8ca-5c5968a78202", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_uniform_sampling_one_residual_at_a_time.py", "file_name": "test_uniform_sampling_one_residual_at_a_time.py", "file_type": "text/x-python", "file_size": 4121, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "1e6a011a6ba186dd1116947771450cfc19efac358ca5461617459c7c95909968", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "90258727-104e-48c2-aa0a-3fe7177cf5b2", "node_type": "1", "metadata": {}, "hash": "ba00b1c60f66fb3b0e59aeb4817907a3377744d660681014c0b88e576d1ba401", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with uniform random sampling on the chwirut least squares\nproblem. All 214 residual calculations for a given point are performed as a\nsingle simulation evaluation. NaNs are injected probabilistically in order to\ntest the allocation function's ability to preempt future residual\ncalculations. Also, the allocation function tries to preempt calculations\ncorresponding to points with partial sum-squared error worse than the\nbest-evaluated point so far.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_uniform_sampling_one_residual_at_a_time.py\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi\n# TESTSUITE_NPROCS: 2 4\n\nimport sys\nfrom copy import deepcopy\n\nimport numpy as np\n\nfrom libensemble.alloc_funcs.fast_alloc_and_pausing import give_sim_work_first\nfrom libensemble.gen_funcs.sampling import uniform_random_sample_obj_components as gen_f\n\n# Import libEnsemble items\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.chwirut1 import chwirut_eval as sim_f\nfrom libensemble.tests.regression_tests.support import persis_info_3 as persis_info\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n if libE_specs[\"comms\"] == \"tcp\":\n # Can't use the same interface for manager and worker if we want\n # repeated calls to libE -- the manager sets up a different server\n # each time, and the worker will not know what port to connect to.\n sys.exit(\"Cannot run with tcp when repeated calls to libE -- aborting...\")\n\n # Declare the run parameters/functions\n m = 214\n n = 3\n budget = 10 * m\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\", \"obj_component\"],\n \"out\": [(\"f_i\", float)],\n \"user\": {\"component_nan_frequency\": 0.01},\n }\n\n # lb tries to avoid x[1]=-x[2], which results in division by zero in chwirut.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2112, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "90258727-104e-48c2-aa0a-3fe7177cf5b2": {"__data__": {"id_": "90258727-104e-48c2-aa0a-3fe7177cf5b2", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_uniform_sampling_one_residual_at_a_time.py", "file_name": "test_uniform_sampling_one_residual_at_a_time.py", "file_type": "text/x-python", "file_size": 4121, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d9e1d4a0-ef4a-4530-b8ca-5c5968a78202", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_uniform_sampling_one_residual_at_a_time.py", "file_name": "test_uniform_sampling_one_residual_at_a_time.py", "file_type": "text/x-python", "file_size": 4121, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "1e6a011a6ba186dd1116947771450cfc19efac358ca5461617459c7c95909968", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b2e5283f-a558-4cd2-8dd7-89a8425d0d3d", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_uniform_sampling_one_residual_at_a_time.py", "file_name": "test_uniform_sampling_one_residual_at_a_time.py", "file_type": "text/x-python", "file_size": 4121, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "f0c9a937e201de2492dcc35b994d6e24bc35e27a86938ce5eba316a6b4e0c68b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "if __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n if libE_specs[\"comms\"] == \"tcp\":\n # Can't use the same interface for manager and worker if we want\n # repeated calls to libE -- the manager sets up a different server\n # each time, and the worker will not know what port to connect to.\n sys.exit(\"Cannot run with tcp when repeated calls to libE -- aborting...\")\n\n # Declare the run parameters/functions\n m = 214\n n = 3\n budget = 10 * m\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\", \"obj_component\"],\n \"out\": [(\"f_i\", float)],\n \"user\": {\"component_nan_frequency\": 0.01},\n }\n\n # lb tries to avoid x[1]=-x[2], which results in division by zero in chwirut.\n gen_specs = {\n \"gen_f\": gen_f,\n \"in\": [\"pt_id\"],\n \"out\": [(\"x\", float, n), (\"priority\", float), (\"paused\", bool), (\"obj_component\", int), (\"pt_id\", int)],\n \"user\": {\n \"gen_batch_size\": 2,\n \"single_component_at_a_time\": True,\n \"combine_component_func\": lambda x: np.sum(np.power(x, 2)),\n \"lb\": (-2 - np.pi / 10) * np.ones(n),\n \"ub\": 2 * np.ones(n),\n \"components\": m,\n },\n }\n\n alloc_specs = {\n \"alloc_f\": give_sim_work_first, # Allocation function\n \"user\": {\n \"stop_on_NaNs\": True, # Should alloc preempt evals\n \"batch_mode\": True, # Wait until all sim evals are done\n \"num_active_gens\": 1, # Only allow one active generator\n \"stop_partial_fvec_eval\": True, # Should alloc preempt evals\n },\n }\n # end_alloc_specs_rst_tag\n\n persis_info = add_unique_random_streams(persis_info, nworkers + 1)\n persis_info_safe = deepcopy(persis_info)\n\n exit_criteria = {\"sim_max\": budget, \"wallclock_max\": 300}\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n if is_manager:\n assert flag == 0\n save_libE_output(H, persis_info, __file__, nworkers)\n\n # Perform the run but not stopping on NaNs\n alloc_specs[\"user\"].pop(\"stop_on_NaNs\")\n persis_info = deepcopy(persis_info_safe)\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n if is_manager:\n assert flag == 0\n\n # Perform the run also not stopping on partial fvec evals\n alloc_specs[\"user\"].pop(\"stop_partial_fvec_eval\")\n persis_info = deepcopy(persis_info_safe)\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n if is_manager:\n assert flag == 0", "mimetype": "text/plain", "start_char_idx": 1431, "end_char_idx": 3772, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "e672b2ee-63e3-4614-a3e4-8665a0c61298": {"__data__": {"id_": "e672b2ee-63e3-4614-a3e4-8665a0c61298", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_uniform_sampling_then_persistent_localopt_runs.py", "file_name": "test_uniform_sampling_then_persistent_localopt_runs.py", "file_type": "text/x-python", "file_size": 3014, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d41e021e-d934-4f8d-bac9-6b4eedb64ad0", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_uniform_sampling_then_persistent_localopt_runs.py", "file_name": "test_uniform_sampling_then_persistent_localopt_runs.py", "file_type": "text/x-python", "file_size": 3014, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "e62c3946493167ea602fe0f8223720aa8b4f4d54368bb96fbccb6712d0ed0d07", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble on a generator function that first does uniform sampling,\nthen starts persistent local optimization runs.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_uniform_sampling_then_persistent_localopt_runs.py\n python test_uniform_sampling_then_persistent_localopt_runs.py --nworkers 3\n python test_uniform_sampling_then_persistent_localopt_runs.py --nworkers 3 --comms tcp\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 2, as one of the three workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local tcp\n# TESTSUITE_NPROCS: 3 4\n# TESTSUITE_EXTRA: true\n\nimport sys\n\nimport numpy as np\n\nimport libensemble.gen_funcs\n\nlibensemble.gen_funcs.rc.aposmm_optimizers = \"scipy\"\n\nfrom libensemble.alloc_funcs.start_persistent_local_opt_gens import start_persistent_local_opt_gens as alloc_f\nfrom libensemble.gen_funcs.uniform_or_localopt import uniform_or_localopt as gen_f\n\n# Import libEnsemble main, sim_specs, gen_specs, alloc_specs, and persis_info\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.six_hump_camel import six_hump_camel as sim_f\nfrom libensemble.tests.regression_tests.support import six_hump_camel_minima as minima\nfrom libensemble.tests.regression_tests.support import uniform_or_localopt_gen_out as gen_out\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float), (\"grad\", float, n)],\n }\n\n gen_out += [(\"x\", float, n), (\"x_on_cube\", float, n)]\n gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [\"x\", \"f\", \"grad\", \"sim_id\"],\n \"out\": gen_out,\n \"user\": {\n \"xtol_rel\": 1e-4,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n \"gen_batch_size\": 2,\n \"localopt_method\": \"LD_MMA\",\n \"xtol_rel\": 1e-4,\n },\n }\n\n alloc_specs = {\"alloc_f\": alloc_f, \"user\": {\"batch_mode\": True, \"num_active_gens\": 1}}\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n exit_criteria = {\"sim_max\": 1000, \"wallclock_max\": 300}\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n if is_manager:\n assert flag == 0\n\n tol = 0.1\n for m in minima:\n assert np.min(np.sum((H[\"x\"] - m) ** 2, 1)) < tol\n\n print(\"\\nlibEnsemble found the 6 minima to a tolerance \" + str(tol))\n\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2790, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "80a48846-bf81-404a-98af-97c2aee79d19": {"__data__": {"id_": "80a48846-bf81-404a-98af-97c2aee79d19", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_uniform_sampling_with_variable_resources.py", "file_name": "test_uniform_sampling_with_variable_resources.py", "file_type": "text/x-python", "file_size": 4212, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1b2dd56b-9ed2-4e4c-a2fc-f6c544d96c3b", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_uniform_sampling_with_variable_resources.py", "file_name": "test_uniform_sampling_with_variable_resources.py", "file_type": "text/x-python", "file_size": 4212, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "ba448a32d3f83cb9cff82942e98c6985c4aa117d0ba37fec0cab90663bcacb53", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9a3bf1e3-79f3-4f73-8196-898f6294d318", "node_type": "1", "metadata": {}, "hash": "a69f11db693b1b13f60008cf9ddd8bb961806cb011b210b6d3bbb037bd7ead4f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble doing uniform sampling and then evaluates those points with\nvarying amount of resources.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_uniform_sampling_with_variable_resources.py\n python test_uniform_sampling_with_variable_resources.py --nworkers 3\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\nNote: This test contains multiple iterations to test different configurations.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 2 4\n# TESTSUITE_EXTRA: true\n\nimport sys\nfrom multiprocessing import set_start_method\n\nimport numpy as np\n\nfrom libensemble.alloc_funcs.give_sim_work_first import give_sim_work_first\nfrom libensemble.executors.mpi_executor import MPIExecutor\nfrom libensemble.gen_funcs.sampling import uniform_random_sample_with_variable_resources as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs import helloworld, six_hump_camel\nfrom libensemble.sim_funcs.var_resources import multi_points_with_variable_resources as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args, save_libE_output\n\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n libE_specs[\"sim_dirs_make\"] = True\n en_suffix = str(nworkers) + \"_\" + libE_specs.get(\"comms\")\n libE_specs[\"ensemble_dir_path\"] = \"./ensemble_diff_nodes_w\" + en_suffix\n\n if libE_specs[\"comms\"] == \"tcp\":\n sys.exit(\"This test only runs with MPI or local -- aborting...\")\n\n # Get paths for applications to run\n hello_world_app = helloworld.__file__\n six_hump_camel_app = six_hump_camel.__file__\n\n # Sim can run either helloworld or six_hump_camel\n exctr = MPIExecutor()\n exctr.register_app(full_path=hello_world_app, app_name=\"helloworld\")\n exctr.register_app(full_path=six_hump_camel_app, app_name=\"six_hump_camel\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n \"user\": {\"app\": \"helloworld\"}, # helloworld or six_hump_camel\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"in\": [\"sim_id\"],\n \"out\": [\n (\"priority\", float),\n (\"resource_sets\", int), # Set in gen func, resourced by alloc func.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2234, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "9a3bf1e3-79f3-4f73-8196-898f6294d318": {"__data__": {"id_": "9a3bf1e3-79f3-4f73-8196-898f6294d318", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_uniform_sampling_with_variable_resources.py", "file_name": "test_uniform_sampling_with_variable_resources.py", "file_type": "text/x-python", "file_size": 4212, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1b2dd56b-9ed2-4e4c-a2fc-f6c544d96c3b", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_uniform_sampling_with_variable_resources.py", "file_name": "test_uniform_sampling_with_variable_resources.py", "file_type": "text/x-python", "file_size": 4212, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "ba448a32d3f83cb9cff82942e98c6985c4aa117d0ba37fec0cab90663bcacb53", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "80a48846-bf81-404a-98af-97c2aee79d19", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_uniform_sampling_with_variable_resources.py", "file_name": "test_uniform_sampling_with_variable_resources.py", "file_type": "text/x-python", "file_size": 4212, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "af3342f4c6796462855701cc1260eb926d36b380158bd35903cb3ab619aa2a47", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "(\"x\", float, n),\n (\"x_on_cube\", float, n),\n ],\n \"user\": {\n \"gen_batch_size\": 5,\n \"max_resource_sets\": nworkers,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n alloc_specs = {\n \"alloc_f\": give_sim_work_first,\n \"user\": {\n \"batch_mode\": False,\n \"give_all_with_same_priority\": True,\n \"num_active_gens\": 1,\n \"async_return\": True,\n },\n }\n\n # This can improve scheduling when tasks may run across multiple nodes\n libE_specs[\"scheduler_opts\"] = {\"match_slots\": False}\n\n exit_criteria = {\"sim_max\": 40, \"wallclock_max\": 300}\n\n if libE_specs[\"comms\"] == \"local\":\n iterations = 4\n else:\n iterations = 2\n\n for prob_id in range(iterations):\n if prob_id == 0:\n sim_specs[\"user\"][\"app\"] = \"six_hump_camel\"\n else:\n sim_specs[\"user\"][\"app\"] = \"helloworld\"\n if prob_id == 1:\n libE_specs[\"ensemble_dir_path\"] = \"ensemble_hw_fork\" + en_suffix\n set_start_method(\"fork\", force=True)\n elif prob_id == 2:\n libE_specs[\"ensemble_dir_path\"] = \"ensemble_hw_spawn\" + en_suffix\n set_start_method(\"spawn\", force=True)\n else:\n libE_specs[\"ensemble_dir_path\"] = \"ensemble_hw_forkserver\" + en_suffix\n set_start_method(\"forkserver\", force=True)\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n # Perform the run\n H, persis_info, flag = libE(\n sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs, alloc_specs=alloc_specs\n )\n\n if is_manager:\n assert flag == 0\n save_libE_output(H, persis_info, __file__, nworkers)", "mimetype": "text/plain", "start_char_idx": 2236, "end_char_idx": 3659, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "45bb0a84-1b17-4078-819c-f240011b8534": {"__data__": {"id_": "45bb0a84-1b17-4078-819c-f240011b8534", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_with_app_persistent_aposmm_tao_nm.py", "file_name": "test_with_app_persistent_aposmm_tao_nm.py", "file_type": "text/x-python", "file_size": 3166, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a6446dff-c30b-40b9-8c62-fd789df1f984", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_with_app_persistent_aposmm_tao_nm.py", "file_name": "test_with_app_persistent_aposmm_tao_nm.py", "file_type": "text/x-python", "file_size": 3166, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "a87cdc27f0ef871e7f22b34ba19c75146c49acc987943894d198fe2460c718da", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with APOSMM with a PETSc/TAO local optimizer and using\nthe executor to run an application.\n\nThis is to test the scenario, where Open-MPI will fail due to nested MPI, if\nPETSc is imported at global level.\n\nExecute via one of the following commands (e.g., 3 workers):\n mpiexec -np 4 python test_persistent_aposmm_tao_nm.py\n python test_with_app_persistent_aposmm_tao_nm.py --nworkers 3\n python test_with_app_persistent_aposmm_tao_nm.py --nworkers 3 --comms tcp\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 2, since one of the three workers will be the\npersistent generator.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: local\n# TESTSUITE_NPROCS: 4\n# TESTSUITE_EXTRA: true\n\nimport multiprocessing\nimport sys\n\nimport numpy as np\n\nfrom libensemble.alloc_funcs.persistent_aposmm_alloc import persistent_aposmm_alloc as alloc_f\nfrom libensemble.executors import MPIExecutor\nfrom libensemble.gen_funcs.persistent_aposmm import aposmm as gen_f\n\n# Import libEnsemble items for this test\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs import six_hump_camel\nfrom libensemble.sim_funcs.var_resources import multi_points_with_variable_resources as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\n# For Open-MPI the following lines cannot be used, thus allowing PETSc to import.\n# import libensemble.gen_funcs\n# libensemble.gen_funcs.rc.aposmm_optimizers = \"petsc\"\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n multiprocessing.set_start_method(\"fork\", force=True)\n\n nworkers, is_manager, libE_specs, _ = parse_args()\n exctr = MPIExecutor()\n six_hump_camel_app = six_hump_camel.__file__\n exctr.register_app(full_path=six_hump_camel_app, app_name=\"six_hump_camel\")\n libE_specs[\"sim_dirs_make\"] = True\n\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float), (\"grad\", float, n)],\n \"user\": {\"app\": \"six_hump_camel\"}, # helloworld or six_hump_camel\n }\n\n gen_out = [\n (\"x\", float, n),\n (\"x_on_cube\", float, n),\n (\"sim_id\", int),\n (\"local_min\", bool),\n (\"local_pt\", bool),\n ]\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"persis_in\": [\"f\", \"grad\"] + [n[0] for n in gen_out],\n \"out\": gen_out,\n \"user\": {\n \"initial_sample_size\": 10,\n \"localopt_method\": \"nm\",\n \"lb\": np.array([-3, -2]), # This is only for sampling. TAO_NM doesn't honor constraints.\n \"ub\": np.array([3, 2]),\n },\n }\n\n alloc_specs = {\"alloc_f\": alloc_f}\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n exit_criteria = {\"sim_max\": 20} # must be bigger than sample size to enter into optimization code.\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2949, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f35219a5-d573-49c3-9f92-21f9df5ffb56": {"__data__": {"id_": "f35219a5-d573-49c3-9f92-21f9df5ffb56", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_worker_exceptions.py", "file_name": "test_worker_exceptions.py", "file_type": "text/x-python", "file_size": 1959, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "33ea15da-c9f5-41b4-bca6-cf1290b1ad97", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_worker_exceptions.py", "file_name": "test_worker_exceptions.py", "file_type": "text/x-python", "file_size": 1959, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "05e296035f1a52b2a35282ece7a7187af63b3bbe0d157aa4d270043873671647", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble on a gen_f that is missing necessary information; this tests\nlibE worker exception raising\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_worker_exceptions.py\n python test_worker_exceptions.py --nworkers 3\n python test_worker_exceptions.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local tcp\n# TESTSUITE_NPROCS: 2 4\n\nimport numpy as np\n\nfrom libensemble.gen_funcs.sampling import uniform_random_sample as gen_f\nfrom libensemble.libE import libE\nfrom libensemble.manager import LoggedException\nfrom libensemble.tests.regression_tests.support import nan_func as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n n = 2\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"in\": [],\n \"out\": [(\"x\", float, 2)],\n \"user\": {\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n \"initial_sample\": 100,\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n libE_specs[\"abort_on_exception\"] = False\n libE_specs[\"save_H_and_persis_on_abort\"] = False\n\n # Tell libEnsemble when to stop\n exit_criteria = {\"wallclock_max\": 10}\n\n # Perform the run\n return_flag = 1\n try:\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs)\n except LoggedException as e:\n print(f\"Caught deliberate exception: {e}\")\n return_flag = 0\n\n if is_manager:\n assert return_flag == 0", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1787, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "075bd480-6f3c-425b-b846-961dd3cf5d0b": {"__data__": {"id_": "075bd480-6f3c-425b-b846-961dd3cf5d0b", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_workflow_dir.py", "file_name": "test_workflow_dir.py", "file_type": "text/x-python", "file_size": 3149, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "d851519a-fabc-4abb-bb7f-5ecdb6a5cd66", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_workflow_dir.py", "file_name": "test_workflow_dir.py", "file_type": "text/x-python", "file_size": 3149, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "8b9d8f48b7cc16634a8b90a9536cd0328d72a5ee20f36358f6959faa9f137718", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble with uniform random sampling and writes results into sim dirs.\nTests sim_input_dir capabilities\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_sim_input_dir_option.py\n python test_sim_input_dir_option.py --nworkers 3\n python test_sim_input_dir_option.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local tcp\n# TESTSUITE_NPROCS: 2 4\n\nimport os\n\nimport numpy as np\n\nfrom libensemble.gen_funcs.sampling import uniform_random_sample as gen_f\nfrom libensemble.libE import libE\nfrom libensemble.tests.regression_tests.support import write_sim_func as sim_f\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\nnworkers, is_manager, libE_specs, _ = parse_args()\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n sim_input_dir = os.path.abspath(\"./sim_input_dir\")\n dir_to_copy = sim_input_dir + \"/copy_this\"\n\n for dire in [sim_input_dir, dir_to_copy]:\n if not os.path.isdir(dire):\n os.makedirs(dire, exist_ok=True)\n\n libE_specs[\"sim_input_dir\"] = sim_input_dir\n libE_specs[\"sim_dirs_make\"] = False\n libE_specs[\"sim_dir_symlink_files\"] = [\n os.path.abspath(\"./test_sim_input_dir_option.py\")\n ] # to cover FileExistsError catch\n libE_specs[\"ensemble_copy_back\"] = True\n libE_specs[\"use_workflow_dir\"] = True\n\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"out\": [(\"x\", float, (1,))],\n \"user\": {\n \"gen_batch_size\": 20,\n \"lb\": np.array([-3]),\n \"ub\": np.array([3]),\n },\n }\n\n persis_info = add_unique_random_streams({}, nworkers + 1)\n\n exit_criteria = {\"sim_max\": 21}\n\n ensemble_lens = []\n stats_lens = []\n\n for i in range(2):\n libE_specs[\"workflow_dir_path\"] = (\n \"./test_workflow\" + str(i) + \"_nworkers\" + str(nworkers) + \"_comms-\" + libE_specs[\"comms\"]\n )\n\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, libE_specs=libE_specs)\n\n assert os.path.isdir(libE_specs[\"workflow_dir_path\"]), \"workflow_dir not created\"\n assert all(\n [\n i in os.listdir(libE_specs[\"workflow_dir_path\"])\n for i in [\"ensemble.log\", \"libE_stats.txt\", \"ensemble\", \"ensemble_back\"]\n ]\n )\n\n with open(os.path.join(libE_specs[\"workflow_dir_path\"], \"ensemble.log\"), \"r\") as f:\n lines = f.readlines()\n ensemble_lens.append(len(lines))\n\n with open(os.path.join(libE_specs[\"workflow_dir_path\"], \"libE_stats.txt\"), \"r\") as f:\n lines = f.readlines()\n stats_lens.append(len(lines))\n\n assert ensemble_lens[0] == ensemble_lens[1], \"ensemble.log's didn't have same length\"\n assert stats_lens[0] == stats_lens[1], \"libE_stats.txt's didn't have same length\"", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2811, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "50ac58f8-08df-480e-8bfe-10cbb2bb66a4": {"__data__": {"id_": "50ac58f8-08df-480e-8bfe-10cbb2bb66a4", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_xopt_EI.py", "file_name": "test_xopt_EI.py", "file_type": "text/x-python", "file_size": 3020, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9e9ff103-5211-4d2f-aa3a-871037f18958", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_xopt_EI.py", "file_name": "test_xopt_EI.py", "file_type": "text/x-python", "file_size": 3020, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "b85e53cfcba7fad3afe0d424f732407b22cb11062e1c8420f6210e91958a6c5d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests libEnsemble with Xopt ExpectedImprovementGenerator\n\n*****currently fixing nworkers to batch_size*****\n\nExecute via one of the following commands (e.g. 4 workers):\n mpiexec -np 5 python test_xopt_EI.py\n python test_xopt_EI.py -n 4\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 4 as the generator is on the manager.\n\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 4\n# TESTSUITE_EXTRA: true\n\nimport numpy as np\nfrom gest_api.vocs import VOCS\nfrom xopt.generators.bayesian.expected_improvement import ExpectedImprovementGenerator\n\nfrom libensemble import Ensemble\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.specs import AllocSpecs, ExitCriteria, GenSpecs, LibeSpecs, SimSpecs\n\n# SH TODO - should check constant1 is present\n# Adapted from Xopt/xopt/resources/testing.py\ndef xtest_sim(H, persis_info, sim_specs, _):\n \"\"\"\n Simple sim function that takes x1, x2, constant1 from H and returns y1, c1.\n Logic: y1 = x2, c1 = x1\n \"\"\"\n batch = len(H)\n H_o = np.zeros(batch, dtype=sim_specs[\"out\"])\n\n for i in range(batch):\n x1 = H[\"x1\"][i]\n x2 = H[\"x2\"][i]\n # constant1 is available but not used in the calculation\n\n H_o[\"y1\"][i] = x2\n H_o[\"c1\"][i] = x1\n\n return H_o, persis_info\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n\n n = 2\n batch_size = 4\n\n libE_specs = LibeSpecs(gen_on_manager=True, nworkers=batch_size)\n\n vocs = VOCS(\n variables={\"x1\": [0, 1.0], \"x2\": [0, 10.0]},\n objectives={\"y1\": \"MINIMIZE\"},\n constraints={\"c1\": [\"GREATER_THAN\", 0.5]},\n constants={\"constant1\": 1.0},\n )\n\n gen = ExpectedImprovementGenerator(vocs=vocs)\n\n # Create 4 initial points and ingest them\n initial_points = [\n {\"x1\": 0.2, \"x2\": 2.0, \"constant1\": 1.0, \"y1\": 2.0, \"c1\": 0.2},\n {\"x1\": 0.5, \"x2\": 5.0, \"constant1\": 1.0, \"y1\": 5.0, \"c1\": 0.5},\n {\"x1\": 0.7, \"x2\": 7.0, \"constant1\": 1.0, \"y1\": 7.0, \"c1\": 0.7},\n {\"x1\": 0.9, \"x2\": 9.0, \"constant1\": 1.0, \"y1\": 9.0, \"c1\": 0.9},\n ]\n gen.ingest(initial_points)\n\n gen_specs = GenSpecs(\n generator=gen,\n batch_size=batch_size,\n vocs=vocs,\n )\n\n sim_specs = SimSpecs(\n sim_f=xtest_sim,\n vocs=vocs,\n )\n\n alloc_specs = AllocSpecs(alloc_f=alloc_f)\n exit_criteria = ExitCriteria(sim_max=20)\n\n workflow = Ensemble(\n libE_specs=libE_specs,\n sim_specs=sim_specs,\n alloc_specs=alloc_specs,\n gen_specs=gen_specs,\n exit_criteria=exit_criteria,\n )\n\n H, _, _ = workflow.run()\n\n # Perform the run\n if workflow.is_manager:\n print(f\"Completed {len(H)} simulations\")\n assert np.array_equal(H[\"y1\"], H[\"x2\"])\n assert np.array_equal(H[\"c1\"], H[\"x1\"])", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2744, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "2a5b51b7-c138-464d-b12f-4254bb97069d": {"__data__": {"id_": "2a5b51b7-c138-464d-b12f-4254bb97069d", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_xopt_EI_with_types.py", "file_name": "test_xopt_EI_with_types.py", "file_type": "text/x-python", "file_size": 3071, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0053cbb2-b5cb-4a63-8240-8322cb153926", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_xopt_EI_with_types.py", "file_name": "test_xopt_EI_with_types.py", "file_type": "text/x-python", "file_size": 3071, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "18a9178801c6fff37c6bf2a8accfbad07791e0a0e7feef8f70ef29e6f5007189", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests libEnsemble with Xopt ExpectedImprovementGenerator\n\n*****currently fixing nworkers to batch_size*****\n\nExecute via one of the following commands (e.g. 4 workers):\n mpiexec -np 5 python test_xopt_EI.py\n python test_xopt_EI.py -n 4\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 4 as the generator is on the manager.\n\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 4\n# TESTSUITE_EXTRA: true\n\nimport sys\nimport warnings\n\nimport numpy as np\nfrom gest_api.vocs import VOCS\nfrom xopt.generators.bayesian.expected_improvement import ExpectedImprovementGenerator\n\nfrom libensemble import Ensemble\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.specs import AllocSpecs, ExitCriteria, GenSpecs, LibeSpecs, SimSpecs\n\n# SH TODO - should check constant1 is present\n# From Xopt/xopt/resources/testing.py\ndef xtest_sim(H, persis_info, sim_specs, _):\n \"\"\"\n Simple sim function that takes x1, x2, constant1 from H and returns y1, c1.\n Logic: y1 = x2, c1 = x1\n \"\"\"\n batch = len(H)\n H_o = np.zeros(batch, dtype=sim_specs[\"out\"])\n\n for i in range(batch):\n x1 = H[\"x1\"][i]\n x2 = H[\"x2\"][i]\n # constant1 is available but not used in the calculation\n\n H_o[\"y1\"][i] = x2\n H_o[\"c1\"][i] = x1\n\n return H_o, persis_info\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n\n n = 2\n batch_size = 4\n\n libE_specs = LibeSpecs(gen_on_manager=True, nworkers=batch_size)\n\n vocs = VOCS(\n variables={\"x1\": [0, 1.0], \"x2\": [0, 10.0]},\n objectives={\"y1\": \"MINIMIZE\"},\n constraints={\"c1\": [\"GREATER_THAN\", 0.5]},\n constants={\"constant1\": 1.0},\n observables={\"o1\": float, \"o2\": int},\n )\n\n gen = ExpectedImprovementGenerator(vocs=vocs)\n\n # Create 4 initial points and ingest them\n initial_points = [\n {\"x1\": 0.2, \"x2\": 2.0, \"constant1\": 1.0, \"y1\": 2.0, \"c1\": 0.2, \"o1\": 0.1, \"o2\": 1},\n {\"x1\": 0.5, \"x2\": 5.0, \"constant1\": 1.0, \"y1\": 5.0, \"c1\": 0.5, \"o1\": 0.2, \"o2\": 2},\n {\"x1\": 0.7, \"x2\": 7.0, \"constant1\": 1.0, \"y1\": 7.0, \"c1\": 0.7, \"o1\": 0.3, \"o2\": 3},\n {\"x1\": 0.9, \"x2\": 9.0, \"constant1\": 1.0, \"y1\": 9.0, \"c1\": 0.9, \"o1\": 0.4, \"o2\": 4},\n ]\n\n gen.ingest(initial_points)\n\n gen_specs = GenSpecs(\n generator=gen,\n batch_size=batch_size,\n vocs=vocs,\n )\n\n sim_specs = SimSpecs(\n sim_f=xtest_sim,\n vocs=vocs,\n )\n\n alloc_specs = AllocSpecs(alloc_f=alloc_f)\n exit_criteria = ExitCriteria(sim_max=20)\n\n workflow = Ensemble(\n libE_specs=libE_specs,\n sim_specs=sim_specs,\n alloc_specs=alloc_specs,\n gen_specs=gen_specs,\n exit_criteria=exit_criteria,\n )\n\n H, _, _ = workflow.run()\n\n # Perform the run\n if workflow.is_manager:\n print(f\"Completed {len(H)} simulations\")", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2802, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "5605ce20-8b84-477a-91e8-f8a111e83377": {"__data__": {"id_": "5605ce20-8b84-477a-91e8-f8a111e83377", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_xopt_EI_xopt_sim.py", "file_name": "test_xopt_EI_xopt_sim.py", "file_type": "text/x-python", "file_size": 2897, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b0b4d8a6-8002-498f-b176-8986de05101b", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_xopt_EI_xopt_sim.py", "file_name": "test_xopt_EI_xopt_sim.py", "file_type": "text/x-python", "file_size": 2897, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "ee594eded413694cae7b0595fe6d9049d9d619271a912a9fd06e5a31e9bf8baa", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests libEnsemble with Xopt ExpectedImprovementGenerator and a gest-api form simulator.\n\n*****currently fixing nworkers to batch_size*****\n\nExecute via one of the following commands (e.g. 4 workers):\n mpiexec -np 5 python test_xopt_EI_xopt_sim.py\n python test_xopt_EI_xopt_sim.py -n 4\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 4 as the generator is on the manager.\n\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 4\n# TESTSUITE_EXTRA: true\n\nimport numpy as np\nfrom gest_api.vocs import VOCS\nfrom xopt.generators.bayesian.expected_improvement import ExpectedImprovementGenerator\n\nfrom libensemble import Ensemble\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.specs import AllocSpecs, ExitCriteria, GenSpecs, LibeSpecs, SimSpecs\n\n# SH TODO - should check constant1 is present\n# From Xopt/xopt/resources/testing.py\ndef xtest_callable(input_dict: dict, a=0) -> dict:\n \"\"\"Single-objective callable test function\"\"\"\n assert isinstance(input_dict, dict)\n x1 = input_dict[\"x1\"]\n x2 = input_dict[\"x2\"]\n\n assert \"constant1\" in input_dict\n\n y1 = x2\n c1 = x1\n return {\"y1\": y1, \"c1\": c1}\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n\n n = 2\n batch_size = 4\n\n libE_specs = LibeSpecs(gen_on_manager=True, nworkers=batch_size)\n\n vocs = VOCS(\n variables={\"x1\": [0, 1.0], \"x2\": [0, 10.0]},\n objectives={\"y1\": \"MINIMIZE\"},\n constraints={\"c1\": [\"GREATER_THAN\", 0.5]},\n constants={\"constant1\": 1.0},\n )\n\n gen = ExpectedImprovementGenerator(vocs=vocs)\n\n # Create 4 initial points and ingest them\n initial_points = [\n {\"x1\": 0.2, \"x2\": 2.0, \"constant1\": 1.0, \"y1\": 2.0, \"c1\": 0.2},\n {\"x1\": 0.5, \"x2\": 5.0, \"constant1\": 1.0, \"y1\": 5.0, \"c1\": 0.5},\n {\"x1\": 0.7, \"x2\": 7.0, \"constant1\": 1.0, \"y1\": 7.0, \"c1\": 0.7},\n {\"x1\": 0.9, \"x2\": 9.0, \"constant1\": 1.0, \"y1\": 9.0, \"c1\": 0.9},\n ]\n gen.ingest(initial_points)\n\n gen_specs = GenSpecs(\n generator=gen,\n batch_size=batch_size,\n vocs=vocs,\n )\n\n sim_specs = SimSpecs(\n simulator=xtest_callable,\n vocs=vocs,\n )\n\n alloc_specs = AllocSpecs(alloc_f=alloc_f)\n exit_criteria = ExitCriteria(sim_max=20)\n\n workflow = Ensemble(\n libE_specs=libE_specs,\n sim_specs=sim_specs,\n alloc_specs=alloc_specs,\n gen_specs=gen_specs,\n exit_criteria=exit_criteria,\n )\n\n H, _, _ = workflow.run()\n\n # Perform the run\n if workflow.is_manager:\n print(f\"Completed {len(H)} simulations\")\n assert np.array_equal(H[\"y1\"], H[\"x2\"])\n assert np.array_equal(H[\"c1\"], H[\"x1\"])", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2656, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ab26516f-ea06-45e3-a7a9-f9b801a88a10": {"__data__": {"id_": "ab26516f-ea06-45e3-a7a9-f9b801a88a10", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_xopt_nelder_mead.py", "file_name": "test_xopt_nelder_mead.py", "file_type": "text/x-python", "file_size": 2581, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "51180ca5-6342-422d-8303-f68ac94aa602", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_xopt_nelder_mead.py", "file_name": "test_xopt_nelder_mead.py", "file_type": "text/x-python", "file_size": 2581, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "b9e768d65cb730ea54b6c64f905917354302fd7424550ca89f1f8e8ad6c119de", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nTests libEnsemble with Xopt ExpectedImprovementGenerator\n\n*****currently fixing nworkers to batch_size*****\n\nExecute via one of the following commands (e.g. 4 workers):\n mpiexec -np 5 python test_xopt_EI.py\n python test_xopt_EI.py -n 4\n\nWhen running with the above commands, the number of concurrent evaluations of\nthe objective function will be 4 as the generator is on the manager.\n\n\"\"\"\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 4\n# TESTSUITE_EXTRA: true\n\nimport sys\nimport warnings\n\nimport numpy as np\nfrom gest_api.vocs import VOCS\nfrom xopt.generators.bayesian.expected_improvement import ExpectedImprovementGenerator\n\nfrom libensemble import Ensemble\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.specs import AllocSpecs, ExitCriteria, GenSpecs, LibeSpecs, SimSpecs\n\n# SH TODO - should check constant1 is present\n# From Xopt/xopt/resources/testing.py\ndef xtest_sim(H, persis_info, sim_specs, _):\n \"\"\"\n Simple sim function that takes x1, x2, constant1 from H and returns y1, c1.\n Logic: y1 = x2, c1 = x1\n \"\"\"\n batch = len(H)\n H_o = np.zeros(batch, dtype=sim_specs[\"out\"])\n\n for i in range(batch):\n x1 = H[\"x1\"][i]\n x2 = H[\"x2\"][i]\n # constant1 is available but not used in the calculation\n\n H_o[\"y1\"][i] = x2\n H_o[\"c1\"][i] = x1\n\n return H_o, persis_info\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n\n n = 2\n batch_size = 4\n\n libE_specs = LibeSpecs(gen_on_manager=True, nworkers=batch_size)\n\n vocs = VOCS(\n variables={\"x1\": [0, 1.0], \"x2\": [0, 10.0]},\n objectives={\"y1\": \"MINIMIZE\"},\n constraints={\"c1\": [\"GREATER_THAN\", 0.5]},\n constants={\"constant1\": 1.0},\n )\n\n gen = ExpectedImprovementGenerator(vocs=vocs)\n\n gen_specs = GenSpecs(\n # initial_batch_size=4,\n generator=gen,\n batch_size=batch_size,\n vocs=vocs,\n )\n\n sim_specs = SimSpecs(\n sim_f=xtest_sim,\n vocs=vocs,\n )\n\n alloc_specs = AllocSpecs(alloc_f=alloc_f)\n exit_criteria = ExitCriteria(sim_max=20)\n\n workflow = Ensemble(\n libE_specs=libE_specs,\n sim_specs=sim_specs,\n alloc_specs=alloc_specs,\n gen_specs=gen_specs,\n exit_criteria=exit_criteria,\n )\n\n H, _, _ = workflow.run()\n\n # Perform the run\n if workflow.is_manager:\n print(f\"Completed {len(H)} simulations\")", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2352, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "0b46cf07-4122-4238-bb6d-409b28cd447e": {"__data__": {"id_": "0b46cf07-4122-4238-bb6d-409b28cd447e", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_zero_resource_workers.py", "file_name": "test_zero_resource_workers.py", "file_type": "text/x-python", "file_size": 4360, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c7213594-4e38-476a-a454-042d1b8a0bc9", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_zero_resource_workers.py", "file_name": "test_zero_resource_workers.py", "file_type": "text/x-python", "file_size": 4360, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "0c652f341db3db08c37cfbb86ef6a5d369d0c5a387d94d1ec42bffd5ea9ad593", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "37769830-0bbf-4528-a8cf-518ebccdd61c", "node_type": "1", "metadata": {}, "hash": "3423b5836bd3fcb5dcfd086a07b9b6cf1699d417796dc2ff48dc23b5529bc2ae", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble testing the zero_resource_workers argument.\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_zero_resource_workers.py\n python test_zero_resource_workers.py --nworkers 3\n python test_zero_resource_workers.py --nworkers 3 --comms tcp\n\nThe number of concurrent evaluations of the objective function will be 4-1=3.\n\"\"\"\n\nimport sys\n\nimport numpy as np\n\nfrom libensemble import logger\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.executors.mpi_executor import MPIExecutor\nfrom libensemble.gen_funcs.persistent_sampling import persistent_uniform as gen_f\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.run_line_check import runline_check as sim_f\nfrom libensemble.tests.regression_tests.common import create_node_file\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\n# logger.set_level(\"DEBUG\") # For testing the test\nlogger.set_level(\"INFO\")\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 3 4\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n rounds = 1\n sim_app = \"/path/to/fakeapp.x\"\n comms = libE_specs[\"comms\"]\n\n libE_specs[\"zero_resource_workers\"] = [1]\n libE_specs[\"dedicated_mode\"] = True\n libE_specs[\"enforce_worker_core_bounds\"] = True\n\n # To allow visual checking - log file not used in test\n log_file = \"ensemble_zrw_comms_\" + str(comms) + \"_wrks_\" + str(nworkers) + \".log\"\n logger.set_filename(log_file)\n\n nodes_per_worker = 2\n\n # For varying size test - relate node count to nworkers\n in_place = libE_specs[\"zero_resource_workers\"]\n n_gens = len(in_place)\n nsim_workers = nworkers - n_gens\n\n comms = libE_specs[\"comms\"]\n nodes_per_worker = 2\n node_file = \"nodelist_zero_resource_workers_comms_\" + str(comms) + \"_wrks_\" + str(nworkers)\n nnodes = nsim_workers * nodes_per_worker\n\n # Mock up system\n custom_resources = {\n \"cores_on_node\": (16, 64), # Tuple (physical cores, logical cores)\n \"node_file\": node_file,\n } # Name of file containing a node-list\n libE_specs[\"resource_info\"] = custom_resources\n\n if is_manager:\n create_node_file(num_nodes=nnodes, name=node_file)\n\n if comms == \"mpi\":\n libE_specs[\"mpi_comm\"].Barrier()\n\n # Mock up system\n mpi_customizer = {\n \"mpi_runner\": \"mpich\", # Select runner: mpich, openmpi, aprun, srun, jsrun\n \"runner_name\": \"mpirun\",\n } # Runner name: Replaces run command if not None\n\n # Create executor and register sim to it.\n exctr = MPIExecutor(custom_info=mpi_customizer)\n exctr.register_app(full_path=sim_app, calc_type=\"sim\")\n\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"in\": [],\n \"out\": [(\"x\", float, (n,))],\n \"user\": {\n \"initial_batch_size\": 20,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n alloc_specs = {\"alloc_f\": alloc_f}\n persis_info = add_unique_random_streams({}, nworkers + 1)\n exit_criteria = {\"sim_max\": (nsim_workers) * rounds}\n\n # Each worker has 2 nodes.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3266, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "37769830-0bbf-4528-a8cf-518ebccdd61c": {"__data__": {"id_": "37769830-0bbf-4528-a8cf-518ebccdd61c", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_zero_resource_workers.py", "file_name": "test_zero_resource_workers.py", "file_type": "text/x-python", "file_size": 4360, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c7213594-4e38-476a-a454-042d1b8a0bc9", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_zero_resource_workers.py", "file_name": "test_zero_resource_workers.py", "file_type": "text/x-python", "file_size": 4360, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "0c652f341db3db08c37cfbb86ef6a5d369d0c5a387d94d1ec42bffd5ea9ad593", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0b46cf07-4122-4238-bb6d-409b28cd447e", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_zero_resource_workers.py", "file_name": "test_zero_resource_workers.py", "file_type": "text/x-python", "file_size": 4360, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "e3a3c05a1e53880048837a4a9187db8b8add522a50cdfc6a5193e6db7d5ee6ba", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "exctr = MPIExecutor(custom_info=mpi_customizer)\n exctr.register_app(full_path=sim_app, calc_type=\"sim\")\n\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"in\": [],\n \"out\": [(\"x\", float, (n,))],\n \"user\": {\n \"initial_batch_size\": 20,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n alloc_specs = {\"alloc_f\": alloc_f}\n persis_info = add_unique_random_streams({}, nworkers + 1)\n exit_criteria = {\"sim_max\": (nsim_workers) * rounds}\n\n # Each worker has 2 nodes. Basic test list for portable options\n test_list_base = [\n {\"testid\": \"base1\", \"nprocs\": 2, \"nnodes\": 1, \"ppn\": 2, \"e_args\": \"--xarg 1\"}, # Under use\n {\"testid\": \"base2\"}, # Give no config and no extra_args\n ]\n\n exp_mpich = [\n \"mpirun -hosts node-1 -np 2 --ppn 2 --xarg 1 /path/to/fakeapp.x --testid base1\",\n \"mpirun -hosts node-1,node-2 -np 32 --ppn 16 /path/to/fakeapp.x --testid base2\",\n ]\n\n test_list = test_list_base\n exp_list = exp_mpich\n sim_specs[\"user\"] = {\n \"tests\": test_list,\n \"expect\": exp_list,\n \"nodes_per_worker\": nodes_per_worker,\n \"persis_gens\": n_gens,\n }\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n # All asserts are in sim func", "mimetype": "text/plain", "start_char_idx": 2630, "end_char_idx": 3996, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "fa56275e-b4ee-40d4-92b0-0fabc0e131a2": {"__data__": {"id_": "fa56275e-b4ee-40d4-92b0-0fabc0e131a2", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_zero_resource_workers_subnode.py", "file_name": "test_zero_resource_workers_subnode.py", "file_type": "text/x-python", "file_size": 4639, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2add599a-8674-4ecc-8b28-f844f64b2b72", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_zero_resource_workers_subnode.py", "file_name": "test_zero_resource_workers_subnode.py", "file_type": "text/x-python", "file_size": 4639, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "11a34472f7d4081fd46436176f844ff09e940040ad16b3f11720993948eecfc9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4563d9f7-97bd-446b-8305-abb94e8fb00f", "node_type": "1", "metadata": {}, "hash": "98468c4f25b6026b64395a832128140447d861b345ba46d787b90b7b5065d2bb", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nRuns libEnsemble testing the zero_resource_workers argument with 2 workers per\nnode.\n\nThis test must be run on an odd number of workers >= 3 (e.g. even number of\nprocs when using mpi4py).\n\nExecute via one of the following commands (e.g. 3 workers):\n mpiexec -np 4 python test_zero_resource_workers_subnode.py\n python test_zero_resource_workers_subnode.py --nworkers 3\n python test_zero_resource_workers_subnode.py --nworkers 3 --comms tcp\n\"\"\"\n\nimport sys\n\nimport numpy as np\n\nfrom libensemble import logger\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.executors.mpi_executor import MPIExecutor\nfrom libensemble.gen_funcs.persistent_sampling import persistent_uniform as gen_f\nfrom libensemble.libE import libE\nfrom libensemble.sim_funcs.run_line_check import runline_check as sim_f\nfrom libensemble.tests.regression_tests.common import create_node_file\nfrom libensemble.tools import add_unique_random_streams, parse_args\n\n# logger.set_level(\"DEBUG\") # For testing the test\nlogger.set_level(\"INFO\")\n\n# Do not change these lines - they are parsed by run-tests.sh\n# TESTSUITE_COMMS: mpi local\n# TESTSUITE_NPROCS: 4\n\n# Main block is necessary only when using local comms with spawn start method (default on macOS and Windows).\nif __name__ == \"__main__\":\n nworkers, is_manager, libE_specs, _ = parse_args()\n\n rounds = 1\n sim_app = \"/path/to/fakeapp.x\"\n comms = libE_specs[\"comms\"]\n\n libE_specs[\"zero_resource_workers\"] = [1]\n libE_specs[\"dedicated_mode\"] = True\n libE_specs[\"enforce_worker_core_bounds\"] = True\n\n # To allow visual checking - log file not used in test\n log_file = \"ensemble_zrw_subnode_comms_\" + str(comms) + \"_wrks_\" + str(nworkers) + \".log\"\n logger.set_filename(log_file)\n\n nodes_per_worker = 0.5\n\n # For varying size test - relate node count to nworkers\n in_place = libE_specs[\"zero_resource_workers\"]\n n_gens = len(in_place)\n nsim_workers = nworkers - n_gens\n\n if not (nsim_workers * nodes_per_worker).is_integer():\n sys.exit(f\"Sim workers ({nsim_workers}) must divide evenly into nodes\")\n\n comms = libE_specs[\"comms\"]\n node_file = \"nodelist_zero_resource_workers_subnode_comms_\" + str(comms) + \"_wrks_\" + str(nworkers)\n nnodes = int(nsim_workers * nodes_per_worker)\n\n # Mock up system\n custom_resources = {\n \"cores_on_node\": (16, 64), # Tuple (physical cores, logical cores)\n \"node_file\": node_file,\n } # Name of file containing a node-list\n libE_specs[\"resource_info\"] = custom_resources\n\n if is_manager:\n create_node_file(num_nodes=nnodes, name=node_file)\n\n if comms == \"mpi\":\n libE_specs[\"mpi_comm\"].Barrier()\n\n # Create executor and register sim to it.\n exctr = MPIExecutor(custom_info={\"mpi_runner\": \"srun\"})\n exctr.register_app(full_path=sim_app, calc_type=\"sim\")\n\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"in\": [],\n \"out\": [(\"x\", float, (n,))],\n \"user\": {\n \"initial_batch_size\": 20,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n alloc_specs = {\"alloc_f\": alloc_f}\n persis_info = add_unique_random_streams({}, nworkers + 1)\n exit_criteria = {\"sim_max\": (nsim_workers) * rounds}\n\n # Each worker has 2 nodes.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3284, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "4563d9f7-97bd-446b-8305-abb94e8fb00f": {"__data__": {"id_": "4563d9f7-97bd-446b-8305-abb94e8fb00f", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_zero_resource_workers_subnode.py", "file_name": "test_zero_resource_workers_subnode.py", "file_type": "text/x-python", "file_size": 4639, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2add599a-8674-4ecc-8b28-f844f64b2b72", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_zero_resource_workers_subnode.py", "file_name": "test_zero_resource_workers_subnode.py", "file_type": "text/x-python", "file_size": 4639, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "11a34472f7d4081fd46436176f844ff09e940040ad16b3f11720993948eecfc9", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fa56275e-b4ee-40d4-92b0-0fabc0e131a2", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/script_examples/test_zero_resource_workers_subnode.py", "file_name": "test_zero_resource_workers_subnode.py", "file_type": "text/x-python", "file_size": 4639, "creation_date": "2025-11-29", "last_modified_date": "2025-11-29"}, "hash": "2161cbde64a553cbdb9f9d1cdbecc300290dc5d00d463ab8a9fbf834076712d1", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "exctr = MPIExecutor(custom_info={\"mpi_runner\": \"srun\"})\n exctr.register_app(full_path=sim_app, calc_type=\"sim\")\n\n if nworkers < 2:\n sys.exit(\"Cannot run with a persistent worker if only one worker -- aborting...\")\n\n n = 2\n sim_specs = {\n \"sim_f\": sim_f,\n \"in\": [\"x\"],\n \"out\": [(\"f\", float)],\n }\n\n gen_specs = {\n \"gen_f\": gen_f,\n \"in\": [],\n \"out\": [(\"x\", float, (n,))],\n \"user\": {\n \"initial_batch_size\": 20,\n \"lb\": np.array([-3, -2]),\n \"ub\": np.array([3, 2]),\n },\n }\n\n alloc_specs = {\"alloc_f\": alloc_f}\n persis_info = add_unique_random_streams({}, nworkers + 1)\n exit_criteria = {\"sim_max\": (nsim_workers) * rounds}\n\n # Each worker has 2 nodes. Basic test list for portable options\n test_list_base = [\n {\"testid\": \"base1\"}, # Give no config and no extra_args\n {\"testid\": \"base2\", \"nprocs\": 5},\n {\"testid\": \"base3\", \"nnodes\": 1},\n {\"testid\": \"base4\", \"ppn\": 6},\n ]\n\n exp_srun = [\n \"srun -w node-1 --ntasks 8 --nodes 1 --ntasks-per-node 8 --exact /path/to/fakeapp.x --testid base1\",\n \"srun -w node-1 --ntasks 5 --nodes 1 --ntasks-per-node 5 --exact /path/to/fakeapp.x --testid base2\",\n \"srun -w node-1 --ntasks 8 --nodes 1 --ntasks-per-node 8 --exact /path/to/fakeapp.x --testid base3\",\n \"srun -w node-1 --ntasks 6 --nodes 1 --ntasks-per-node 6 --exact /path/to/fakeapp.x --testid base4\",\n ]\n\n test_list = test_list_base\n exp_list = exp_srun\n sim_specs[\"user\"] = {\n \"tests\": test_list,\n \"expect\": exp_list,\n \"nodes_per_worker\": nodes_per_worker,\n \"persis_gens\": n_gens,\n }\n\n # Perform the run\n H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n\n # All asserts are in sim func", "mimetype": "text/plain", "start_char_idx": 2640, "end_char_idx": 4266, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "aad3105b-e0fd-4d40-8707-bc1c37d7f8fe": {"__data__": {"id_": "aad3105b-e0fd-4d40-8707-bc1c37d7f8fe", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/search.html", "file_name": "search.html", "file_type": "text/html", "file_size": 8155, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1f6cab90-826f-403a-bff9-a5b5dd7f8316", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/search.html", "file_name": "search.html", "file_type": "text/html", "file_size": 8155, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "223f1a7f59c369332ed25cf76da4f393a5fa0ace1507a194a85e8b76ab7d285e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Search \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nSearch\n\n Please activate JavaScript to enable the search functionality.\n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 837, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "c8daa0bc-7c59-49fd-9a09-db42ca2de41d": {"__data__": {"id_": "c8daa0bc-7c59-49fd-9a09-db42ca2de41d", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/aposmm_tutorial.html", "file_name": "aposmm_tutorial.html", "file_type": "text/html", "file_size": 40922, "creation_date": "2025-11-25", "last_modified_date": "2025-04-25"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "14adba67-0f6f-4ba8-bb63-0e3e7d607889", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/aposmm_tutorial.html", "file_name": "aposmm_tutorial.html", "file_type": "text/html", "file_size": 40922, "creation_date": "2025-11-25", "last_modified_date": "2025-04-25"}, "hash": "f1ab777169862a697fbd7f1666f72a466eb143c4e37a9f563e80f0a046230cda", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9065b728-f627-4a5d-921e-7a9bce73be81", "node_type": "1", "metadata": {}, "hash": "48f4f66bd1c5b07aa0f2184af441a2cca67f176822bf873de2b3961f7bd74956", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Optimization with APOSMM \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nSix-Hump Camel Simulation Function\nAPOSMM Operations\nAPOSMM Persistence\nCalling Script\nFinal Setup, Run, and Output\nApplications\n\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nOptimization with APOSMM\n\n View page source\n\nOptimization with APOSMM\uf0c1\nThis tutorial demonstrates libEnsemble\u2019s capability to identify multiple minima\nof simulation output using the built-in APOSMM\n(Asynchronously Parallel Optimization Solver for finding Multiple Minima)\ngen_f. In this tutorial, we\u2019ll create a simple\nsimulation sim_f that defines a function with\nmultiple minima, then write a libEnsemble calling script that imports APOSMM and\nparameterizes it to check for minima over a domain of outputs from our sim_f.\n\nSix-Hump Camel Simulation Function\uf0c1\nDescribing APOSMM\u2019s operations is simpler with a given function on which to\ndepict evaluations. We\u2019ll use the Six-Hump Camel function, known to have six\nglobal minima. A sample space of this function, containing all minima, appears\nbelow:\n\nCreate a new Python file named six_hump_camel.py. This will be our\nsim_f, incorporating the above function. Write the following:\n 1import numpy as np\n 2\n 3\n 4def six_hump_camel(H, _, sim_specs):\n 5 \"\"\"Six-Hump Camel sim_f.\"\"\"\n 6\n 7 batch = len(H[\"x\"]) # Num evaluations each sim_f call.\n 8 H_o = np.zeros(batch, dtype=sim_specs[\"out\"]) # Define output array H\n 9\n10 for i, x in enumerate(H[\"x\"]):\n11 H_o[\"f\"][i] = six_hump_camel_func(x) # Function evaluations placed into H\n12\n13 return H_o\n14\n15\n16def six_hump_camel_func(x):\n17 \"\"\"Six-Hump Camel function definition\"\"\"\n18 x1 = x[0]\n19 x2 = x[1]\n20 term1 = (4 - 2.1 * x1**2 + (x1**4) / 3) * x1**2\n21 term2 = x1 * x2\n22 term3 = (-4 + 4 * x2**2) * x2**2\n23\n24 return term1 + term2 + term3\n\nAPOSMM Operations\uf0c1\nAPOSMM coordinates multiple local optimization runs starting from a collection\nof sample points. These local optimization runs occur concurrently,\nand can incorporate a variety of optimization methods, including from NLopt,\nPETSc/TAO, SciPy, or other external scripts.\nBefore APOSMM can start local optimization runs, some number of uniformly\nsampled points must be evaluated (if no prior simulation evaluations are\nprovided). User-requested sample points can also be provided to APOSMM:\n\nSpecifically, APOSMM will begin local optimization runs from evaluated points that\ndon\u2019t have points with smaller function values nearby (within a threshold\nr_k). For the above example, after APOSMM receives the evaluations of the\nuniformly sampled points, it will begin at most max_active_runs local\noptimization runs.\nAs function values are returned to APOSMM, APOSMM gives them to the\ncorresponding local optimization runs so they can generate the next point(s) in\ntheir runs; such points are then returned by APOSMM to the manager to be\nevaluated by the simulation routine. As runs complete (i.e., a minimum is\nfound, or some termination criteria for the local optimization run is\nsatisfied), additional local optimization runs may be started or additional\nuniformly sampled points may be evaluated. This continues until a STOP_TAG\nis sent by the manager, for example when the budget of simulation evaluations\nhas been exhausted, or when a sufficiently \u201cgood\u201d simulation output has been\nobserved.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3852, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "9065b728-f627-4a5d-921e-7a9bce73be81": {"__data__": {"id_": "9065b728-f627-4a5d-921e-7a9bce73be81", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/aposmm_tutorial.html", "file_name": "aposmm_tutorial.html", "file_type": "text/html", "file_size": 40922, "creation_date": "2025-11-25", "last_modified_date": "2025-04-25"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "14adba67-0f6f-4ba8-bb63-0e3e7d607889", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/aposmm_tutorial.html", "file_name": "aposmm_tutorial.html", "file_type": "text/html", "file_size": 40922, "creation_date": "2025-11-25", "last_modified_date": "2025-04-25"}, "hash": "f1ab777169862a697fbd7f1666f72a466eb143c4e37a9f563e80f0a046230cda", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c8daa0bc-7c59-49fd-9a09-db42ca2de41d", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/aposmm_tutorial.html", "file_name": "aposmm_tutorial.html", "file_type": "text/html", "file_size": 40922, "creation_date": "2025-11-25", "last_modified_date": "2025-04-25"}, "hash": "d479f9c5d2e39652907286a20b01ff8e5f19b8056c5d67569b4b46d3c41ec856", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fd506470-7d45-415d-88f5-b5ac12e6d30d", "node_type": "1", "metadata": {}, "hash": "2bc4101a51990bd20a5fe94e1edb00545593929ec9a7c21a55867095cffce505", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "For the above example, after APOSMM receives the evaluations of the\nuniformly sampled points, it will begin at most max_active_runs local\noptimization runs.\nAs function values are returned to APOSMM, APOSMM gives them to the\ncorresponding local optimization runs so they can generate the next point(s) in\ntheir runs; such points are then returned by APOSMM to the manager to be\nevaluated by the simulation routine. As runs complete (i.e., a minimum is\nfound, or some termination criteria for the local optimization run is\nsatisfied), additional local optimization runs may be started or additional\nuniformly sampled points may be evaluated. This continues until a STOP_TAG\nis sent by the manager, for example when the budget of simulation evaluations\nhas been exhausted, or when a sufficiently \u201cgood\u201d simulation output has been\nobserved.\n\nThroughout, generated and evaluated points are appended to the\nHistory array, with the field\n\"local_pt\" being True if the point is part of a local optimization run,\nand \"local_min\" being True if the point has been ruled a local minimum.\n\nAPOSMM Persistence\uf0c1\nAPOSMM is implemented as a Persistent generator. A single worker process initiates\nAPOSMM so that it \u201cpersists\u201d the course of a given libEnsemble run.\nAPOSMM begins its own concurrent optimization runs, each of which independently\nproduces a linear sequence of points trying to find a local minimum. These\npoints are given to workers and evaluated by simulation routines.\nIf there are more workers than optimization runs at any iteration of the\ngenerator, additional random sample points are generated to keep the workers\nbusy.\nIn practice, since a single worker becomes \u201cpersistent\u201d for APOSMM, users\nshould initiate one more worker than the number of parallel simulations:\npython my_aposmm_routine.py --nworkers 4\n\nresults in three workers running simulations and one running APSOMM.\nIf running libEnsemble using mpi4py communications, enough MPI ranks should be\ngiven to support libEnsemble\u2019s manager, a persistent worker to run APOSMM, and\nsimulation routines. The following:\nmpiexec -n 3 python my_aposmm_routine.py\n\nresults in only one worker process to perform simulation evaluations.\n\nCalling Script\uf0c1\nCreate a new Python file named my_first_aposmm.py. Start by importing NumPy,\nlibEnsemble routines, APOSMM, our sim_f, and a specialized allocation\nfunction:\n1import numpy as np\n2\n3from six_hump_camel import six_hump_camel\n4\n5from libensemble.libE import libE\n6from libensemble.gen_funcs.persistent_aposmm import aposmm\n7from libensemble.alloc_funcs.persistent_aposmm_alloc import persistent_aposmm_alloc\n8from libensemble.tools import parse_args, add_unique_random_streams\n\nThis allocation function starts a single Persistent APOSMM routine and provides\nsim_f output for points requested by APOSMM. Points can be sampled points\nor points from local optimization runs.\nAPOSMM supports a wide variety of external optimizers. The following statements\nset optimizer settings to \"scipy\" to indicate to APOSMM which optimization\nmethod to use, and help prevent unnecessary imports or package installations:\n1import libensemble.gen_funcs\n2\n3libensemble.gen_funcs.rc.aposmm_optimizers = \"scipy\"\n\nSet up parse_args(),\nour sim_specs,\ngen_specs,\nand alloc_specs:\n 1nworkers, is_manager, libE_specs, _ = parse_args()\n 2\n 3sim_specs = {\n 4 \"sim_f\": six_hump_camel, # Simulation function\n 5 \"in\": [\"x\"], # Accepts \"x\" values\n 6 \"out\": [(\"f\", float)], # Returns f(x) values\n 7}\n 8\n 9gen_out = [\n10 (\"x\", float, 2), # Produces \"x\" values\n11 (\"x_on_cube\", float, 2), # \"x\" values scaled to unit cube\n12 (\"sim_id\", int), # Produces sim_id's for History array indexing\n13 (\"local_min\", bool), # Is a point a local minimum?\n14 (\"local_pt\", bool), # Is a point from a local opt run?", "mimetype": "text/plain", "start_char_idx": 3015, "end_char_idx": 6782, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "fd506470-7d45-415d-88f5-b5ac12e6d30d": {"__data__": {"id_": "fd506470-7d45-415d-88f5-b5ac12e6d30d", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/aposmm_tutorial.html", "file_name": "aposmm_tutorial.html", "file_type": "text/html", "file_size": 40922, "creation_date": "2025-11-25", "last_modified_date": "2025-04-25"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "14adba67-0f6f-4ba8-bb63-0e3e7d607889", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/aposmm_tutorial.html", "file_name": "aposmm_tutorial.html", "file_type": "text/html", "file_size": 40922, "creation_date": "2025-11-25", "last_modified_date": "2025-04-25"}, "hash": "f1ab777169862a697fbd7f1666f72a466eb143c4e37a9f563e80f0a046230cda", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9065b728-f627-4a5d-921e-7a9bce73be81", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/aposmm_tutorial.html", "file_name": "aposmm_tutorial.html", "file_type": "text/html", "file_size": 40922, "creation_date": "2025-11-25", "last_modified_date": "2025-04-25"}, "hash": "9274fa64fbf290b395a4ee7fe8e5cdd542504355f9692d0951d6cbe1fb1dbd44", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e8579be3-98d8-4ffe-bdd7-3aa7bea1f747", "node_type": "1", "metadata": {}, "hash": "f92789f3b7b44a0e1baf0026fd8b329c01b27898e3318890272107d1a41bf4c4", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "14 (\"local_pt\", bool), # Is a point from a local opt run?\n15]\n16\n17gen_specs = {\n18 \"gen_f\": aposmm, # APOSMM generator function\n19 \"persis_in\": [\"f\"] + [n[0] for n in gen_out],\n20 \"out\": gen_out, # Output defined like above dict\n21 \"user\": {\n22 \"initial_sample_size\": 100, # Random sample 100 points to start\n23 \"localopt_method\": \"scipy_Nelder-Mead\",\n24 \"opt_return_codes\": [0], # Status integers specific to localopt_method\n25 \"max_active_runs\": 6, # Occur in parallel\n26 \"lb\": np.array([-2, -1]), # Lower bound of search domain\n27 \"ub\": np.array([2, 1]), # Upper bound of search domain\n28 },\n29}\n30\n31alloc_specs = {\"alloc_f\": persistent_aposmm_alloc}\n\ngen_specs[\"user\"] fields above that are required for APOSMM are:\n\n\"lb\" - Search domain lower bound\n\"ub\" - Search domain upper bound\n\"localopt_method\" - Chosen local optimization method\n\"initial_sample_size\" - Number of uniformly sampled points generated\nbefore local optimization runs.\n\"opt_return_codes\" - A list of integers that local optimization\nmethods return when a minimum is detected. SciPy\u2019s Nelder-Mead returns 0,\nbut other methods (not used in this tutorial) return 1.\n\nAlso note the following:\n\ngen_specs[\"in\"] is empty. For other gen_f\u2019s this defines what\nfields to give to the gen_f when called, but here APOSMM\u2019s\nalloc_f defines those fields.\n\"x_on_cube\" in gen_specs[\"out\"]. APOSMM works internally on\n\"x\" values scaled to the unit cube. To avoid back-and-forth scaling\nissues, both types of \"x\"\u2019s are communicated back, even though the\nsimulation will likely use \"x\" values. (APOSMM performs handshake to\nensure that the x_on_cube that was given to be evaluated is the same\nthe one that is given back.)\n\"sim_id\" in gen_specs[\"out\"]. APOSMM produces points in its\nlocal History array that it will need to update later, and can best\nreference those points (and avoid a search) if APOSMM produces the IDs\nitself, instead of libEnsemble.\n\nOther options and configurations for APOSMM can be found in the\nAPOSMM API reference.\nSet exit_criteria so libEnsemble knows\nwhen to complete, and persis_info for\nrandom sampling seeding:\n1exit_criteria = {\"sim_max\": 2000}\n2persis_info = add_unique_random_streams({}, nworkers + 1)\n\nFinally, add statements to initiate libEnsemble, and quickly\ncheck calculated minima:\n1if __name__ == \"__main__\": # required by multiprocessing on macOS and windows\n2 H, persis_info, flag = libE(sim_specs, gen_specs, exit_criteria, persis_info, alloc_specs, libE_specs)\n3\n4if is_manager:\n5 print(\"Minima:\", H[np.where(H[\"local_min\"])][\"x\"])\n\nFinal Setup, Run, and Output\uf0c1\nIf you haven\u2019t already, install SciPy so APOSMM can access the required\noptimization method:\npip install scipy\n\nFinally, run this libEnsemble / APOSMM optimization routine with the following:\npython my_first_aposmm.py --nworkers 4\n\nPlease note that one worker will be \u201cpersistent\u201d for APOSMM for the duration of\nthe routine.\nAfter a couple seconds, the output should resemble the following:\n[0] libensemble.libE (MANAGER_WARNING):\n*******************************************************************************\nUser generator script will be creating sim_id.\nTake care to do this sequentially.\nAlso, any information given back for existing sim_id values will be overwritten!\nSo everything in gen_specs[\"out\"] should be in gen_specs[\"in\"]!", "mimetype": "text/plain", "start_char_idx": 6725, "end_char_idx": 10026, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "e8579be3-98d8-4ffe-bdd7-3aa7bea1f747": {"__data__": {"id_": "e8579be3-98d8-4ffe-bdd7-3aa7bea1f747", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/aposmm_tutorial.html", "file_name": "aposmm_tutorial.html", "file_type": "text/html", "file_size": 40922, "creation_date": "2025-11-25", "last_modified_date": "2025-04-25"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "14adba67-0f6f-4ba8-bb63-0e3e7d607889", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/aposmm_tutorial.html", "file_name": "aposmm_tutorial.html", "file_type": "text/html", "file_size": 40922, "creation_date": "2025-11-25", "last_modified_date": "2025-04-25"}, "hash": "f1ab777169862a697fbd7f1666f72a466eb143c4e37a9f563e80f0a046230cda", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fd506470-7d45-415d-88f5-b5ac12e6d30d", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/aposmm_tutorial.html", "file_name": "aposmm_tutorial.html", "file_type": "text/html", "file_size": 40922, "creation_date": "2025-11-25", "last_modified_date": "2025-04-25"}, "hash": "3a24e8b0302c5eac6da370e51a6953f969f4228a14dd7847989060363c00a205", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "After a couple seconds, the output should resemble the following:\n[0] libensemble.libE (MANAGER_WARNING):\n*******************************************************************************\nUser generator script will be creating sim_id.\nTake care to do this sequentially.\nAlso, any information given back for existing sim_id values will be overwritten!\nSo everything in gen_specs[\"out\"] should be in gen_specs[\"in\"]!\n*******************************************************************************\n\nMinima: [[ 0.08993295 -0.71265804]\n [ 1.70360676 -0.79614982]\n [-1.70368421 0.79606073]\n [-0.08988064 0.71270945]\n [-1.60699361 -0.56859108]\n [ 1.60713962 0.56869567]]\n\nThe first section labeled MANAGER_WARNING is a default libEnsemble warning\nfor generator functions that create sim_id\u2019s, like APOSMM. It does not\nindicate a failure.\nThe local minima for the Six-Hump Camel simulation function as evaluated by\nAPOSMM with libEnsemble should be listed directly below the warning.\nPlease see the API reference here for\nmore APOSMM configuration options and other information.\nEach of these example files can be found in the repository in examples/tutorials/aposmm.\n\nApplications\uf0c1\nAPOSMM is not limited to evaluating minima from pure Python simulation functions.\nMany common libEnsemble use-cases involve using\nlibEnsemble\u2019s MPI Executor to launch user\napplications with parameters requested by APOSMM, then evaluate their output using\nAPOSMM, and repeat until minima are identified. A currently supported example\ncan be found in libEnsemble\u2019s WarpX Scaling Test.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 9614, "end_char_idx": 11296, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "44cc8a48-be8f-4604-83fc-8c23370fde42": {"__data__": {"id_": "44cc8a48-be8f-4604-83fc-8c23370fde42", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/calib_cancel_tutorial.html", "file_name": "calib_cancel_tutorial.html", "file_type": "text/html", "file_size": 34577, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3fadc6a7-0bd5-460e-8c90-d50ccb115c4f", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/calib_cancel_tutorial.html", "file_name": "calib_cancel_tutorial.html", "file_type": "text/html", "file_size": 34577, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "db6d85c25e678a3c8446bc3d1e40ff9ab8faeca7af0a4d0882aa6b70719d5e08", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fce1316c-c57d-4533-b485-d2e8c6442272", "node_type": "1", "metadata": {}, "hash": "c594f94d513fae19a01670db3d1329d30bf08e2adee5070c66415158f79d45b2", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Calibration with Simulation Cancellation \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\nIntroduction - Calibration with libEnsemble and a Regression Model\nOverview of the Calibration Problem\nPoint Cancellation Requests and Dedicated Fields\nAllocation Function and Cancellation Configuration\nCalling Script - Reading Results\nUsing cancellations to kill running simulations\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nCalibration with Simulation Cancellation\n\n View page source\n\nCalibration with Simulation Cancellation\uf0c1\n\nIntroduction - Calibration with libEnsemble and a Regression Model\uf0c1\nThis tutorial demonstrates libEnsemble\u2019s capability to selectively cancel pending\nsimulations based on instructions from a calibration Generator Function.\nThis capability is desirable, especially when evaluations are expensive, since\ncompute resources may then be more effectively applied toward critical evaluations.\nFor a somewhat different approach than libEnsemble\u2019s other tutorials,\nwe\u2019ll emphasize the settings, functions, and data fields within the calling script,\npersistent generator, manager, and sim_f\nthat make this capability possible, rather than outlining a step-by-step process.\nThe libEnsemble regression test test_persistent_surmise_calib.py demonstrates\ncancellation of pending simulations, while the test_persistent_surmise_killsims.py\ntest demonstrates libEnsemble\u2019s capability to also kill running simulations that\nhave been marked as cancelled.\n\nOverview of the Calibration Problem\uf0c1\nThe generator function featured in this tutorial can be found in\ngen_funcs/persistent_surmise_calib.py and uses the surmise library for its\ncalibration surrogate model interface. The surmise library uses the \u201cPCGPwM\u201d\nemulation method in this example.\nSay there is a computer model \\(f(\\theta, x)\\) to be calibrated. To calibrate\nis to find some parameter \\(\\theta_0\\) such that \\(f(\\theta_0, x)\\) closely\nresembles data collected from a physical experiment. For example, a (simple)\nphysical experiment may involve dropping a ball at different heights to study the\ngravitational constant, and the corresponding computer model could be the set of\ndifferential equations that govern the drop. In a case where the computation of\nthe computer model is relatively expensive, we employ a fast surrogate model to\napproximate the model and to inform good parameters to test next. Here the computer\nmodel \\(f(\\theta, x)\\) is accessible only through performing sim_f\nevaluations.\nAs a convenience for testing, the observed data values are modelled by calling the sim_f\nfor the known true theta, which in this case is the center of a unit hypercube. These values\nare therefore stored at the start of libEnsemble\u2019s\nmain History array array, and have associated sim_id\u2019s.\nThe generator function gen_f then samples an initial batch of parameters\n\\((\\theta_1, \\ldots, \\theta_n)\\) and constructs a surrogate model.\nFor illustration, the initial batch of evaluations are arranged in the following sense:\n\n\\[\\begin{split}\\newcommand{\\T}{\\mathsf{T}}\n\\mathbf{f} = \\begin{pmatrix} f(\\theta_1)^\\T \\\\ \\vdots \\\\ f(\\theta_n)^\\T \\end{pmatrix}\n= \\begin{pmatrix} f(\\theta_1, x_1) & \\ldots & f(\\theta_1, x_m) \\\\ \\vdots & \\ddots & \\vdots\n\\\\ f(\\theta_n, x_1) & \\ldots & f(\\theta_n, x_m) \\end{pmatrix}.\\end{split}\\]\nThe surrogate then generates (suggests) new parameters for sim_f evaluations,\nso the number of parameters \\(n\\) grows as more evaluations are scheduled and performed.\nAs more evaluations are performed and received by gen_f, the surrogate evolves and\nsuggests parameters closer to \\(\\theta_0\\) with uncertainty estimates.\nThe calibration can be terminated when either gen_f determines it has found\n\\(\\theta_0\\) with some tolerance in the surrounding uncertainty, or computational\nresource runs out.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4332, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "fce1316c-c57d-4533-b485-d2e8c6442272": {"__data__": {"id_": "fce1316c-c57d-4533-b485-d2e8c6442272", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/calib_cancel_tutorial.html", "file_name": "calib_cancel_tutorial.html", "file_type": "text/html", "file_size": 34577, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3fadc6a7-0bd5-460e-8c90-d50ccb115c4f", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/calib_cancel_tutorial.html", "file_name": "calib_cancel_tutorial.html", "file_type": "text/html", "file_size": 34577, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "db6d85c25e678a3c8446bc3d1e40ff9ab8faeca7af0a4d0882aa6b70719d5e08", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "44cc8a48-be8f-4604-83fc-8c23370fde42", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/calib_cancel_tutorial.html", "file_name": "calib_cancel_tutorial.html", "file_type": "text/html", "file_size": 34577, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "6d20a42bf8241559697e18c213f3de085f85ebc78b72818d03fe02e2a0f70a33", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "dc36b8de-df9a-48a0-951c-d07cb962234b", "node_type": "1", "metadata": {}, "hash": "8ca2546aac8aaede842f993a94443f4c30e08bad3ef64d7f8a533ef128fa17a6", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "As more evaluations are performed and received by gen_f, the surrogate evolves and\nsuggests parameters closer to \\(\\theta_0\\) with uncertainty estimates.\nThe calibration can be terminated when either gen_f determines it has found\n\\(\\theta_0\\) with some tolerance in the surrounding uncertainty, or computational\nresource runs out. At termination, the generator exits and returns, initiating the\nshutdown of the libEnsemble routine.\nThe following is a pseudocode overview of the generator. Functions directly from\nthe calibration library used within the generator function have the calib: prefix.\nHelper functions defined to improve the data received by the calibration library by\ninterfacing with libEnsemble have the libE: prefix. All other statements are\nworkflow logic or persistent generator helper functions like send or receive:\n1 libE: calculate observation values and first batch\n2 while STOP_signal not received:\n3 receive: evaluated points\n4 unpack points into 2D Theta x Point structures\n5 if new model condition:\n6 calib: construct new model\n7 else:\n8 wait to receive more points\n9 if some condition:\n10 calib: generate new thetas from model\n11 calib: if error threshold reached:\n12 exit loop - done\n13 send: new points to be evaluated\n14 if any sent points must be obviated:\n15 libE: mark points with cancel request\n16 send: points with cancel request\n\nPoint Cancellation Requests and Dedicated Fields\uf0c1\nWhile the generator loops and updates the model based on returned\npoints from simulations, it detects conditionally if any new Thetas should be generated\nfrom the model, simultaneously evaluating if any pending simulations ought to be\ncancelled (\u201cobviated\u201d). If so, the generator then calls cancel_columns():\nif select_condition(pending):\n new_theta, info = select_next_theta(step_add_theta, cal, emu, pending, n_explore_theta)\n ...\n c_obviate = info[\"obviatesugg\"] # suggested\n if len(c_obviate) > 0:\n cancel_columns(obs_offset, c_obviate, n_x, pending, ps)\n\nobs_offset is an offset that excludes the observations when mapping points in surmise\ndata structures to sim_id\u2019s, c_obviate is a selection\nof columns to cancel, n_x is the number of x values, and pending is used\nto check that points marked for cancellation have not already returned. ps is the\ninstantiation of the PersistentSupport class that is set up for persistent generators, and\nprovides an interface for communication with the manager.\nWithin cancel_columns(), each column in c_obviate is iterated over, and if a\npoint is pending and thus has not yet been evaluated by a simulation,\nits sim_id is appended to a list to be sent to the Manager for cancellation.\nCancellation is requested using the helper function request_cancel_sim_ids provided\nby the PersistentSupport class. Each of these helper functions is described\nhere. The entire cancel_columns() routine is listed below:\ndef cancel_columns(obs_offset, c, n_x, pending, ps):\n \"\"\"Cancel columns\"\"\"\n sim_ids_to_cancel = []\n columns = np.unique(c)\n for c in columns:\n col_offset = c * n_x\n for i in range(n_x):\n sim_id_cancel = obs_offset + col_offset + i\n if pending[i, c]:\n sim_ids_to_cancel.append(sim_id_cancel)\n pending[i, c] = 0\n\n ps.request_cancel_sim_ids(sim_ids_to_cancel)\n\nIn future calls to the allocation function by the manager, points that would have\nbeen distributed for simulation work but are now marked with \u201ccancel_requested\u201d will not\nbe processed. The manager will send kill signals to workers that are already processing\ncancelled points. These signals can be caught and acted on by the user sim_f; otherwise\nthey will be ignored.\n\nAllocation Function and Cancellation Configuration\uf0c1\nThe allocation function used in this example is the only_persistent_gens function in the\nstart_only_persistent module. The calling script passes the following specifications:\nlibE_specs[\"kill_canceled_sims\"] = True\n\nalloc_specs = {\n \"alloc_f\": alloc_f,\n \"user\": {\n \"init_sample_size\": init_sample_size,\n \"async_return\": True,\n \"active_recv_gen\": True,\n },\n}\n\nasync_return tells the allocation function to return results to the generator as soon\nas they come back from evaluation (once the initial sample is complete).\ninit_sample_size gives the size of the initial sample that is batch returned to the gen.\nThis is calculated from other parameters in the calling script.", "mimetype": "text/plain", "start_char_idx": 4002, "end_char_idx": 8315, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "dc36b8de-df9a-48a0-951c-d07cb962234b": {"__data__": {"id_": "dc36b8de-df9a-48a0-951c-d07cb962234b", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/calib_cancel_tutorial.html", "file_name": "calib_cancel_tutorial.html", "file_type": "text/html", "file_size": 34577, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3fadc6a7-0bd5-460e-8c90-d50ccb115c4f", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/calib_cancel_tutorial.html", "file_name": "calib_cancel_tutorial.html", "file_type": "text/html", "file_size": 34577, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "db6d85c25e678a3c8446bc3d1e40ff9ab8faeca7af0a4d0882aa6b70719d5e08", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fce1316c-c57d-4533-b485-d2e8c6442272", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/calib_cancel_tutorial.html", "file_name": "calib_cancel_tutorial.html", "file_type": "text/html", "file_size": 34577, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "2c244d84f53d57b57cdcf68c8e7a812799a5e6b50c46ec27a92035e34dfed676", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "The manager will send kill signals to workers that are already processing\ncancelled points. These signals can be caught and acted on by the user sim_f; otherwise\nthey will be ignored.\n\nAllocation Function and Cancellation Configuration\uf0c1\nThe allocation function used in this example is the only_persistent_gens function in the\nstart_only_persistent module. The calling script passes the following specifications:\nlibE_specs[\"kill_canceled_sims\"] = True\n\nalloc_specs = {\n \"alloc_f\": alloc_f,\n \"user\": {\n \"init_sample_size\": init_sample_size,\n \"async_return\": True,\n \"active_recv_gen\": True,\n },\n}\n\nasync_return tells the allocation function to return results to the generator as soon\nas they come back from evaluation (once the initial sample is complete).\ninit_sample_size gives the size of the initial sample that is batch returned to the gen.\nThis is calculated from other parameters in the calling script.\nactive_recv_gen allows the persistent generator to handle irregular communications (see below).\nBy default, workers (including persistent workers), are only\nallocated work when they\u2019re in an idle or non-active state.\nHowever, since this generator must asynchronously update its model, the worker\nrunning this generator remains in an active receive state, until it becomes\nnon-persistent. This means both the manager and persistent worker (generator in\nthis case) must be prepared for irregular sending/receiving of data.\n\nCalling Script - Reading Results\uf0c1\nWithin the libEnsemble calling script, once the main libE()\nfunction call has returned, it\u2019s a simple enough process to view the History rows\nthat were marked as cancelled:\nif __name__ == \"__main__\": # required by multiprocessing on macOS and windows\n H, persis_info, flag = libE(sim_specs, gen_specs,\n exit_criteria, persis_info,\n alloc_specs=alloc_specs,\n libE_specs=libE_specs)\n\nif is_manager:\n print(\"Cancelled sims\", H[\"cancel_requested\"])\n\nHere\u2019s an example graph showing the relationship between scheduled, cancelled (obviated),\nfailed, and completed simulations requested by the gen_f. Notice that for each\nbatch of scheduled simulations, most either complete or fail but the rest are\nsuccessfully obviated:\n\nPlease see the test_persistent_surmise_calib.py regression test for an example\nroutine using the surmise calibration generator.\nThe associated simulation function and allocation function are included in\nsim_funcs/surmise_test_function.py and alloc_funcs/start_only_persistent.py respectively.\n\nUsing cancellations to kill running simulations\uf0c1\nIf a generated point is cancelled by the generator before it has been given to a worker for evaluation,\nthen it will never be given. If it has already returned from the simulation, then results can be returned,\nbut the cancel_requested field remains as True. However, if the simulation is running when the manager\nreceives the cancellation request, a kill signal will be sent to the worker. This can be caught and acted upon\nby a user function, otherwise it will be ignored. To demonstrate this, the test test_persistent_surmise_killsims.py\ncaptures and processes this signal from the manager.\nIn order to do this, a compiled version of the borehole function is launched by sim_funcs/borehole_kills.py\nvia the Executor. As the borehole application used here is serial, we use the\nExecutor base class rather than the commonly used MPIExecutor\nclass. The base Executor submit routine simply sub-processes a serial application in-place. After the initial\nsample batch of evaluations has been processed, an artificial delay is added to the sub-processed borehole to\nallow time to receive the kill signal and terminate the application. Killed simulations will be reported at\nthe end of the test. As this is dependent on timing, the number of killed simulations will vary between runs.\nThis test is added simply to demonstrate the killing of running simulations and thus uses a reduced number of evaluations.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 7408, "end_char_idx": 11461, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ff1f35a9-c8fd-4a6b-bbfd-3e8bbb562fa5": {"__data__": {"id_": "ff1f35a9-c8fd-4a6b-bbfd-3e8bbb562fa5", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/executor_forces_tutorial.html", "file_name": "executor_forces_tutorial.html", "file_type": "text/html", "file_size": 93654, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "98d8b6e7-cd11-40cd-ab15-847b14df99b5", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/executor_forces_tutorial.html", "file_name": "executor_forces_tutorial.html", "file_type": "text/html", "file_size": 93654, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "5076b84547f67b70443d82e1e33a09ba0e82de89bc890252384d6ac08a463611", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9f92d926-5133-4d79-b83f-7e5426a51cd8", "node_type": "1", "metadata": {}, "hash": "e7038fe2178502ad034f94a4894139495b48efec8a95bd215b0300b38e819e0e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Ensemble with an MPI Application \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nGetting Started\nCalling Script\nExercise\n\nSimulation Function\nRunning the example\nExercises\n\nRunning the generator on the manager\nRunning forces application with input file\nMultiple parameters\n\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nEnsemble with an MPI Application\n\n View page source\n\nEnsemble with an MPI Application\uf0c1\nThis tutorial highlights libEnsemble\u2019s capability to portably execute\nand monitor external scripts or user applications within simulation or generator\nfunctions using the executor.\n\nThe calling script registers a compiled executable that simulates\nelectrostatic forces between a collection of particles. The simulator function\nlaunches instances of this executable and reads output files to determine\nthe result.\nThis tutorial uses libEnsemble\u2019s MPI Executor,\nwhich automatically detects available MPI runners and resources.\nThis example also uses a persistent generator. This generator runs on a\nworker throughout the ensemble, producing new simulation parameters as requested.\n\nGetting Started\uf0c1\nThe simulation source code forces.c can be obtained directly from the\nlibEnsemble repository in the forces_app directory.\nAssuming MPI and its C compiler mpicc are available, compile\nforces.c into an executable (forces.x) with:\nmpicc -O3 -o forces.x forces.c -lm\n\nAlternative build lines for different platforms can be found in the build_forces.sh\nfile in the same directory.\n\nCalling Script\uf0c1\nComplete scripts for this example can be found in the forces_simple directory.\nLet\u2019s begin by writing our calling script to specify our simulation and\ngeneration functions and call libEnsemble. Create a Python file called\nrun_libe_forces.py containing:\n 1import os\n 2import sys\n 3\n 4import numpy as np\n 5from forces_simf import run_forces # Sim func from current dir\n 6\n 7from libensemble import Ensemble\n 8from libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\n 9from libensemble.executors import MPIExecutor\n10from libensemble.gen_funcs.persistent_sampling import persistent_uniform as gen_f\n11from libensemble.specs import AllocSpecs, ExitCriteria, GenSpecs, LibeSpecs, SimSpecs\n12\n13if __name__ == \"__main__\":\n14 # Initialize MPI Executor\n15 exctr = MPIExecutor()\n16\n17 # Register simulation executable with executor\n18 sim_app = os.path.join(os.getcwd(), \"../forces_app/forces.x\")\n19\n20 if not os.path.isfile(sim_app):\n21 sys.exit(\"forces.x not found - please build first in ../forces_app dir\")\n22\n23 exctr.register_app(full_path=sim_app, app_name=\"forces\")\n24\n25 # Parse number of workers, comms type, etc. from arguments\n26 ensemble = Ensemble(parse_args=True, executor=exctr)\n\nWe first instantiate our MPI Executor.\nRegistering an application is as easy as providing the full file-path and giving\nit a memorable name. This Executor will later be used within our simulation\nfunction to launch the registered app.\nThe last line in the above codeblock initializes the ensemble. The parse_args\nparameter is used to read comms and nworkers from the command line. This sets\nthe respective libE_specs options.\nNext, we will add basic configuration for the ensemble. As one worker will run a persistent\ngenerator, we calculate the number of workers that need resources to run simulations.\nWe also set sim_dirs_make so that a directory is created for each simulation. This\nhelps organize output and also helps prevent workers from overwriting previous results.\n28 nsim_workers = ensemble.nworkers - 1 # One worker is for persistent generator\n29\n30 # Persistent gen does not need resources\n31 ensemble.libE_specs = LibeSpecs(\n32 num_resource_sets=nsim_workers, sim_dirs_make=True, ensemble_dir_path=\"./test_executor_forces_tutorial\"\n33 )\n\nNext we define the sim_specs and\ngen_specs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4367, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "9f92d926-5133-4d79-b83f-7e5426a51cd8": {"__data__": {"id_": "9f92d926-5133-4d79-b83f-7e5426a51cd8", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/executor_forces_tutorial.html", "file_name": "executor_forces_tutorial.html", "file_type": "text/html", "file_size": 93654, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "98d8b6e7-cd11-40cd-ab15-847b14df99b5", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/executor_forces_tutorial.html", "file_name": "executor_forces_tutorial.html", "file_type": "text/html", "file_size": 93654, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "5076b84547f67b70443d82e1e33a09ba0e82de89bc890252384d6ac08a463611", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ff1f35a9-c8fd-4a6b-bbfd-3e8bbb562fa5", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/executor_forces_tutorial.html", "file_name": "executor_forces_tutorial.html", "file_type": "text/html", "file_size": 93654, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "28799a9a1a723f61c4fd5f9e93ae7332f494be941eca682f46ca0d2b9c683427", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8ae3f6ae-36ea-4092-aeb5-1008c79c5ec8", "node_type": "1", "metadata": {}, "hash": "0ecb86c427c8d40bd31487e640f2468464f2962497d87ade15c0e36f6b4c26e9", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "The last line in the above codeblock initializes the ensemble. The parse_args\nparameter is used to read comms and nworkers from the command line. This sets\nthe respective libE_specs options.\nNext, we will add basic configuration for the ensemble. As one worker will run a persistent\ngenerator, we calculate the number of workers that need resources to run simulations.\nWe also set sim_dirs_make so that a directory is created for each simulation. This\nhelps organize output and also helps prevent workers from overwriting previous results.\n28 nsim_workers = ensemble.nworkers - 1 # One worker is for persistent generator\n29\n30 # Persistent gen does not need resources\n31 ensemble.libE_specs = LibeSpecs(\n32 num_resource_sets=nsim_workers, sim_dirs_make=True, ensemble_dir_path=\"./test_executor_forces_tutorial\"\n33 )\n\nNext we define the sim_specs and\ngen_specs. Recall that these are used to specify\nto libEnsemble what user functions and input/output fields to\nexpect, and also to parameterize user functions:\n37 ensemble.sim_specs = SimSpecs(\n38 sim_f=run_forces,\n39 inputs=[\"x\"],\n40 outputs=[(\"energy\", float)],\n41 )\n42\n43 ensemble.gen_specs = GenSpecs(\n44 gen_f=gen_f,\n45 inputs=[], # No input when starting persistent generator\n46 persis_in=[\"sim_id\"], # Return sim_ids of evaluated points to generator\n47 outputs=[(\"x\", float, (1,))],\n48 user={\n49 \"initial_batch_size\": nsim_workers,\n50 \"lb\": np.array([1000]), # min particles\n51 \"ub\": np.array([3000]), # max particles\n52 },\n53 ) # gen_specs_end_tag\n\nNext, configure an allocation function, which starts the one persistent\ngenerator and farms out the simulations. We also tell it to wait for all\nsimulations to return their results, before generating more parameters.\n55 ensemble.alloc_specs = AllocSpecs(\n56 alloc_f=alloc_f,\n57 user={\n58 \"async_return\": False, # False causes batch returns\n59 },\n60 )\n\nNow we set exit_criteria to\nexit after running eight simulations.\nWe also give each worker a seeded random stream, via the\npersis_info option.\nThese can be used for random number generation if required.\nFinally we run the ensemble.\n62 # Instruct libEnsemble to exit after this many simulations\n63 ensemble.exit_criteria = ExitCriteria(sim_max=8)\n64\n65 # Seed random streams for each worker, particularly for gen_f\n66 ensemble.add_random_streams()\n67\n68 # Run ensemble\n69 ensemble.run()\n\nExercise\uf0c1\nThis may take some additional browsing of the docs to complete.\nWrite an alternative Calling Script similar to above, but with the following differences:\n\nSet libEnsemble\u2019s logger to print debug messages.\nOverride the MPIExecutor\u2019s detected MPI runner with \"openmpi\".\nTell the allocation function to return results to the generator asynchronously.\nUse the ensemble function save_output() to save the History array and persis_info to files after libEnsemble completes.\n\nClick Here for Solutions\nSoln 1. Debug logging gives lots of information.\n\nfrom libensemble import Ensemble, logger\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens as alloc_f\nfrom libensemble.executors import MPIExecutor\nfrom libensemble.gen_funcs.persistent_sampling import persistent_uniform as gen_f\nfrom libensemble.specs import AllocSpecs, ExitCriteria, GenSpecs, LibeSpecs, SimSpecs\n\nlogger.set_level(\"DEBUG\")\n\nSoln 2. This can also be specified via platform_specs option.\n\n # Initialize MPI Executor\n exctr = MPIExecutor(custom_info={\"mpi_runner\": \"openmpi\"})\n\nSoln 3. Set async_return to True in the allocation .\n\n # Starts one persistent generator. Simulated values are returned in batch.\n ensemble.alloc_specs = AllocSpecs(\n alloc_f=alloc_f,\n user={\n \"async_return\": True,\n },\n )\n\nSoln 4. End your script in the following manner to save the output based\non the name of the calling script. You can give any string in place of __file__.\n\n # Run ensemble\n ensemble.run()\n\n ensemble.save_output(__file__)\n\nSimulation Function\uf0c1\nOur simulation function is where we\u2019ll use libEnsemble\u2019s executor to configure and submit\nour application for execution.", "mimetype": "text/plain", "start_char_idx": 3507, "end_char_idx": 7516, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "8ae3f6ae-36ea-4092-aeb5-1008c79c5ec8": {"__data__": {"id_": "8ae3f6ae-36ea-4092-aeb5-1008c79c5ec8", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/executor_forces_tutorial.html", "file_name": "executor_forces_tutorial.html", "file_type": "text/html", "file_size": 93654, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "98d8b6e7-cd11-40cd-ab15-847b14df99b5", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/executor_forces_tutorial.html", "file_name": "executor_forces_tutorial.html", "file_type": "text/html", "file_size": 93654, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "5076b84547f67b70443d82e1e33a09ba0e82de89bc890252384d6ac08a463611", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "9f92d926-5133-4d79-b83f-7e5426a51cd8", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/executor_forces_tutorial.html", "file_name": "executor_forces_tutorial.html", "file_type": "text/html", "file_size": 93654, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "0e0b8b62995bda30da75b09535a07c29c103c13a6c9b1377830c8b2110cc345b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d727703e-1d41-4aa3-861b-6304cbcd7293", "node_type": "1", "metadata": {}, "hash": "d9d276112ff994d8ec19c9394e3cd0d0e9daf5c8074e3638518917cea94ecfb3", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "This can also be specified via platform_specs option.\n\n # Initialize MPI Executor\n exctr = MPIExecutor(custom_info={\"mpi_runner\": \"openmpi\"})\n\nSoln 3. Set async_return to True in the allocation .\n\n # Starts one persistent generator. Simulated values are returned in batch.\n ensemble.alloc_specs = AllocSpecs(\n alloc_f=alloc_f,\n user={\n \"async_return\": True,\n },\n )\n\nSoln 4. End your script in the following manner to save the output based\non the name of the calling script. You can give any string in place of __file__.\n\n # Run ensemble\n ensemble.run()\n\n ensemble.save_output(__file__)\n\nSimulation Function\uf0c1\nOur simulation function is where we\u2019ll use libEnsemble\u2019s executor to configure and submit\nour application for execution. We\u2019ll poll this task\u2019s state while\nit runs, and once we\u2019ve detected it has finished we\u2019ll send any results or\nexit statuses back to the manager.\nCreate another Python file named forces_simf.py containing the following\nfor starters:\n 1import numpy as np\n 2\n 3# Optional status codes to display in libE_stats.txt for each gen or sim\n 4from libensemble.message_numbers import TASK_FAILED, WORKER_DONE\n 5\n 6\n 7def run_forces(H, persis_info, sim_specs, libE_info):\n 8 \"\"\"Runs the forces MPI application\"\"\"\n 9\n10 calc_status = 0\n11\n12 # Parse out num particles, from generator function\n13 particles = str(int(H[\"x\"][0][0]))\n14\n15 # app arguments: num particles, timesteps, also using num particles as seed\n16 args = particles + \" \" + str(10) + \" \" + particles\n17\n18 # Retrieve our MPI Executor\n19 exctr = libE_info[\"executor\"]\n20\n21 # Submit our forces app for execution.\n22 task = exctr.submit(app_name=\"forces\", app_args=args)\n23\n24 # Block until the task finishes\n25 task.wait()\n\nWe retrieve the generated number of particles from H and construct\nan argument string for our launched application. The particle count doubles up\nas a random number seed here.\nWe then retrieve our previously instantiated Executor. libEnsemble will use\nthe MPI runner detected (or provided by platform options).\nAs num_procs (or similar) is not specified, libEnsemble will assign the processors\navailable to this worker.\nAfter submitting the \u201cforces\u201d app for execution,\na Task object is returned that correlates with the launched app.\nThis object is roughly equivalent to a Python future and can be polled, killed,\nand evaluated in a variety of helpful ways. For now, we\u2019re satisfied with waiting\nfor the task to complete via task.wait().\nWe can assume that afterward, any results are now available to parse. Our application\nproduces a forces.stat file that contains either energy\ncomputations for every timestep or a \u201ckill\u201d message if particles were lost, which\nindicates a bad run - this can be ignored for now.\nTo complete our simulation function, parse the last energy value from the output file into\na local output History array, and if successful,\nset the simulation function\u2019s exit status calc_status\nto WORKER_DONE. Otherwise, send back NAN and a TASK_FAILED status:\n27 # Try loading final energy reading, set the sim's status\n28 statfile = \"forces.stat\"\n29 try:\n30 data = np.loadtxt(statfile)\n31 final_energy = data[-1]\n32 calc_status = WORKER_DONE\n33 except Exception:\n34 final_energy = np.nan\n35 calc_status = TASK_FAILED\n36\n37 # Define our output array, populate with energy reading\n38 output = np.zeros(1, dtype=sim_specs[\"out\"])\n39 output[\"energy\"] = final_energy\n40\n41 # Return final information to worker, for reporting to manager\n42 return output, persis_info, calc_status\n\ncalc_status will be displayed in the libE_stats.txt log file.\nThat\u2019s it! As can be seen, with libEnsemble, it\u2019s relatively easy to get started\nwith launching applications.\n\nRunning the example\uf0c1\nThis completes our calling script and simulation function. Run libEnsemble with:\npython run_libe_forces.py --nworkers [nworkers]\n\nwhere nworkers is one more than the number of concurrent simulations.\nOutput files (including forces.stat and files containing stdout and\nstderr content for each task) should appear in the current working\ndirectory.", "mimetype": "text/plain", "start_char_idx": 6788, "end_char_idx": 10823, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d727703e-1d41-4aa3-861b-6304cbcd7293": {"__data__": {"id_": "d727703e-1d41-4aa3-861b-6304cbcd7293", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/executor_forces_tutorial.html", "file_name": "executor_forces_tutorial.html", "file_type": "text/html", "file_size": 93654, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "98d8b6e7-cd11-40cd-ab15-847b14df99b5", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/executor_forces_tutorial.html", "file_name": "executor_forces_tutorial.html", "file_type": "text/html", "file_size": 93654, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "5076b84547f67b70443d82e1e33a09ba0e82de89bc890252384d6ac08a463611", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8ae3f6ae-36ea-4092-aeb5-1008c79c5ec8", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/executor_forces_tutorial.html", "file_name": "executor_forces_tutorial.html", "file_type": "text/html", "file_size": 93654, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "fb2f0a34732fb95e963de1b1448216ce462868fb1a175ac86a4e8cd3688f567a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a2dbffe3-f320-4a3e-8b78-0979c9a5ac31", "node_type": "1", "metadata": {}, "hash": "fb3cec89b060924d274ce4b0a9782ff35384e25d6892ab2c9d6eff7087e6947d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "That\u2019s it! As can be seen, with libEnsemble, it\u2019s relatively easy to get started\nwith launching applications.\n\nRunning the example\uf0c1\nThis completes our calling script and simulation function. Run libEnsemble with:\npython run_libe_forces.py --nworkers [nworkers]\n\nwhere nworkers is one more than the number of concurrent simulations.\nOutput files (including forces.stat and files containing stdout and\nstderr content for each task) should appear in the current working\ndirectory. Overall workflow information should appear in libE_stats.txt\nand ensemble.log as usual.\n\nExample run / output\nFor example, after running:\npython run_libe_forces.py --nworkers 3\n\nmy libE_stats.txt resembled:\nManager : Starting ensemble at: 2023-09-12 18:12:08.517\nWorker 2: sim_id 0: sim Time: 0.205 Start: ... End: ... Status: Completed\nWorker 3: sim_id 1: sim Time: 0.284 Start: ... End: ... Status: Completed\nWorker 2: sim_id 2: sim Time: 0.117 Start: ... End: ... Status: Completed\nWorker 3: sim_id 3: sim Time: 0.294 Start: ... End: ... Status: Completed\nWorker 2: sim_id 4: sim Time: 0.124 Start: ... End: ... Status: Completed\nWorker 3: sim_id 5: sim Time: 0.174 Start: ... End: ... Status: Completed\nWorker 3: sim_id 7: sim Time: 0.135 Start: ... End: ... Status: Completed\nWorker 2: sim_id 6: sim Time: 0.275 Start: ... End: ... Status: Completed\nWorker 1: Gen no 1: gen Time: 1.038 Start: ... End: ... Status: Persis gen finished\nManager : Exiting ensemble at: 2023-09-12 18:12:09.565 Time Taken: 1.048\n\nwhere status is set based on the simulation function\u2019s returned calc_status.\nMy ensemble.log (on a four-core laptop) resembled:\n[0] ... libensemble.libE (INFO): Logger initializing: [workerID] precedes each line.", "mimetype": "text/plain", "start_char_idx": 10346, "end_char_idx": 12049, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a2dbffe3-f320-4a3e-8b78-0979c9a5ac31": {"__data__": {"id_": "a2dbffe3-f320-4a3e-8b78-0979c9a5ac31", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/executor_forces_tutorial.html", "file_name": "executor_forces_tutorial.html", "file_type": "text/html", "file_size": 93654, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "98d8b6e7-cd11-40cd-ab15-847b14df99b5", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/executor_forces_tutorial.html", "file_name": "executor_forces_tutorial.html", "file_type": "text/html", "file_size": 93654, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "5076b84547f67b70443d82e1e33a09ba0e82de89bc890252384d6ac08a463611", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d727703e-1d41-4aa3-861b-6304cbcd7293", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/executor_forces_tutorial.html", "file_name": "executor_forces_tutorial.html", "file_type": "text/html", "file_size": 93654, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "3ef35f7bfbf1aacdcdee2cac1ab5ca28888cf6fc23c0ebaab95bf7b0638e3279", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ebc25651-31b8-4452-b04e-7cae5fa0e100", "node_type": "1", "metadata": {}, "hash": "abd842b64a6cafff33a534b0e781630b04b3a518d35f4504e89faf6b682915f4", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "[0] = Manager\n[0] ... libensemble.libE (INFO): libE version v0.10.2+dev\n[0] ... libensemble.manager (INFO): Manager initiated on node shuds\n[0] ... libensemble.manager (INFO): Manager exit_criteria: {'sim_max': 8}\n[2] ... libensemble.worker (INFO): Worker 2 initiated on node shuds\n[3] ... libensemble.worker (INFO): Worker 3 initiated on node shuds\n[1] ... libensemble.worker (INFO): Worker 1 initiated on node shuds\n[2] ... libensemble.executors.mpi_executor (INFO): Launching task libe_task_forces_worker2_0: mpirun -hosts shuds -np 2 --ppn 2 /home/.../forces_app/forces.x 2023 10 2023\n[3] ... libensemble.executors.mpi_executor (INFO): Launching task libe_task_forces_worker3_0: mpirun -hosts shuds -np 2 --ppn 2 /home/.../forces_app/forces.x 2900 10 2900\n[2] ... libensemble.executors.executor (INFO): Task libe_task_forces_worker2_0 finished with errcode 0 (FINISHED)\n[3] ... libensemble.executors.executor (INFO): Task libe_task_forces_worker3_0 finished with errcode 0 (FINISHED)\n[2] ... libensemble.executors.mpi_executor (INFO): Launching task libe_task_forces_worker2_1: mpirun -hosts shuds -np 2 --ppn 2 /home/.../forces_app/forces.x 1288 10 1288\n[3] ... libensemble.executors.mpi_executor (INFO): Launching task libe_task_forces_worker3_1: mpirun -hosts shuds -np 2 --ppn 2 /home/.../forces_app/forces.x 2897 10 2897\n[2] ... libensemble.executors.executor (INFO): Task libe_task_forces_worker2_1 finished with errcode 0 (FINISHED)\n[3] ... libensemble.executors.executor (INFO): Task libe_task_forces_worker3_1 finished with errcode 0 (FINISHED)\n[2] ... libensemble.executors.mpi_executor (INFO): Launching task libe_task_forces_worker2_2: mpirun -hosts shuds -np 2 --ppn 2 /home/.../forces_app/forces.x 1623 10 1623\n[3] ... libensemble.executors.mpi_executor (INFO): Launching task libe_task_forces_worker3_2: mpirun -hosts shuds -np 2 --ppn 2 /home/.../forces_app/forces.x 1846 10 1846\n[2] ... libensemble.executors.executor (INFO): Task libe_task_forces_worker2_2 finished with errcode 0 (FINISHED)\n[3] ... libensemble.executors.executor (INFO): Task libe_task_forces_worker3_2 finished with errcode 0 (FINISHED)\n[2] ... libensemble.executors.mpi_executor (INFO): Launching task libe_task_forces_worker2_3: mpirun -hosts shuds -np 2 --ppn 2 /home/.../forces_app/forces.x 2655 10 2655\n[3] ... libensemble.executors.mpi_executor (INFO): Launching task libe_task_forces_worker3_3: mpirun -hosts shuds -np 2 --ppn 2 /home/.../forces_app/forces.x 1818 10 1818\n[3] ... libensemble.executors.executor (INFO): Task libe_task_forces_worker3_3 finished with errcode 0 (FINISHED)\n[2] ... libensemble.executors.executor (INFO): Task libe_task_forces_worker2_3 finished with errcode 0 (FINISHED)\n[0] ... libensemble.manager (INFO): Term test tripped: sim_max\n[0] ... libensemble.manager (INFO): Term test tripped: sim_max\n[0] ... libensemble.libE (INFO): Manager total time: 1.043\n\nNote again that the four cores were divided equally among two workers that run simulations.", "mimetype": "text/plain", "start_char_idx": 12050, "end_char_idx": 15025, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ebc25651-31b8-4452-b04e-7cae5fa0e100": {"__data__": {"id_": "ebc25651-31b8-4452-b04e-7cae5fa0e100", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/executor_forces_tutorial.html", "file_name": "executor_forces_tutorial.html", "file_type": "text/html", "file_size": 93654, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "98d8b6e7-cd11-40cd-ab15-847b14df99b5", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/executor_forces_tutorial.html", "file_name": "executor_forces_tutorial.html", "file_type": "text/html", "file_size": 93654, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "5076b84547f67b70443d82e1e33a09ba0e82de89bc890252384d6ac08a463611", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a2dbffe3-f320-4a3e-8b78-0979c9a5ac31", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/executor_forces_tutorial.html", "file_name": "executor_forces_tutorial.html", "file_type": "text/html", "file_size": 93654, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "8f82368db9a60ebb91454d494fd60ed92daa0ba647e9d0d0735d66b3c5c712d4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "893b10f0-83a1-48ce-bcde-5547ddacbf50", "node_type": "1", "metadata": {}, "hash": "c5339b82b95222cac59d57c6284e2a395cdf26b3fe9d51b7ce96006107bc03ee", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "That concludes this tutorial. Each of these example files can be found in the\nrepository in examples/tutorials/forces_with_executor.\nFor further experimentation, we recommend trying out this libEnsemble tutorial\nworkflow on a cluster or multi-node system, since libEnsemble can also manage\nthose resources and is developed to coordinate computations at huge scales.\nSee HPC platform guides for more information.\nSee the forces_gpu tutorial for a similar workflow\nincluding GPUs. That tutorial also shows how to dynamically assign resources to\neach simulation.\nPlease feel free to contact us or open an issue on GitHub if this tutorial\nworkflow doesn\u2019t work properly on your cluster or other compute resource.\n\nExercises\uf0c1\nThese may require additional browsing of the documentation to complete.\n\nAdjust submit() to launch with four processes.\nAdjust submit() again so the app\u2019s stdout and stderr are written to stdout.txt and stderr.txt respectively.\nAdd a fourth argument to the args line to make 20% of simulations go bad.\nConstruct a while not task.finished: loop that periodically sleeps for a tenth of a second, calls task.poll(),\nthen reads the output .stat file, and calls task.kill() if the output file contains \"kill\\n\"\nor if task.runtime exceeds sixty seconds.\n\nClick Here for Solution\nShowing updated sections only (--- refers to snips where code is unchanged).\nimport time\n\n...\nargs = particles + \" \" + str(10) + \" \" + particles + \" \" + str(0.2)\n...\nstatfile = \"forces.stat\"\ntask = exctr.submit(\n app_name=\"forces\",\n app_args=args,\n num_procs=4,\n stdout=\"stdout.txt\",\n stderr=\"stderr.txt\",\n)\n\nwhile not task.finished:\n time.sleep(0.1)\n task.poll()\n\n if task.file_exists_in_workdir(statfile):\n with open(statfile, \"r\") as f:\n if \"kill\\n\" in f.readlines():\n task.kill()\n\n if task.runtime > 60:\n task.kill()\n\n...\n\nRunning the generator on the manager\uf0c1\nAs of version 1.3.0, the generator can be run on a thread on the manager,\nusing the libE_specs option gen_on_manager.\nChange the libE_specs as follows.\n\n28nsim_workers = ensemble.nworkers\n29\n30# Persistent gen does not need resources\n31ensemble.libE_specs = LibeSpecs(\n32 gen_on_manager=True,\n33 sim_dirs_make=True,\n34 ensemble_dir_path=\"./test_executor_forces_tutorial\",\n35)\n\nWhen running set nworkers to the number of workers desired for running simulations.\nE.g., Instead of:\npython run_libe_forces.py --nworkers 5\n\nuse:\npython run_libe_forces.py --nworkers 4\n\nNote that as the generator random number seed will be zero instead of one, the checksum will change.\nFor more information see Running generator on the manager.\n\nRunning forces application with input file\uf0c1\nMany applications read an input file instead of being given parameters directly on the run line.\nforces_simple_with_input_file directory contains a variant of this example, where a templated\ninput file is parameterized for each evaluation.\nThis requires jinja2 to be installed:\npip install jinja2\n\nThe file forces_input contains the following (remember we are using particles\nas seed also for simplicity):\nnum_particles = {{particles}}\nnum_steps = 10\nrand_seed = {{particles}}\n\nlibEnsemble will copy this input file to each simulation directory.\nThe sim_f uses the following function to customize the input file with the parameters\nfor the current simulation.\ndef set_input_file_params(H, sim_specs, ints=False):\n \"\"\"\n This is a general function to parameterize the input file with any inputs\n from sim_specs[\"in\"]\n\n Often sim_specs_in[\"x\"] may be multi-dimensional, where each dimension\n corresponds to a different input name in sim_specs[\"user\"][\"input_names\"]).\n Effectively an unpacking of \"x\"\n \"\"\"\n input_file = sim_specs[\"user\"][\"input_filename\"]\n input_values = {}\n for i, name in enumerate(sim_specs[\"user\"][\"input_names\"]):\n value = int(H[\"x\"][0][i]) if ints else H[\"x\"][0][i]\n input_values[name] = value\n with open(input_file, \"r\") as f:\n template = jinja2.Template(f.read())\n with open(input_file, \"w\") as f:\n f.write(template.render(input_values))\n\nThis is called in the simulation function as follows.", "mimetype": "text/plain", "start_char_idx": 15027, "end_char_idx": 19069, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "893b10f0-83a1-48ce-bcde-5547ddacbf50": {"__data__": {"id_": "893b10f0-83a1-48ce-bcde-5547ddacbf50", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/executor_forces_tutorial.html", "file_name": "executor_forces_tutorial.html", "file_type": "text/html", "file_size": 93654, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "98d8b6e7-cd11-40cd-ab15-847b14df99b5", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/executor_forces_tutorial.html", "file_name": "executor_forces_tutorial.html", "file_type": "text/html", "file_size": 93654, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "5076b84547f67b70443d82e1e33a09ba0e82de89bc890252384d6ac08a463611", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ebc25651-31b8-4452-b04e-7cae5fa0e100", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/executor_forces_tutorial.html", "file_name": "executor_forces_tutorial.html", "file_type": "text/html", "file_size": 93654, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "044c83a2253a7178337bc37a6f16653f225c312e1fd47c4e16cc37ed8d761468", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "def set_input_file_params(H, sim_specs, ints=False):\n \"\"\"\n This is a general function to parameterize the input file with any inputs\n from sim_specs[\"in\"]\n\n Often sim_specs_in[\"x\"] may be multi-dimensional, where each dimension\n corresponds to a different input name in sim_specs[\"user\"][\"input_names\"]).\n Effectively an unpacking of \"x\"\n \"\"\"\n input_file = sim_specs[\"user\"][\"input_filename\"]\n input_values = {}\n for i, name in enumerate(sim_specs[\"user\"][\"input_names\"]):\n value = int(H[\"x\"][0][i]) if ints else H[\"x\"][0][i]\n input_values[name] = value\n with open(input_file, \"r\") as f:\n template = jinja2.Template(f.read())\n with open(input_file, \"w\") as f:\n f.write(template.render(input_values))\n\nThis is called in the simulation function as follows.\ndef run_forces(H, persis_info, sim_specs, libE_info):\n \"\"\"Runs the forces MPI application reading input from file\"\"\"\n\n calc_status = 0\n\n input_file = sim_specs[\"user\"][\"input_filename\"]\n set_input_file_params(H, sim_specs, ints=True)\n\n # Retrieve our MPI Executor\n exctr = libE_info[\"executor\"]\n\n # Submit our forces app for execution.\n task = exctr.submit(app_name=\"forces\") # app_args removed\n\n # Block until the task finishes\n task.wait(timeout=60)\n\nNotice that we convert the parameters to integers in this example.\nThe calling script then specifies the templated input file as follows.\n30input_file = \"forces_input\"\n31\n32# Persistent gen does not need resources\n33ensemble.libE_specs = LibeSpecs(\n34 num_resource_sets=nsim_workers,\n35 sim_dirs_make=True,\n36 sim_dir_copy_files=[input_file],\n37)\n38\n39ensemble.sim_specs = SimSpecs(\n40 sim_f=run_forces,\n41 inputs=[\"x\"],\n42 outputs=[(\"energy\", float)],\n43 user={\"input_filename\": input_file, \"input_names\": [\"particles\"]},\n44)\n\nLine 36 tells the templated input file to be copied to each simulation directory.\nAn alternative is to use sim_input_dir, which gives the name of a directory\nthat may contain multiple files and will be used as the base of each simulation\ndirectory.\nLine 43 gives the input file name and the name of each parameter to the simulation\nfunction.\n\nMultiple parameters\uf0c1\nIn our case, the only parameter name is x. However, in some cases, x\n(as defined by sim_specs[\"in\"]) may be multi-dimensional, where each\ncomponent has a different parameter name (e.g., \u201cx\u201d, \u201cy\u201d). For example, if the\ninput file were:\nnum_particles = {{particles}}\nnum_steps = {{nsteps}}\nrand_seed = {{seed}}\n\nthen line 43 would be:\nuser = {\"input_filename\": input_file, \"input_names\": [\"particles\", \"nsteps\", \"seed\"]}\n\nand gen_specs would contain something similar to:\n46ensemble.gen_specs = GenSpecs(\n47 gen_f=gen_f,\n48 inputs=[],\n49 persis_in=[\"sim_id\"],\n50 outputs=[(\"x\", float, 3)],\n51 ...,\n52)\n\nlibEnsemble uses a convention of a multi-dimensional x in generator functions. However,\nthese parameters can also be specified as different variables with corresponding modification\nto generator and simulator functions.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 18315, "end_char_idx": 21361, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "012e682b-0a22-42d6-8949-bc85e30cc2cc": {"__data__": {"id_": "012e682b-0a22-42d6-8949-bc85e30cc2cc", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/forces_gpu_tutorial.html", "file_name": "forces_gpu_tutorial.html", "file_type": "text/html", "file_size": 40380, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "287e32bf-3684-42d4-a8e8-6070a3e53c96", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/forces_gpu_tutorial.html", "file_name": "forces_gpu_tutorial.html", "file_type": "text/html", "file_size": 40380, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "baeec3ceeae602819ee4db56fe0c91129e6bf9328fd8985f8b7d206d7f9bf73a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a049b8fc-68a8-4748-b94b-3ade5a66405e", "node_type": "1", "metadata": {}, "hash": "fb2b4855ba3a443ab75ef4dcab359af25a8e5e88a395cbc09c5810d19d600b0c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Executor - Assign GPUs \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSimulation function\nCompiling the Forces application\nRunning the example\nChanging the number of GPUs per worker\nVarying resources\nMultiple applications\nChecking GPU usage\nExample submission script\n\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nExecutor - Assign GPUs\n\n View page source\n\nExecutor - Assign GPUs\uf0c1\nThis tutorial shows the most portable way to assign tasks (user applications)\nto the GPU. The libEnsemble scripts in this example are available under\nforces_gpu in the libEnsemble repository.\nThis example is based on the\nsimple forces tutorial with\na slightly modified simulation function (to assign GPUs) and a greatly increased\nnumber of particles (to allow real-time GPU usage to be viewed).\nIn the first example, each worker will be using one GPU. The code will assign the\nGPUs available to each worker, using the appropriate method. This works on systems\nusing Nvidia, AMD, and Intel GPUs without modifying the scripts.\nA video demonstrates running this example on Frontier.\n\nSimulation function\uf0c1\nThe sim_f (forces_simf.py) is as follows. The lines that are different\nfrom the simple forces example are highlighted:\n 1import numpy as np\n 2\n 3# Optional status codes to display in libE_stats.txt for each gen or sim\n 4from libensemble.message_numbers import TASK_FAILED, WORKER_DONE\n 5\n 6# Optional - to print GPU settings\n 7from libensemble.tools.test_support import check_gpu_setting\n 8\n 9def run_forces(H, persis_info, sim_specs, libE_info):\n10 \"\"\"Launches the forces MPI app and auto-assigns ranks and GPU resources.\n11\n12 Assigns one MPI rank to each GPU assigned to the worker.\n13 \"\"\"\n14\n15 calc_status = 0\n16\n17 # Parse out num particles, from generator function\n18 particles = str(int(H[\"x\"][0][0]))\n19\n20 # app arguments: num particles, timesteps, also using num particles as seed\n21 args = particles + \" \" + str(10) + \" \" + particles\n22\n23 # Retrieve our MPI Executor\n24 exctr = libE_info[\"executor\"]\n25\n26 # Submit our forces app for execution.\n27 task = exctr.submit(\n28 app_name=\"forces\",\n29 app_args=args,\n30 auto_assign_gpus=True,\n31 match_procs_to_gpus=True,\n32 )\n33\n34 # Block until the task finishes\n35 task.wait()\n36\n37 # Optional - prints GPU assignment (method and numbers)\n38 check_gpu_setting(task, assert_setting=False, print_setting=True)\n39\n40 # Try loading final energy reading, set the sim's status\n41 statfile = \"forces.stat\"\n42 try:\n43 data = np.loadtxt(statfile)\n44 final_energy = data[-1]\n45 calc_status = WORKER_DONE\n46 except Exception:\n47 final_energy = np.nan\n48 calc_status = TASK_FAILED\n49\n50 # Define our output array, populate with energy reading\n51 output = np.zeros(1, dtype=sim_specs[\"out\"])\n52 output[\"energy\"] = final_energy\n53\n54 # Return final information to worker, for reporting to manager\n55 return output, persis_info, calc_status\n\nLines 31-32 tell the executor to use the GPUs assigned to this worker, and\nto match processors (MPI ranks) to GPUs.\nThe user can also set num_procs and num_gpus in the generator as in\nthe forces_gpu_var_resources example, and skip lines 31-32.\nLine 37 simply prints out how the GPUs were assigned. If this is not as expected,\nplatform configuration can be provided.\nWhile this is sufficient for most users, note that it is possible to query\nthe resources assigned to this worker (nodes and partitions of nodes),\nand use this information however you want.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3978, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a049b8fc-68a8-4748-b94b-3ade5a66405e": {"__data__": {"id_": "a049b8fc-68a8-4748-b94b-3ade5a66405e", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/forces_gpu_tutorial.html", "file_name": "forces_gpu_tutorial.html", "file_type": "text/html", "file_size": 40380, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "287e32bf-3684-42d4-a8e8-6070a3e53c96", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/forces_gpu_tutorial.html", "file_name": "forces_gpu_tutorial.html", "file_type": "text/html", "file_size": 40380, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "baeec3ceeae602819ee4db56fe0c91129e6bf9328fd8985f8b7d206d7f9bf73a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "012e682b-0a22-42d6-8949-bc85e30cc2cc", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/forces_gpu_tutorial.html", "file_name": "forces_gpu_tutorial.html", "file_type": "text/html", "file_size": 40380, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "a96084d87363e9042e3d1995ac0ad57f9207d13480e5f8bf8d496dde6ec0488b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8c4eead0-3dda-4a51-a38a-424733ea3d15", "node_type": "1", "metadata": {}, "hash": "595ac4ad62a0975a1c28906a44f2d07dab11afcb6db9822ee25b87d92ad117b7", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "The user can also set num_procs and num_gpus in the generator as in\nthe forces_gpu_var_resources example, and skip lines 31-32.\nLine 37 simply prints out how the GPUs were assigned. If this is not as expected,\nplatform configuration can be provided.\nWhile this is sufficient for most users, note that it is possible to query\nthe resources assigned to this worker (nodes and partitions of nodes),\nand use this information however you want.\n\nHow to query this worker\u2019s resources\nThe example shown below implements\na similar, but less portable, version of the above (excluding output lines).\n 1import numpy as np\n 2\n 3# To retrieve our MPI Executor and resources instances\n 4from libensemble.executors.executor import Executor\n 5from libensemble.resources.resources import Resources\n 6\n 7# Optional status codes to display in libE_stats.txt for each gen or sim\n 8from libensemble.message_numbers import WORKER_DONE, TASK_FAILED\n 9\n10\n11def run_forces(H, _, sim_specs):\n12 calc_status = 0\n13\n14 # Parse out num particles, from generator function\n15 particles = str(int(H[\"x\"][0][0]))\n16\n17 # app arguments: num particles, timesteps, also using num particles as seed\n18 args = particles + \" \" + str(10) + \" \" + particles\n19\n20 # Retrieve our MPI Executor instance and resources\n21 exctr = Executor.executor\n22 resources = Resources.resources.worker_resources\n23\n24 resources.set_env_to_slots(\"CUDA_VISIBLE_DEVICES\")\n25\n26 # Submit our forces app for execution. Block until the task starts.\n27 task = exctr.submit(\n28 app_name=\"forces\",\n29 app_args=args,\n30 num_nodes=resources.local_node_count,\n31 procs_per_node=resources.slot_count,\n32 wait_on_start=True,\n33 )\n34\n35 # Block until the task finishes\n36 task.wait()\n37\n38 # Stat file to check for bad runs\n39 statfile = \"forces.stat\"\n40\n41 # Read final energy\n42 data = np.loadtxt(statfile)\n43 final_energy = data[-1]\n44\n45 # Define our output array, populate with energy reading\n46 output = np.zeros(1, dtype=sim_specs[\"out\"])\n47 output[\"energy\"][0] = final_energy\n48\n49return output\n\nThe above code will assign a GPU to each worker on CUDA-capable systems,\nso long as the number of workers is chosen to fit the resources.\nIf you want to have one rank with multiple GPUs, then change source lines 30/31\naccordingly.\nThe resource attributes used are:\n\nlocal_node_count: The number of nodes available to this worker\nslot_count: The number of slots per node for this worker\n\nand the line:\nresources.set_env_to_slots(\"CUDA_VISIBLE_DEVICES\")\n\nwill set the environment variable CUDA_VISIBLE_DEVICES to match the assigned\nslots (partitions on the node).\n\nNote\nslots refers to the resource sets enumerated on a node (starting with\nzero). If a resource set has more than one node, then each node is considered to\nhave slot zero. [diagram]\n\nNote that if you are on a system that automatically assigns free GPUs on the node,\nthen setting CUDA_VISIBLE_DEVICES is not necessary unless you want to ensure\nworkers are strictly bound to GPUs. For example, on many SLURM systems, you\ncan use --gpus-per-task=1 (e.g., Perlmutter).\nSuch options can be added to the exctr.submit call as extra_args:\ntask = exctr.submit(\n...\n extra_args=\"--gpus-per-task=1\"\n)\n\nAlternative environment variables can be simply substituted in set_env_to_slots.\n(e.g., HIP_VISIBLE_DEVICES, ROCR_VISIBLE_DEVICES).\n\nNote\nOn some systems CUDA_VISIBLE_DEVICES may be overridden by other assignments\nsuch as --gpus-per-task=1\n\nCompiling the Forces application\uf0c1\nFirst, compile the forces application under the forces_app directory.\nCompile forces.x using one of the GPU build lines in build_forces.sh\nor similar for your platform.\n\nRunning the example\uf0c1\nAs an example, if you have been allocated two nodes, each with four GPUs, then assign\nnine workers (the extra worker runs the persistent generator).\nFor example:\npython run_libe_forces.py --nworkers 9\n\nSee zero-resource workers for more ways to express this.", "mimetype": "text/plain", "start_char_idx": 3540, "end_char_idx": 7449, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "8c4eead0-3dda-4a51-a38a-424733ea3d15": {"__data__": {"id_": "8c4eead0-3dda-4a51-a38a-424733ea3d15", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/forces_gpu_tutorial.html", "file_name": "forces_gpu_tutorial.html", "file_type": "text/html", "file_size": 40380, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "287e32bf-3684-42d4-a8e8-6070a3e53c96", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/forces_gpu_tutorial.html", "file_name": "forces_gpu_tutorial.html", "file_type": "text/html", "file_size": 40380, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "baeec3ceeae602819ee4db56fe0c91129e6bf9328fd8985f8b7d206d7f9bf73a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a049b8fc-68a8-4748-b94b-3ade5a66405e", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/forces_gpu_tutorial.html", "file_name": "forces_gpu_tutorial.html", "file_type": "text/html", "file_size": 40380, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "d5797d0424f654858ea867106fc8872aae1612c00667b1c6b7ebe6134e72790c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Such options can be added to the exctr.submit call as extra_args:\ntask = exctr.submit(\n...\n extra_args=\"--gpus-per-task=1\"\n)\n\nAlternative environment variables can be simply substituted in set_env_to_slots.\n(e.g., HIP_VISIBLE_DEVICES, ROCR_VISIBLE_DEVICES).\n\nNote\nOn some systems CUDA_VISIBLE_DEVICES may be overridden by other assignments\nsuch as --gpus-per-task=1\n\nCompiling the Forces application\uf0c1\nFirst, compile the forces application under the forces_app directory.\nCompile forces.x using one of the GPU build lines in build_forces.sh\nor similar for your platform.\n\nRunning the example\uf0c1\nAs an example, if you have been allocated two nodes, each with four GPUs, then assign\nnine workers (the extra worker runs the persistent generator).\nFor example:\npython run_libe_forces.py --nworkers 9\n\nSee zero-resource workers for more ways to express this.\n\nChanging the number of GPUs per worker\uf0c1\nIf you want to have two GPUs per worker on the same system (with four GPUs per node),\nyou could assign only four workers. You will see that two GPUs are used for each\nforces run.\n\nVarying resources\uf0c1\nA variant of this example where you may specify any number of processors\nand GPUs for each simulation is given in the forces_gpu_var_resources example.\nIn this example, when simulations are parameterized in the generator function,\nthe gen_specs[\"out\"] field num_gpus is set for each simulation (based\non the number of particles). These values will automatically be used for each\nsimulation (they do not need to be passed as a sim_specs[\"in\"]).\nFurther guidance on varying the resources assigned to workers can be found under the\nresource manager section.\n\nMultiple applications\uf0c1\nAnother variant of this example, forces_multi_app, has two applications, one that\nuses GPUs, and another that only uses CPUs. Dynamic resource management can\nmanage both types of resources and assign these to the same nodes concurrently, for\nmaximum efficiency.\n\nChecking GPU usage\uf0c1\nThe output of forces.x will say if it has run on the host or device. When running\nlibEnsemble, this can be found in the simulation directories (under the ensemble\ndirectory).\nYou can check you are running forces on the GPUs as expected by using profiling tools and/or\nby using a monitoring utility. For NVIDIA GPUs, for example, the Nsight profiler is\ngenerally available and can be run from the command line. To simply run forces.x stand-alone\nyou could run:\nnsys profile --stats=true mpirun -n 2 ./forces.x\n\nTo use the nvidia-smi monitoring tool while running, open another shell where your code is\nrunning (this may entail using ssh to get on to the node), and run:\nwatch -n 0.1 nvidia-smi\n\nThis will update GPU usage information every 0.1 seconds. You would need to ensure the code\nruns for long enough to register on the monitor, so let\u2019s try 100,000 particles:\nmpirun -n 2 ./forces.x 100000\n\nIt is also recommended that you run without the profiler when using the nvidia-smi utility.\nThis can also be used when running via libEnsemble, so long as you are on the node where the\nforces applications are being run.\nAlternative monitoring devices include rocm-smi (AMD) and intel_gpu_top (Intel).\nThe latter does not need the watch command.\n\nExample submission script\uf0c1\nA simple example batch script for Perlmutter\nthat runs 8 workers on 2 nodes:\n 1#!/bin/bash\n 2#SBATCH -J libE_small_test\n 3#SBATCH -A <myproject>\n 4#SBATCH -C gpu\n 5#SBATCH --time 10\n 6#SBATCH --nodes 2\n 7\n 8export MPICH_GPU_SUPPORT_ENABLED=1\n 9export SLURM_EXACT=1\n10\n11python run_libe_forces.py --nworkers 9\n\nwhere SLURM_EXACT is set to help prevent resource conflicts on each node.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 6599, "end_char_idx": 10333, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "fee0b9f5-d026-4ff0-8067-aa79bba1b958": {"__data__": {"id_": "fee0b9f5-d026-4ff0-8067-aa79bba1b958", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/gpcam_tutorial.html", "file_name": "gpcam_tutorial.html", "file_type": "text/html", "file_size": 53675, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bf00fd1d-c481-495b-a418-087765bd3fa6", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/gpcam_tutorial.html", "file_name": "gpcam_tutorial.html", "file_type": "text/html", "file_size": 53675, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "6802a395c17578385e3b01aea9f7a1addb2b48180a1e306507a44404c16744bc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1a518941-f795-4b38-95a0-50f4115f7209", "node_type": "1", "metadata": {}, "hash": "8f4f8c9087e631013a5348598dde64e79cbc57e350fd0b66a64248a9678035d6", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Surrogate Modeling with gpCAM \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nGenerator function\nSimulator function\nCalling Script\nRerun and test model at known points\nViewing model progression\n\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nSurrogate Modeling with gpCAM\n\n View page source\n\nSurrogate Modeling with gpCAM\uf0c1\nThis example uses gpCAM to construct a global surrogate of f values using a Gaussian process.\nIn each iteration, a batch of points is produced for concurrent evaluation, maximizing uncertainty reduction.\n\nEnsure that libEnsemble, and gpCAM are installed via: pip install libensemble gpcam\n\nGenerator function\uf0c1\nThe gpCAM generator function is called persistent_gpCAM.\nThis persistent generator is started at the beginning of the Ensemble and runs until the Ensemble closes down.\nThis version (and others) of the gpCAM generator can be found at libensemble/gen_funcs/persistent_gpCAM.py and can be imported from that location when libEnsemble is installed as follows:\nfrom libensemble.gen_funcs.persistent_gpCAM import persistent_gpCAM\nimport numpy as np\nfrom numpy.lib.recfunctions import repack_fields\nfrom gpcam import GPOptimizer as GP\n\n# Standard options for manager/generator comms\nfrom libensemble.message_numbers import EVAL_GEN_TAG, FINISHED_PERSISTENT_GEN_TAG, PERSIS_STOP, STOP_TAG\nfrom libensemble.tools.persistent_support import PersistentSupport\n\ndef persistent_gpCAM(H_in, persis_info, gen_specs, libE_info):\n \"\"\"Run a batched gpCAM model to create a surrogate\"\"\"\n\n # Initialize\n rng, batch_size, n, lb, ub, x_new, y_new, ps = _initialize_gpcAM(gen_specs[\"user\"], libE_info)\n ask_max_iter = gen_specs[\"user\"].get(\"ask_max_iter\") or 10\n test_points = _read_testpoints(gen_specs[\"user\"])\n noise = 1e-8 # Initializes noise\n my_gp = None\n\n # Start with a batch of random points\n x_new = rng.uniform(lb, ub, (batch_size, n))\n H_o = np.zeros(batch_size, dtype=gen_specs[\"out\"])\n H_o[\"x\"] = x_new\n tag, Work, calc_in = ps.send_recv(H_o) # Send random points for evaluation and wait for results\n\n while tag not in [STOP_TAG, PERSIS_STOP]:\n y_new = np.atleast_2d(calc_in[\"f\"]).T\n my_gp = _update_gp(my_gp, x_new, y_new, test_points, persis_info, noise)\n\n # Request new points\n x_new = my_gp.ask(\n input_set=np.column_stack((lb, ub)),\n n=batch_size,\n pop_size=batch_size,\n acquisition_function=\"total correlation\",\n max_iter=ask_max_iter, # Larger takes longer. gpCAM default is 20.\n )[\"x\"]\n\n H_o = np.zeros(batch_size, dtype=gen_specs[\"out\"])\n H_o[\"x\"] = x_new\n tag, Work, calc_in = ps.send_recv(H_o) # Send points for evaluation and wait for results\n\n # If final points were returned update the model\n if calc_in is not None:\n y_new = np.atleast_2d(calc_in[\"f\"]).T\n my_gp = _update_gp(my_gp, x_new, y_new, test_points, persis_info, noise)\n\n return None, persis_info, FINISHED_PERSISTENT_GEN_TAG\n\nCommon acquisition functions include:\nUncertainty reduction:\n\n\u201cvariance\u201d (default): The optimizer will produce N best points.\n\u201ctotal correlation\u201d: More expensive but points produced are self-avoiding.\n\nBayesian optimization:\nThese produce one point at a time unless using the HGDL option.\n\n\u201cucb\u201d / \u201clcb\u201d: Upper/Lower Confidence Bound.\n\u201cexpected improvement\u201d: Expected Improvement.\n\nFor more options see: https://gpcam.lbl.gov/examples/acquisition-functions\n\nThe following code adds the functions used by persistent_gpCAM.\n_update_gp is where the GP is fed the data and trained.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3955, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "1a518941-f795-4b38-95a0-50f4115f7209": {"__data__": {"id_": "1a518941-f795-4b38-95a0-50f4115f7209", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/gpcam_tutorial.html", "file_name": "gpcam_tutorial.html", "file_type": "text/html", "file_size": 53675, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bf00fd1d-c481-495b-a418-087765bd3fa6", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/gpcam_tutorial.html", "file_name": "gpcam_tutorial.html", "file_type": "text/html", "file_size": 53675, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "6802a395c17578385e3b01aea9f7a1addb2b48180a1e306507a44404c16744bc", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fee0b9f5-d026-4ff0-8067-aa79bba1b958", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/gpcam_tutorial.html", "file_name": "gpcam_tutorial.html", "file_type": "text/html", "file_size": 53675, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "3a9c9ad4907f69841fdbbdc3b62637473edaef070b310c0a7863bb4b8eb4c753", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ee2827e4-27ba-43a2-888b-217c6f7ab068", "node_type": "1", "metadata": {}, "hash": "922787dad6d080f402e752c84421e89960d2bfdb1b8b64ba1758898d7d40ba5d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\u201ctotal correlation\u201d: More expensive but points produced are self-avoiding.\n\nBayesian optimization:\nThese produce one point at a time unless using the HGDL option.\n\n\u201cucb\u201d / \u201clcb\u201d: Upper/Lower Confidence Bound.\n\u201cexpected improvement\u201d: Expected Improvement.\n\nFor more options see: https://gpcam.lbl.gov/examples/acquisition-functions\n\nThe following code adds the functions used by persistent_gpCAM.\n_update_gp is where the GP is fed the data and trained.\ndef _initialize_gpcAM(user_specs, libE_info):\n \"\"\"Extract user params\"\"\"\n rng_seed = user_specs.get(\"rng_seed\") # will default to None\n rng = np.random.default_rng(rng_seed) # Create random stream\n b = user_specs[\"batch_size\"]\n lb = np.array(user_specs[\"lb\"])\n ub = np.array(user_specs[\"ub\"])\n n = len(lb) # no. of dimensions\n init_x = np.empty((0, n))\n init_y = np.empty((0, 1))\n ps = PersistentSupport(libE_info, EVAL_GEN_TAG) # init comms\n return rng, b, n, lb, ub, init_x, init_y, ps\n\ndef _read_testpoints(U):\n \"\"\"Read numpy file containing evaluated points for measuring GP error\"\"\"\n test_points_file = U.get(\"test_points_file\")\n if test_points_file is None:\n return None\n test_points = np.load(test_points_file)\n test_points = repack_fields(test_points[[\"x\", \"f\"]])\n return test_points\n\ndef _compare_testpoints(my_gp, test_points, persis_info):\n \"\"\"Compare model at test points\"\"\"\n if test_points is None:\n return\n f_est = my_gp.posterior_mean(test_points[\"x\"])[\"f(x)\"]\n mse = np.mean((f_est - test_points[\"f\"]) ** 2)\n persis_info.setdefault(\"mean_squared_error\", []).append(float(mse))\n\ndef _update_gp(my_gp, x_new, y_new, test_points, persis_info, noise):\n \"\"\"Update Gaussian process with new points and train\"\"\"\n noise_arr = noise * np.ones(len(y_new)) # Initializes noise\n if my_gp is None:\n my_gp = GP(x_new, y_new.flatten(), noise_variances=noise_arr)\n else:\n my_gp.tell(x_new, y_new.flatten(), noise_variances=noise_arr, append=True)\n my_gp.train()\n\n if test_points is not None:\n _compare_testpoints(my_gp, test_points, persis_info)\n\n return my_gp\n\nSimulator function\uf0c1\nSimulator functions or sim_fs perform calculations based on parameters created in the generator function.\nEach worker runs a copy of this function in parallel.\nThe function here is the simple 2D six_hump_camel, for demonstration purposes.\nFor running applications using parallel resources in the simulator see the forces examples.\n# Define our simulation function\nimport numpy as np\n\ndef six_hump_camel(H, persis_info, sim_specs, _):\n \"\"\"Six-Hump Camel sim_f.\"\"\"\n\n batch = len(H[\"x\"]) # Num evaluations each sim_f call.\n H_o = np.zeros(batch, dtype=sim_specs[\"out\"]) # Define output array H\n\n for i, x in enumerate(H[\"x\"]):\n H_o[\"f\"][i] = six_hump_camel_func(x) # Function evaluations placed into H\n\n return H_o, persis_info\n\ndef six_hump_camel_func(x):\n \"\"\"Six-Hump Camel function definition\"\"\"\n x1 = x[0]\n x2 = x[1]\n term1 = (4 - 2.1 * x1**2 + (x1**4) / 3) * x1**2\n term2 = x1 * x2\n term3 = (-4 + 4 * x2**2) * x2**2\n\n return term1 + term2 + term3\n\nCalling Script\uf0c1\nOur calling script configures libEnsemble, the generator function, and the simulator function. It then create the ensemble object and runs the ensemble.\nFirst we will create a cleanup script so we can easily re-run.\n# To rerun this notebook, we need to delete the ensemble directory.\nimport shutil\ndef cleanup():\n try:\n shutil.rmtree(\"ensemble\")\n except:\n pass\n\nThis calling script imports the Gen and Sim functions from the locations in the installed libensemble package.\nIf you wish to make your own functions based on the above, those can be imported instead.", "mimetype": "text/plain", "start_char_idx": 3504, "end_char_idx": 7066, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ee2827e4-27ba-43a2-888b-217c6f7ab068": {"__data__": {"id_": "ee2827e4-27ba-43a2-888b-217c6f7ab068", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/gpcam_tutorial.html", "file_name": "gpcam_tutorial.html", "file_type": "text/html", "file_size": 53675, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bf00fd1d-c481-495b-a418-087765bd3fa6", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/gpcam_tutorial.html", "file_name": "gpcam_tutorial.html", "file_type": "text/html", "file_size": 53675, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "6802a395c17578385e3b01aea9f7a1addb2b48180a1e306507a44404c16744bc", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1a518941-f795-4b38-95a0-50f4115f7209", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/gpcam_tutorial.html", "file_name": "gpcam_tutorial.html", "file_type": "text/html", "file_size": 53675, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "baa7da389f3812bb3208162005c037c7739e3db6f24d2e4e7594e8bf71135e0b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6eeca64f-ab4d-43e3-83d7-1052cd798093", "node_type": "1", "metadata": {}, "hash": "1788b141a8c108f789c50dd1ffcbba6b88403f4357fb07af7fe3d87e0f2ab4df", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "It then create the ensemble object and runs the ensemble.\nFirst we will create a cleanup script so we can easily re-run.\n# To rerun this notebook, we need to delete the ensemble directory.\nimport shutil\ndef cleanup():\n try:\n shutil.rmtree(\"ensemble\")\n except:\n pass\n\nThis calling script imports the Gen and Sim functions from the locations in the installed libensemble package.\nIf you wish to make your own functions based on the above, those can be imported instead.\nimport numpy as np\nfrom pprint import pprint\n\nfrom libensemble import Ensemble\nfrom libensemble.specs import LibeSpecs, GenSpecs, SimSpecs, AllocSpecs, ExitCriteria\n\n# If importing from libensemble\nfrom libensemble.gen_funcs.persistent_gpCAM import persistent_gpCAM\nfrom libensemble.sim_funcs.six_hump_camel import six_hump_camel\n\nfrom libensemble.alloc_funcs.start_only_persistent import only_persistent_gens\nimport warnings\n\nwarnings.filterwarnings(\"ignore\", message=\"Default hyperparameter_bounds\")\nwarnings.filterwarnings(\"ignore\", message=\"Hyperparameters initialized\")\n\nnworkers = 4\n\n# When using gen_on_manager, nworkers is number of concurrent sims.\n# final_gen_send means the last evaluated points are returned to the generator to update the model.\nlibE_specs = LibeSpecs(nworkers=nworkers, gen_on_manager=True, final_gen_send=True)\n\nn = 2 # Input dimensions\nbatch_size = 4\nnum_batches = 6\n\ngen_specs = GenSpecs(\n gen_f=persistent_gpCAM, # Generator function\n persis_in=[\"f\"], # Objective, defined in sim, is returned to gen\n outputs=[(\"x\", float, (n,))], # Parameters (name, type, size)\n user={\n \"batch_size\": batch_size,\n \"lb\": np.array([-2, -1]), # lower boundaries for n dimensions\n \"ub\": np.array([2, 1]), # upper boundaries for n dimensions\n \"ask_max_iter\": 5, # Number of iterations for ask (default 20)\n \"rng_seed\": 0,\n },\n)\n\nsim_specs = SimSpecs(\n sim_f=six_hump_camel, # Simulator function\n inputs=[\"x\"], # Input field names. \"x\" defined in gen\n outputs=[(\"f\", float)], # Objective\n)\n\n# Starts one persistent generator. Simulated values are returned in batch.\nalloc_specs = AllocSpecs(\n alloc_f=only_persistent_gens,\n user={\"async_return\": False}, # False = batch returns\n)\n\nexit_criteria = ExitCriteria(sim_max=num_batches*batch_size)\n\n# Initialize and run the ensemble.\nensemble = Ensemble(\n libE_specs=libE_specs,\n sim_specs=sim_specs,\n gen_specs=gen_specs,\n alloc_specs=alloc_specs,\n exit_criteria=exit_criteria,\n)\n\nAt the end of our calling script we run the ensemble.\n# To ensure re-running works - clean output and reset any persistent information\ncleanup()\nensemble.persis_info = {}\n\nH, persis_info, flag = ensemble.run() # Start the ensemble. Blocks until completion.\nensemble.save_output(\"H_array\", append_attrs=False) # Save H (history of all evaluated points) to file\npprint(H[[\"sim_id\", \"x\", \"f\"]][:16]) # See first 16 results\n\nRerun and test model at known points\uf0c1\nTo see how the accuracy of the surrogate model improves, we can use previously evaluated points as test points and run again with a different seed.\nensemble.gen_specs.user[\"rng_seed\"] = 123\nensemble.gen_specs.user[\"test_points_file\"] = \"H_array.npy\" # our previous file\n\n# To ensure re-running works - clean output and reset any persistent information\ncleanup()\nensemble.persis_info = {}\n\nH, persis_info, flag = ensemble.run()\nprint(persis_info)\n\nViewing model progression\uf0c1\nNow we can check how our model\u2019s values compared against the values at known test points as the ensemble progresses.\nThe comparison is based on the mean squared error between the gpCAM model and our known\nvalues at the test points.", "mimetype": "text/plain", "start_char_idx": 6599, "end_char_idx": 10170, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "6eeca64f-ab4d-43e3-83d7-1052cd798093": {"__data__": {"id_": "6eeca64f-ab4d-43e3-83d7-1052cd798093", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/gpcam_tutorial.html", "file_name": "gpcam_tutorial.html", "file_type": "text/html", "file_size": 53675, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bf00fd1d-c481-495b-a418-087765bd3fa6", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/gpcam_tutorial.html", "file_name": "gpcam_tutorial.html", "file_type": "text/html", "file_size": 53675, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "6802a395c17578385e3b01aea9f7a1addb2b48180a1e306507a44404c16744bc", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ee2827e4-27ba-43a2-888b-217c6f7ab068", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/gpcam_tutorial.html", "file_name": "gpcam_tutorial.html", "file_type": "text/html", "file_size": 53675, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "31c8fde9eb1ff2959e72a1417f4758783657a32078b760cbfcb4f68d5a982045", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "ensemble.gen_specs.user[\"rng_seed\"] = 123\nensemble.gen_specs.user[\"test_points_file\"] = \"H_array.npy\" # our previous file\n\n# To ensure re-running works - clean output and reset any persistent information\ncleanup()\nensemble.persis_info = {}\n\nH, persis_info, flag = ensemble.run()\nprint(persis_info)\n\nViewing model progression\uf0c1\nNow we can check how our model\u2019s values compared against the values at known test points as the ensemble progresses.\nThe comparison is based on the mean squared error between the gpCAM model and our known\nvalues at the test points.\nimport matplotlib\nimport matplotlib.pyplot as plt\n\n# Get \"mean_squared_error\" from generators return (worker 0 as we ran gen_on_manager)\nmse = persis_info[0][\"mean_squared_error\"]\nniter = len(mse)\nnum_sims = list(range(batch_size, (niter * batch_size) + 1, batch_size))\n\n# Plotting the data\nmarkersize = 10\nplt.figure(figsize=(10, 5))\nplt.plot(\n num_sims, mse, marker=\"^\", markeredgecolor=\"black\", markeredgewidth=2,\n markersize=markersize, linewidth=2, label=\"Mean squared error\"\n)\nplt.xticks(num_sims)\n\n# Labeling the axes and the legend\nplt.title('Mean Squared Error at test points')\nplt.xlabel(\"Number of simulations\")\nplt.ylabel('Mean squared error (rad$^2$)')\nlegend = plt.legend(framealpha=1, edgecolor=\"black\") # Increase edge width here\nplt.grid(True)\nplt.show()\n\nThe plot should look similar to the following.\n\nNote\nThe graph may differ between runs because, although we seed libEnsemble\u2019s random number generator,\ngpCAM introduces some randomness when initializing hyperparameters.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 9613, "end_char_idx": 11290, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "0c817a71-0816-4c95-862e-d8d48e8b51b9": {"__data__": {"id_": "0c817a71-0816-4c95-862e-d8d48e8b51b9", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/local_sine_tutorial.html", "file_name": "local_sine_tutorial.html", "file_type": "text/html", "file_size": 60909, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3c0c3742-d705-4e53-b369-4857fe9326ab", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/local_sine_tutorial.html", "file_name": "local_sine_tutorial.html", "file_type": "text/html", "file_size": 60909, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "12e1c8aede16cd9212886bb7eac114eee2319cbfde280cf1ae2167963a5d8929", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e7eb3957-da3a-4c95-8b10-c979538b6986", "node_type": "1", "metadata": {}, "hash": "c7f9d1acda44dc94d70f19df3335252ab2e2f8a65013ee35d9562a75e5e7400c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Simple Introduction \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nSimple Introduction\n\n View page source\n\nSimple Introduction\uf0c1\nThis tutorial demonstrates the capability to perform ensembles of\ncalculations in parallel using libEnsemble.\nWe recommend reading this brief Overview.\n\nFor this tutorial, our generator will produce uniform randomly sampled\nvalues, and our simulator will calculate the sine of each. By default we don\u2019t\nneed to write a new allocation function.\n\n1. Getting started\nlibEnsemble is written entirely in Python. Let\u2019s make sure\nthe correct version is installed.\npython --version # This should be >= 3.10\n\nFor this tutorial, you need NumPy and (optionally)\nMatplotlib to visualize your results. Install libEnsemble and these other\nlibraries with\npip install libensemble\npip install matplotlib # Optional\n\nIf your system doesn\u2019t allow you to perform these installations, try adding\n--user to the end of each command.\n\n2. Generator\nLet\u2019s begin the coding portion of this tutorial by writing our generator function,\nor gen_f.\nAn available libEnsemble worker will call this generator function with the\nfollowing parameters:\n\nInputArray: A selection of the History array (H),\npassed to the generator function in case the user wants to generate\nnew values based on simulation outputs. Since our generator produces random\nnumbers, it\u2019ll be ignored this time.\npersis_info: Dictionary with worker-specific\ninformation. In our case, this dictionary contains NumPy Random Stream objects\nfor generating random numbers.\ngen_specs: Dictionary with user-defined static fields and\nparameters. Customizable parameters such as lower and upper bounds and batch\nsizes are placed within the gen_specs[\"user\"] dictionary.\n\nLater on, we\u2019ll populate gen_specs and persis_info when we initialize libEnsemble.\nFor now, create a new Python file named sine_gen.py. Write the following:\n\nexamples/tutorials/simple_sine/sine_gen.py\uf0c1\n 1import numpy as np\n 2\n 3\n 4def gen_random_sample(InputArray, persis_info, gen_specs):\n 5 # Pull out user parameters\n 6 user_specs = gen_specs[\"user\"]\n 7\n 8 # Get lower and upper bounds\n 9 lower = user_specs[\"lower\"]\n10 upper = user_specs[\"upper\"]\n11\n12 # Determine how many values to generate\n13 num = len(lower)\n14 batch_size = user_specs[\"gen_batch_size\"]\n15\n16 # Create empty array of \"batch_size\" zeros. Array dtype should match \"out\" fields\n17 OutputArray = np.zeros(batch_size, dtype=gen_specs[\"out\"])\n18\n19 # Set the \"x\" output field to contain random numbers, using random stream\n20 OutputArray[\"x\"] = persis_info[\"rand_stream\"].uniform(lower, upper, (batch_size, num))\n21\n22 # Send back our output and persis_info\n23 return OutputArray, persis_info\n\nOur function creates batch_size random numbers uniformly distributed\nbetween the lower and upper bounds. A random stream\nfrom persis_info is used to generate these values, which are then placed\ninto an output NumPy array that matches the dtype from gen_specs[\"out\"].\n\n3. Simulator\nNext, we\u2019ll write our simulator function or sim_f. Simulator\nfunctions perform calculations based on values from the generator function.\nThe only new parameter here is sim_specs, which\nserves a purpose similar to the gen_specs dictionary.\nCreate a new Python file named sine_sim.py.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3851, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "e7eb3957-da3a-4c95-8b10-c979538b6986": {"__data__": {"id_": "e7eb3957-da3a-4c95-8b10-c979538b6986", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/local_sine_tutorial.html", "file_name": "local_sine_tutorial.html", "file_type": "text/html", "file_size": 60909, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3c0c3742-d705-4e53-b369-4857fe9326ab", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/local_sine_tutorial.html", "file_name": "local_sine_tutorial.html", "file_type": "text/html", "file_size": 60909, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "12e1c8aede16cd9212886bb7eac114eee2319cbfde280cf1ae2167963a5d8929", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0c817a71-0816-4c95-862e-d8d48e8b51b9", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/local_sine_tutorial.html", "file_name": "local_sine_tutorial.html", "file_type": "text/html", "file_size": 60909, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "a66aa4eea8530e6fd40718ef89e573e7d49dcf3cb59498577db23fbacaba05e4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "714b41f3-b2c4-453c-b73a-979bbe828b4f", "node_type": "1", "metadata": {}, "hash": "ed3797e53b86679cd7efc978af4df4d33bd1ba3534f72f9bc338a63c5b893721", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "A random stream\nfrom persis_info is used to generate these values, which are then placed\ninto an output NumPy array that matches the dtype from gen_specs[\"out\"].\n\n3. Simulator\nNext, we\u2019ll write our simulator function or sim_f. Simulator\nfunctions perform calculations based on values from the generator function.\nThe only new parameter here is sim_specs, which\nserves a purpose similar to the gen_specs dictionary.\nCreate a new Python file named sine_sim.py. Write the following:\n\nexamples/tutorials/simple_sine/sine_sim.py\uf0c1\n 1import numpy as np\n 2\n 3\n 4def sim_find_sine(InputArray, _, sim_specs):\n 5 # Create an output array of a single zero\n 6 OutputArray = np.zeros(1, dtype=sim_specs[\"out\"])\n 7\n 8 # Set the zero to the sine of the InputArray value\n 9 OutputArray[\"y\"] = np.sin(InputArray[\"x\"])\n10\n11 # Send back our output\n12 return OutputArray\n\nOur simulator function is called by a worker for every work item produced by\nthe generator function. This function calculates the sine of the passed value,\nand then returns it so the worker can store the result.\n\n4. Script\nNow lets write the script that configures our generator and simulator\nfunctions and starts libEnsemble.\nCreate an empty Python file named calling.py.\nIn this file, we\u2019ll start by importing NumPy, libEnsemble\u2019s setup classes,\nand the generator and simulator functions we just created.\nIn a class called LibeSpecs we\u2019ll\nspecify the number of workers and the manager/worker intercommunication method.\n\"local\", refers to Python\u2019s multiprocessing.\n1import numpy as np\n2from sine_gen import gen_random_sample\n3from sine_sim import sim_find_sine\n4\n5from libensemble import Ensemble\n6from libensemble.specs import ExitCriteria, GenSpecs, LibeSpecs, SimSpecs\n7\n8if __name__ == \"__main__\": # Python-quirk required on macOS and windows\n9 libE_specs = LibeSpecs(nworkers=4, comms=\"local\")\n\nWe configure the settings and specifications for our sim_f and gen_f\nfunctions in the GenSpecs and\nSimSpecs classes, which we saw previously\nbeing passed to our functions as dictionaries.\nThese classes also describe to libEnsemble what inputs and outputs from those\nfunctions to expect.\n10 gen_specs = GenSpecs(\n11 gen_f=gen_random_sample, # Our generator function\n12 out=[(\"x\", float, (1,))], # gen_f output (name, type, size)\n13 user={\n14 \"lower\": np.array([-3]), # lower boundary for random sampling\n15 \"upper\": np.array([3]), # upper boundary for random sampling\n16 \"gen_batch_size\": 5, # number of x's gen_f generates per call\n17 },\n18 )\n19\n20 sim_specs = SimSpecs(\n21 sim_f=sim_find_sine, # Our simulator function\n22 inputs=[\"x\"], # InputArray field names. \"x\" from gen_f output\n23 out=[(\"y\", float)], # sim_f output. \"y\" = sine(\"x\")\n24 ) # sim_specs_end_tag\n\nWe then specify the circumstances where\nlibEnsemble should stop execution in ExitCriteria.\n26 exit_criteria = ExitCriteria(sim_max=80) # Stop libEnsemble after 80 simulations\n\nNow we\u2019re ready to write our libEnsemble libE\nfunction call. ensemble.H is the final version of\nthe history array. ensemble.flag should be zero if no errors occur.\n28 ensemble = Ensemble(sim_specs, gen_specs, exit_criteria, libE_specs)\n29 ensemble.add_random_streams() # setup the random streams unique to each worker\n30 ensemble.run() # start the ensemble. Blocks until completion.\n31\n32 history = ensemble.H # start visualizing our results\n33\n34 print([i for i in history.dtype.fields]) # (optional) to visualize our history array\n35 print(history)\n\nThat\u2019s it! Now that these files are complete, we can run our simulation.\npython calling.py\n\nIf everything ran perfectly and you included the above print statements, you\nshould get something similar to the following output (although the\ncolumns might be rearranged).", "mimetype": "text/plain", "start_char_idx": 3393, "end_char_idx": 7105, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "714b41f3-b2c4-453c-b73a-979bbe828b4f": {"__data__": {"id_": "714b41f3-b2c4-453c-b73a-979bbe828b4f", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/local_sine_tutorial.html", "file_name": "local_sine_tutorial.html", "file_type": "text/html", "file_size": 60909, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3c0c3742-d705-4e53-b369-4857fe9326ab", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/local_sine_tutorial.html", "file_name": "local_sine_tutorial.html", "file_type": "text/html", "file_size": 60909, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "12e1c8aede16cd9212886bb7eac114eee2319cbfde280cf1ae2167963a5d8929", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e7eb3957-da3a-4c95-8b10-c979538b6986", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/local_sine_tutorial.html", "file_name": "local_sine_tutorial.html", "file_type": "text/html", "file_size": 60909, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "787877efaf45701f0fc28d6466f36e32462788a88cdd366b235f286de6a4772c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d1c5aac5-e6c9-4351-a166-e30484ee7650", "node_type": "1", "metadata": {}, "hash": "bf46318297b54337a0faae1114dbbdcf67883b4e5570f756ad87baceb3828467", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "ensemble.H is the final version of\nthe history array. ensemble.flag should be zero if no errors occur.\n28 ensemble = Ensemble(sim_specs, gen_specs, exit_criteria, libE_specs)\n29 ensemble.add_random_streams() # setup the random streams unique to each worker\n30 ensemble.run() # start the ensemble. Blocks until completion.\n31\n32 history = ensemble.H # start visualizing our results\n33\n34 print([i for i in history.dtype.fields]) # (optional) to visualize our history array\n35 print(history)\n\nThat\u2019s it! Now that these files are complete, we can run our simulation.\npython calling.py\n\nIf everything ran perfectly and you included the above print statements, you\nshould get something similar to the following output (although the\ncolumns might be rearranged).\n[\"y\", \"sim_started_time\", \"gen_worker\", \"sim_worker\", \"sim_started\", \"sim_ended\", \"x\", \"allocated\", \"sim_id\", \"gen_ended_time\"]\n[(-0.37466051, 1.559+09, 2, 2, True, True, [-0.38403059], True, 0, 1.559+09)\n(-0.29279634, 1.559+09, 2, 3, True, True, [-2.84444261], True, 1, 1.559+09)\n( 0.29358492, 1.559+09, 2, 4, True, True, [ 0.29797487], True, 2, 1.559+09)\n(-0.3783986, 1.559+09, 2, 1, True, True, [-0.38806564], True, 3, 1.559+09)\n(-0.45982062, 1.559+09, 2, 2, True, True, [-0.47779319], True, 4, 1.559+09)\n...\n\nIn this arrangement, our output values are listed on the far left with the\ngenerated values being the fourth column from the right.\nTwo additional log files should also have been created.\nensemble.log contains debugging or informational logging output from\nlibEnsemble, while libE_stats.txt contains a quick summary of all\ncalculations performed.\nHere is graphed output using Matplotlib, with entries colored by which\nworker performed the simulation:\n\nIf you want to verify your results through plotting and installed Matplotlib\nearlier, copy and paste the following code into the bottom of your calling\nscript and run python calling.py again\n37 import matplotlib.pyplot as plt\n38\n39 colors = [\"b\", \"g\", \"r\", \"y\", \"m\", \"c\", \"k\", \"w\"]\n40\n41 for i in range(1, libE_specs.nworkers + 1):\n42 worker_xy = np.extract(history[\"sim_worker\"] == i, history)\n43 x = [entry.tolist()[0] for entry in worker_xy[\"x\"]]\n44 y = [entry for entry in worker_xy[\"y\"]]\n45 plt.scatter(x, y, label=\"Worker {}\".format(i), c=colors[i - 1])\n46\n47 plt.title(\"Sine calculations for a uniformly sampled random distribution\")\n48 plt.xlabel(\"x\")\n49 plt.ylabel(\"sine(x)\")\n50 plt.legend(loc=\"lower right\")\n51 plt.savefig(\"tutorial_sines.png\")\n\nEach of these example files can be found in the repository in examples/tutorials/simple_sine.", "mimetype": "text/plain", "start_char_idx": 6349, "end_char_idx": 8920, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d1c5aac5-e6c9-4351-a166-e30484ee7650": {"__data__": {"id_": "d1c5aac5-e6c9-4351-a166-e30484ee7650", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/local_sine_tutorial.html", "file_name": "local_sine_tutorial.html", "file_type": "text/html", "file_size": 60909, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3c0c3742-d705-4e53-b369-4857fe9326ab", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/local_sine_tutorial.html", "file_name": "local_sine_tutorial.html", "file_type": "text/html", "file_size": 60909, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "12e1c8aede16cd9212886bb7eac114eee2319cbfde280cf1ae2167963a5d8929", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "714b41f3-b2c4-453c-b73a-979bbe828b4f", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/local_sine_tutorial.html", "file_name": "local_sine_tutorial.html", "file_type": "text/html", "file_size": 60909, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "cab417193933d502e253e31d634e01fecd6ab9259b2007e99bdd3e0f4e91c8e3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ba590121-2b55-43cc-9f04-8d5a8a85753b", "node_type": "1", "metadata": {}, "hash": "773781b2641a33eda3597543739918913ebdb86dd61ee5505ac16a03f2edee9f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Exercise\nWrite a Calling Script with the following specifications:\n\nSet the generator function\u2019s lower and upper bounds to -6 and 6, respectively\nIncrease the generator batch size to 10\nSet libEnsemble to stop execution after 160 generations using the gen_max option\nPrint an error message if any errors occurred while libEnsemble was running\n\nClick Here for Solution\n 1import numpy as np\n 2from sine_gen import gen_random_sample\n 3from sine_sim import sim_find_sine\n 4\n 5from libensemble import Ensemble\n 6from libensemble.specs import ExitCriteria, GenSpecs, LibeSpecs, SimSpecs\n 7\n 8if __name__ == \"__main__\":\n 9 libE_specs = LibeSpecs(nworkers=4, comms=\"local\")\n10\n11 gen_specs = GenSpecs(\n12 gen_f=gen_random_sample, # Our generator function\n13 out=[(\"x\", float, (1,))], # gen_f output (name, type, size)\n14 user={\n15 \"lower\": np.array([-6]), # lower boundary for random sampling\n16 \"upper\": np.array([6]), # upper boundary for random sampling\n17 \"gen_batch_size\": 10, # number of x's gen_f generates per call\n18 },\n19 )\n20\n21 sim_specs = SimSpecs(\n22 sim_f=sim_find_sine, # Our simulator function\n23 inputs=[\"x\"], # InputArray field names. \"x\" from gen_f output\n24 out=[(\"y\", float)], # sim_f output. \"y\" = sine(\"x\")\n25 )\n26\n27 exit_criteria = ExitCriteria(gen_max=160)\n28\n29 ensemble = Ensemble(sim_specs, gen_specs, exit_criteria, libE_specs)\n30 ensemble.add_random_streams()\n31 ensemble.run()\n32\n33 if ensemble.flag != 0:\n34 print(\"Oh no! An error occurred!\")\n\n5. Next steps\nlibEnsemble with MPI\nMPI is a standard interface for parallel computing, implemented in libraries\nsuch as MPICH and used at extreme scales. MPI potentially allows libEnsemble\u2019s\nprocesses to be distributed over multiple nodes and works in some\ncircumstances where Python\u2019s multiprocessing does not. In this section, we\u2019ll\nexplore modifying the above code to use MPI instead of multiprocessing.\nWe recommend the MPI distribution MPICH for this tutorial, which can be found\nfor a variety of systems here. You also need mpi4py, which can be installed\nwith pip install mpi4py. If you\u2019d like to use a specific version or\ndistribution of MPI instead of MPICH, configure mpi4py with that MPI at\ninstallation with MPICC=<path/to/MPI_C_compiler> pip install mpi4py If this\ndoesn\u2019t work, try appending --user to the end of the command. See the\nmpi4py docs for more information.\nVerify that MPI has been installed correctly with mpirun --version.\nModifying the script\nOnly a few changes are necessary to make our code MPI-compatible. For starters,\ncomment out the libE_specs definition:\n # libE_specs = LibeSpecs(nworkers=4, comms=\"local\")\n\nWe\u2019ll be parameterizing our MPI runtime with a parse_args=True argument to\nthe Ensemble class instead of libE_specs. We\u2019ll also use an ensemble.is_manager\nattribute so only the first MPI rank runs the data-processing code.\nThe bottom of your calling script should now resemble:\n28 # replace libE_specs with parse_args=True. Detects MPI runtime\n29 ensemble = Ensemble(sim_specs, gen_specs, exit_criteria, parse_args=True)\n30\n31 ensemble.add_random_streams()\n32 ensemble.run() # start the ensemble. Blocks until completion.", "mimetype": "text/plain", "start_char_idx": 8921, "end_char_idx": 12055, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ba590121-2b55-43cc-9f04-8d5a8a85753b": {"__data__": {"id_": "ba590121-2b55-43cc-9f04-8d5a8a85753b", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/local_sine_tutorial.html", "file_name": "local_sine_tutorial.html", "file_type": "text/html", "file_size": 60909, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3c0c3742-d705-4e53-b369-4857fe9326ab", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/local_sine_tutorial.html", "file_name": "local_sine_tutorial.html", "file_type": "text/html", "file_size": 60909, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "12e1c8aede16cd9212886bb7eac114eee2319cbfde280cf1ae2167963a5d8929", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d1c5aac5-e6c9-4351-a166-e30484ee7650", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/local_sine_tutorial.html", "file_name": "local_sine_tutorial.html", "file_type": "text/html", "file_size": 60909, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "caec3bfa02c6cb011cbf551d589373461f1c29741f23d8cf6eed961f4f52742c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "See the\nmpi4py docs for more information.\nVerify that MPI has been installed correctly with mpirun --version.\nModifying the script\nOnly a few changes are necessary to make our code MPI-compatible. For starters,\ncomment out the libE_specs definition:\n # libE_specs = LibeSpecs(nworkers=4, comms=\"local\")\n\nWe\u2019ll be parameterizing our MPI runtime with a parse_args=True argument to\nthe Ensemble class instead of libE_specs. We\u2019ll also use an ensemble.is_manager\nattribute so only the first MPI rank runs the data-processing code.\nThe bottom of your calling script should now resemble:\n28 # replace libE_specs with parse_args=True. Detects MPI runtime\n29 ensemble = Ensemble(sim_specs, gen_specs, exit_criteria, parse_args=True)\n30\n31 ensemble.add_random_streams()\n32 ensemble.run() # start the ensemble. Blocks until completion.\n33\n34 if ensemble.is_manager: # only True on rank 0\n35 history = ensemble.H # start visualizing our results\n36 print([i for i in history.dtype.fields])\n37 print(history)\n38\n39 import matplotlib.pyplot as plt\n40\n41 colors = [\"b\", \"g\", \"r\", \"y\", \"m\", \"c\", \"k\", \"w\"]\n42\n43 for i in range(1, ensemble.nworkers + 1):\n44 worker_xy = np.extract(history[\"sim_worker\"] == i, history)\n45 x = [entry.tolist()[0] for entry in worker_xy[\"x\"]]\n46 y = [entry for entry in worker_xy[\"y\"]]\n47 plt.scatter(x, y, label=\"Worker {}\".format(i), c=colors[i - 1])\n48\n49 plt.title(\"Sine calculations for a uniformly sampled random distribution\")\n50 plt.xlabel(\"x\")\n51 plt.ylabel(\"sine(x)\")\n52 plt.legend(loc=\"lower right\")\n53 plt.savefig(\"tutorial_sines.png\")\n\nWith these changes in place, our libEnsemble code can be run with MPI by\nmpirun -n 5 python calling.py\n\nwhere -n 5 tells mpirun to produce five processes, one of which will be\nthe manager process with the libEnsemble manager and the other four will run\nlibEnsemble workers.\nThis tutorial is only a tiny demonstration of the parallelism capabilities of\nlibEnsemble. libEnsemble has been developed primarily to support research on\nHigh-Performance computers, with potentially hundreds of workers performing\ncalculations simultaneously. Please read our\nplatform guides for introductions to using\nlibEnsemble on many such machines.\nlibEnsemble\u2019s Executors can launch non-Python user applications and simulations across\nallocated compute resources. Try out this feature with a more-complicated\nlibEnsemble use-case within our\nElectrostatic Forces tutorial.\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 11230, "end_char_idx": 13770, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "152085ec-e2e3-403b-9b89-6247243d4fdc": {"__data__": {"id_": "152085ec-e2e3-403b-9b89-6247243d4fdc", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/tutorials.html", "file_name": "tutorials.html", "file_type": "text/html", "file_size": 14104, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "eec2804d-d292-430e-9566-2706da4f20fd", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/tutorials/tutorials.html", "file_name": "tutorials.html", "file_type": "text/html", "file_size": 14104, "creation_date": "2025-11-25", "last_modified_date": "2025-04-11"}, "hash": "480e46cf509ebd385013687ea572a8d92f2f8cfc93eeb4ab04d0193806e45552", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Tutorials \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nTutorials\n\n View page source\n\nTutorials\uf0c1\n\nSimple Introduction\nEnsemble with an MPI Application\nGetting Started\nCalling Script\nExercise\n\nSimulation Function\nRunning the example\nExercises\n\nRunning the generator on the manager\nRunning forces application with input file\nMultiple parameters\n\nExecutor - Assign GPUs\nSimulation function\nCompiling the Forces application\nRunning the example\nChanging the number of GPUs per worker\nVarying resources\nMultiple applications\nChecking GPU usage\nExample submission script\n\nSurrogate Modeling with gpCAM\nGenerator function\nSimulator function\nCalling Script\nRerun and test model at known points\nViewing model progression\n\nOptimization with APOSMM\nSix-Hump Camel Simulation Function\nAPOSMM Operations\nAPOSMM Persistence\nCalling Script\nFinal Setup, Run, and Output\nApplications\n\nCalibration with Simulation Cancellation\nIntroduction - Calibration with libEnsemble and a Regression Model\nOverview of the Calibration Problem\nPoint Cancellation Requests and Dedicated Fields\nAllocation Function and Cancellation Configuration\nCalling Script - Reading Results\nUsing cancellations to kill running simulations\n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1904, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "b4bc183b-9699-4558-b3e0-8791d7b8287b": {"__data__": {"id_": "b4bc183b-9699-4558-b3e0-8791d7b8287b", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/utilities.html", "file_name": "utilities.html", "file_type": "text/html", "file_size": 60875, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b7e86265-8d4c-460a-95e7-3b7d5e9cbc24", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/utilities.html", "file_name": "utilities.html", "file_type": "text/html", "file_size": 60875, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "94eeab4e4c2f8389dd061ceb56ff445164e32fb54595d2742173ecbb7aa9d74a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d4a81238-bb81-42ae-90f3-243e54832e7e", "node_type": "1", "metadata": {}, "hash": "92dd4fe380da5346f66c9f55a66620941f4d424e3d5e0982b3ff9b82979d83be", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Convenience Tools and Functions \u2014 libEnsemble\n\nUser Guide:\n\nQuickstart\nAdvanced Installation\nUnderstanding libEnsemble\nConstructing Workflows\nRunning an Ensemble\nConfiguring libEnsemble\nOutput Management\nHistory Array\nResource Manager\nWriting User Functions\nExecutors\nConvenience Tools and Functions\nadd_unique_random_streams()\ncheck_npy_file_exists()\neprint()\nForkablePdb\nparse_args()\nsave_libE_output()\nPersistentSupport\nPersistentSupport.send()\nPersistentSupport.recv()\nPersistentSupport.send_recv()\nPersistentSupport.request_cancel_sim_ids()\n\nAllocException\nAllocSupport\nAllocSupport.assign_resources()\nAllocSupport.avail_worker_ids()\nAllocSupport.count_gens()\nAllocSupport.test_any_gen()\nAllocSupport.count_persis_gens()\nAllocSupport.sim_work()\nAllocSupport.gen_work()\nAllocSupport.all_sim_started()\nAllocSupport.all_sim_ended()\nAllocSupport.all_gen_informed()\nAllocSupport.points_by_priority()\nAllocSupport.skip_canceled_points()\n\nRunning libEnsemble\nRunning on HPC Systems\n\nTutorials:\n\nSimple Introduction\nEnsemble with an MPI Application\nExecutor - Assign GPUs\nSurrogate Modeling with gpCAM\nOptimization with APOSMM\nCalibration with Simulation Cancellation\n\nExamples:\n\nGenerator Functions\nSimulation Functions\nAllocation Functions\nCalling Scripts\nSubmission Scripts\n\nAdditional References:\n\nFrequently Asked Questions\nKnown Issues\nRelease Notes\nContributing to libEnsemble\nPosters and Presentations\n\nDeveloper Guide:\n\nRelease Management\nInternal Modules\n\nlibEnsemble\n\nConstructing Workflows\nConvenience Tools and Functions\n\n View page source\n\nConvenience Tools and Functions\uf0c1\n\nSetup Helpers\n\ntools.add_unique_random_streams(persis_info, nstreams, seed='')\uf0c1\nCreates nstreams random number streams for the libE manager and workers\nwhen nstreams is num_workers + 1. Stream i is initialized with seed i by default.\nOtherwise the streams can be initialized with a provided seed.\nThe entries are appended to the provided persis_info dictionary.\npersis_info = add_unique_random_streams(old_persis_info, nworkers + 1)\n\nParameters:\n\npersis_info (dict) \u2013 Persistent information dictionary.\n(example)\nnstreams (int) \u2013 Number of independent random number streams to produce.\nseed (int) \u2013 (Optional) Seed for identical random number streams for each worker. If\nexplicitly set to None, random number streams are unique and seed\nvia other pseudorandom mechanisms.\n\nReturn type:\ndict\n\ntools.check_npy_file_exists(filename, basename=False, max_wait=3)\uf0c1\nChecks a file is created in a parallel environment\n\nParameters:\n\nfilename (str) \u2013 Name of file.\nbasename (bool) \u2013 Whether name provided is a basename for save_libE_output.\nmax_wait (int) \u2013 The maximum number of seconds to wait for the file to exist.\n\nReturn type:\nbool\n\ntools.eprint(*args, **kwargs)\uf0c1\nPrints a user message to standard error\n\nclass tools.ForkablePdb(completekey='tab', stdin=None, stdout=None, skip=None, nosigint=False, readrc=True)\uf0c1\nA Pdb subclass that may be used\nfrom a forked multiprocessing child\nUsage:\nfrom libensemble.tools import ForkablePdb\n\nForkablePdb().set_trace()\n\ntools.parse_args()\uf0c1\nParses command-line arguments. Use in calling script.\nfrom libensemble.tools import parse_args\n\nnworkers, is_manager, libE_specs, misc_args = parse_args()\n\nOr for object interface, when creating the ensemble object.\nfrom libensemble import Ensemble\n\nensemble = Ensemble(parse_args=True)\n\nFrom the shell:\n$ python calling_script --comms local --nworkers 4\n\nUsage:\nusage: test_... [-h] [--comms [{local, tcp, ssh, client, mpi}]]\n [--nworkers [NWORKERS]] [--workers WORKERS [WORKERS ...]]\n [--nsim_workers [NSIM_WORKERS]]\n [--nresource_sets [NRESOURCE_SETS]]\n [--workerID [WORKERID]] [--server SERVER SERVER SERVER]\n [--pwd [PWD]] [--worker_pwd [WORKER_PWD]]\n [--worker_python [WORKER_PYTHON]]\n [--tester_args [TESTER_ARGS [TESTER_ARGS ...]]]\n\nNote that running via an MPI runner uses the default 'mpi' comms, and '--nworkers'\nwill be ignored. The number of processes are supplied via the MPI run line. One being\nthe manager, and the rest are workers.\n\n--comms, Communications medium for manager and workers.\n Default is 'local' if --nworkers is provided, otherwise 'mpi'.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4129, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d4a81238-bb81-42ae-90f3-243e54832e7e": {"__data__": {"id_": "d4a81238-bb81-42ae-90f3-243e54832e7e", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/utilities.html", "file_name": "utilities.html", "file_type": "text/html", "file_size": 60875, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b7e86265-8d4c-460a-95e7-3b7d5e9cbc24", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/utilities.html", "file_name": "utilities.html", "file_type": "text/html", "file_size": 60875, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "94eeab4e4c2f8389dd061ceb56ff445164e32fb54595d2742173ecbb7aa9d74a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b4bc183b-9699-4558-b3e0-8791d7b8287b", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/utilities.html", "file_name": "utilities.html", "file_type": "text/html", "file_size": 60875, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "7cc43f9d32253bff69215873c87af92320c1bc196b4787ff076bd340283e7f8c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2c118644-acfc-4ac9-a895-e470030888d5", "node_type": "1", "metadata": {}, "hash": "e31ebe9cbe1a4cf195360f3d16da57ccd5aa3b1651ef51b50f84a696282d09d3", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "The number of processes are supplied via the MPI run line. One being\nthe manager, and the rest are workers.\n\n--comms, Communications medium for manager and workers.\n Default is 'local' if --nworkers is provided, otherwise 'mpi'.\n--nworkers/-n, (For 'local' or 'tcp' comms) Set number of workers.\n--nresource_sets, Explicitly set the number of resource sets. This sets\n libE_specs[\"num_resource_sets\"]. By default, resources will be\n divided by workers (excluding zero_resource_workers).\n--nsim_workers, (For 'local\" or 'mpi' comms) A convenience option for cases with\n persistent generators - sets the number of simulation workers.\n If used with no other criteria, one additional worker for running a\n generator will be added, and the number of resource sets will be assigned\n the given value. If '--nworkers' has also been specified, will generate\n enough additional workers to match the other criteria. If '--nresource_sets'\n is also specified, will not override resource sets.\n\nExample command lines:\n\nRun with 'local' comms and 4 workers (the following are equivalent).\n$ python calling_script --comms local --nworkers 4\n$ python calling_script --nworkers 4\n$ python calling_script -n 4\n\nRun with 'local' comms and 5 workers - one gen worker (no resources), and 4 sim workers.\n$ python calling_script --comms local --nsim_workers 4\n\nRun with 'local' comms with 4 workers and 8 resource sets. The extra resource sets will\nbe used for larger simulations (using variable resource assignment).\n$ python calling_script --comms local --nresource_sets 8\n\nPrevious example with 'mpi' comms.\n$ mpirun -np 5 python calling_script --nresource_sets 8\n\nReturns:\n\nnworkers (int) \u2013 Number of workers libEnsemble will initiate\nis_manager (bool) \u2013 Indicates whether the current process is the manager process\nlibE_specs (dict) \u2013 Settings and specifications for libEnsemble\n(example)\n\ntools.save_libE_output(H, persis_info, basename, nworkers, dest_path=None, mess='Run completed', append_attrs=True)\uf0c1\nWrites out history array and persis_info to files.\nFormat: <basename>_results_History_length=<length>_evals=<Completed evals>_ranks=<nworkers>\nTo use just basename, set append_attrs=False\nsave_libE_output(H, persis_info, __file__, nworkers)\n\nParameters:\n\nH (NumPy structured array) \u2013 History array storing rows for each point.\n(example)\npersis_info (dict) \u2013 Persistent information dictionary.\n(example)\nbasename (str) \u2013 Name of user-calling script (or user chosen name) to prefix output files.\nThe convention is to send __file__ from user calling script.\nnworkers (int) \u2013 The number of workers in this ensemble. Added to output file names.\ndest_path (str, optional) \u2013 The path to save the file to.\nmess (str) \u2013 A message to print/log when saving the file.\nappend_attrs (bool) \u2013 Append run attributes to the base filename.\n\nReturn type:\nstr\n\nPersistent Helpers\nThese routines are commonly used within persistent generator functions\nsuch as persistent_aposmm in libensemble/gen_funcs/ for intermediate\ncommunication with the manager. Persistent simulator functions are also supported.\n\nclass persistent_support.PersistentSupport(libE_info, calc_type)\uf0c1\nA helper class to assist with writing persistent user functions.\n\nParameters:\n\nlibE_info (dict[str, dict])\ncalc_type (int)\n\nsend(output, calc_status=0, keep_state=False)\uf0c1\nSend message from worker to manager.\n\nParameters:\n\noutput (ndarray[tuple[int, ...], dtype[_ScalarType_co]]) \u2013 Output array to be sent to manager.\ncalc_status (int) \u2013 (Optional) Provides a task status.\nkeep_state \u2013 (Optional) If True the manager will not modify its\nrecord of the workers state (usually the manager changes the\nworker\u2019s state to inactive, indicating the worker is ready to receive\nmore work, unless using active receive mode).\n\nReturn type:\nNone\n\nrecv(blocking=True)\uf0c1\nReceive message to worker from manager.\n\nParameters:\nblocking (bool) \u2013 (Optional) If True (default), will block until a message is received.", "mimetype": "text/plain", "start_char_idx": 3901, "end_char_idx": 7833, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "2c118644-acfc-4ac9-a895-e470030888d5": {"__data__": {"id_": "2c118644-acfc-4ac9-a895-e470030888d5", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/utilities.html", "file_name": "utilities.html", "file_type": "text/html", "file_size": 60875, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b7e86265-8d4c-460a-95e7-3b7d5e9cbc24", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/utilities.html", "file_name": "utilities.html", "file_type": "text/html", "file_size": 60875, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "94eeab4e4c2f8389dd061ceb56ff445164e32fb54595d2742173ecbb7aa9d74a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d4a81238-bb81-42ae-90f3-243e54832e7e", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/utilities.html", "file_name": "utilities.html", "file_type": "text/html", "file_size": 60875, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "3ff721586ce74122f7d3b3061cfbf2d27544c3af09fc176fe51b5c68505e21b5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ebab48e7-52b9-4d97-a439-f27104f7e514", "node_type": "1", "metadata": {}, "hash": "723fa74c6568b9601ecd1a6fa30d5152db691d4575f263ad3c38bb60be37722a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "class persistent_support.PersistentSupport(libE_info, calc_type)\uf0c1\nA helper class to assist with writing persistent user functions.\n\nParameters:\n\nlibE_info (dict[str, dict])\ncalc_type (int)\n\nsend(output, calc_status=0, keep_state=False)\uf0c1\nSend message from worker to manager.\n\nParameters:\n\noutput (ndarray[tuple[int, ...], dtype[_ScalarType_co]]) \u2013 Output array to be sent to manager.\ncalc_status (int) \u2013 (Optional) Provides a task status.\nkeep_state \u2013 (Optional) If True the manager will not modify its\nrecord of the workers state (usually the manager changes the\nworker\u2019s state to inactive, indicating the worker is ready to receive\nmore work, unless using active receive mode).\n\nReturn type:\nNone\n\nrecv(blocking=True)\uf0c1\nReceive message to worker from manager.\n\nParameters:\nblocking (bool) \u2013 (Optional) If True (default), will block until a message is received.\n\nReturns:\nmessage tag, Work dictionary, calc_in array\n\nReturn type:\n(<class \u2018int\u2019>, <class \u2018dict\u2019>, numpy.ndarray[tuple[int, \u2026], numpy.dtype[+_ScalarType_co]])\n\nsend_recv(output, calc_status=0)\uf0c1\nSend message from worker to manager and receive response.\n\nParameters:\n\noutput (ndarray[tuple[int, ...], dtype[_ScalarType_co]]) \u2013 Output array to be sent to manager.\ncalc_status (int) \u2013 (Optional) Provides a task status.\n\nReturns:\nmessage tag, Work dictionary, calc_in array\n\nReturn type:\n(<class \u2018int\u2019>, <class \u2018dict\u2019>, numpy.ndarray[tuple[int, \u2026], numpy.dtype[+_ScalarType_co]])\n\nrequest_cancel_sim_ids(sim_ids)\uf0c1\nRequest cancellation of sim_ids.\n\nParameters:\nsim_ids (list[int]) \u2013 A list of sim_ids to cancel.\n\nA message is sent to the manager to mark requested sim_ids as cancel_requested.\n\nAllocation Helpers\nThese routines are used within custom allocation functions to help prepare Work\nstructures for workers. See the routines within libensemble/alloc_funcs/ for\nexamples.\n\nexception alloc_support.AllocException\uf0c1\nRaised for any exception in the alloc support\n\nclass alloc_support.AllocSupport(W, manage_resources=False, persis_info={}, libE_info={}, user_resources=None, user_scheduler=None)\uf0c1\nA helper class to assist with writing allocation functions.\nThis class contains methods for common operations like populating work\nunits, determining which workers are available, evaluating what values\nneed to be distributed to workers, and others.\nNote that since the alloc_f is called periodically by the Manager, this\nclass instance (if used) will be recreated/destroyed on each loop.\n\nassign_resources(rsets_req, use_gpus=None, user_params=[])\uf0c1\nSchedule resource sets to a work record if possible.\nFor default scheduler, if more than one group (node) is required,\nwill try to find even split, otherwise allocates whole nodes.\nRaises InsufficientFreeResources if the required resources are not\ncurrently available, or InsufficientResourcesError if the required\nresources do not exist.\n\nParameters:\n\nrsets_req \u2013 Int. Number of resource sets to request.\nuse_gpus \u2013 Bool. Whether to use GPU resource sets.\nuser_params \u2013 List of Integers. User parameters num_procs, num_gpus.\n\nReturns:\nList of Integers. Resource set indices assigned.\n\navail_worker_ids(persistent=None, active_recv=False, zero_resource_workers=None, gen_workers=None)\uf0c1\nReturns available workers as a list of IDs, filtered by the given options.\n\nParameters:\n\npersistent \u2013 (Optional) Int. Only return workers with given persis_state (1=sim, 2=gen).\nactive_recv \u2013 (Optional) Boolean. Only return workers with given active_recv state.\nzero_resource_workers \u2013 (Optional) Boolean. Only return workers that require no resources.\ngen_workers \u2013 (Optional) Boolean. If True, return gen-only workers. If False, return all other workers.\n\nReturns:\nList of worker IDs.\n\nIf there are no zero resource workers defined, then the zero_resource_workers argument will\nbe ignored.\n\ncount_gens()\uf0c1\nReturns the number of active generators.\n\ntest_any_gen()\uf0c1\nReturns True if a generator worker is active.\n\ncount_persis_gens()\uf0c1\nReturn the number of active persistent generators.\n\nsim_work(wid, H, H_fields, H_rows, persis_info, **libE_info)\uf0c1\nAdd sim work record to given Work dictionary.\n\nIncludes evaluation of required resources if the worker is not in a\npersistent state.\n\nParameters:\n\nwid \u2013 Int.", "mimetype": "text/plain", "start_char_idx": 6973, "end_char_idx": 11170, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ebab48e7-52b9-4d97-a439-f27104f7e514": {"__data__": {"id_": "ebab48e7-52b9-4d97-a439-f27104f7e514", "embedding": null, "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/utilities.html", "file_name": "utilities.html", "file_type": "text/html", "file_size": 60875, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b7e86265-8d4c-460a-95e7-3b7d5e9cbc24", "node_type": "4", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/utilities.html", "file_name": "utilities.html", "file_type": "text/html", "file_size": 60875, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "94eeab4e4c2f8389dd061ceb56ff445164e32fb54595d2742173ecbb7aa9d74a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2c118644-acfc-4ac9-a895-e470030888d5", "node_type": "1", "metadata": {"file_path": "/home/shudson/rag_src/libensemble.readthedocs.io/en/latest/utilities.html", "file_name": "utilities.html", "file_type": "text/html", "file_size": 60875, "creation_date": "2025-11-25", "last_modified_date": "2025-07-16"}, "hash": "87e5e32629da860deb74fe9992039780a0e8794015e61f4c0d9fad29a80f0546", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "active_recv \u2013 (Optional) Boolean. Only return workers with given active_recv state.\nzero_resource_workers \u2013 (Optional) Boolean. Only return workers that require no resources.\ngen_workers \u2013 (Optional) Boolean. If True, return gen-only workers. If False, return all other workers.\n\nReturns:\nList of worker IDs.\n\nIf there are no zero resource workers defined, then the zero_resource_workers argument will\nbe ignored.\n\ncount_gens()\uf0c1\nReturns the number of active generators.\n\ntest_any_gen()\uf0c1\nReturns True if a generator worker is active.\n\ncount_persis_gens()\uf0c1\nReturn the number of active persistent generators.\n\nsim_work(wid, H, H_fields, H_rows, persis_info, **libE_info)\uf0c1\nAdd sim work record to given Work dictionary.\n\nIncludes evaluation of required resources if the worker is not in a\npersistent state.\n\nParameters:\n\nwid \u2013 Int. Worker ID.\nH \u2013 History array. For parsing out requested resource sets.\nH_fields \u2013 Which fields from H to send.\nH_rows \u2013 Which rows of H to send.\npersis_info \u2013 Worker specific persis_info dictionary.\n\nReturns:\na Work entry.\n\nAdditional passed parameters are inserted into libE_info in the resulting work record.\nIf rset_team is passed as an additional parameter, it will be honored, assuming that\nany resource checking has already been done.\n\ngen_work(wid, H_fields, H_rows, persis_info, **libE_info)\uf0c1\nAdd gen work record to given Work dictionary.\n\nIncludes evaluation of required resources if the worker is not in a\npersistent state.\n\nParameters:\n\nWork \u2013 Work dictionary.\nwid \u2013 Worker ID.\nH_fields \u2013 Which fields from H to send.\nH_rows \u2013 Which rows of H to send.\npersis_info \u2013 Worker specific persis_info dictionary.\n\nReturns:\nA Work entry.\n\nAdditional passed parameters are inserted into libE_info in the resulting work record.\nIf rset_team is passed as an additional parameter, it will be honored, and assume that\nany resource checking has already been done. For example, passing rset_team=[], would\nensure that no resources are assigned.\n\nall_sim_started(H, pt_filter=None, low_bound=None)\uf0c1\nReturns True if all expected points have started their sim.\nExcludes cancelled points.\n\nParameters:\n\npt_filter \u2013 (Optional) Boolean array filtering expected returned points in H.\nlow_bound \u2013 (Optional) Lower bound for testing all returned.\n\nReturns:\nTrue if all expected points have started their sim.\n\nall_sim_ended(H, pt_filter=None, low_bound=None)\uf0c1\nReturns True if all expected points have had their sim_end.\nExcludes cancelled points that were not already sim_started.\n\nParameters:\n\npt_filter \u2013 (Optional) Boolean array filtering expected returned points in H.\nlow_bound \u2013 (Optional) Lower bound for testing all returned.\n\nReturns:\nTrue if all expected points have had their sim_end.\n\nall_gen_informed(H, pt_filter=None, low_bound=None)\uf0c1\nReturns True if gen has been informed of all expected points.\nExcludes cancelled points that were not already given out.\n\nParameters:\n\npt_filter \u2013 (Optional) Boolean array filtering expected sim_end points in H.\nlow_bound \u2013 (Optional) Lower bound for testing all returned.\n\nReturns:\nTrue if gen have been informed of all expected points.\n\npoints_by_priority(H, points_avail, batch=False)\uf0c1\nReturns indices of points to give by priority.\n\nParameters:\n\npoints_avail \u2013 Indices of points that are available to give.\nbatch \u2013 (Optional) Boolean. Should batches of points with the same priority be given simultaneously.\n\nReturns:\nAn array of point indices to give.\n\nskip_canceled_points(H, persis_info)\uf0c1\nIncrements the \u201cnext_to_give\u201d field in persis_info to skip any cancelled points\n\nLive Data\nThese classes provide a means to capture and display data during a workflow run.\nUsers may provide an initialized object via libE_specs[\"live_data\"]. For example:\nfrom libensemble.tools.live_data.plot2n import Plot2N\nlibE_specs[\"live_data\"] = Plot2N(plot_type='2d')\n\n Previous\nNext \n\n\u00a9 Copyright 2025 Argonne National Laboratory.\n\n Built with Sphinx using a\n theme\n provided by Read the Docs.", "mimetype": "text/plain", "start_char_idx": 10344, "end_char_idx": 14287, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}}}