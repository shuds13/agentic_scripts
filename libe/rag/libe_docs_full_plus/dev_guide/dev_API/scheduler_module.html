

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" />
  <meta name="readthedocs-addons-api-version" content="1"><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Scheduler Module &mdash; libEnsemble</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/autodoc_pydantic.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/my_theme.css?v=dd6640cf" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />

  
    <link rel="shortcut icon" href="../../_static/libE_logo_circle.png"/>
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=bcd630d1"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=f281be69"></script>
      <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../../_static/js/theme.js"></script>
    <script src="../../_static/js/versions.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="MPI Resources Module" href="mpi_resources_module.html" /> 
<script async type="text/javascript" src="/_/static/javascript/readthedocs-addons.js"></script><meta name="readthedocs-project-slug" content="libensemble" /><meta name="readthedocs-version-slug" content="latest" /><meta name="readthedocs-resolver-filename" content="/dev_guide/dev_API/scheduler_module.html" /><meta name="readthedocs-http-status" content="200" /></head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html">
            
              <img src="../../_static/libE_logo_white.png" class="logo" alt="Logo"/>
          </a>
              <div class="switch-menus">
                <div class="version-switch"></div>
                <div class="language-switch"></div>
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../advanced_installation.html">Advanced Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../overview_usecases.html">Understanding libEnsemble</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../programming_libE.html">Constructing Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../running_libE.html">Running libEnsemble</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../platforms/platforms_index.html">Running on HPC Systems</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/local_sine_tutorial.html">Simple Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/executor_forces_tutorial.html">Ensemble with an MPI Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/forces_gpu_tutorial.html">Executor - Assign GPUs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/gpcam_tutorial.html">Surrogate Modeling with gpCAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/aposmm_tutorial.html">Optimization with APOSMM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/calib_cancel_tutorial.html">Calibration with Simulation Cancellation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../examples/gen_funcs.html">Generator Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/sim_funcs.html">Simulation Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/alloc_funcs.html">Allocation Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/calling_scripts.html">Calling Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/submission_scripts.html">Submission Scripts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Additional References:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../FAQ.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../known_issues.html">Known Issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing to libEnsemble</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../posters.html">Posters and Presentations</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Guide:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../release_management/release_index.html">Release Management</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="developer_API.html">Internal Modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="manager_module.html">Manager Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="worker_module.html">Worker Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="history_module.html">History Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="resources_module.html">Resources Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="rset_resources_module.html">RSET Resources Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="worker_resources_module.html">Worker Resources Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="env_resources_module.html">Environment Resources Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="node_resources_module.html">Node Resources Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="mpi_resources_module.html">MPI Resources Module</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Scheduler Module</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">libEnsemble</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="developer_API.html">Internal Modules</a></li>
      <li class="breadcrumb-item active">Scheduler Module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/dev_guide/dev_API/scheduler_module.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="scheduler-module">
<h1>Scheduler Module<a class="headerlink" href="#scheduler-module" title="Link to this heading">ÔÉÅ</a></h1>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">resources.scheduler.</span></span><span class="sig-name descname"><span class="pre">ResourceScheduler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_resources</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sched_opts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Calculates and returns resource set ids from a dictionary of resource sets
by group. The available resource sets are read initially from the resources
module or from a resources object passed in.</p>
<p>Resource sets are locally provisioned to work items by a call to the
<code class="docutils literal notranslate"><span class="pre">assign_resources</span></code> function, and a cache of available resource sets is
maintained for the life of the object (usually corresponding to one call
of the allocation function). Note that work item resources are formally
assigned to workers only when a work item is sent to the worker.</p>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">assign_resources</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rsets_req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_gpus</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Schedule resource sets to a work item if possible.</p>
<p>If the resources required are less than one node, they will be
allocated to the smallest available sufficient slot.</p>
<p>If the resources required are more than one node, then
the scheduler will attempt to find an even split. If no even split
is possible, then enough additional resource sets will be
assigned to enable an even split.</p>
<p>Returns a list of resource set IDs or raises an exception (either
InsufficientResourcesError or InsufficientFreeResources).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">find_rsets_any_slots</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">valid_rsets_by_group</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_grpsize</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rsets_req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ngroups</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rsets_per_group</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Find optimal non-matching slots across groups</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">find_candidate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rsets_by_group</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rsets_per_group</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_upper_bound</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Find a candidate slot in a group</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_avail_rsets_by_group</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Return a dictionary of resource set IDs for each group (e.g. node)</p>
<p>If groups are not set they will all be in one group (group 0)</p>
<p>E.g: Say 8 resource sets / 2 nodes
GROUP  1: [1,2,3,4]
GROUP  2: [5,6,7,8]</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">filter_for_rset_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">avail_rsets_by_group</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_gpus</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Return avail_rsets_by_group filtered by rset type (gpus/non-gpus/all)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">filter_out_rset_team</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">avail_rsets_by_group</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rset_team</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Return avail_rsets_by_group filtered by rset type (gpus/non-gpus/all)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_slots_of_len</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">d</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Filter dictionary to values &gt;= n</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_avail_slots_by_group</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rsets_by_group</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Return a dictionary of free slot IDS for each group (e.g. node)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">calc_rsets_even_grps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rsets_req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_grpsize</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_groups</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extend</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Calculate an even breakdown to best fit rsets_req input</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">check_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">user_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ngroups</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Return True if all user params divide by number of groups, else False</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">calc_even_split_uneven_groups</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rsets_per_grp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ngroups</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rsets_req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sorted_lens</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_grps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">user_params</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Calculate an even breakdown to best fit rsets_req with uneven groups</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">assign_team_from_slots</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">slots_avail_by_group</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cand_groups</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cand_slots</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rsets_per_group</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Assign resource set team from slots</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_sorted_lens</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">avail_rsets</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Get max length of a list value in a dictionary</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">get_matching_slots</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">slots_avail_by_group</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_groups_req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rsets_per_group</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Get first N matching slots across groups</p>
<p>Assumes num_groups_req &gt; 0.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">check_total_rsets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rsets_req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_gpus</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Raise exceptions if rsets requested is more than total that exist or available</p>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="mpi_resources_module.html" class="btn btn-neutral float-left" title="MPI Resources Module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025 Argonne National Laboratory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>